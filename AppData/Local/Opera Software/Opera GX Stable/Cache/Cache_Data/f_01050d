/*! For license information please see germinare-utils.js.LICENSE.txt */
System.register(["react"],(function(e,t){var n={};return Object.defineProperty(n,"__esModule",{value:!0}),{setters:[function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))}],execute:function(){e((()=>{var e,r,o={456:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var i,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in i=Object(arguments[c]))n.call(i,u)&&(s[u]=i[u]);if(t){a=t(i);for(var l=0;l<a.length;l++)r.call(i,a[l])&&(s[a[l]]=i[a[l]])}}return s}},808:(e,t,n)=>{"use strict";n(456);var r=n(264),o=60103;if("function"==typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),i("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var r,i={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:u,ref:l,props:i,_owner:a.current}}},624:(e,t,n)=>{"use strict";e.exports=n(808)},616:(e,t,n)=>{"use strict";e.exports=n(264)},424:(e,t,n)=>{const r=n(368).Q;t.G=function(e){if(e||(e=1),!n.y.meta||!n.y.meta.url)throw console.error("__system_context__",n.y),Error("systemjs-webpack-interop was provided an unknown SystemJS context. Expected context.meta.url, but none was provided");n.p=r(n.y.meta.url,e)}},368:(e,t,n)=>{t.Q=function(e,t){var n=document.createElement("a");n.href=e;for(var r="/"===n.pathname[0]?n.pathname:"/"+n.pathname,o=0,i=r.length;o!==t&&i>=0;)"/"===r[--i]&&o++;if(o!==t)throw Error("systemjs-webpack-interop: rootDirectoryLevel ("+t+") is greater than the number of directories ("+o+") in the URL path "+e);var a=r.slice(0,i+1);return n.protocol+"//"+n.host+a};Number.isInteger},264:e=>{"use strict";e.exports=n}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return o[e](n,n.exports,a),n.exports}a.y=t,r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"==typeof t.then)return t}var o=Object.create(null);a.r(o);var i={};e=e||[null,r({}),r([]),r(r)];for(var s=2&n&&t;"object"==typeof s&&!~e.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>t[e]));return i.default=()=>t,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="";var s={};return(0,a(424).G)(1),(()=>{"use strict";function e(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=t.apply(n,r);function s(t){e(a,o,i,s,c,"next",t)}function c(t){e(a,o,i,s,c,"throw",t)}s(void 0)}))}}a.r(s),a.d(s,{CEL_TYPE:()=>Qm,EMAIL_TYPE:()=>Hm,PHONE_TYPE:()=>jm,WithApollo:()=>Db,checkLoggedIn:()=>Ps,fetchUserData:()=>Rs,fetchUserMail:()=>Ns,fetchUserPhoto:()=>Os,msalConfig:()=>Ts,msalLogin:()=>Ss,msalLogout:()=>As,slugify:()=>Fb,useAttendancesByStudentAndDateLazyQuery:()=>ap,useAttendancesByStudentAndDateQuery:()=>ip,useCalendarsByClassIdLazyQuery:()=>Rp,useCalendarsByClassIdQuery:()=>Ap,useCreateBookClassificationMutation:()=>uh,useCreateBookFavoriteMutation:()=>dh,useCreateBookLoanMutation:()=>ph,useCreateClassificationMutation:()=>mh,useCreateNotebookRichTextMutation:()=>yh,useCreateTicketToSuportMutation:()=>_h,useDeactivateActivityDeliveryContentMutation:()=>Ch,useDeactivateBookLoanMutation:()=>Th,useDeactivateNotebookRichTextMutation:()=>Ih,useDeleteBookFavoriteMutation:()=>Sh,useDeliverActivityContentMutation:()=>Rh,useFetchStudentNotificationsWsClientTokenQuery:()=>Gh,useFetchUrlToDownloadCatalogContentLazyQuery:()=>Jh,useFetchUrlToDownloadCatalogContentQuery:()=>$h,useFetchUrlToDownloadClassDiaryContentLazyQuery:()=>Wh,useFetchUrlToDownloadClassDiaryContentQuery:()=>Vh,useFileUploader:()=>xb,useFindBookClassificationsLazyQuery:()=>fp,useFindBookPendentClassificationLazyQuery:()=>bp,useFindBookPendentClassificationQuery:()=>_p,useFinishQuizStudentMutation:()=>Nh,useGetActivityInfoLazyQuery:()=>ep,useGetActivityInfoQuery:()=>Zh,useGetAllBooksLazyQuery:()=>rp,useGetAllBooksQuery:()=>np,useGetBookByGenreLazyQuery:()=>up,useGetBookByGenreQuery:()=>cp,useGetBookByIdLazyQuery:()=>hp,useGetBookByIdQuery:()=>dp,useGetBookFavoritesLazyQuery:()=>tf,useGetBookFavoritesQuery:()=>ef,useGetBookLoansLazyQuery:()=>yp,useGetBookLoansQuery:()=>gp,useGetBookLoansReadedLazyQuery:()=>Df,useGetBookLoansReadedQuery:()=>Mf,useGetBookPublishersLazyQuery:()=>Tp,useGetBookPublishersQuery:()=>Ep,useGetBookUserTypeAccessLazyQuery:()=>kp,useGetBookUserTypeAccessQuery:()=>Ip,useGetCalendarsByClassIdQuery:()=>Np,useGetClassDiariesByIdLazyQuery:()=>Bp,useGetClassDiariesByIdQuery:()=>Up,useGetClassDiariesLazyQuery:()=>Fp,useGetClassDiariesQuery:()=>xp,useGetClassDiaryByIdLazyQuery:()=>Dp,useGetClassDiaryByIdQuery:()=>Mp,useGetClassDiaryLazyQuery:()=>Qp,useGetClassDiaryQuery:()=>jp,useGetClassIdLazyQuery:()=>zp,useGetClassIdQuery:()=>Gp,useGetClassRoomLazyQuery:()=>Xp,useGetClassRoomQuery:()=>Jp,useGetFinalRecuperationsByStudentLazyQuery:()=>of,useGetFinalRecuperationsByStudentQuery:()=>rf,useGetGenresLazyQuery:()=>cf,useGetGenresQuery:()=>sf,useGetMenusLazyQuery:()=>df,useGetMenusQuery:()=>lf,useGetMyDisciplinesLazyQuery:()=>ff,useGetMyDisciplinesQuery:()=>pf,useGetMyGroupsLazyQuery:()=>yf,useGetMyGroupsQuery:()=>gf,useGetOrCreateNotebookMutation:()=>Mh,useGetOrdainedBooksLazyQuery:()=>bf,useGetOrdainedBooksQuery:()=>_f,useGetOrderedSubthemesByDisciplineAndGradeLazyQuery:()=>Tf,useGetOrderedSubthemesByDisciplineAndGradeQuery:()=>Ef,useGetPendentClassificationsLazyQuery:()=>Yp,useGetPendentClassificationsQuery:()=>Wp,useGetPopularBooksLazyQuery:()=>Af,useGetPopularBooksQuery:()=>Sf,useGetQuizByStudentLazyQuery:()=>Nf,useGetQuizByStudentQuery:()=>Of,useGetRelatedBooksLazyQuery:()=>Ff,useGetRelatedBooksQuery:()=>xf,useGetSchoolYearsLazyQuery:()=>Bf,useGetSchoolYearsQuery:()=>Uf,useGetSemesterAverageByStudentLazyQuery:()=>Qf,useGetSemesterAverageByStudentQuery:()=>jf,useGetSemesterPhasesLazyQuery:()=>zf,useGetSemesterPhasesQuery:()=>Gf,useGetSemestersLazyQuery:()=>Yf,useGetSemestersQuery:()=>Wf,useGetStudentActivitiesLazyQuery:()=>Xf,useGetStudentActivitiesQuery:()=>Jf,useGetStudentAppliedSubthemesByDisciplineLazyQuery:()=>tm,useGetStudentAppliedSubthemesByDisciplineQuery:()=>em,useGetStudentClassAndGradeLazyQuery:()=>om,useGetStudentClassAndGradeQuery:()=>rm,useGetStudentClassByYearIdLazyQuery:()=>sm,useGetStudentClassByYearIdQuery:()=>am,useGetStudentGradesByDisciplineLazyQuery:()=>pm,useGetStudentGradesByDisciplineQuery:()=>hm,useGetStudentGradesLazyQuery:()=>lm,useGetStudentGradesQuery:()=>um,useGetStudentOidByStudentNameLazyQuery:()=>_m,useGetStudentOidByStudentNameQuery:()=>vm,useGetStudentOidLazyQuery:()=>gm,useGetStudentOidQuery:()=>mm,useGetStudentProfileLazyQuery:()=>Em,useGetStudentProfileQuery:()=>Cm,useGetStudentQuizzesLazyQuery:()=>Im,useGetStudentQuizzesQuery:()=>wm,useGetStudentScoreByDisciplineLazyQuery:()=>Nm,useGetStudentScoreByDisciplineQuery:()=>Om,useGetStudentScoreLazyQuery:()=>Am,useGetStudentScoreQuery:()=>Sm,useGetSubthemeLazyQuery:()=>Dm,useGetSubthemeQuery:()=>Mm,useGetSubthemesFilteredWithFilesLazyQuery:()=>Fm,useGetSubthemesFilteredWithFilesQuery:()=>xm,useGetTextOfNotebookRichTextLazyQuery:()=>Bm,useGetTextOfNotebookRichTextQuery:()=>Um,useIdToken:()=>og,useLocationPath:()=>qb,useMarkAlternativeAtQuizStudentQuestionInputMutation:()=>qh,usePercentualBookClassificationLazyQuery:()=>If,useProlongBookLoanMutation:()=>Fh,useStartQuizStudentMutation:()=>Uh,useUpdateBookLoanMutation:()=>Qh,useUpdateNotebookRichTextMutation:()=>Hh});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)};function r(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o,i,c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)};function u(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function l(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}!function(e){e.AcquireTokenByCode="acquireTokenByCode",e.AcquireTokenByRefreshToken="acquireTokenByRefreshToken",e.AcquireTokenSilent="acquireTokenSilent",e.AcquireTokenSilentAsync="acquireTokenSilentAsync",e.AcquireTokenPopup="acquireTokenPopup",e.CryptoOptsGetPublicKeyThumbprint="cryptoOptsGetPublicKeyThumbprint",e.CryptoOptsSignJwt="cryptoOptsSignJwt",e.SilentCacheClientAcquireToken="silentCacheClientAcquireToken",e.SilentIframeClientAcquireToken="silentIframeClientAcquireToken",e.SilentRefreshClientAcquireToken="silentRefreshClientAcquireToken",e.SsoSilent="ssoSilent",e.StandardInteractionClientGetDiscoveredAuthority="standardInteractionClientGetDiscoveredAuthority",e.FetchAccountIdWithNativeBroker="fetchAccountIdWithNativeBroker",e.NativeInteractionClientAcquireToken="nativeInteractionClientAcquireToken",e.BaseClientCreateTokenRequestHeaders="baseClientCreateTokenRequestHeaders",e.BrokerHandhshake="brokerHandshake",e.AcquireTokenByRefreshTokenInBroker="acquireTokenByRefreshTokenInBroker",e.AcquireTokenByBroker="acquireTokenByBroker",e.RefreshTokenClientExecuteTokenRequest="refreshTokenClientExecuteTokenRequest",e.RefreshTokenClientAcquireToken="refreshTokenClientAcquireToken",e.RefreshTokenClientAcquireTokenWithCachedRefreshToken="refreshTokenClientAcquireTokenWithCachedRefreshToken",e.RefreshTokenClientAcquireTokenByRefreshToken="refreshTokenClientAcquireTokenByRefreshToken",e.RefreshTokenClientCreateTokenRequestBody="refreshTokenClientCreateTokenRequestBody",e.AcquireTokenFromCache="acquireTokenFromCache",e.AcquireTokenBySilentIframe="acquireTokenBySilentIframe",e.InitializeBaseRequest="initializeBaseRequest",e.InitializeSilentRequest="initializeSilentRequest",e.InitializeClientApplication="initializeClientApplication",e.SilentIframeClientTokenHelper="silentIframeClientTokenHelper",e.SilentHandlerInitiateAuthRequest="silentHandlerInitiateAuthRequest",e.SilentHandlerMonitorIframeForHash="silentHandlerMonitorIframeForHash",e.SilentHandlerLoadFrame="silentHandlerLoadFrame",e.StandardInteractionClientCreateAuthCodeClient="standardInteractionClientCreateAuthCodeClient",e.StandardInteractionClientGetClientConfiguration="standardInteractionClientGetClientConfiguration",e.StandardInteractionClientInitializeAuthorizationRequest="standardInteractionClientInitializeAuthorizationRequest",e.StandardInteractionClientInitializeAuthorizationCodeRequest="standardInteractionClientInitializeAuthorizationCodeRequest",e.GetAuthCodeUrl="getAuthCodeUrl",e.HandleCodeResponseFromServer="handleCodeResponseFromServer",e.HandleCodeResponseFromHash="handleCodeResponseFromHash",e.UpdateTokenEndpointAuthority="updateTokenEndpointAuthority",e.AuthClientAcquireToken="authClientAcquireToken",e.AuthClientExecuteTokenRequest="authClientExecuteTokenRequest",e.AuthClientCreateTokenRequestBody="authClientCreateTokenRequestBody",e.AuthClientCreateQueryString="authClientCreateQueryString",e.PopTokenGenerateCnf="popTokenGenerateCnf",e.PopTokenGenerateKid="popTokenGenerateKid",e.HandleServerTokenResponse="handleServerTokenResponse",e.AuthorityFactoryCreateDiscoveredInstance="authorityFactoryCreateDiscoveredInstance",e.AuthorityResolveEndpointsAsync="authorityResolveEndpointsAsync",e.AuthorityGetCloudDiscoveryMetadataFromNetwork="authorityGetCloudDiscoveryMetadataFromNetwork",e.AuthorityUpdateCloudDiscoveryMetadata="authorityUpdateCloudDiscoveryMetadata",e.AuthorityGetEndpointMetadataFromNetwork="authorityGetEndpointMetadataFromNetwork",e.AuthorityUpdateEndpointMetadata="authorityUpdateEndpointMetadata",e.AuthorityUpdateMetadataWithRegionalInformation="authorityUpdateMetadataWithRegionalInformation",e.RegionDiscoveryDetectRegion="regionDiscoveryDetectRegion",e.RegionDiscoveryGetRegionFromIMDS="regionDiscoveryGetRegionFromIMDS",e.RegionDiscoveryGetCurrentVersion="regionDiscoveryGetCurrentVersion",e.AcquireTokenByCodeAsync="acquireTokenByCodeAsync",e.GetEndpointMetadataFromNetwork="getEndpointMetadataFromNetwork",e.GetCloudDiscoveryMetadataFromNetworkMeasurement="getCloudDiscoveryMetadataFromNetworkMeasurement",e.HandleRedirectPromiseMeasurement="handleRedirectPromiseMeasurement",e.UpdateCloudDiscoveryMetadataMeasurement="updateCloudDiscoveryMetadataMeasurement",e.UsernamePasswordClientAcquireToken="usernamePasswordClientAcquireToken",e.NativeMessageHandlerHandshake="nativeMessageHandlerHandshake",e.ClearTokensAndKeysWithClaims="clearTokensAndKeysWithClaims"}(o||(o={})),function(e){e[e.NotStarted=0]="NotStarted",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed"}(i||(i={}));var f=new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status"]),m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},m(e,t)};function g(e,t){function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},y.apply(this,arguments)};function v(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function _(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function b(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var C,E,T,w,I,k={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",REGIONAL_AUTH_NON_MSI_QUERY_STRING:"allowestsrnonmsi=true",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},S=[k.OPENID_SCOPE,k.PROFILE_SCOPE,k.OFFLINE_ACCESS_SCOPE],A=b(S,[k.EMAIL_SCOPE]);!function(e){e.CONTENT_TYPE="Content-Type",e.RETRY_AFTER="Retry-After",e.CCS_HEADER="X-AnchorMailbox",e.WWWAuthenticate="WWW-Authenticate",e.AuthenticationInfo="Authentication-Info",e.X_MS_REQUEST_ID="x-ms-request-id",e.X_MS_HTTP_VERSION="x-ms-httpver"}(C||(C={})),function(e){e.ID_TOKEN="idtoken",e.CLIENT_INFO="client.info",e.ADAL_ID_TOKEN="adal.idtoken",e.ERROR="error",e.ERROR_DESC="error.description",e.ACTIVE_ACCOUNT="active-account",e.ACTIVE_ACCOUNT_FILTERS="active-account-filters"}(E||(E={})),function(e){e.COMMON="common",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers"}(T||(T={})),function(e){e.CLIENT_ID="client_id",e.REDIRECT_URI="redirect_uri",e.RESPONSE_TYPE="response_type",e.RESPONSE_MODE="response_mode",e.GRANT_TYPE="grant_type",e.CLAIMS="claims",e.SCOPE="scope",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e.REFRESH_TOKEN="refresh_token",e.EXPIRES_IN="expires_in",e.STATE="state",e.NONCE="nonce",e.PROMPT="prompt",e.SESSION_STATE="session_state",e.CLIENT_INFO="client_info",e.CODE="code",e.CODE_CHALLENGE="code_challenge",e.CODE_CHALLENGE_METHOD="code_challenge_method",e.CODE_VERIFIER="code_verifier",e.CLIENT_REQUEST_ID="client-request-id",e.X_CLIENT_SKU="x-client-SKU",e.X_CLIENT_VER="x-client-VER",e.X_CLIENT_OS="x-client-OS",e.X_CLIENT_CPU="x-client-CPU",e.X_CLIENT_CURR_TELEM="x-client-current-telemetry",e.X_CLIENT_LAST_TELEM="x-client-last-telemetry",e.X_MS_LIB_CAPABILITY="x-ms-lib-capability",e.X_APP_NAME="x-app-name",e.X_APP_VER="x-app-ver",e.POST_LOGOUT_URI="post_logout_redirect_uri",e.ID_TOKEN_HINT="id_token_hint",e.DEVICE_CODE="device_code",e.CLIENT_SECRET="client_secret",e.CLIENT_ASSERTION="client_assertion",e.CLIENT_ASSERTION_TYPE="client_assertion_type",e.TOKEN_TYPE="token_type",e.REQ_CNF="req_cnf",e.OBO_ASSERTION="assertion",e.REQUESTED_TOKEN_USE="requested_token_use",e.ON_BEHALF_OF="on_behalf_of",e.FOCI="foci",e.CCS_HEADER="X-AnchorMailbox",e.RETURN_SPA_CODE="return_spa_code",e.NATIVE_BROKER="nativebroker",e.LOGOUT_HINT="logout_hint"}(w||(w={})),function(e){e.ACCESS_TOKEN="access_token",e.XMS_CC="xms_cc"}(I||(I={}));var R,O={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"};!function(e){e.ACCOUNT="account",e.SID="sid",e.LOGIN_HINT="login_hint",e.ID_TOKEN="id_token",e.DOMAIN_HINT="domain_hint",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers",e.ACCOUNT_ID="accountIdentifier",e.HOMEACCOUNT_ID="homeAccountIdentifier"}(R||(R={}));var N,P,M,D,q,x,F={PLAIN:"plain",S256:"S256"};!function(e){e.QUERY="query",e.FRAGMENT="fragment",e.FORM_POST="form_post"}(N||(N={})),function(e){e.IMPLICIT_GRANT="implicit",e.AUTHORIZATION_CODE_GRANT="authorization_code",e.CLIENT_CREDENTIALS_GRANT="client_credentials",e.RESOURCE_OWNER_PASSWORD_GRANT="password",e.REFRESH_TOKEN_GRANT="refresh_token",e.DEVICE_CODE_GRANT="device_code",e.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"}(P||(P={})),function(e){e.MSSTS_ACCOUNT_TYPE="MSSTS",e.ADFS_ACCOUNT_TYPE="ADFS",e.MSAV1_ACCOUNT_TYPE="MSA",e.GENERIC_ACCOUNT_TYPE="Generic"}(M||(M={})),function(e){e.CACHE_KEY_SEPARATOR="-",e.CLIENT_INFO_SEPARATOR="."}(D||(D={})),function(e){e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.ACCESS_TOKEN_WITH_AUTH_SCHEME="AccessToken_With_AuthScheme",e.REFRESH_TOKEN="RefreshToken"}(q||(q={})),function(e){e[e.ADFS=1001]="ADFS",e[e.MSA=1002]="MSA",e[e.MSSTS=1003]="MSSTS",e[e.GENERIC=1004]="GENERIC",e[e.ACCESS_TOKEN=2001]="ACCESS_TOKEN",e[e.REFRESH_TOKEN=2002]="REFRESH_TOKEN",e[e.ID_TOKEN=2003]="ID_TOKEN",e[e.APP_METADATA=3001]="APP_METADATA",e[e.UNDEFINED=9999]="UNDEFINED"}(x||(x={}));var L,U="appmetadata",B="1",H="authority-metadata";!function(e){e.CONFIG="config",e.CACHE="cache",e.NETWORK="network",e.HARDCODED_VALUES="hardcoded_values"}(L||(L={}));var j,Q={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};!function(e){e.BEARER="Bearer",e.POP="pop",e.SSH="ssh-cert"}(j||(j={}));var K,G,z,V,W,Y,$="throttling";!function(e){e.username="username",e.password="password"}(K||(K={})),function(e){e[e.httpSuccess=200]="httpSuccess",e[e.httpBadRequest=400]="httpBadRequest"}(G||(G={})),function(e){e.FAILED_AUTO_DETECTION="1",e.INTERNAL_CACHE="2",e.ENVIRONMENT_VARIABLE="3",e.IMDS="4"}(z||(z={})),function(e){e.CONFIGURED_MATCHES_DETECTED="1",e.CONFIGURED_NO_AUTO_DETECTION="2",e.CONFIGURED_NOT_DETECTED="3",e.AUTO_DETECTION_REQUESTED_SUCCESSFUL="4",e.AUTO_DETECTION_REQUESTED_FAILED="5"}(V||(V={})),function(e){e.NO_CACHE_HIT="0",e.FORCE_REFRESH="1",e.NO_CACHED_ACCESS_TOKEN="2",e.CACHED_ACCESS_TOKEN_EXPIRED="3",e.REFRESH_CACHED_ACCESS_TOKEN="4",e.CLAIMS_REQUESTED_CACHE_SKIPPED="5"}(W||(W={})),function(e){e.Jwt="JWT",e.Jwk="JWK",e.Pop="pop"}(Y||(Y={}));var J,X,Z,ee,te,ne,re,oe,ie,ae,se,ce="unexpected_error",ue="Unexpected error in authentication.",le="post_request_failed",de="Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details.",he=function(e){function t(n,r,o){var i=this,a=r?n+": "+r:n;return i=e.call(this,a)||this,Object.setPrototypeOf(i,t.prototype),i.errorCode=n||k.EMPTY_STRING,i.errorMessage=r||k.EMPTY_STRING,i.subError=o||k.EMPTY_STRING,i.name="AuthError",i}return g(t,e),t.prototype.setCorrelationId=function(e){this.correlationId=e},t.createUnexpectedError=function(e){return new t(ce,ue+": "+e)},t.createPostRequestFailed=function(e){return new t(le,de+": "+e)},t}(Error),pe=function(e){function t(n,r,o){var i=e.call(this,n,r,o)||this;return i.name="ServerError",Object.setPrototypeOf(i,t.prototype),i}return g(t,e),t}(he),fe=["interaction_required","consent_required","login_required"],me=["message_only","additional_action","basic_action","user_password_expired","consent_required"],ge="no_tokens_found",ye="No refresh token found in the cache. Please sign-in.",ve="native_account_unavailable",_e="The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",be=function(e){function t(n,r,o,i,a,s,c){var u=e.call(this,n,r,o)||this;return Object.setPrototypeOf(u,t.prototype),u.timestamp=i||k.EMPTY_STRING,u.traceId=a||k.EMPTY_STRING,u.correlationId=s||k.EMPTY_STRING,u.claims=c||k.EMPTY_STRING,u.name="InteractionRequiredAuthError",u}return g(t,e),t.isInteractionRequiredError=function(e,t,n){var r=!!e&&fe.indexOf(e)>-1,o=!!n&&me.indexOf(n)>-1,i=!!t&&fe.some((function(e){return t.indexOf(e)>-1}));return r||i||o},t.createNoTokensFoundError=function(){return new t(ge,ye)},t.createNativeAccountUnavailableError=function(){return new t(ve,_e)},t}(he),Ce="msal",Ee="msal.js.browser",Te="53ee284d-920a-4b59-9d30-a60315b26836";!function(e){e.HandshakeRequest="Handshake",e.HandshakeResponse="HandshakeResponse",e.GetToken="GetToken",e.Response="Response"}(J||(J={})),function(e){e.LocalStorage="localStorage",e.SessionStorage="sessionStorage",e.MemoryStorage="memoryStorage"}(X||(X={})),function(e){e.GET="GET",e.POST="POST"}(Z||(Z={})),function(e){e.AUTHORITY="authority",e.ACQUIRE_TOKEN_ACCOUNT="acquireToken.account",e.SESSION_STATE="session.state",e.REQUEST_STATE="request.state",e.NONCE_IDTOKEN="nonce.id_token",e.ORIGIN_URI="request.origin",e.RENEW_STATUS="token.renew.status",e.URL_HASH="urlHash",e.REQUEST_PARAMS="request.params",e.SCOPES="scopes",e.INTERACTION_STATUS_KEY="interaction.status",e.CCS_CREDENTIAL="ccs.credential",e.CORRELATION_ID="request.correlationId",e.NATIVE_REQUEST="request.native",e.REDIRECT_CONTEXT="request.redirect.context"}(ee||(ee={})),function(e){e.ACCOUNT_KEYS="msal.account.keys",e.TOKEN_KEYS="msal.token.keys"}(te||(te={})),function(e){e.WRAPPER_SKU="wrapper.sku",e.WRAPPER_VER="wrapper.version"}(ne||(ne={})),function(e){e[e.acquireTokenRedirect=861]="acquireTokenRedirect",e[e.acquireTokenPopup=862]="acquireTokenPopup",e[e.ssoSilent=863]="ssoSilent",e[e.acquireTokenSilent_authCode=864]="acquireTokenSilent_authCode",e[e.handleRedirectPromise=865]="handleRedirectPromise",e[e.acquireTokenByCode=866]="acquireTokenByCode",e[e.acquireTokenSilent_silentFlow=61]="acquireTokenSilent_silentFlow",e[e.logout=961]="logout",e[e.logoutPopup=962]="logoutPopup"}(re||(re={})),(se=oe||(oe={})).Redirect="redirect",se.Popup="popup",se.Silent="silent",se.None="none",(ae=ie||(ie={})).Startup="startup",ae.Login="login",ae.Logout="logout",ae.AcquireToken="acquireToken",ae.SsoSilent="ssoSilent",ae.HandleRedirect="handleRedirect",ae.None="none";var we,Ie={scopes:S},ke="jwk";!function(e){e.React="@azure/msal-react",e.Angular="@azure/msal-angular"}(we||(we={}));var Se,Ae="msal.db",Re=Ae+".keys";!function(e){e[e.Default=0]="Default",e[e.AccessToken=1]="AccessToken",e[e.AccessTokenAndRefreshToken=2]="AccessTokenAndRefreshToken",e[e.RefreshToken=3]="RefreshToken",e[e.RefreshTokenAndNetwork=4]="RefreshTokenAndNetwork",e[e.Skip=5]="Skip"}(Se||(Se={}));var Oe,Ne="missing_kid_error",Pe="The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",Me="missing_alg_error",De="The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided.",qe=function(e){function t(n,r){var o=e.call(this,n,r)||this;return o.name="JoseHeaderError",Object.setPrototypeOf(o,t.prototype),o}return g(t,e),t.createMissingKidError=function(){return new t(Ne,Pe)},t.createMissingAlgError=function(){return new t(Me,De)},t}(he),xe=function(){function e(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}return e.getShrHeaderString=function(t){if(!t.kid)throw qe.createMissingKidError();if(!t.alg)throw qe.createMissingAlgError();var n=new e({typ:t.typ||Y.Pop,kid:t.kid,alg:t.alg});return JSON.stringify(n)},e}(),Fe=function(){function e(){}return e.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},e}(),Le=function(){function e(e){this.cryptoObj=e}return e.prototype.generateGuid=function(){try{var e=new Uint8Array(16);return this.cryptoObj.getRandomValues(e),e[6]|=64,e[6]&=79,e[8]|=128,e[8]&=191,Fe.decimalToHex(e[0])+Fe.decimalToHex(e[1])+Fe.decimalToHex(e[2])+Fe.decimalToHex(e[3])+"-"+Fe.decimalToHex(e[4])+Fe.decimalToHex(e[5])+"-"+Fe.decimalToHex(e[6])+Fe.decimalToHex(e[7])+"-"+Fe.decimalToHex(e[8])+Fe.decimalToHex(e[9])+"-"+Fe.decimalToHex(e[10])+Fe.decimalToHex(e[11])+Fe.decimalToHex(e[12])+Fe.decimalToHex(e[13])+Fe.decimalToHex(e[14])+Fe.decimalToHex(e[15])}catch(e){for(var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",n="0123456789abcdef",r=0,o=k.EMPTY_STRING,i=0;i<36;i++)"-"!==t[i]&&"4"!==t[i]&&(r=16*Math.random()|0),"x"===t[i]?o+=n[r]:"y"===t[i]?(r&=3,o+=n[r|=8]):o+=t[i];return o}},e.prototype.isGuid=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},e}(),Ue=function(){function e(){}return e.stringToUtf8Arr=function(e){for(var t,n=0,r=e.length,o=0;o<r;o++)n+=(t=e.charCodeAt(o))<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;for(var i=new Uint8Array(n),a=0,s=0;a<n;s++)(t=e.charCodeAt(s))<128?i[a++]=t:t<2048?(i[a++]=192+(t>>>6),i[a++]=128+(63&t)):t<65536?(i[a++]=224+(t>>>12),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t)):t<2097152?(i[a++]=240+(t>>>18),i[a++]=128+(t>>>12&63),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t)):t<67108864?(i[a++]=248+(t>>>24),i[a++]=128+(t>>>18&63),i[a++]=128+(t>>>12&63),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t)):(i[a++]=252+(t>>>30),i[a++]=128+(t>>>24&63),i[a++]=128+(t>>>18&63),i[a++]=128+(t>>>12&63),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t));return i},e.stringToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t},e.utf8ArrToString=function(e){for(var t=k.EMPTY_STRING,n=void 0,r=e.length,o=0;o<r;o++)n=e[o],t+=String.fromCharCode(n>251&&n<254&&o+5<r?1073741824*(n-252)+(e[++o]-128<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:n>247&&n<252&&o+4<r?(n-248<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:n>239&&n<248&&o+3<r?(n-240<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:n>223&&n<240&&o+2<r?(n-224<<12)+(e[++o]-128<<6)+e[++o]-128:n>191&&n<224&&o+1<r?(n-192<<6)+e[++o]-128:n);return t},e.getSortedObjectString=function(e){return JSON.stringify(e,Object.keys(e).sort())},e}(),Be=function(){function e(){}return e.prototype.urlEncode=function(e){return encodeURIComponent(this.encode(e).replace(/=/g,k.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_"))},e.prototype.urlEncodeArr=function(e){return this.base64EncArr(e).replace(/=/g,k.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")},e.prototype.encode=function(e){var t=Ue.stringToUtf8Arr(e);return this.base64EncArr(t)},e.prototype.base64EncArr=function(e){for(var t=(3-e.length%3)%3,n=k.EMPTY_STRING,r=void 0,o=e.length,i=0,a=0;a<o;a++)r=a%3,i|=e[a]<<(16>>>r&24),2!==r&&e.length-a!=1||(n+=String.fromCharCode(this.uint6ToB64(i>>>18&63),this.uint6ToB64(i>>>12&63),this.uint6ToB64(i>>>6&63),this.uint6ToB64(63&i)),i=0);return 0===t?n:n.substring(0,n.length-t)+(1===t?"=":"==")},e.prototype.uint6ToB64=function(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65},e}(),He=function(){function e(){}return e.prototype.decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Invalid base64 string")}var n=this.base64DecToArr(t);return Ue.utf8ArrToString(n)},e.prototype.base64DecToArr=function(e,t){for(var n=e.replace(/[^A-Za-z0-9\+\/]/g,k.EMPTY_STRING),r=n.length,o=t?Math.ceil((3*r+1>>>2)/t)*t:3*r+1>>>2,i=new Uint8Array(o),a=void 0,s=void 0,c=0,u=0,l=0;l<r;l++)if(s=3&l,c|=this.b64ToUint6(n.charCodeAt(l))<<18-6*s,3===s||r-l==1){for(a=0;a<3&&u<o;a++,u++)i[u]=c>>>(16>>>a&24)&255;c=0}return i},e.prototype.b64ToUint6=function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0},e}(),je="client_info_decoding_error",Qe="The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause.",Ke="client_info_empty_error",Ge="The client info was empty. Please review the trace to determine the root cause.",ze="token_parsing_error",Ve="Token cannot be parsed. Please review stack trace to determine root cause.",We="null_or_empty_token",Ye="The token is null or empty. Please review the trace to determine the root cause.",$e="endpoints_resolution_error",Je="Error: could not resolve endpoints. Please check network and try again.",Xe="network_error",Ze="Network request failed. Please check network trace to determine root cause.",et="openid_config_error",tt="Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",nt="hash_not_deserialized",rt="The hash parameters could not be deserialized. Please review the trace to determine the root cause.",ot="invalid_state",it="State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState().",at="state_mismatch",st="State mismatch error. Please check your network. Continued requests may cause cache overflow.",ct="state_not_found",ut="State not found",lt="nonce_mismatch",dt="Nonce mismatch error. This may be caused by a race condition in concurrent requests.",ht="nonce_not_found",pt="nonce not found",ft="auth_time_not_found",mt="Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",gt="max_age_transpired",yt="Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",vt="multiple_matching_tokens",_t="The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",bt="multiple_matching_accounts",Ct="The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",Et="multiple_matching_appMetadata",Tt="The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",wt="request_cannot_be_made",It="Token request cannot be made without authorization code or refresh token.",kt="cannot_append_empty_scope",St="Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info.",At="cannot_remove_empty_scope",Rt="Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info.",Ot="cannot_append_scopeset",Nt="Cannot append ScopeSet due to error.",Pt="empty_input_scopeset",Mt="Empty input ScopeSet cannot be processed.",Dt="device_code_polling_cancelled",qt="Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",xt="device_code_expired",Ft="Device code is expired.",Lt="device_code_unknown_error",Ut="Device code stopped polling for unknown reasons.",Bt="no_account_in_silent_request",Ht="Please pass an account object, silent flow is not supported without account information",jt="invalid_cache_record",Qt="Cache record object was null or undefined.",Kt="invalid_cache_environment",Gt="Invalid environment when attempting to create cache entry",zt="no_account_found",Vt="No account found in cache for given key.",Wt="no cache plugin set on CacheManager",Yt="ICachePlugin needs to be set before using readFromStorage or writeFromStorage",$t="no_crypto_object",Jt="No crypto object detected. This is required for the following operation: ",Xt="invalid_cache_type",Zt="Invalid cache type",en="unexpected_account_type",tn="Unexpected account type.",nn="unexpected_credential_type",rn="Unexpected credential type.",on="invalid_assertion",an="Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",sn="invalid_client_credential",cn="Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",un="token_refresh_required",ln="Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",dn="user_timeout_reached",hn="User defined timeout for device code polling reached",pn="token_claims_cnf_required_for_signedjwt",fn="Cannot generate a POP jwt if the token_claims are not populated",mn="authorization_code_missing_from_server_response",gn="Server response does not contain an authorization code to proceed",yn="binding_key_not_removed",vn="Could not remove the credential's binding key from storage.",_n="end_session_endpoint_not_supported",bn="Provided authority does not support logout.",Cn="key_id_missing",En="A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",Tn="no_network_connectivity",wn="No network connectivity. Check your internet connection.",In="user_canceled",kn="User canceled the flow.",Sn=function(e){function t(n,r){var o=e.call(this,n,r)||this;return o.name="ClientAuthError",Object.setPrototypeOf(o,t.prototype),o}return g(t,e),t.createClientInfoDecodingError=function(e){return new t(je,Qe+" Failed with error: "+e)},t.createClientInfoEmptyError=function(){return new t(Ke,""+Ge)},t.createTokenParsingError=function(e){return new t(ze,Ve+" Failed with error: "+e)},t.createTokenNullOrEmptyError=function(e){return new t(We,Ye+" Raw Token Value: "+e)},t.createEndpointDiscoveryIncompleteError=function(e){return new t($e,Je+" Detail: "+e)},t.createNetworkError=function(e,n){return new t(Xe,Ze+" | Fetch client threw: "+n+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToGetOpenidConfigError=function(e){return new t(et,tt+" Attempted to retrieve endpoints from: "+e)},t.createHashNotDeserializedError=function(e){return new t(nt,rt+" Given Object: "+e)},t.createInvalidStateError=function(e,n){return new t(ot,it+" Invalid State: "+e+", Root Err: "+n)},t.createStateMismatchError=function(){return new t(at,st)},t.createStateNotFoundError=function(e){return new t(ct,ut+":  "+e)},t.createNonceMismatchError=function(){return new t(lt,dt)},t.createAuthTimeNotFoundError=function(){return new t(ft,mt)},t.createMaxAgeTranspiredError=function(){return new t(gt,yt)},t.createNonceNotFoundError=function(e){return new t(ht,pt+":  "+e)},t.createMultipleMatchingTokensInCacheError=function(){return new t(vt,_t+".")},t.createMultipleMatchingAccountsInCacheError=function(){return new t(bt,Ct)},t.createMultipleMatchingAppMetadataInCacheError=function(){return new t(Et,Tt)},t.createTokenRequestCannotBeMadeError=function(){return new t(wt,It)},t.createAppendEmptyScopeToSetError=function(e){return new t(kt,St+" Given Scope: "+e)},t.createRemoveEmptyScopeFromSetError=function(e){return new t(At,Rt+" Given Scope: "+e)},t.createAppendScopeSetError=function(e){return new t(Ot,Nt+" Detail Error: "+e)},t.createEmptyInputScopeSetError=function(){return new t(Pt,""+Mt)},t.createDeviceCodeCancelledError=function(){return new t(Dt,""+qt)},t.createDeviceCodeExpiredError=function(){return new t(xt,""+Ft)},t.createDeviceCodeUnknownError=function(){return new t(Lt,""+Ut)},t.createNoAccountInSilentRequestError=function(){return new t(Bt,""+Ht)},t.createNullOrUndefinedCacheRecord=function(){return new t(jt,Qt)},t.createInvalidCacheEnvironmentError=function(){return new t(Kt,Gt)},t.createNoAccountFoundError=function(){return new t(zt,Vt)},t.createCachePluginError=function(){return new t(Wt,""+Yt)},t.createNoCryptoObjectError=function(e){return new t($t,""+Jt+e)},t.createInvalidCacheTypeError=function(){return new t(Xt,""+Zt)},t.createUnexpectedAccountTypeError=function(){return new t(en,""+tn)},t.createUnexpectedCredentialTypeError=function(){return new t(nn,""+rn)},t.createInvalidAssertionError=function(){return new t(on,""+an)},t.createInvalidCredentialError=function(){return new t(sn,""+cn)},t.createRefreshRequiredError=function(){return new t(un,ln)},t.createUserTimeoutReachedError=function(){return new t(dn,hn)},t.createTokenClaimsRequiredError=function(){return new t(pn,fn)},t.createNoAuthCodeInServerResponseError=function(){return new t(mn,gn)},t.createBindingKeyNotRemovedError=function(){return new t(yn,vn)},t.createLogoutNotSupportedError=function(){return new t(_n,bn)},t.createKeyIdMissingError=function(){return new t(Cn,En)},t.createNoNetworkConnectivityError=function(){return new t(Tn,wn)},t.createUserCanceledError=function(){return new t(In,kn)},t}(he),An=function(){function e(){}return e.decodeAuthToken=function(t){if(e.isEmpty(t))throw Sn.createTokenNullOrEmptyError(t);var n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw Sn.createTokenParsingError("Given token is malformed: "+JSON.stringify(t));return{header:n[1],JWSPayload:n[2],JWSSig:n[3]}},e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.isEmptyObj=function(t){if(t&&!e.isEmpty(t))try{var n=JSON.parse(t);return 0===Object.keys(n).length}catch(e){}return!0},e.startsWith=function(e,t){return 0===e.indexOf(t)},e.endsWith=function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},e.queryStringToObject=function(e){var t={},n=e.split("&"),r=function(e){return decodeURIComponent(e.replace(/\+/g," "))};return n.forEach((function(e){if(e.trim()){var n=e.split(/=(.+)/g,2),o=n[0],i=n[1];o&&i&&(t[r(o)]=r(i))}})),t},e.trimArrayEntries=function(e){return e.map((function(e){return e.trim()}))},e.removeEmptyStringsFromArray=function(t){return t.filter((function(t){return!e.isEmpty(t)}))},e.jsonParseHelper=function(e){try{return JSON.parse(e)}catch(e){return null}},e.matchPattern=function(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)},e}(),Rn="pkce_not_created",On="The PKCE code challenge and verifier could not be generated.",Nn="crypto_nonexistent",Pn="The crypto object or function is not available.",Mn="http_method_not_implemented",Dn="The HTTP method given has not been implemented in this library.",qn="empty_navigate_uri",xn="Navigation URI is empty. Please check stack trace for more info.",Fn="hash_empty_error",Ln="Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. For more visit: aka.ms/msaljs/browser-errors.",Un="no_state_in_hash",Bn="Hash does not contain state. Please verify that the request originated from msal.",Hn="hash_does_not_contain_known_properties",jn="Hash does not contain known properites. Please verify that your redirectUri is not changing the hash. For more visit: aka.ms/msaljs/browser-errors.",Qn="unable_to_parse_state",Kn="Unable to parse state. Please verify that the request originated from msal.",Gn="state_interaction_type_mismatch",zn="Hash contains state but the interaction type does not match the caller.",Vn="interaction_in_progress",Wn="Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.  For more visit: aka.ms/msaljs/browser-errors.",Yn="popup_window_error",$n="Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",Jn="empty_window_error",Xn="window.open returned null or undefined window object.",Zn="user_cancelled",er="User cancelled the flow.",tr="monitor_window_timeout",nr="Token acquisition in popup failed due to timeout. For more visit: aka.ms/msaljs/browser-errors.",rr="monitor_window_timeout",or="Token acquisition in iframe failed due to timeout. For more visit: aka.ms/msaljs/browser-errors.",ir="redirect_in_iframe",ar="Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",sr="block_iframe_reload",cr="Request was blocked inside an iframe because MSAL detected an authentication response. For more visit: aka.ms/msaljs/browser-errors",ur="block_nested_popups",lr="Request was blocked inside a popup because MSAL detected it was running in a popup.",dr="iframe_closed_prematurely",hr="The iframe being monitored was closed prematurely.",pr="silent_logout_unsupported",fr="Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",mr="no_account_error",gr="No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",yr="silent_prompt_value_error",vr="The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",_r="no_token_request_cache_error",br="No token request found in cache.",Cr="unable_to_parse_token_request_cache_error",Er="The cached token request could not be parsed.",Tr="no_cached_authority_error",wr="No cached authority found.",Ir="auth_request_not_set_error",kr="Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",Sr="invalid_cache_type",Ar="Invalid cache type",Rr="non_browser_environment",Or="Login and token requests are not supported in non-browser environments.",Nr="database_not_open",Pr="Database is not open!",Mr="no_network_connectivity",Dr="No network connectivity. Check your internet connection.",qr="post_request_failed",xr="Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",Fr="get_request_failed",Lr="Network request failed. Please check the network trace to determine root cause.",Ur="failed_to_parse_response",Br="Failed to parse network response. Check network trace.",Hr="unable_to_load_token",jr="Error loading token to cache.",Qr="crypto_key_not_found",Kr="Cryptographic Key or Keypair not found in browser storage.",Gr="auth_code_required",zr="An authorization code must be provided (as the `code` property on the request) to this flow.",Vr="auth_code_or_nativeAccountId_required",Wr="An authorization code or nativeAccountId must be provided to this flow.",Yr="spa_code_and_nativeAccountId_present",$r="Request cannot contain both spa code and native account id.",Jr="database_unavailable",Xr="IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",Zr="unable_to_acquire_token_from_native_platform",eo="Unable to acquire token from native platform. For a list of possible reasons visit aka.ms/msaljs/browser-errors.",to="native_handshake_timeout",no="Timed out while attempting to establish connection to browser extension",ro="native_extension_not_installed",oo="Native extension is not installed. If you think this is a mistake call the initialize function.",io="native_connection_not_established",ao="Connection to native platform has not been established. Please install a compatible browser extension and run initialize(). For more please visit aka.ms/msaljs/browser-errors.",so="native_broker_called_before_initialize",co="You must call and await the initialize function before attempting to call any other MSAL API when native brokering is enabled. For more please visit aka.ms/msaljs/browser-errors.",uo="native_prompt_not_supported",lo="The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",ho=function(e){function t(n,r){var o=e.call(this,n,r)||this;return Object.setPrototypeOf(o,t.prototype),o.name="BrowserAuthError",o}return r(t,e),t.createPkceNotGeneratedError=function(e){return new t(Rn,On+" Detail:"+e)},t.createCryptoNotAvailableError=function(e){return new t(Nn,Pn+" Detail:"+e)},t.createHttpMethodNotImplementedError=function(e){return new t(Mn,Dn+" Given Method: "+e)},t.createEmptyNavigationUriError=function(){return new t(qn,xn)},t.createEmptyHashError=function(e){return new t(Fn,Ln+" Given Url: "+e)},t.createHashDoesNotContainStateError=function(){return new t(Un,Bn)},t.createHashDoesNotContainKnownPropertiesError=function(){return new t(Hn,jn)},t.createUnableToParseStateError=function(){return new t(Qn,Kn)},t.createStateInteractionTypeMismatchError=function(){return new t(Gn,zn)},t.createInteractionInProgressError=function(){return new t(Vn,Wn)},t.createPopupWindowError=function(e){var n=$n;return n=An.isEmpty(e)?n:n+" Details: "+e,new t(Yn,n)},t.createEmptyWindowCreatedError=function(){return new t(Jn,Xn)},t.createUserCancelledError=function(){return new t(Zn,er)},t.createMonitorPopupTimeoutError=function(){return new t(tr,nr)},t.createMonitorIframeTimeoutError=function(){return new t(rr,or)},t.createRedirectInIframeError=function(e){return new t(ir,ar+" (window.parent !== window) => "+e)},t.createBlockReloadInHiddenIframeError=function(){return new t(sr,cr)},t.createBlockAcquireTokenInPopupsError=function(){return new t(ur,lr)},t.createIframeClosedPrematurelyError=function(){return new t(dr,hr)},t.createSilentLogoutUnsupportedError=function(){return new t(pr,fr)},t.createNoAccountError=function(){return new t(mr,gr)},t.createSilentPromptValueError=function(e){return new t(yr,vr+" Given value: "+e)},t.createUnableToParseTokenRequestCacheError=function(){return new t(Cr,Er)},t.createNoTokenRequestCacheError=function(){return new t(_r,br)},t.createAuthRequestNotSetError=function(){return new t(Ir,kr)},t.createNoCachedAuthorityError=function(){return new t(Tr,wr)},t.createInvalidCacheTypeError=function(){return new t(Sr,""+Ar)},t.createNonBrowserEnvironmentError=function(){return new t(Rr,Or)},t.createDatabaseNotOpenError=function(){return new t(Nr,Pr)},t.createNoNetworkConnectivityError=function(){return new t(Mr,Dr)},t.createPostRequestFailedError=function(e,n){return new t(qr,xr+" | Network client threw: "+e+" | Attempted to reach: "+n.split("?")[0])},t.createGetRequestFailedError=function(e,n){return new t(Fr,Lr+" | Network client threw: "+e+" | Attempted to reach: "+n.split("?")[0])},t.createFailedToParseNetworkResponseError=function(e){return new t(Ur,Br+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToLoadTokenError=function(e){return new t(Hr,jr+" | "+e)},t.createSigningKeyNotFoundInStorageError=function(e){return new t(Qr,Kr+" | No match found for KeyId: "+e)},t.createAuthCodeRequiredError=function(){return new t(Gr,zr)},t.createAuthCodeOrNativeAccountIdRequiredError=function(){return new t(Vr,Wr)},t.createSpaCodeAndNativeAccountIdPresentError=function(){return new t(Yr,$r)},t.createDatabaseUnavailableError=function(){return new t(Jr,Xr)},t.createUnableToAcquireTokenFromNativePlatformError=function(){return new t(Zr,eo)},t.createNativeHandshakeTimeoutError=function(){return new t(to,no)},t.createNativeExtensionNotInstalledError=function(){return new t(ro,oo)},t.createNativeConnectionNotEstablishedError=function(){return new t(io,ao)},t.createNativeBrokerCalledBeforeInitialize=function(){return new t(so,co)},t.createNativePromptParameterNotSupportedError=function(){return new t(uo,lo)},t}(he),po=function(){function e(e){this.base64Encode=new Be,this.cryptoObj=e}return e.prototype.generateCodes=function(){return l(this,void 0,void 0,(function(){var e,t;return d(this,(function(n){switch(n.label){case 0:return e=this.generateCodeVerifier(),[4,this.generateCodeChallengeFromVerifier(e)];case 1:return t=n.sent(),[2,{verifier:e,challenge:t}]}}))}))},e.prototype.generateCodeVerifier=function(){try{var e=new Uint8Array(32);return this.cryptoObj.getRandomValues(e),this.base64Encode.urlEncodeArr(e)}catch(e){throw ho.createPkceNotGeneratedError(e)}},e.prototype.generateCodeChallengeFromVerifier=function(e){return l(this,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.cryptoObj.sha256Digest(e)];case 1:return t=r.sent(),[2,this.base64Encode.urlEncodeArr(new Uint8Array(t))];case 2:throw n=r.sent(),ho.createPkceNotGeneratedError(n);case 3:return[2]}}))}))},e}(),fo=function(){function e(){}return e.prototype.getRandomValues=function(e){return window.crypto.getRandomValues(e)},e.prototype.generateKey=function(e,t,n){return l(this,void 0,void 0,(function(){return d(this,(function(r){return[2,window.crypto.subtle.generateKey(e,t,n)]}))}))},e.prototype.exportKey=function(e){return l(this,void 0,void 0,(function(){return d(this,(function(t){return[2,window.crypto.subtle.exportKey(ke,e)]}))}))},e.prototype.importKey=function(e,t,n,r){return l(this,void 0,void 0,(function(){return d(this,(function(o){return[2,window.crypto.subtle.importKey(ke,e,t,n,r)]}))}))},e.prototype.sign=function(e,t,n){return l(this,void 0,void 0,(function(){return d(this,(function(r){return[2,window.crypto.subtle.sign(e,t,n)]}))}))},e.prototype.digest=function(e,t){return l(this,void 0,void 0,(function(){return d(this,(function(n){return[2,window.crypto.subtle.digest(e,t)]}))}))},e}(),mo=function(){function e(){}return e.prototype.initPrng=function(e){return window.msrCrypto.initPrng(p(e))},e.prototype.getRandomValues=function(e){return window.msrCrypto.getRandomValues(e)},e.prototype.generateKey=function(e,t,n){return l(this,void 0,void 0,(function(){return d(this,(function(r){return[2,window.msrCrypto.subtle.generateKey(e,t,n)]}))}))},e.prototype.exportKey=function(e){return l(this,void 0,void 0,(function(){return d(this,(function(t){return[2,window.msrCrypto.subtle.exportKey(ke,e)]}))}))},e.prototype.importKey=function(e,t,n,r){return l(this,void 0,void 0,(function(){return d(this,(function(o){return[2,window.msrCrypto.subtle.importKey(ke,e,t,n,r)]}))}))},e.prototype.sign=function(e,t,n){return l(this,void 0,void 0,(function(){return d(this,(function(r){return[2,window.msrCrypto.subtle.sign(e,t,n)]}))}))},e.prototype.digest=function(e,t){return l(this,void 0,void 0,(function(){return d(this,(function(n){return[2,window.msrCrypto.subtle.digest(e,t)]}))}))},e}(),go=function(){function e(){}return e.prototype.getRandomValues=function(e){return window.msCrypto.getRandomValues(e)},e.prototype.generateKey=function(e,t,n){return l(this,void 0,void 0,(function(){return d(this,(function(r){return[2,new Promise((function(r,o){var i=window.msCrypto.subtle.generateKey(e,t,n);i.addEventListener("complete",(function(e){r(e.target.result)})),i.addEventListener("error",(function(e){o(e)}))}))]}))}))},e.prototype.exportKey=function(e){return l(this,void 0,void 0,(function(){return d(this,(function(t){return[2,new Promise((function(t,n){var r=window.msCrypto.subtle.exportKey(ke,e);r.addEventListener("complete",(function(e){var r=e.target.result,o=Ue.utf8ArrToString(new Uint8Array(r)).replace(/\r/g,k.EMPTY_STRING).replace(/\n/g,k.EMPTY_STRING).replace(/\t/g,k.EMPTY_STRING).split(" ").join(k.EMPTY_STRING).replace("\0",k.EMPTY_STRING);try{t(JSON.parse(o))}catch(e){n(e)}})),r.addEventListener("error",(function(e){n(e)}))}))]}))}))},e.prototype.importKey=function(e,t,n,r){return l(this,void 0,void 0,(function(){var o,i;return d(this,(function(a){return o=Ue.getSortedObjectString(e),i=Ue.stringToArrayBuffer(o),[2,new Promise((function(e,o){var a=window.msCrypto.subtle.importKey(ke,i,t,n,r);a.addEventListener("complete",(function(t){e(t.target.result)})),a.addEventListener("error",(function(e){o(e)}))}))]}))}))},e.prototype.sign=function(e,t,n){return l(this,void 0,void 0,(function(){return d(this,(function(r){return[2,new Promise((function(r,o){var i=window.msCrypto.subtle.sign(e,t,n);i.addEventListener("complete",(function(e){r(e.target.result)})),i.addEventListener("error",(function(e){o(e)}))}))]}))}))},e.prototype.digest=function(e,t){return l(this,void 0,void 0,(function(){return d(this,(function(n){return[2,new Promise((function(n,r){var o=window.msCrypto.subtle.digest(e,t.buffer);o.addEventListener("complete",(function(e){n(e.target.result)})),o.addEventListener("error",(function(e){r(e)}))}))]}))}))},e}(),yo="redirect_uri_empty",vo="A redirect URI is required for all calls, and none has been set.",_o="post_logout_uri_empty",bo="A post logout redirect has not been set.",Co="storage_not_supported",Eo="Given storage configuration option was not supported.",To="no_redirect_callbacks",wo="No redirect callbacks have been set. Please call setRedirectCallbacks() with the appropriate function arguments before continuing. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics.",Io="stubbed_public_client_application_called",ko="Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",So="in_mem_redirect_unavailable",Ao="Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true.",Ro="entropy_not_provided",Oo="The available browser crypto interface requires entropy set via system.cryptoOptions.entropy configuration option.",No=function(e){function t(n,r){var o=e.call(this,n,r)||this;return o.name="BrowserConfigurationAuthError",Object.setPrototypeOf(o,t.prototype),o}return r(t,e),t.createRedirectUriEmptyError=function(){return new t(yo,vo)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(_o,bo)},t.createStorageNotSupportedError=function(e){return new t(Co,Eo+" Given Location: "+e)},t.createRedirectCallbacksNotSetError=function(){return new t(To,wo)},t.createStubPcaInstanceCalledError=function(){return new t(Io,ko)},t.createInMemoryRedirectUnavailableError=function(){return new t(So,Ao)},t.createEntropyNotProvided=function(){return new t(Ro,Oo)},t}(he),Po="SHA-256",Mo=new Uint8Array([1,0,1]),Do=function(){function e(e,t){var n,r;if(this.logger=e,this.cryptoOptions=t,this.hasBrowserCrypto())this.logger.verbose("BrowserCrypto: modern crypto interface available"),this.subtleCrypto=new fo;else if(this.hasIECrypto())this.logger.verbose("BrowserCrypto: MS crypto interface available"),this.subtleCrypto=new go;else{if(!this.hasMsrCrypto()||!(null===(n=this.cryptoOptions)||void 0===n?void 0:n.useMsrCrypto))throw this.hasMsrCrypto()&&this.logger.info("BrowserCrypto: MSR Crypto interface available but system.cryptoOptions.useMsrCrypto not enabled"),this.logger.error("BrowserCrypto: No crypto interfaces available."),ho.createCryptoNotAvailableError("Browser crypto, msCrypto, or msrCrypto interfaces not available.");this.logger.verbose("BrowserCrypto: MSR crypto interface available"),this.subtleCrypto=new mo}if(this.subtleCrypto.initPrng){if(this.logger.verbose("BrowserCrypto: Interface requires entropy"),!(null===(r=this.cryptoOptions)||void 0===r?void 0:r.entropy))throw this.logger.error("BrowserCrypto: Interface requires entropy but none provided."),No.createEntropyNotProvided();this.logger.verbose("BrowserCrypto: Entropy provided"),this.subtleCrypto.initPrng(this.cryptoOptions.entropy)}this.keygenAlgorithmOptions={name:"RSASSA-PKCS1-v1_5",hash:Po,modulusLength:2048,publicExponent:Mo}}return e.prototype.hasIECrypto=function(){return"msCrypto"in window},e.prototype.hasBrowserCrypto=function(){return"crypto"in window},e.prototype.hasMsrCrypto=function(){return"msrCrypto"in window},e.prototype.sha256Digest=function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){return t=Ue.stringToUtf8Arr(e),[2,this.subtleCrypto.digest({name:Po},t)]}))}))},e.prototype.getRandomValues=function(e){return this.subtleCrypto.getRandomValues(e)},e.prototype.generateKeyPair=function(e,t){return l(this,void 0,void 0,(function(){return d(this,(function(n){return[2,this.subtleCrypto.generateKey(this.keygenAlgorithmOptions,e,t)]}))}))},e.prototype.exportJwk=function(e){return l(this,void 0,void 0,(function(){return d(this,(function(t){return[2,this.subtleCrypto.exportKey(e)]}))}))},e.prototype.importJwk=function(e,t,n){return l(this,void 0,void 0,(function(){return d(this,(function(r){return[2,this.subtleCrypto.importKey(e,this.keygenAlgorithmOptions,t,n)]}))}))},e.prototype.sign=function(e,t){return l(this,void 0,void 0,(function(){return d(this,(function(n){return[2,this.subtleCrypto.sign(this.keygenAlgorithmOptions,e,t)]}))}))},e}(),qo=function(){function e(){this.dbName=Ae,this.version=1,this.tableName=Re,this.dbOpen=!1}return e.prototype.open=function(){return l(this,void 0,void 0,(function(){var e=this;return d(this,(function(t){return[2,new Promise((function(t,n){var r=window.indexedDB.open(e.dbName,e.version);r.addEventListener("upgradeneeded",(function(t){t.target.result.createObjectStore(e.tableName)})),r.addEventListener("success",(function(n){var r=n;e.db=r.target.result,e.dbOpen=!0,t()})),r.addEventListener("error",(function(){return n(ho.createDatabaseUnavailableError())}))}))]}))}))},e.prototype.closeConnection=function(){var e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)},e.prototype.validateDbIsOpen=function(){return l(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this.dbOpen?[3,2]:[4,this.open()];case 1:return[2,e.sent()];case 2:return[2]}}))}))},e.prototype.getItem=function(e){return l(this,void 0,void 0,(function(){var t=this;return d(this,(function(n){switch(n.label){case 0:return[4,this.validateDbIsOpen()];case 1:return n.sent(),[2,new Promise((function(n,r){if(!t.db)return r(ho.createDatabaseNotOpenError());var o=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).get(e);o.addEventListener("success",(function(e){var r=e;t.closeConnection(),n(r.target.result)})),o.addEventListener("error",(function(e){t.closeConnection(),r(e)}))}))]}}))}))},e.prototype.setItem=function(e,t){return l(this,void 0,void 0,(function(){var n=this;return d(this,(function(r){switch(r.label){case 0:return[4,this.validateDbIsOpen()];case 1:return r.sent(),[2,new Promise((function(r,o){if(!n.db)return o(ho.createDatabaseNotOpenError());var i=n.db.transaction([n.tableName],"readwrite").objectStore(n.tableName).put(t,e);i.addEventListener("success",(function(){n.closeConnection(),r()})),i.addEventListener("error",(function(e){n.closeConnection(),o(e)}))}))]}}))}))},e.prototype.removeItem=function(e){return l(this,void 0,void 0,(function(){var t=this;return d(this,(function(n){switch(n.label){case 0:return[4,this.validateDbIsOpen()];case 1:return n.sent(),[2,new Promise((function(n,r){if(!t.db)return r(ho.createDatabaseNotOpenError());var o=t.db.transaction([t.tableName],"readwrite").objectStore(t.tableName).delete(e);o.addEventListener("success",(function(){t.closeConnection(),n()})),o.addEventListener("error",(function(e){t.closeConnection(),r(e)}))}))]}}))}))},e.prototype.getKeys=function(){return l(this,void 0,void 0,(function(){var e=this;return d(this,(function(t){switch(t.label){case 0:return[4,this.validateDbIsOpen()];case 1:return t.sent(),[2,new Promise((function(t,n){if(!e.db)return n(ho.createDatabaseNotOpenError());var r=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).getAllKeys();r.addEventListener("success",(function(n){var r=n;e.closeConnection(),t(r.target.result)})),r.addEventListener("error",(function(t){e.closeConnection(),n(t)}))}))]}}))}))},e.prototype.containsKey=function(e){return l(this,void 0,void 0,(function(){var t=this;return d(this,(function(n){switch(n.label){case 0:return[4,this.validateDbIsOpen()];case 1:return n.sent(),[2,new Promise((function(n,r){if(!t.db)return r(ho.createDatabaseNotOpenError());var o=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).count(e);o.addEventListener("success",(function(e){var r=e;t.closeConnection(),n(1===r.target.result)})),o.addEventListener("error",(function(e){t.closeConnection(),r(e)}))}))]}}))}))},e.prototype.deleteDatabase=function(){return l(this,void 0,void 0,(function(){return d(this,(function(e){return this.db&&this.dbOpen&&this.closeConnection(),[2,new Promise((function(e,t){var n=window.indexedDB.deleteDatabase(Ae);n.addEventListener("success",(function(){return e(!0)})),n.addEventListener("blocked",(function(){return e(!0)})),n.addEventListener("error",(function(){return t(!1)}))}))]}))}))},e}(),xo=function(){function e(){this.cache=new Map}return e.prototype.getItem=function(e){return this.cache.get(e)||null},e.prototype.setItem=function(e,t){this.cache.set(e,t)},e.prototype.removeItem=function(e){this.cache.delete(e)},e.prototype.getKeys=function(){var e=[];return this.cache.forEach((function(t,n){e.push(n)})),e},e.prototype.containsKey=function(e){return this.cache.has(e)},e.prototype.clear=function(){this.cache.clear()},e}(),Fo=function(){function e(e,t){this.inMemoryCache=new xo,this.indexedDBCache=new qo,this.logger=e,this.storeName=t}return e.prototype.handleDatabaseAccessError=function(e){if(!(e instanceof ho&&e.errorCode===Jr))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")},e.prototype.getItem=function(e){return l(this,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:if(t=this.inMemoryCache.getItem(e))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),[4,this.indexedDBCache.getItem(e)];case 2:return[2,r.sent()];case 3:return n=r.sent(),this.handleDatabaseAccessError(n),[3,4];case 4:return[2,t]}}))}))},e.prototype.setItem=function(e,t){return l(this,void 0,void 0,(function(){var n;return d(this,(function(r){switch(r.label){case 0:this.inMemoryCache.setItem(e,t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.indexedDBCache.setItem(e,t)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),this.handleDatabaseAccessError(n),[3,4];case 4:return[2]}}))}))},e.prototype.removeItem=function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:this.inMemoryCache.removeItem(e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.indexedDBCache.removeItem(e)];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),this.handleDatabaseAccessError(t),[3,4];case 4:return[2]}}))}))},e.prototype.getKeys=function(){return l(this,void 0,void 0,(function(){var e,t;return d(this,(function(n){switch(n.label){case 0:if(0!==(e=this.inMemoryCache.getKeys()).length)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),this.logger.verbose("In-memory cache is empty, now querying persistent storage."),[4,this.indexedDBCache.getKeys()];case 2:return[2,n.sent()];case 3:return t=n.sent(),this.handleDatabaseAccessError(t),[3,4];case 4:return[2,e]}}))}))},e.prototype.containsKey=function(e){return l(this,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:if(t=this.inMemoryCache.containsKey(e))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),[4,this.indexedDBCache.containsKey(e)];case 2:return[2,r.sent()];case 3:return n=r.sent(),this.handleDatabaseAccessError(n),[3,4];case 4:return[2,t]}}))}))},e.prototype.clearInMemory=function(){this.logger.verbose("Deleting in-memory keystore "+this.storeName),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore "+this.storeName+" deleted")},e.prototype.clearPersistent=function(){return l(this,void 0,void 0,(function(){var e,t;return d(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.logger.verbose("Deleting persistent keystore"),[4,this.indexedDBCache.deleteDatabase()];case 1:return(e=n.sent())&&this.logger.verbose("Persistent keystore deleted"),[2,e];case 2:return t=n.sent(),this.handleDatabaseAccessError(t),[2,!1];case 3:return[2]}}))}))},e}();!function(e){e.asymmetricKeys="asymmetricKeys",e.symmetricKeys="symmetricKeys"}(Oe||(Oe={}));var Lo,Uo=function(){function e(e){this.logger=e,this.asymmetricKeys=new Fo(this.logger,Oe.asymmetricKeys),this.symmetricKeys=new Fo(this.logger,Oe.symmetricKeys)}return e.prototype.clear=function(){return l(this,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:this.asymmetricKeys.clearInMemory(),this.symmetricKeys.clearInMemory(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.asymmetricKeys.clearPersistent()];case 2:return t.sent(),[2,!0];case 3:return(e=t.sent())instanceof Error?this.logger.error("Clearing keystore failed with error: "+e.message):this.logger.error("Clearing keystore failed with unknown error"),[2,!1];case 4:return[2]}}))}))},e}(),Bo=function(){function e(e,t,n){this.logger=e,this.browserCrypto=new Do(this.logger,n),this.b64Encode=new Be,this.b64Decode=new He,this.guidGenerator=new Le(this.browserCrypto),this.pkceGenerator=new po(this.browserCrypto),this.cache=new Uo(this.logger),this.performanceClient=t}return e.prototype.createNewGuid=function(){return this.guidGenerator.generateGuid()},e.prototype.base64Encode=function(e){return this.b64Encode.encode(e)},e.prototype.base64Decode=function(e){return this.b64Decode.decode(e)},e.prototype.generatePkceCodes=function(){return l(this,void 0,void 0,(function(){return d(this,(function(e){return[2,this.pkceGenerator.generateCodes()]}))}))},e.prototype.getPublicKeyThumbprint=function(t){var n;return l(this,void 0,void 0,(function(){var r,i,a,s,c,u,l,h;return d(this,(function(d){switch(d.label){case 0:return r=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement(o.CryptoOptsGetPublicKeyThumbprint,t.correlationId),[4,this.browserCrypto.generateKeyPair(e.EXTRACTABLE,e.POP_KEY_USAGES)];case 1:return i=d.sent(),[4,this.browserCrypto.exportJwk(i.publicKey)];case 2:return a=d.sent(),s={e:a.e,kty:a.kty,n:a.n},c=Ue.getSortedObjectString(s),[4,this.hashString(c)];case 3:return u=d.sent(),[4,this.browserCrypto.exportJwk(i.privateKey)];case 4:return l=d.sent(),[4,this.browserCrypto.importJwk(l,!1,["sign"])];case 5:return h=d.sent(),[4,this.cache.asymmetricKeys.setItem(u,{privateKey:h,publicKey:i.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri})];case 6:return d.sent(),r&&r.endMeasurement({success:!0}),[2,u]}}))}))},e.prototype.removeTokenBindingKey=function(e){return l(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,this.cache.asymmetricKeys.removeItem(e)];case 1:return t.sent(),[4,this.cache.asymmetricKeys.containsKey(e)];case 2:return[2,!t.sent()]}}))}))},e.prototype.clearKeystore=function(){return l(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,this.cache.clear()];case 1:return[2,e.sent()]}}))}))},e.prototype.signJwt=function(e,t,n){var r;return l(this,void 0,void 0,(function(){var i,a,s,c,u,l,h,p,f,m,g,y,v;return d(this,(function(d){switch(d.label){case 0:return i=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(o.CryptoOptsSignJwt,n),[4,this.cache.asymmetricKeys.getItem(t)];case 1:if(!(a=d.sent()))throw ho.createSigningKeyNotFoundInStorageError(t);return[4,this.browserCrypto.exportJwk(a.publicKey)];case 2:return s=d.sent(),c=Ue.getSortedObjectString(s),u=this.b64Encode.urlEncode(JSON.stringify({kid:t})),l=xe.getShrHeaderString({kid:u,alg:s.alg}),h=this.b64Encode.urlEncode(l),e.cnf={jwk:JSON.parse(c)},p=this.b64Encode.urlEncode(JSON.stringify(e)),f=h+"."+p,m=Ue.stringToArrayBuffer(f),[4,this.browserCrypto.sign(a.privateKey,m)];case 3:return g=d.sent(),y=this.b64Encode.urlEncodeArr(new Uint8Array(g)),v=f+"."+y,i&&i.endMeasurement({success:!0}),[2,v]}}))}))},e.prototype.hashString=function(e){return l(this,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:return[4,this.browserCrypto.sha256Digest(e)];case 1:return t=r.sent(),n=new Uint8Array(t),[2,this.b64Encode.urlEncodeArr(n)]}}))}))},e.POP_KEY_USAGES=["sign","verify"],e.EXTRACTABLE=!0,e}();!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(Lo||(Lo={}));var Ho,jo=function(){function e(t,n,r){this.level=Lo.Info;var o=t||e.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||function(){},this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level="number"==typeof o.logLevel?o.logLevel:Lo.Info,this.correlationId=o.correlationId||k.EMPTY_STRING,this.packageName=n||k.EMPTY_STRING,this.packageVersion=r||k.EMPTY_STRING}return e.createDefaultLoggerOptions=function(){return{loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:Lo.Info}},e.prototype.clone=function(t,n,r){return new e({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},t,n)},e.prototype.logMessage=function(e,t){if(!(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)){var n=(new Date).toUTCString(),r=(An.isEmpty(t.correlationId)?An.isEmpty(this.correlationId)?"["+n+"]":"["+n+"] : ["+this.correlationId+"]":"["+n+"] : ["+t.correlationId+"]")+" : "+this.packageName+"@"+this.packageVersion+" : "+Lo[t.logLevel]+" - "+e;this.executeCallback(t.logLevel,r,t.containsPii||!1)}},e.prototype.executeCallback=function(e,t,n){this.localCallback&&this.localCallback(e,t,n)},e.prototype.error=function(e,t){this.logMessage(e,{logLevel:Lo.Error,containsPii:!1,correlationId:t||k.EMPTY_STRING})},e.prototype.errorPii=function(e,t){this.logMessage(e,{logLevel:Lo.Error,containsPii:!0,correlationId:t||k.EMPTY_STRING})},e.prototype.warning=function(e,t){this.logMessage(e,{logLevel:Lo.Warning,containsPii:!1,correlationId:t||k.EMPTY_STRING})},e.prototype.warningPii=function(e,t){this.logMessage(e,{logLevel:Lo.Warning,containsPii:!0,correlationId:t||k.EMPTY_STRING})},e.prototype.info=function(e,t){this.logMessage(e,{logLevel:Lo.Info,containsPii:!1,correlationId:t||k.EMPTY_STRING})},e.prototype.infoPii=function(e,t){this.logMessage(e,{logLevel:Lo.Info,containsPii:!0,correlationId:t||k.EMPTY_STRING})},e.prototype.verbose=function(e,t){this.logMessage(e,{logLevel:Lo.Verbose,containsPii:!1,correlationId:t||k.EMPTY_STRING})},e.prototype.verbosePii=function(e,t){this.logMessage(e,{logLevel:Lo.Verbose,containsPii:!0,correlationId:t||k.EMPTY_STRING})},e.prototype.trace=function(e,t){this.logMessage(e,{logLevel:Lo.Trace,containsPii:!1,correlationId:t||k.EMPTY_STRING})},e.prototype.tracePii=function(e,t){this.logMessage(e,{logLevel:Lo.Trace,containsPii:!0,correlationId:t||k.EMPTY_STRING})},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1},e}(),Qo=function(){function e(e,t,n,r,o,i){this.authority=t,this.libraryName=r,this.libraryVersion=o,this.applicationTelemetry=i,this.clientId=e,this.logger=n,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map}return e.prototype.startPerformanceMeasurement=function(e,t){return{}},e.prototype.startPerformanceMeasuremeant=function(e,t){return{}},e.prototype.getIntFields=function(){return f},e.prototype.getPreQueueTime=function(e,t){var n=this.preQueueTimeByCorrelationId.get(t);if(n){if(n.name===e)return n.time;this.logger.trace("PerformanceClient.getPreQueueTime: no pre-queue time found for "+e+", unable to add queue measurement")}else this.logger.trace("PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: "+t+", unable to add queue measurement")},e.prototype.calculateQueuedTime=function(e,t){return e<1?(this.logger.trace("PerformanceClient: preQueueTime should be a positive integer and not "+e),0):t<1?(this.logger.trace("PerformanceClient: currentTime should be a positive integer and not "+t),0):t<e?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):t-e},e.prototype.addQueueMeasurement=function(e,t,n,r){if(t){if(0===n)this.logger.trace("PerformanceClient.addQueueMeasurement: queue time provided for "+e+" is "+n);else if(!n)return void this.logger.trace("PerformanceClient.addQueueMeasurement: no queue time provided for "+e);var o={eventName:e,queueTime:n,manuallyCompleted:r},i=this.queueMeasurements.get(t);if(i)i.push(o),this.queueMeasurements.set(t,i);else{this.logger.trace("PerformanceClient.addQueueMeasurement: adding correlationId "+t+" to queue measurements");var a=[o];this.queueMeasurements.set(t,a)}this.preQueueTimeByCorrelationId.delete(t)}else this.logger.trace("PerformanceClient.addQueueMeasurement: correlationId not provided for "+e+", cannot add queue measurement")},e.prototype.startMeasurement=function(e,t){var n,r,o=this,a=t||this.generateId();t||this.logger.info("PerformanceClient: No correlation id provided for "+e+", generating",a),this.logger.trace("PerformanceClient: Performance measurement started for "+e,a);var s=this.startPerformanceMeasuremeant(e,a);s.startMeasurement();var c={eventId:this.generateId(),status:i.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:e,startTimeMs:Date.now(),correlationId:a,appName:null===(n=this.applicationTelemetry)||void 0===n?void 0:n.appName,appVersion:null===(r=this.applicationTelemetry)||void 0===r?void 0:r.appVersion};return this.cacheEventByCorrelationId(c),{endMeasurement:function(e){return o.endMeasurement(y(y({},c),e),s)},discardMeasurement:function(){return o.discardMeasurements(c.correlationId)},addStaticFields:function(e){return o.addStaticFields(e,c.correlationId)},increment:function(e){return o.increment(e,c.correlationId)},measurement:s,event:c}},e.prototype.endMeasurement=function(e,t){var n,r,o=this,a=this.eventsByCorrelationId.get(e.correlationId);if(!a)return this.logger.trace("PerformanceClient: Measurement not found for "+e.eventId,e.correlationId),null;var s=e.eventId===a.eventId,c={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0};s?(c=this.getQueueInfo(e.correlationId),this.discardCache(a.correlationId)):null===(n=a.incompleteSubMeasurements)||void 0===n||n.delete(e.eventId),null==t||t.endMeasurement();var u=null==t?void 0:t.flushMeasurement();if(!u)return this.logger.trace("PerformanceClient: Performance measurement not taken",a.correlationId),null;if(this.logger.trace("PerformanceClient: Performance measurement ended for "+e.name+": "+u+" ms",e.correlationId),!s)return a[e.name+"DurationMs"]=Math.floor(u),y({},a);var l=y(y({},a),e),d=0;return null===(r=l.incompleteSubMeasurements)||void 0===r||r.forEach((function(t){o.logger.trace("PerformanceClient: Incomplete submeasurement "+t.name+" found for "+e.name,l.correlationId),d++})),l.incompleteSubMeasurements=void 0,l=y(y({},l),{durationMs:Math.round(u),queuedTimeMs:c.totalQueueTime,queuedCount:c.totalQueueCount,queuedManuallyCompletedCount:c.manuallyCompletedCount,status:i.Completed,incompleteSubsCount:d}),this.truncateIntegralFields(l,this.getIntFields()),this.emitEvents([l],e.correlationId),l},e.prototype.addStaticFields=function(e,t){this.logger.trace("PerformanceClient: Updating static fields");var n=this.eventsByCorrelationId.get(t);n?this.eventsByCorrelationId.set(t,y(y({},n),e)):this.logger.trace("PerformanceClient: Event not found for",t)},e.prototype.increment=function(e,t){this.logger.trace("PerformanceClient: Updating counters");var n=this.eventsByCorrelationId.get(t);if(n)for(var r in e)n.hasOwnProperty(r)||(n[r]=0),n[r]+=e[r];else this.logger.trace("PerformanceClient: Event not found for",t)},e.prototype.cacheEventByCorrelationId=function(e){var t=this.eventsByCorrelationId.get(e.correlationId);t?(this.logger.trace("PerformanceClient: Performance measurement for "+e.name+" added/updated",e.correlationId),t.incompleteSubMeasurements=t.incompleteSubMeasurements||new Map,t.incompleteSubMeasurements.set(e.eventId,{name:e.name,startTimeMs:e.startTimeMs})):(this.logger.trace("PerformanceClient: Performance measurement for "+e.name+" started",e.correlationId),this.eventsByCorrelationId.set(e.correlationId,y({},e)))},e.prototype.getQueueInfo=function(e){var t=this.queueMeasurements.get(e);t||this.logger.trace("PerformanceClient: no queue measurements found for for correlationId: "+e);var n=0,r=0,o=0;return null==t||t.forEach((function(e){n+=e.queueTime,r++,o+=e.manuallyCompleted?1:0})),{totalQueueTime:n,totalQueueCount:r,manuallyCompletedCount:o}},e.prototype.discardMeasurements=function(e){this.logger.trace("PerformanceClient: Performance measurements discarded",e),this.eventsByCorrelationId.delete(e)},e.prototype.discardCache=function(e){this.discardMeasurements(e),this.logger.trace("PerformanceClient: QueueMeasurements discarded",e),this.queueMeasurements.delete(e),this.logger.trace("PerformanceClient: Pre-queue times discarded",e),this.preQueueTimeByCorrelationId.delete(e)},e.prototype.addPerformanceCallback=function(e){var t=this.generateId();return this.callbacks.set(t,e),this.logger.verbose("PerformanceClient: Performance callback registered with id: "+t),t},e.prototype.removePerformanceCallback=function(e){var t=this.callbacks.delete(e);return t?this.logger.verbose("PerformanceClient: Performance callback "+e+" removed."):this.logger.verbose("PerformanceClient: Performance callback "+e+" not removed."),t},e.prototype.emitEvents=function(e,t){var n=this;this.logger.verbose("PerformanceClient: Emitting performance events",t),this.callbacks.forEach((function(r,o){n.logger.trace("PerformanceClient: Emitting event to callback "+o,t),r.apply(null,[e])}))},e.prototype.truncateIntegralFields=function(e,t){t.forEach((function(t){t in e&&"number"==typeof e[t]&&(e[t]=Math.floor(e[t]))}))},e}(),Ko=function(){function e(){}return e.prototype.startMeasurement=function(){},e.prototype.endMeasurement=function(){},e.prototype.flushMeasurement=function(){return null},e}(),Go=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.generateId=function(){return"callback-id"},t.prototype.startPerformanceMeasuremeant=function(){return new Ko},t.prototype.startPerformanceMeasurement=function(){return new Ko},t.prototype.calculateQueuedTime=function(e,t){return 0},t.prototype.addQueueMeasurement=function(e,t,n){},t.prototype.setPreQueueTime=function(e,t){},t}(Qo),zo={createNewGuid:function(){throw he.createUnexpectedError("Crypto interface - createNewGuid() has not been implemented")},base64Decode:function(){throw he.createUnexpectedError("Crypto interface - base64Decode() has not been implemented")},base64Encode:function(){throw he.createUnexpectedError("Crypto interface - base64Encode() has not been implemented")},generatePkceCodes:function(){return v(this,void 0,void 0,(function(){return _(this,(function(e){throw he.createUnexpectedError("Crypto interface - generatePkceCodes() has not been implemented")}))}))},getPublicKeyThumbprint:function(){return v(this,void 0,void 0,(function(){return _(this,(function(e){throw he.createUnexpectedError("Crypto interface - getPublicKeyThumbprint() has not been implemented")}))}))},removeTokenBindingKey:function(){return v(this,void 0,void 0,(function(){return _(this,(function(e){throw he.createUnexpectedError("Crypto interface - removeTokenBindingKey() has not been implemented")}))}))},clearKeystore:function(){return v(this,void 0,void 0,(function(){return _(this,(function(e){throw he.createUnexpectedError("Crypto interface - clearKeystore() has not been implemented")}))}))},signJwt:function(){return v(this,void 0,void 0,(function(){return _(this,(function(e){throw he.createUnexpectedError("Crypto interface - signJwt() has not been implemented")}))}))},hashString:function(){return v(this,void 0,void 0,(function(){return _(this,(function(e){throw he.createUnexpectedError("Crypto interface - hashString() has not been implemented")}))}))}},Vo=function(){function e(){}return e.prototype.generateAccountId=function(){return e.generateAccountIdForCacheKey(this.homeAccountId,this.environment)},e.prototype.generateCredentialId=function(){return e.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)},e.prototype.generateTarget=function(){return e.generateTargetForCacheKey(this.target)},e.prototype.generateCredentialKey=function(){return e.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)},e.prototype.generateType=function(){switch(this.credentialType){case q.ID_TOKEN:return x.ID_TOKEN;case q.ACCESS_TOKEN:case q.ACCESS_TOKEN_WITH_AUTH_SCHEME:return x.ACCESS_TOKEN;case q.REFRESH_TOKEN:return x.REFRESH_TOKEN;default:throw Sn.createUnexpectedCredentialTypeError()}},e.generateCredentialCacheKey=function(e,t,n,r,o,i,a,s,c){return[this.generateAccountIdForCacheKey(e,t),this.generateCredentialIdForCacheKey(n,r,o,a),this.generateTargetForCacheKey(i),this.generateClaimsHashForCacheKey(c),this.generateSchemeForCacheKey(s)].join(D.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateAccountIdForCacheKey=function(e,t){return[e,t].join(D.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateCredentialIdForCacheKey=function(e,t,n,r){return[e,e===q.REFRESH_TOKEN&&r||t,n||k.EMPTY_STRING].join(D.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateTargetForCacheKey=function(e){return(e||k.EMPTY_STRING).toLowerCase()},e.generateClaimsHashForCacheKey=function(e){return(e||k.EMPTY_STRING).toLowerCase()},e.generateSchemeForCacheKey=function(e){return e&&e.toLowerCase()!==j.BEARER.toLowerCase()?e.toLowerCase():k.EMPTY_STRING},e}(),Wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.createIdTokenEntity=function(e,n,r,o,i){var a=new t;return a.credentialType=q.ID_TOKEN,a.homeAccountId=e,a.environment=n,a.clientId=o,a.secret=r,a.realm=i,a},t.isIdTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===q.ID_TOKEN},t}(Vo),Yo="redirect_uri_empty",$o="A redirect URI is required for all calls, and none has been set.",Jo="post_logout_uri_empty",Xo="A post logout redirect has not been set.",Zo="claims_request_parsing_error",ei="Could not parse the given claims request object.",ti="authority_uri_insecure",ni="Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",ri="url_parse_error",oi="URL could not be parsed into appropriate segments.",ii="empty_url_error",ai="URL was empty or null.",si="empty_input_scopes_error",ci="Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",ui="clientid_input_scopes_error",li="Client ID can only be provided as a single scope.",di="invalid_prompt_value",hi="Supported prompt values are 'login', 'select_account', 'consent', 'create', 'none' and 'no_session'.  Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",pi="invalid_claims",fi="Given claims parameter must be a stringified JSON object.",mi="token_request_empty",gi="Token request was empty and not found in cache.",yi="logout_request_empty",vi="The logout request was null or undefined.",_i="invalid_code_challenge_method",bi='code_challenge_method passed is invalid. Valid values are "plain" and "S256".',Ci="pkce_params_missing",Ei="Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",Ti="invalid_cloud_discovery_metadata",wi="Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",Ii="invalid_authority_metadata",ki="Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",Si="untrusted_authority",Ai="The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",Ri="invalid_azure_cloud_instance",Oi="Invalid AzureCloudInstance provided. Please refer MSAL JS docs: aks.ms/msaljs/azure_cloud_instance for valid values",Ni="missing_ssh_jwk",Pi="Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",Mi="missing_ssh_kid",Di="Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",qi="missing_nonce_authentication_header",xi="Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",Fi="invalid_authentication_header",Li="Invalid authentication header provided",Ui="authority_mismatch",Bi="Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",Hi=function(e){function t(n,r){var o=e.call(this,n,r)||this;return o.name="ClientConfigurationError",Object.setPrototypeOf(o,t.prototype),o}return g(t,e),t.createRedirectUriEmptyError=function(){return new t(Yo,$o)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(Jo,Xo)},t.createClaimsRequestParsingError=function(e){return new t(Zo,ei+" Given value: "+e)},t.createInsecureAuthorityUriError=function(e){return new t(ti,ni+" Given URI: "+e)},t.createUrlParseError=function(e){return new t(ri,oi+" Given Error: "+e)},t.createUrlEmptyError=function(){return new t(ii,ai)},t.createEmptyScopesArrayError=function(){return new t(si,""+ci)},t.createClientIdSingleScopeError=function(e){return new t(ui,li+" Given Scopes: "+e)},t.createInvalidPromptError=function(e){return new t(di,hi+" Given value: "+e)},t.createInvalidClaimsRequestError=function(){return new t(pi,fi)},t.createEmptyLogoutRequestError=function(){return new t(yi,vi)},t.createEmptyTokenRequestError=function(){return new t(mi,gi)},t.createInvalidCodeChallengeMethodError=function(){return new t(_i,bi)},t.createInvalidCodeChallengeParamsError=function(){return new t(Ci,Ei)},t.createInvalidCloudDiscoveryMetadataError=function(){return new t(Ti,wi)},t.createInvalidAuthorityMetadataError=function(){return new t(Ii,ki)},t.createUntrustedAuthorityError=function(){return new t(Si,Ai)},t.createInvalidAzureCloudInstanceError=function(){return new t(Ri,Oi)},t.createMissingSshJwkError=function(){return new t(Ni,Pi)},t.createMissingSshKidError=function(){return new t(Mi,Di)},t.createMissingNonceAuthenticationHeadersError=function(){return new t(qi,xi)},t.createInvalidAuthenticationHeaderError=function(e,n){return new t(Fi,Li+". Invalid header: "+e+". Details: "+n)},t.createAuthorityMismatchError=function(){return new t(Ui,Bi)},t}(Sn),ji=function(){function e(e){var t=this,n=e?An.trimArrayEntries(b(e)):[],r=n?An.removeEmptyStringsFromArray(n):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach((function(e){return t.scopes.add(e)}))}return e.fromString=function(t){return new e((t||k.EMPTY_STRING).split(" "))},e.createSearchScopes=function(t){var n=new e(t);return n.containsOnlyOIDCScopes()?n.removeScope(k.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n},e.prototype.validateInputScopes=function(e){if(!e||e.length<1)throw Hi.createEmptyScopesArrayError()},e.prototype.containsScope=function(t){var n=new e(this.printScopesLowerCase().split(" "));return!An.isEmpty(t)&&n.scopes.has(t.toLowerCase())},e.prototype.containsScopeSet=function(e){var t=this;return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every((function(e){return t.containsScope(e)}))},e.prototype.containsOnlyOIDCScopes=function(){var e=this,t=0;return A.forEach((function(n){e.containsScope(n)&&(t+=1)})),this.scopes.size===t},e.prototype.appendScope=function(e){An.isEmpty(e)||this.scopes.add(e.trim())},e.prototype.appendScopes=function(e){var t=this;try{e.forEach((function(e){return t.appendScope(e)}))}catch(e){throw Sn.createAppendScopeSetError(e)}},e.prototype.removeScope=function(e){if(An.isEmpty(e))throw Sn.createRemoveEmptyScopeFromSetError(e);this.scopes.delete(e.trim())},e.prototype.removeOIDCScopes=function(){var e=this;A.forEach((function(t){e.scopes.delete(t)}))},e.prototype.unionScopeSets=function(e){if(!e)throw Sn.createEmptyInputScopeSetError();var t=new Set;return e.scopes.forEach((function(e){return t.add(e.toLowerCase())})),this.scopes.forEach((function(e){return t.add(e.toLowerCase())})),t},e.prototype.intersectingScopeSets=function(e){if(!e)throw Sn.createEmptyInputScopeSetError();e.containsOnlyOIDCScopes()||e.removeOIDCScopes();var t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n},e.prototype.getScopeCount=function(){return this.scopes.size},e.prototype.asArray=function(){var e=[];return this.scopes.forEach((function(t){return e.push(t)})),e},e.prototype.printScopes=function(){return this.scopes?this.asArray().join(" "):k.EMPTY_STRING},e.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()},e}();function Qi(e,t){if(An.isEmpty(e))throw Sn.createClientInfoEmptyError();try{var n=t.base64Decode(e);return JSON.parse(n)}catch(e){throw Sn.createClientInfoDecodingError(e.message)}}function Ki(e){if(An.isEmpty(e))throw Sn.createClientInfoDecodingError("Home account ID was empty.");var t=e.split(D.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?k.EMPTY_STRING:t[1]}}!function(e){e[e.Default=0]="Default",e[e.Adfs=1]="Adfs",e[e.Dsts=2]="Dsts",e[e.Ciam=3]="Ciam"}(Ho||(Ho={}));var Gi,zi=function(){function e(){}return e.prototype.generateAccountId=function(){return[this.homeAccountId,this.environment].join(D.CACHE_KEY_SEPARATOR).toLowerCase()},e.prototype.generateAccountKey=function(){return e.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})},e.prototype.generateType=function(){switch(this.authorityType){case M.ADFS_ACCOUNT_TYPE:return x.ADFS;case M.MSAV1_ACCOUNT_TYPE:return x.MSA;case M.MSSTS_ACCOUNT_TYPE:return x.MSSTS;case M.GENERIC_ACCOUNT_TYPE:return x.GENERIC;default:throw Sn.createUnexpectedAccountTypeError()}},e.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId}},e.generateAccountCacheKey=function(e){return[e.homeAccountId,e.environment||k.EMPTY_STRING,e.tenantId||k.EMPTY_STRING].join(D.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAccount=function(t,n,r,o,i,a,s,c){var u,l,d,h,p,f,m=new e;m.authorityType=M.MSSTS_ACCOUNT_TYPE,m.clientInfo=t,m.homeAccountId=n,m.nativeAccountId=c;var g=s||o&&o.getPreferredCache();if(!g)throw Sn.createInvalidCacheEnvironmentError();if(m.environment=g,m.realm=(null===(u=null==r?void 0:r.claims)||void 0===u?void 0:u.tid)||k.EMPTY_STRING,r){m.idTokenClaims=r.claims,m.localAccountId=(null===(l=null==r?void 0:r.claims)||void 0===l?void 0:l.oid)||(null===(d=null==r?void 0:r.claims)||void 0===d?void 0:d.sub)||k.EMPTY_STRING;var y=null===(h=null==r?void 0:r.claims)||void 0===h?void 0:h.preferred_username,v=(null===(p=null==r?void 0:r.claims)||void 0===p?void 0:p.emails)?r.claims.emails[0]:null;m.username=y||v||k.EMPTY_STRING,m.name=null===(f=null==r?void 0:r.claims)||void 0===f?void 0:f.name}return m.cloudGraphHostName=i,m.msGraphHost=a,m},e.createGenericAccount=function(t,n,r,o,i,a){var s,c,u,l,d=new e;d.authorityType=r&&r.authorityType===Ho.Adfs?M.ADFS_ACCOUNT_TYPE:M.GENERIC_ACCOUNT_TYPE,d.homeAccountId=t,d.realm=k.EMPTY_STRING;var h=a||r&&r.getPreferredCache();if(!h)throw Sn.createInvalidCacheEnvironmentError();return n&&(d.localAccountId=(null===(s=null==n?void 0:n.claims)||void 0===s?void 0:s.oid)||(null===(c=null==n?void 0:n.claims)||void 0===c?void 0:c.sub)||k.EMPTY_STRING,d.username=(null===(u=null==n?void 0:n.claims)||void 0===u?void 0:u.upn)||k.EMPTY_STRING,d.name=(null===(l=null==n?void 0:n.claims)||void 0===l?void 0:l.name)||k.EMPTY_STRING,d.idTokenClaims=null==n?void 0:n.claims),d.environment=h,d.cloudGraphHostName=o,d.msGraphHost=i,d},e.generateHomeAccountId=function(e,t,n,r,o){var i,a=(null===(i=null==o?void 0:o.claims)||void 0===i?void 0:i.sub)?o.claims.sub:k.EMPTY_STRING;if(t===Ho.Adfs||t===Ho.Dsts)return a;if(e)try{var s=Qi(e,r);if(!An.isEmpty(s.uid)&&!An.isEmpty(s.utid))return""+s.uid+D.CLIENT_INFO_SEPARATOR+s.utid}catch(e){}return n.verbose("No client info in response"),a},e.isAccountEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")},e.accountInfoIsEqual=function(e,t,n){if(!e||!t)return!1;var r=!0;if(n){var o=e.idTokenClaims||{},i=t.idTokenClaims||{};r=o.iat===i.iat&&o.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r},e}(),Vi=function(){function e(t,n){if(An.isEmpty(t))throw Sn.createTokenNullOrEmptyError(t);this.rawToken=t,this.claims=e.extractTokenClaims(t,n)}return e.extractTokenClaims=function(e,t){var n=An.decodeAuthToken(e);try{var r=n.JWSPayload,o=t.base64Decode(r);return JSON.parse(o)}catch(e){throw Sn.createTokenParsingError(e)}},e.checkMaxAge=function(e,t){if(0===t||Date.now()-3e5>e+t)throw Sn.createMaxAgeTranspiredError()},e}(),Wi="@azure/msal-common",Yi="13.3.1",$i=function(){function e(e,t,n){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(Wi,Yi)}return e.prototype.getAllAccounts=function(){var e=this,t=this.getAccountKeys();if(t.length<1)return[];var n=t.reduce((function(t,n){var r=e.getAccount(n);return r?(t.push(r),t):t}),[]);return n.length<1?[]:n.map((function(t){return e.getAccountInfoFromEntity(t)}))},e.prototype.getAccountInfoFilteredBy=function(e){var t=this.getAccountsFilteredBy(e);return t.length>0?this.getAccountInfoFromEntity(t[0]):null},e.prototype.getAccountInfoFromEntity=function(e){var t=e.getAccountInfo(),n=this.getIdToken(t);return n&&(t.idToken=n.secret,t.idTokenClaims=new Vi(n.secret,this.cryptoImpl).claims),t},e.prototype.saveCacheRecord=function(e){return v(this,void 0,void 0,(function(){return _(this,(function(t){switch(t.label){case 0:if(!e)throw Sn.createNullOrUndefinedCacheRecord();return e.account&&this.setAccount(e.account),e.idToken&&this.setIdTokenCredential(e.idToken),e.accessToken?[4,this.saveAccessToken(e.accessToken)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.refreshToken&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata),[2]}}))}))},e.prototype.saveAccessToken=function(e){return v(this,void 0,void 0,(function(){var t,n,r,o,i=this;return _(this,(function(a){switch(a.label){case 0:return t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),r=ji.fromString(e.target),o=[],n.accessToken.forEach((function(e){if(i.accessTokenKeyMatchesFilter(e,t,!1)){var n=i.getAccessTokenCredential(e);n&&i.credentialMatchesFilter(n,t)&&ji.fromString(n.target).intersectingScopeSets(r)&&o.push(i.removeAccessToken(e))}})),[4,Promise.all(o)];case 1:return a.sent(),this.setAccessTokenCredential(e),[2]}}))}))},e.prototype.getAccountsFilteredBy=function(e){var t=this,n=this.getAccountKeys(),r=[];return n.forEach((function(n){if(t.isAccountKey(n,e.homeAccountId,e.realm)){var o=t.getAccount(n);o&&(e.homeAccountId&&!t.matchHomeAccountId(o,e.homeAccountId)||e.localAccountId&&!t.matchLocalAccountId(o,e.localAccountId)||e.username&&!t.matchUsername(o,e.username)||e.environment&&!t.matchEnvironment(o,e.environment)||e.realm&&!t.matchRealm(o,e.realm)||e.nativeAccountId&&!t.matchNativeAccountId(o,e.nativeAccountId)||r.push(o))}})),r},e.prototype.isAccountKey=function(e,t,n){return!(e.split(D.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))},e.prototype.isCredentialKey=function(e){if(e.split(D.CACHE_KEY_SEPARATOR).length<6)return!1;var t=e.toLowerCase();if(-1===t.indexOf(q.ID_TOKEN.toLowerCase())&&-1===t.indexOf(q.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(q.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(q.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(q.REFRESH_TOKEN.toLowerCase())>-1){var n=""+q.REFRESH_TOKEN+D.CACHE_KEY_SEPARATOR+this.clientId+D.CACHE_KEY_SEPARATOR,r=""+q.REFRESH_TOKEN+D.CACHE_KEY_SEPARATOR+B+D.CACHE_KEY_SEPARATOR;if(-1===t.indexOf(n.toLowerCase())&&-1===t.indexOf(r.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0},e.prototype.credentialMatchesFilter=function(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===q.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===j.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0},e.prototype.getAppMetadataFilteredBy=function(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)},e.prototype.getAppMetadataFilteredByInternal=function(e,t){var n=this,r=this.getKeys(),o={};return r.forEach((function(r){if(n.isAppMetadata(r)){var i=n.getAppMetadata(r);i&&(e&&!n.matchEnvironment(i,e)||t&&!n.matchClientId(i,t)||(o[r]=i))}})),o},e.prototype.getAuthorityMetadataByAlias=function(e){var t=this,n=this.getAuthorityMetadataKeys(),r=null;return n.forEach((function(n){if(t.isAuthorityMetadata(n)&&-1!==n.indexOf(t.clientId)){var o=t.getAuthorityMetadata(n);o&&-1!==o.aliases.indexOf(e)&&(r=o)}})),r},e.prototype.removeAllAccounts=function(){return v(this,void 0,void 0,(function(){var e,t,n=this;return _(this,(function(r){switch(r.label){case 0:return e=this.getAccountKeys(),t=[],e.forEach((function(e){t.push(n.removeAccount(e))})),[4,Promise.all(t)];case 1:return r.sent(),[2]}}))}))},e.prototype.removeAccount=function(e){return v(this,void 0,void 0,(function(){var t;return _(this,(function(n){switch(n.label){case 0:if(!(t=this.getAccount(e)))throw Sn.createNoAccountFoundError();return[4,this.removeAccountContext(t)];case 1:return n.sent(),this.removeItem(e),[2]}}))}))},e.prototype.removeAccountContext=function(e){return v(this,void 0,void 0,(function(){var t,n,r,o=this;return _(this,(function(i){switch(i.label){case 0:return t=this.getTokenKeys(),n=e.generateAccountId(),r=[],t.idToken.forEach((function(e){0===e.indexOf(n)&&o.removeIdToken(e)})),t.accessToken.forEach((function(e){0===e.indexOf(n)&&r.push(o.removeAccessToken(e))})),t.refreshToken.forEach((function(e){0===e.indexOf(n)&&o.removeRefreshToken(e)})),[4,Promise.all(r)];case 1:return i.sent(),[2]}}))}))},e.prototype.removeAccessToken=function(e){return v(this,void 0,void 0,(function(){var t,n;return _(this,(function(r){switch(r.label){case 0:if(!(t=this.getAccessTokenCredential(e)))return[2];if(t.credentialType.toLowerCase()!==q.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())return[3,4];if(t.tokenType!==j.POP)return[3,4];if(!(n=t.keyId))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.cryptoImpl.removeTokenBindingKey(n)];case 2:return r.sent(),[3,4];case 3:throw r.sent(),Sn.createBindingKeyNotRemovedError();case 4:return[2,this.removeItem(e)]}}))}))},e.prototype.removeAppMetadata=function(){var e=this;return this.getKeys().forEach((function(t){e.isAppMetadata(t)&&e.removeItem(t)})),!0},e.prototype.readCacheRecord=function(e,t,n){var r=this.getTokenKeys(),o=this.readAccountFromCache(e),i=this.getIdToken(e,r),a=this.getAccessToken(e,t,r),s=this.getRefreshToken(e,!1,r),c=this.readAppMetadataFromCache(n);return o&&i&&(o.idTokenClaims=new Vi(i.secret,this.cryptoImpl).claims),{account:o,idToken:i,accessToken:a,refreshToken:s,appMetadata:c}},e.prototype.readAccountFromCache=function(e){var t=zi.generateAccountCacheKey(e);return this.getAccount(t)},e.prototype.getIdToken=function(e,t){var n=this;this.commonLogger.trace("CacheManager - getIdToken called");var r={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:q.ID_TOKEN,clientId:this.clientId,realm:e.tenantId},o=this.getIdTokensByFilter(r,t),i=o.length;return i<1?(this.commonLogger.info("CacheManager:getIdToken - No token found"),null):i>1?(this.commonLogger.info("CacheManager:getIdToken - Multiple id tokens found, clearing them"),o.forEach((function(e){n.removeIdToken(e.generateCredentialKey())})),null):(this.commonLogger.info("CacheManager:getIdToken - Returning id token"),o[0])},e.prototype.getIdTokensByFilter=function(e,t){var n=this,r=t&&t.idToken||this.getTokenKeys().idToken,o=[];return r.forEach((function(t){if(n.idTokenKeyMatchesFilter(t,y({clientId:n.clientId},e))){var r=n.getIdTokenCredential(t);r&&n.credentialMatchesFilter(r,e)&&o.push(r)}})),o},e.prototype.idTokenKeyMatchesFilter=function(e,t){var n=e.toLowerCase();return!(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))},e.prototype.removeIdToken=function(e){this.removeItem(e)},e.prototype.removeRefreshToken=function(e){this.removeItem(e)},e.prototype.getAccessToken=function(e,t,n){var r=this;this.commonLogger.trace("CacheManager - getAccessToken called");var o=ji.createSearchScopes(t.scopes),i=t.authenticationScheme||j.BEARER,a=i&&i.toLowerCase()!==j.BEARER.toLowerCase()?q.ACCESS_TOKEN_WITH_AUTH_SCHEME:q.ACCESS_TOKEN,s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:a,clientId:this.clientId,realm:e.tenantId,target:o,tokenType:i,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},c=n&&n.accessToken||this.getTokenKeys().accessToken,u=[];c.forEach((function(e){if(r.accessTokenKeyMatchesFilter(e,s,!0)){var t=r.getAccessTokenCredential(e);t&&r.credentialMatchesFilter(t,s)&&u.push(t)}}));var l=u.length;return l<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):l>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),u.forEach((function(e){r.removeAccessToken(e.generateCredentialKey())})),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),u[0])},e.prototype.accessTokenKeyMatchesFilter=function(e,t,n){var r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target)for(var o=t.target.asArray(),i=0;i<o.length;i++){if(n&&!r.includes(o[i].toLowerCase()))return!1;if(!n&&r.includes(o[i].toLowerCase()))return!0}return!0},e.prototype.getAccessTokensByFilter=function(e){var t=this,n=this.getTokenKeys(),r=[];return n.accessToken.forEach((function(n){if(t.accessTokenKeyMatchesFilter(n,e,!0)){var o=t.getAccessTokenCredential(n);o&&t.credentialMatchesFilter(o,e)&&r.push(o)}})),r},e.prototype.getRefreshToken=function(e,t,n){var r=this;this.commonLogger.trace("CacheManager - getRefreshToken called");var o=t?B:void 0,i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:q.REFRESH_TOKEN,clientId:this.clientId,familyId:o},a=n&&n.refreshToken||this.getTokenKeys().refreshToken,s=[];return a.forEach((function(e){if(r.refreshTokenKeyMatchesFilter(e,i)){var t=r.getRefreshTokenCredential(e);t&&r.credentialMatchesFilter(t,i)&&s.push(t)}})),s.length<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),s[0])},e.prototype.refreshTokenKeyMatchesFilter=function(e,t){var n=e.toLowerCase();return!(t.familyId&&-1===n.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))},e.prototype.readAppMetadataFromCache=function(e){var t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map((function(e){return n[e]})),o=r.length;if(o<1)return null;if(o>1)throw Sn.createMultipleMatchingAppMetadataInCacheError();return r[0]},e.prototype.isAppMetadataFOCI=function(e){var t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==B)},e.prototype.matchHomeAccountId=function(e,t){return!("string"!=typeof e.homeAccountId||t!==e.homeAccountId)},e.prototype.matchLocalAccountId=function(e,t){return!("string"!=typeof e.localAccountId||t!==e.localAccountId)},e.prototype.matchUsername=function(e,t){return!("string"!=typeof e.username||t.toLowerCase()!==e.username.toLowerCase())},e.prototype.matchUserAssertionHash=function(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)},e.prototype.matchEnvironment=function(e,t){var n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)},e.prototype.matchCredentialType=function(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()},e.prototype.matchClientId=function(e,t){return!(!e.clientId||t!==e.clientId)},e.prototype.matchFamilyId=function(e,t){return!(!e.familyId||t!==e.familyId)},e.prototype.matchRealm=function(e,t){return!(!e.realm||t!==e.realm)},e.prototype.matchNativeAccountId=function(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)},e.prototype.matchTarget=function(e,t){return!(e.credentialType!==q.ACCESS_TOKEN&&e.credentialType!==q.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&ji.fromString(e.target).containsScopeSet(t)},e.prototype.matchTokenType=function(e,t){return!(!e.tokenType||e.tokenType!==t)},e.prototype.matchKeyId=function(e,t){return!(!e.keyId||e.keyId!==t)},e.prototype.isAppMetadata=function(e){return-1!==e.indexOf(U)},e.prototype.isAuthorityMetadata=function(e){return-1!==e.indexOf(H)},e.prototype.generateAuthorityMetadataCacheKey=function(e){return H+"-"+this.clientId+"-"+e},e.toObject=function(e,t){for(var n in t)e[n]=t[n];return e},e}(),Ji=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.setAccount=function(){throw he.createUnexpectedError("Storage interface - setAccount() has not been implemented for the cacheStorage interface.")},t.prototype.getAccount=function(){throw he.createUnexpectedError("Storage interface - getAccount() has not been implemented for the cacheStorage interface.")},t.prototype.setIdTokenCredential=function(){throw he.createUnexpectedError("Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getIdTokenCredential=function(){throw he.createUnexpectedError("Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAccessTokenCredential=function(){throw he.createUnexpectedError("Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getAccessTokenCredential=function(){throw he.createUnexpectedError("Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setRefreshTokenCredential=function(){throw he.createUnexpectedError("Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getRefreshTokenCredential=function(){throw he.createUnexpectedError("Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAppMetadata=function(){throw he.createUnexpectedError("Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAppMetadata=function(){throw he.createUnexpectedError("Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.setServerTelemetry=function(){throw he.createUnexpectedError("Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.getServerTelemetry=function(){throw he.createUnexpectedError("Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.setAuthorityMetadata=function(){throw he.createUnexpectedError("Storage interface - setAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadata=function(){throw he.createUnexpectedError("Storage interface - getAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadataKeys=function(){throw he.createUnexpectedError("Storage interface - getAuthorityMetadataKeys() has not been implemented for the cacheStorage interface.")},t.prototype.setThrottlingCache=function(){throw he.createUnexpectedError("Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.getThrottlingCache=function(){throw he.createUnexpectedError("Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.removeItem=function(){throw he.createUnexpectedError("Storage interface - removeItem() has not been implemented for the cacheStorage interface.")},t.prototype.containsKey=function(){throw he.createUnexpectedError("Storage interface - containsKey() has not been implemented for the cacheStorage interface.")},t.prototype.getKeys=function(){throw he.createUnexpectedError("Storage interface - getKeys() has not been implemented for the cacheStorage interface.")},t.prototype.getAccountKeys=function(){throw he.createUnexpectedError("Storage interface - getAccountKeys() has not been implemented for the cacheStorage interface.")},t.prototype.getTokenKeys=function(){throw he.createUnexpectedError("Storage interface - getTokenKeys() has not been implemented for the cacheStorage interface.")},t.prototype.clear=function(){return v(this,void 0,void 0,(function(){return _(this,(function(e){throw he.createUnexpectedError("Storage interface - clear() has not been implemented for the cacheStorage interface.")}))}))},t.prototype.updateCredentialCacheKey=function(){throw he.createUnexpectedError("Storage interface - updateCredentialCacheKey() has not been implemented for the cacheStorage interface.")},t}($i),Xi=function(){function e(){}return e.nowSeconds=function(){return Math.round((new Date).getTime()/1e3)},e.isTokenExpired=function(t,n){var r=Number(t)||0;return e.nowSeconds()+n>r},e.wasClockTurnedBack=function(t){return Number(t)>e.nowSeconds()},e.delay=function(e,t){return new Promise((function(n){return setTimeout((function(){return n(t)}),e)}))},e}(),Zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.createAccessTokenEntity=function(e,n,r,o,i,a,s,c,u,l,d,h,p,f,m){var g,y,v=new t;v.homeAccountId=e,v.credentialType=q.ACCESS_TOKEN,v.secret=r;var _=Xi.nowSeconds();if(v.cachedAt=_.toString(),v.expiresOn=s.toString(),v.extendedExpiresOn=c.toString(),l&&(v.refreshOn=l.toString()),v.environment=n,v.clientId=o,v.realm=i,v.target=a,v.userAssertionHash=h,v.tokenType=An.isEmpty(d)?j.BEARER:d,f&&(v.requestedClaims=f,v.requestedClaimsHash=m),(null===(g=v.tokenType)||void 0===g?void 0:g.toLowerCase())!==j.BEARER.toLowerCase())switch(v.credentialType=q.ACCESS_TOKEN_WITH_AUTH_SCHEME,v.tokenType){case j.POP:var b=Vi.extractTokenClaims(r,u);if(!(null===(y=null==b?void 0:b.cnf)||void 0===y?void 0:y.kid))throw Sn.createTokenClaimsRequiredError();v.keyId=b.cnf.kid;break;case j.SSH:v.keyId=p}return v},t.isAccessTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.hasOwnProperty("target")&&(e.credentialType===q.ACCESS_TOKEN||e.credentialType===q.ACCESS_TOKEN_WITH_AUTH_SCHEME)},t}(Vo),ea=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.createRefreshTokenEntity=function(e,n,r,o,i,a){var s=new t;return s.clientId=o,s.credentialType=q.REFRESH_TOKEN,s.environment=n,s.homeAccountId=e,s.secret=r,s.userAssertionHash=a,i&&(s.familyId=i),s},t.isRefreshTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===q.REFRESH_TOKEN},t}(Vo),ta=function(){function e(){}return e.prototype.generateAppMetadataKey=function(){return e.generateAppMetadataCacheKey(this.environment,this.clientId)},e.generateAppMetadataCacheKey=function(e,t){return[U,e,t].join(D.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAppMetadataEntity=function(t,n,r){var o=new e;return o.clientId=t,o.environment=n,r&&(o.familyId=r),o},e.isAppMetadataEntity=function(e,t){return!!t&&0===e.indexOf(U)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")},e}(),na=function(){function e(){this.failedRequests=[],this.errors=[],this.cacheHits=0}return e.isServerTelemetryEntity=function(e,t){var n=0===e.indexOf(Q.CACHE_KEY),r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r},e}(),ra=function(){function e(){this.expiresAt=Xi.nowSeconds()+86400}return e.prototype.updateCloudDiscoveryMetadata=function(e,t){this.aliases=e.aliases,this.preferred_cache=e.preferred_cache,this.preferred_network=e.preferred_network,this.aliasesFromNetwork=t},e.prototype.updateEndpointMetadata=function(e,t){this.authorization_endpoint=e.authorization_endpoint,this.token_endpoint=e.token_endpoint,this.end_session_endpoint=e.end_session_endpoint,this.issuer=e.issuer,this.endpointsFromNetwork=t,this.jwks_uri=e.jwks_uri},e.prototype.updateCanonicalAuthority=function(e){this.canonical_authority=e},e.prototype.resetExpiresAt=function(){this.expiresAt=Xi.nowSeconds()+86400},e.prototype.isExpired=function(){return this.expiresAt<=Xi.nowSeconds()},e.isAuthorityMetadataEntity=function(e,t){return!!t&&0===e.indexOf(H)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")},e}(),oa=function(){function e(){}return e.isThrottlingEntity=function(e,t){var n=!1;e&&(n=0===e.indexOf($));var r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r},e}(),ia=function(){function e(){}return e.setRequestState=function(t,n,r){var o=e.generateLibraryState(t,r);return An.isEmpty(n)?o:""+o+k.RESOURCE_DELIM+n},e.generateLibraryState=function(e,t){if(!e)throw Sn.createNoCryptoObjectError("generateLibraryState");var n={id:e.createNewGuid()};t&&(n.meta=t);var r=JSON.stringify(n);return e.base64Encode(r)},e.parseRequestState=function(e,t){if(!e)throw Sn.createNoCryptoObjectError("parseRequestState");if(An.isEmpty(t))throw Sn.createInvalidStateError(t,"Null, undefined or empty state");try{var n=t.split(k.RESOURCE_DELIM),r=n[0],o=n.length>1?n.slice(1).join(k.RESOURCE_DELIM):k.EMPTY_STRING,i=e.base64Decode(r),a=JSON.parse(i);return{userRequestState:An.isEmpty(o)?k.EMPTY_STRING:o,libraryState:a}}catch(e){throw Sn.createInvalidStateError(t,e)}},e}();!function(e){e.HOME_ACCOUNT_ID="home_account_id",e.UPN="UPN"}(Gi||(Gi={}));var aa,sa,ca=function(){function e(e){this.validateWindowStorage(e),this.windowStorage=window[e]}return e.prototype.validateWindowStorage=function(e){if(e!==X.LocalStorage&&e!==X.SessionStorage)throw No.createStorageNotSupportedError(e);if(!window[e])throw No.createStorageNotSupportedError(e)},e.prototype.getItem=function(e){return this.windowStorage.getItem(e)},e.prototype.setItem=function(e,t){this.windowStorage.setItem(e,t)},e.prototype.removeItem=function(e){this.windowStorage.removeItem(e)},e.prototype.getKeys=function(){return Object.keys(this.windowStorage)},e.prototype.containsKey=function(e){return this.windowStorage.hasOwnProperty(e)},e}(),ua=function(){function e(t){if(this._urlString=t,An.isEmpty(this._urlString))throw Hi.createUrlEmptyError();An.isEmpty(this.getHash())&&(this._urlString=e.canonicalizeUri(t))}return Object.defineProperty(e.prototype,"urlString",{get:function(){return this._urlString},enumerable:!1,configurable:!0}),e.canonicalizeUri=function(e){if(e){var t=e.toLowerCase();return An.endsWith(t,"?")?t=t.slice(0,-1):An.endsWith(t,"?/")&&(t=t.slice(0,-2)),An.endsWith(t,"/")||(t+="/"),t}return e},e.prototype.validateAsUri=function(){var e;try{e=this.getUrlComponents()}catch(e){throw Hi.createUrlParseError(e)}if(!e.HostNameAndPort||!e.PathSegments)throw Hi.createUrlParseError("Given url string: "+this.urlString);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Hi.createInsecureAuthorityUriError(this.urlString)},e.appendQueryString=function(e,t){return An.isEmpty(t)?e:e.indexOf("?")<0?e+"?"+t:e+"&"+t},e.removeHashFromUrl=function(t){return e.canonicalizeUri(t.split("#")[0])},e.prototype.replaceTenantPath=function(t){var n=this.getUrlComponents(),r=n.PathSegments;return!t||0===r.length||r[0]!==T.COMMON&&r[0]!==T.ORGANIZATIONS||(r[0]=t),e.constructAuthorityUriFromObject(n)},e.prototype.getHash=function(){return e.parseHash(this.urlString)},e.prototype.getUrlComponents=function(){var e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Hi.createUrlParseError("Given url string: "+this.urlString);var n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},r=n.AbsolutePath.split("/");return r=r.filter((function(e){return e&&e.length>0})),n.PathSegments=r,!An.isEmpty(n.QueryString)&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n},e.getDomainFromUrl=function(e){var t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw Hi.createUrlParseError("Given url string: "+e);return n[2]},e.getAbsoluteUrl=function(t,n){if(t[0]===k.FORWARD_SLASH){var r=new e(n).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+t}return t},e.parseHash=function(e){var t=e.indexOf("#"),n=e.indexOf("#/");return n>-1?e.substring(n+2):t>-1?e.substring(t+1):k.EMPTY_STRING},e.parseQueryString=function(e){var t=e.indexOf("?"),n=e.indexOf("/?");return n>-1?e.substring(n+2):t>-1?e.substring(t+1):k.EMPTY_STRING},e.constructAuthorityUriFromObject=function(t){return new e(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))},e.getDeserializedHash=function(t){if(An.isEmpty(t))return{};var n=e.parseHash(t),r=An.queryStringToObject(An.isEmpty(n)?t:n);if(!r)throw Sn.createHashNotDeserializedError(JSON.stringify(r));return r},e.getDeserializedQueryString=function(t){if(An.isEmpty(t))return{};var n=e.parseQueryString(t),r=An.queryStringToObject(An.isEmpty(n)?t:n);if(!r)throw Sn.createHashNotDeserializedError(JSON.stringify(r));return r},e.hashContainsKnownProperties=function(t){if(An.isEmpty(t)||t.indexOf("=")<0)return!1;var n=e.getDeserializedHash(t);return!!(n.code||n.error_description||n.error||n.state)},e}(),la=function(){function e(){}return e.extractBrowserRequestState=function(e,t){if(An.isEmpty(t))return null;try{return ia.parseRequestState(e,t).libraryState.meta}catch(e){throw Sn.createInvalidStateError(t,e)}},e.parseServerResponseFromHash=function(e){if(!e)return{};var t=new ua(e);return ua.getDeserializedHash(t.getHash())},e}(),da=function(e){function t(t,n,r,o){var i=e.call(this,t,r,o)||this;return i.COOKIE_LIFE_MULTIPLIER=864e5,i.cacheConfig=n,i.logger=o,i.internalStorage=new xo,i.browserStorage=i.setupBrowserStorage(i.cacheConfig.cacheLocation),i.temporaryCacheStorage=i.setupTemporaryCacheStorage(i.cacheConfig.temporaryCacheLocation,i.cacheConfig.cacheLocation),n.cacheMigrationEnabled&&(i.migrateCacheEntries(),i.createKeyMaps()),i}return r(t,e),t.prototype.setupBrowserStorage=function(e){switch(e){case X.LocalStorage:case X.SessionStorage:try{return new ca(e)}catch(e){this.logger.verbose(e);break}}return this.cacheConfig.cacheLocation=X.MemoryStorage,new xo},t.prototype.setupTemporaryCacheStorage=function(e,t){switch(t){case X.LocalStorage:case X.SessionStorage:try{return new ca(e||X.SessionStorage)}catch(e){return this.logger.verbose(e),this.internalStorage}case X.MemoryStorage:default:return this.internalStorage}},t.prototype.migrateCacheEntries=function(){var e=this,t=k.CACHE_PREFIX+"."+E.ID_TOKEN,n=k.CACHE_PREFIX+"."+E.CLIENT_INFO,r=k.CACHE_PREFIX+"."+E.ERROR,o=k.CACHE_PREFIX+"."+E.ERROR_DESC,i=[this.browserStorage.getItem(t),this.browserStorage.getItem(n),this.browserStorage.getItem(r),this.browserStorage.getItem(o)];[E.ID_TOKEN,E.CLIENT_INFO,E.ERROR,E.ERROR_DESC].forEach((function(t,n){return e.migrateCacheEntry(t,i[n])}))},t.prototype.migrateCacheEntry=function(e,t){t&&this.setTemporaryCache(e,t,!0)},t.prototype.createKeyMaps=function(){var e=this;this.logger.trace("BrowserCacheManager - createKeyMaps called.");var t=this.getItem(te.ACCOUNT_KEYS),n=this.getItem(te.TOKEN_KEYS+"."+this.clientId);t&&n?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach((function(t){var n;if(e.isCredentialKey(t)&&(n=e.getItem(t))){var r=e.validateAndParseJson(n);if(r&&r.hasOwnProperty("credentialType"))switch(r.credentialType){case q.ID_TOKEN:if(Wo.isIdTokenEntity(r)){e.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - idToken with key: "+t+" found, saving key to token key map");var o=$i.toObject(new Wo,r),i=e.updateCredentialCacheKey(t,o);return void e.addTokenKey(i,q.ID_TOKEN)}e.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),e.logger.tracePii("BrowserCacheManager:createKeyMaps - failed idToken validation on key: "+t);break;case q.ACCESS_TOKEN:case q.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(Zi.isAccessTokenEntity(r)){e.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - accessToken with key: "+t+" found, saving key to token key map");var a=$i.toObject(new Zi,r);return i=e.updateCredentialCacheKey(t,a),void e.addTokenKey(i,q.ACCESS_TOKEN)}e.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),e.logger.tracePii("BrowserCacheManager:createKeyMaps - failed accessToken validation on key: "+t);break;case q.REFRESH_TOKEN:if(ea.isRefreshTokenEntity(r)){e.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - refreshToken with key: "+t+" found, saving key to token key map");var s=$i.toObject(new ea,r);return i=e.updateCredentialCacheKey(t,s),void e.addTokenKey(i,q.REFRESH_TOKEN)}e.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),e.logger.tracePii("BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: "+t)}}if(e.isAccountKey(t)&&(n=e.getItem(t))){var c=e.validateAndParseJson(n);c&&zi.isAccountEntity(c)&&(e.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - account with key: "+t+" found, saving key to account key map"),e.addAccountKeyToMap(t))}}))},t.prototype.validateAndParseJson=function(e){try{var t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch(e){return null}},t.prototype.getItem=function(e){return this.browserStorage.getItem(e)},t.prototype.setItem=function(e,t){this.browserStorage.setItem(e,t)},t.prototype.getAccount=function(e){this.logger.trace("BrowserCacheManager.getAccount called");var t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;var n=this.validateAndParseJson(t);return n&&zi.isAccountEntity(n)?$i.toObject(new zi,n):(this.removeAccountKeyFromMap(e),null)},t.prototype.setAccount=function(e){this.logger.trace("BrowserCacheManager.setAccount called");var t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)},t.prototype.getAccountKeys=function(){this.logger.trace("BrowserCacheManager.getAccountKeys called");var e=this.getItem(te.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])},t.prototype.addAccountKeyToMap=function(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: "+e);var t=this.getAccountKeys();-1===t.indexOf(e)?(t.push(e),this.setItem(te.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")},t.prototype.removeAccountKeyFromMap=function(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: "+e);var t=this.getAccountKeys(),n=t.indexOf(e);n>-1?(t.splice(n,1),this.setItem(te.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")},t.prototype.removeAccount=function(t){return l(this,void 0,void 0,(function(){return d(this,(function(n){return e.prototype.removeAccount.call(this,t),this.removeAccountKeyFromMap(t),[2]}))}))},t.prototype.removeIdToken=function(t){e.prototype.removeIdToken.call(this,t),this.removeTokenKey(t,q.ID_TOKEN)},t.prototype.removeAccessToken=function(t){return l(this,void 0,void 0,(function(){return d(this,(function(n){return e.prototype.removeAccessToken.call(this,t),this.removeTokenKey(t,q.ACCESS_TOKEN),[2]}))}))},t.prototype.removeRefreshToken=function(t){e.prototype.removeRefreshToken.call(this,t),this.removeTokenKey(t,q.REFRESH_TOKEN)},t.prototype.getTokenKeys=function(){this.logger.trace("BrowserCacheManager.getTokenKeys called");var e=this.getItem(te.TOKEN_KEYS+"."+this.clientId);if(e){var t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}},t.prototype.addTokenKey=function(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");var n=this.getTokenKeys();switch(t){case q.ID_TOKEN:-1===n.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(e));break;case q.ACCESS_TOKEN:-1===n.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(e));break;case q.REFRESH_TOKEN:-1===n.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(e));break;default:this.logger.error("BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: "+t),Sn.createUnexpectedCredentialTypeError()}this.setItem(te.TOKEN_KEYS+"."+this.clientId,JSON.stringify(n))},t.prototype.removeTokenKey=function(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");var n=this.getTokenKeys();switch(t){case q.ID_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: "+e+" from map");var r=n.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case q.ACCESS_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: "+e+" from map");var o=n.accessToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case q.REFRESH_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: "+e+" from map");var i=n.refreshToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:this.logger.error("BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: "+t),Sn.createUnexpectedCredentialTypeError()}this.setItem(te.TOKEN_KEYS+"."+this.clientId,JSON.stringify(n))},t.prototype.getIdTokenCredential=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,q.ID_TOKEN),null;var n=this.validateAndParseJson(t);return n&&Wo.isIdTokenEntity(n)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),$i.toObject(new Wo,n)):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,q.ID_TOKEN),null)},t.prototype.setIdTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,q.ID_TOKEN)},t.prototype.getAccessTokenCredential=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,q.ACCESS_TOKEN),null;var n=this.validateAndParseJson(t);return n&&Zi.isAccessTokenEntity(n)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),$i.toObject(new Zi,n)):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,q.ACCESS_TOKEN),null)},t.prototype.setAccessTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,q.ACCESS_TOKEN)},t.prototype.getRefreshTokenCredential=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,q.REFRESH_TOKEN),null;var n=this.validateAndParseJson(t);return n&&ea.isRefreshTokenEntity(n)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),$i.toObject(new ea,n)):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,q.REFRESH_TOKEN),null)},t.prototype.setRefreshTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,q.REFRESH_TOKEN)},t.prototype.getAppMetadata=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;var n=this.validateAndParseJson(t);return n&&ta.isAppMetadataEntity(e,n)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),$i.toObject(new ta,n)):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)},t.prototype.setAppMetadata=function(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");var t=e.generateAppMetadataKey();this.setItem(t,JSON.stringify(e))},t.prototype.getServerTelemetry=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;var n=this.validateAndParseJson(t);return n&&na.isServerTelemetryEntity(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),$i.toObject(new na,n)):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)},t.prototype.setServerTelemetry=function(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))},t.prototype.getAuthorityMetadata=function(e){var t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;var n=this.validateAndParseJson(t);return n&&ra.isAuthorityMetadataEntity(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),$i.toObject(new ra,n)):null},t.prototype.getAuthorityMetadataKeys=function(){var e=this;return this.internalStorage.getKeys().filter((function(t){return e.isAuthorityMetadata(t)}))},t.prototype.setWrapperMetadata=function(e,t){this.internalStorage.setItem(ne.WRAPPER_SKU,e),this.internalStorage.setItem(ne.WRAPPER_VER,t)},t.prototype.getWrapperMetadata=function(){return[this.internalStorage.getItem(ne.WRAPPER_SKU)||k.EMPTY_STRING,this.internalStorage.getItem(ne.WRAPPER_VER)||k.EMPTY_STRING]},t.prototype.setAuthorityMetadata=function(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))},t.prototype.getActiveAccount=function(){var e=this.generateCacheKey(E.ACTIVE_ACCOUNT_FILTERS),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");var n=this.generateCacheKey(E.ACTIVE_ACCOUNT),r=this.getItem(n);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;var o=this.getAccountInfoByFilter({localAccountId:r})[0]||null;return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(o),o):null}var i=this.validateAndParseJson(t);return i?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoByFilter({homeAccountId:i.homeAccountId,localAccountId:i.localAccountId})[0]||null):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)},t.prototype.setActiveAccount=function(e){var t=this.generateCacheKey(E.ACTIVE_ACCOUNT_FILTERS),n=this.generateCacheKey(E.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");var r={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId};this.browserStorage.setItem(t,JSON.stringify(r)),this.browserStorage.setItem(n,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(n)},t.prototype.getAccountInfoByFilter=function(e){var t=this.getAllAccounts();return this.logger.trace("BrowserCacheManager.getAccountInfoByFilter: total "+t.length+" accounts found"),t.filter((function(t){return!(e.username&&e.username.toLowerCase()!==t.username.toLowerCase()||e.homeAccountId&&e.homeAccountId!==t.homeAccountId||e.localAccountId&&e.localAccountId!==t.localAccountId||e.tenantId&&e.tenantId!==t.tenantId||e.environment&&e.environment!==t.environment)}))},t.prototype.getAccountInfoByHints=function(e,t){var n=this.getAllAccounts().filter((function(n){if(t){var r=n.idTokenClaims&&n.idTokenClaims.sid;return t===r}return!!e&&e===n.username}));if(1===n.length)return n[0];if(n.length>1)throw Sn.createMultipleMatchingAccountsInCacheError();return null},t.prototype.getThrottlingCache=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;var n=this.validateAndParseJson(t);return n&&oa.isThrottlingEntity(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),$i.toObject(new oa,n)):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)},t.prototype.setThrottlingCache=function(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))},t.prototype.getTemporaryCache=function(e,t){var n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){var r=this.getItemCookie(n);if(r)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),r}var o=this.temporaryCacheStorage.getItem(n);if(!o){if(this.cacheConfig.cacheLocation===X.LocalStorage){var i=this.browserStorage.getItem(n);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o},t.prototype.setTemporaryCache=function(e,t,n){var r=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(r,t))},t.prototype.removeItem=function(e){this.browserStorage.removeItem(e),this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))},t.prototype.containsKey=function(e){return this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e)},t.prototype.getKeys=function(){return p(this.browserStorage.getKeys(),this.temporaryCacheStorage.getKeys())},t.prototype.clear=function(){return l(this,void 0,void 0,(function(){var e=this;return d(this,(function(t){switch(t.label){case 0:return[4,this.removeAllAccounts()];case 1:return t.sent(),this.removeAppMetadata(),this.getKeys().forEach((function(t){!e.browserStorage.containsKey(t)&&!e.temporaryCacheStorage.containsKey(t)||-1===t.indexOf(k.CACHE_PREFIX)&&-1===t.indexOf(e.clientId)||e.removeItem(t)})),this.internalStorage.clear(),[2]}}))}))},t.prototype.clearTokensAndKeysWithClaims=function(){return l(this,void 0,void 0,(function(){var e,t,n=this;return d(this,(function(r){switch(r.label){case 0:return this.logger.trace("BrowserCacheManager.clearTokensAndKeysWithClaims called"),e=this.getTokenKeys(),t=[],e.accessToken.forEach((function(e){var r=n.getAccessTokenCredential(e);(null==r?void 0:r.requestedClaimsHash)&&e.includes(r.requestedClaimsHash.toLowerCase())&&t.push(n.removeAccessToken(e))})),[4,Promise.all(t)];case 1:return r.sent(),t.length>0&&this.logger.warning(t.length+" access tokens with claims in the cache keys have been removed from the cache."),[2]}}))}))},t.prototype.setItemCookie=function(e,t,n){var r=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/;SameSite=Lax;";n&&(r+="expires="+this.getCookieExpirationTime(n)+";"),this.cacheConfig.secureCookies&&(r+="Secure;"),document.cookie=r},t.prototype.getItemCookie=function(e){for(var t=encodeURIComponent(e)+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return decodeURIComponent(o.substring(t.length,o.length))}return k.EMPTY_STRING},t.prototype.clearMsalCookies=function(){var e=this,t=k.CACHE_PREFIX+"."+this.clientId;document.cookie.split(";").forEach((function(n){for(;" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t)){var r=n.split("=")[0];e.clearItemCookie(r)}}))},t.prototype.clearItemCookie=function(e){this.setItemCookie(e,k.EMPTY_STRING,-1)},t.prototype.getCookieExpirationTime=function(e){var t=new Date;return new Date(t.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()},t.prototype.getCache=function(){return this.browserStorage},t.prototype.setCache=function(){},t.prototype.generateCacheKey=function(e){return this.validateAndParseJson(e)?JSON.stringify(e):An.startsWith(e,k.CACHE_PREFIX)||An.startsWith(e,E.ADAL_ID_TOKEN)?e:k.CACHE_PREFIX+"."+this.clientId+"."+e},t.prototype.generateAuthorityKey=function(e){var t=ia.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(ee.AUTHORITY+"."+t)},t.prototype.generateNonceKey=function(e){var t=ia.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(ee.NONCE_IDTOKEN+"."+t)},t.prototype.generateStateKey=function(e){var t=ia.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(ee.REQUEST_STATE+"."+t)},t.prototype.getCachedAuthority=function(e){var t=this.generateStateKey(e),n=this.getTemporaryCache(t);if(!n)return null;var r=this.generateAuthorityKey(n);return this.getTemporaryCache(r)},t.prototype.updateCacheEntries=function(e,t,n,r,o){this.logger.trace("BrowserCacheManager.updateCacheEntries called");var i=this.generateStateKey(e);this.setTemporaryCache(i,e,!1);var a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);var s=this.generateAuthorityKey(e);if(this.setTemporaryCache(s,n,!1),o){var c={credential:o.homeAccountId,type:Gi.HOME_ACCOUNT_ID};this.setTemporaryCache(ee.CCS_CREDENTIAL,JSON.stringify(c),!0)}else An.isEmpty(r)||(c={credential:r,type:Gi.UPN},this.setTemporaryCache(ee.CCS_CREDENTIAL,JSON.stringify(c),!0))},t.prototype.resetRequestCache=function(e){var t=this;this.logger.trace("BrowserCacheManager.resetRequestCache called"),An.isEmpty(e)||this.getKeys().forEach((function(n){-1!==n.indexOf(e)&&t.removeItem(n)})),e&&(this.removeItem(this.generateStateKey(e)),this.removeItem(this.generateNonceKey(e)),this.removeItem(this.generateAuthorityKey(e))),this.removeItem(this.generateCacheKey(ee.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(ee.ORIGIN_URI)),this.removeItem(this.generateCacheKey(ee.URL_HASH)),this.removeItem(this.generateCacheKey(ee.CORRELATION_ID)),this.removeItem(this.generateCacheKey(ee.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(ee.NATIVE_REQUEST)),this.setInteractionInProgress(!1)},t.prototype.cleanRequestByState=function(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){var t=this.generateStateKey(e),n=this.temporaryCacheStorage.getItem(t);this.logger.infoPii("BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: "+n),this.resetRequestCache(n||k.EMPTY_STRING)}this.clearMsalCookies()},t.prototype.cleanRequestByInteractionType=function(e){var t=this;this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach((function(n){if(-1!==n.indexOf(ee.REQUEST_STATE)){var r=t.temporaryCacheStorage.getItem(n);if(r){var o=la.extractBrowserRequestState(t.cryptoImpl,r);o&&o.interactionType===e&&(t.logger.infoPii("BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: "+r),t.resetRequestCache(r))}}})),this.clearMsalCookies(),this.setInteractionInProgress(!1)},t.prototype.cacheCodeRequest=function(e,t){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");var n=t.base64Encode(JSON.stringify(e));this.setTemporaryCache(ee.REQUEST_PARAMS,n,!0)},t.prototype.getCachedRequest=function(e,t){this.logger.trace("BrowserCacheManager.getCachedRequest called");var n=this.getTemporaryCache(ee.REQUEST_PARAMS,!0);if(!n)throw ho.createNoTokenRequestCacheError();var r=this.validateAndParseJson(t.base64Decode(n));if(!r)throw ho.createUnableToParseTokenRequestCacheError();if(this.removeItem(this.generateCacheKey(ee.REQUEST_PARAMS)),An.isEmpty(r.authority)){var o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw ho.createNoCachedAuthorityError();r.authority=i}return r},t.prototype.getCachedNativeRequest=function(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");var e=this.getTemporaryCache(ee.NATIVE_REQUEST,!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)},t.prototype.isInteractionInProgress=function(e){var t=this.getInteractionInProgress();return e?t===this.clientId:!!t},t.prototype.getInteractionInProgress=function(){var e=k.CACHE_PREFIX+"."+ee.INTERACTION_STATUS_KEY;return this.getTemporaryCache(e,!1)},t.prototype.setInteractionInProgress=function(e){var t=k.CACHE_PREFIX+"."+ee.INTERACTION_STATUS_KEY;if(e){if(this.getInteractionInProgress())throw ho.createInteractionInProgressError();this.setTemporaryCache(t,this.clientId,!1)}else e||this.getInteractionInProgress()!==this.clientId||this.removeItem(t)},t.prototype.getLegacyLoginHint=function(){var e=this.getTemporaryCache(E.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(E.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));var t=this.getTemporaryCache(E.ID_TOKEN,!0);t&&(this.removeItem(this.generateCacheKey(E.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));var n=t||e;if(n){var r=new Vi(n,this.cryptoImpl);if(r.claims&&r.claims.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),r.claims.preferred_username;if(r.claims&&r.claims.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),r.claims.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null},t.prototype.updateCredentialCacheKey=function(e,t){var n=t.generateCredentialKey();if(e!==n){var r=this.getItem(e);if(r)return this.removeItem(e),this.setItem(n,r),this.logger.verbose("Updated an outdated "+t.credentialType+" cache key"),n;this.logger.error("Attempted to update an outdated "+t.credentialType+" cache key but no item matching the outdated key was found in storage")}return e},t.prototype.getRedirectRequestContext=function(){return this.getTemporaryCache(ee.REDIRECT_CONTEXT,!0)},t.prototype.setRedirectRequestContext=function(e){this.setTemporaryCache(ee.REDIRECT_CONTEXT,e,!0)},t}($i);!function(e){e.AAD="AAD",e.OIDC="OIDC"}(aa||(aa={})),function(e){e[e.None=0]="None",e.AzurePublic="https://login.microsoftonline.com",e.AzurePpe="https://login.windows-ppe.net",e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureUsGovernment="https://login.microsoftonline.us"}(sa||(sa={}));var ha,pa,fa={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},ma={loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:Lo.Info,correlationId:k.EMPTY_STRING},ga={claimsBasedCachingEnabled:!0},ya={sendGetRequestAsync:function(){return v(this,void 0,void 0,(function(){return _(this,(function(e){throw he.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented")}))}))},sendPostRequestAsync:function(){return v(this,void 0,void 0,(function(){return _(this,(function(e){throw he.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented")}))}))}},va={sku:k.SKU,version:Yi,cpu:k.EMPTY_STRING,os:k.EMPTY_STRING},_a={clientSecret:k.EMPTY_STRING,clientAssertion:void 0},ba={azureCloudInstance:sa.None,tenant:""+k.DEFAULT_COMMON_TENANT},Ca={application:{appName:"",appVersion:""}},Ea={sendGetRequestAsync:function(){return Promise.reject(he.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented for the Network interface."))},sendPostRequestAsync:function(){return Promise.reject(he.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented for the Network interface."))}},Ta=function(){function e(){}return e.prototype.sendGetRequestAsync=function(e,t){return l(this,void 0,void 0,(function(){var n,r,o;return d(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,fetch(e,{method:Z.GET,headers:this.getFetchHeaders(t)})];case 1:return n=i.sent(),[3,3];case 2:throw r=i.sent(),window.navigator.onLine?ho.createGetRequestFailedError(r,e):ho.createNoNetworkConnectivityError();case 3:return i.trys.push([3,5,,6]),o={headers:this.getHeaderDict(n.headers)},[4,n.json()];case 4:return[2,(o.body=i.sent(),o.status=n.status,o)];case 5:throw i.sent(),ho.createFailedToParseNetworkResponseError(e);case 6:return[2]}}))}))},e.prototype.sendPostRequestAsync=function(e,t){return l(this,void 0,void 0,(function(){var n,r,o,i;return d(this,(function(a){switch(a.label){case 0:n=t&&t.body||k.EMPTY_STRING,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,fetch(e,{method:Z.POST,headers:this.getFetchHeaders(t),body:n})];case 2:return r=a.sent(),[3,4];case 3:throw o=a.sent(),window.navigator.onLine?ho.createPostRequestFailedError(o,e):ho.createNoNetworkConnectivityError();case 4:return a.trys.push([4,6,,7]),i={headers:this.getHeaderDict(r.headers)},[4,r.json()];case 5:return[2,(i.body=a.sent(),i.status=r.status,i)];case 6:throw a.sent(),ho.createFailedToParseNetworkResponseError(e);case 7:return[2]}}))}))},e.prototype.getFetchHeaders=function(e){var t=new Headers;if(!e||!e.headers)return t;var n=e.headers;return Object.keys(n).forEach((function(e){t.append(e,n[e])})),t},e.prototype.getHeaderDict=function(e){var t={};return e.forEach((function(e,n){t[n]=e})),t},e}(),wa=function(){function e(){}return e.prototype.sendGetRequestAsync=function(e,t){return l(this,void 0,void 0,(function(){return d(this,(function(n){return[2,this.sendRequestAsync(e,Z.GET,t)]}))}))},e.prototype.sendPostRequestAsync=function(e,t){return l(this,void 0,void 0,(function(){return d(this,(function(n){return[2,this.sendRequestAsync(e,Z.POST,t)]}))}))},e.prototype.sendRequestAsync=function(e,t,n){var r=this;return new Promise((function(o,i){var a=new XMLHttpRequest;if(a.open(t,e,!0),r.setXhrHeaders(a,n),a.onload=function(){(a.status<200||a.status>=300)&&(t===Z.POST?i(ho.createPostRequestFailedError("Failed with status "+a.status,e)):i(ho.createGetRequestFailedError("Failed with status "+a.status,e)));try{var n=JSON.parse(a.responseText),s={headers:r.getHeaderDict(a),body:n,status:a.status};o(s)}catch(t){i(ho.createFailedToParseNetworkResponseError(e))}},a.onerror=function(){window.navigator.onLine?t===Z.POST?i(ho.createPostRequestFailedError("Failed with status "+a.status,e)):i(ho.createGetRequestFailedError("Failed with status "+a.status,e)):i(ho.createNoNetworkConnectivityError())},t===Z.POST&&n&&n.body)a.send(n.body);else{if(t!==Z.GET)throw ho.createHttpMethodNotImplementedError(t);a.send()}}))},e.prototype.setXhrHeaders=function(e,t){if(t&&t.headers){var n=t.headers;Object.keys(n).forEach((function(t){e.setRequestHeader(t,n[t])}))}},e.prototype.getHeaderDict=function(e){var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return t.forEach((function(e){var t=e.split(": "),r=t.shift(),o=t.join(": ");r&&o&&(n[r]=o)})),n},e}(),Ia=function(){function e(){}return e.clearHash=function(e){e.location.hash=k.EMPTY_STRING,"function"==typeof e.history.replaceState&&e.history.replaceState(null,k.EMPTY_STRING,""+e.location.origin+e.location.pathname+e.location.search)},e.replaceHash=function(e){var t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):k.EMPTY_STRING},e.isInIframe=function(){return window.parent!==window},e.isInPopup=function(){return"undefined"!=typeof window&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(Ce+".")},e.getCurrentUri=function(){return window.location.href.split("?")[0].split("#")[0]},e.getHomepage=function(){var e=new ua(window.location.href).getUrlComponents();return e.Protocol+"//"+e.HostNameAndPort+"/"},e.getBrowserNetworkClient=function(){return window.fetch&&window.Headers?new Ta:new wa},e.blockReloadInHiddenIframes=function(){if(ua.hashContainsKnownProperties(window.location.hash)&&e.isInIframe())throw ho.createBlockReloadInHiddenIframeError()},e.blockRedirectInIframe=function(t,n){var r=e.isInIframe();if(t===oe.Redirect&&r&&!n)throw ho.createRedirectInIframeError(r)},e.blockAcquireTokenInPopups=function(){if(e.isInPopup())throw ho.createBlockAcquireTokenInPopupsError()},e.blockNonBrowserEnvironment=function(e){if(!e)throw ho.createNonBrowserEnvironmentError()},e.blockNativeBrokerCalledBeforeInitialized=function(e,t){if(e&&!t)throw ho.createNativeBrokerCalledBeforeInitialize()},e.detectIEOrEdge=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/"),r=e.indexOf("Edge/");return t>0||n>0||r>0},e}(),ka=function(){function e(){}return e.prototype.navigateInternal=function(t,n){return e.defaultNavigateWindow(t,n)},e.prototype.navigateExternal=function(t,n){return e.defaultNavigateWindow(t,n)},e.defaultNavigateWindow=function(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((function(e){setTimeout((function(){e(!0)}),t.timeout)}))},e}(),Sa=6e3,Aa="@azure/msal-browser",Ra="2.38.3";(pa=ha||(ha={})).INITIALIZE_START="msal:initializeStart",pa.INITIALIZE_END="msal:initializeEnd",pa.ACCOUNT_ADDED="msal:accountAdded",pa.ACCOUNT_REMOVED="msal:accountRemoved",pa.LOGIN_START="msal:loginStart",pa.LOGIN_SUCCESS="msal:loginSuccess",pa.LOGIN_FAILURE="msal:loginFailure",pa.ACQUIRE_TOKEN_START="msal:acquireTokenStart",pa.ACQUIRE_TOKEN_SUCCESS="msal:acquireTokenSuccess",pa.ACQUIRE_TOKEN_FAILURE="msal:acquireTokenFailure",pa.ACQUIRE_TOKEN_NETWORK_START="msal:acquireTokenFromNetworkStart",pa.SSO_SILENT_START="msal:ssoSilentStart",pa.SSO_SILENT_SUCCESS="msal:ssoSilentSuccess",pa.SSO_SILENT_FAILURE="msal:ssoSilentFailure",pa.ACQUIRE_TOKEN_BY_CODE_START="msal:acquireTokenByCodeStart",pa.ACQUIRE_TOKEN_BY_CODE_SUCCESS="msal:acquireTokenByCodeSuccess",pa.ACQUIRE_TOKEN_BY_CODE_FAILURE="msal:acquireTokenByCodeFailure",pa.HANDLE_REDIRECT_START="msal:handleRedirectStart",pa.HANDLE_REDIRECT_END="msal:handleRedirectEnd",pa.POPUP_OPENED="msal:popupOpened",pa.LOGOUT_START="msal:logoutStart",pa.LOGOUT_SUCCESS="msal:logoutSuccess",pa.LOGOUT_FAILURE="msal:logoutFailure",pa.LOGOUT_END="msal:logoutEnd",pa.RESTORE_FROM_BFCACHE="msal:restoreFromBFCache";var Oa,Na=function(){function e(e,t){this.eventCallbacks=new Map,this.logger=e,this.browserCrypto=t,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}return e.prototype.addEventCallback=function(e){if("undefined"!=typeof window){var t=this.browserCrypto.createNewGuid();return this.eventCallbacks.set(t,e),this.logger.verbose("Event callback registered with id: "+t),t}return null},e.prototype.removeEventCallback=function(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback "+e+" removed.")},e.prototype.enableAccountStorageEvents=function(){"undefined"!=typeof window&&(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))},e.prototype.disableAccountStorageEvents=function(){"undefined"!=typeof window&&(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))},e.prototype.emitEvent=function(e,t,n,r){var o=this;if("undefined"!=typeof window){var i={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};this.logger.info("Emitting event: "+e),this.eventCallbacks.forEach((function(t,n){o.logger.verbose("Emitting event to callback "+n+": "+e),t.apply(null,[i])}))}},e.prototype.handleAccountCacheChange=function(e){try{var t=e.newValue||e.oldValue;if(!t)return;var n=JSON.parse(t);if("object"!=typeof n||!zi.isAccountEntity(n))return;var r=$i.toObject(new zi,n).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(ha.ACCOUNT_ADDED,void 0,r)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(ha.ACCOUNT_REMOVED,void 0,r))}catch(e){return}},e}(),Pa=function(){function e(){}return e.generateThrottlingStorageKey=function(e){return $+"."+JSON.stringify(e)},e.preProcess=function(t,n){var r,o=e.generateThrottlingStorageKey(n),i=t.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now())return void t.removeItem(o);throw new pe((null===(r=i.errorCodes)||void 0===r?void 0:r.join(" "))||k.EMPTY_STRING,i.errorMessage,i.subError)}},e.postProcess=function(t,n,r){if(e.checkResponseStatus(r)||e.checkResponseForRetryAfter(r)){var o={throttleTime:e.calculateThrottleTime(parseInt(r.headers[C.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};t.setThrottlingCache(e.generateThrottlingStorageKey(n),o)}},e.checkResponseStatus=function(e){return 429===e.status||e.status>=500&&e.status<600},e.checkResponseForRetryAfter=function(e){return!!e.headers&&e.headers.hasOwnProperty(C.RETRY_AFTER)&&(e.status<200||e.status>=300)},e.calculateThrottleTime=function(e){var t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||60),n+3600))},e.removeThrottle=function(e,t,n,r){var o={clientId:t,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:r,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},i=this.generateThrottlingStorageKey(o);e.removeItem(i)},e}(),Ma=function(){function e(e,t){this.networkClient=e,this.cacheManager=t}return e.prototype.sendPostRequest=function(e,t,n){return v(this,void 0,void 0,(function(){var r,o;return _(this,(function(i){switch(i.label){case 0:Pa.preProcess(this.cacheManager,e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.networkClient.sendPostRequestAsync(t,n)];case 2:return r=i.sent(),[3,4];case 3:throw(o=i.sent())instanceof he?o:Sn.createNetworkError(t,o);case 4:return Pa.postProcess(this.cacheManager,e,r),[2,r]}}))}))},e}(),Da=function(){function e(){}return e.validateRedirectUri=function(e){if(An.isEmpty(e))throw Hi.createRedirectUriEmptyError()},e.validatePrompt=function(e){var t=[];for(var n in O)t.push(O[n]);if(t.indexOf(e)<0)throw Hi.createInvalidPromptError(e)},e.validateClaims=function(e){try{JSON.parse(e)}catch(e){throw Hi.createInvalidClaimsRequestError()}},e.validateCodeChallengeParams=function(e,t){if(An.isEmpty(e)||An.isEmpty(t))throw Hi.createInvalidCodeChallengeParamsError();this.validateCodeChallengeMethod(t)},e.validateCodeChallengeMethod=function(e){if([F.PLAIN,F.S256].indexOf(e)<0)throw Hi.createInvalidCodeChallengeMethodError()},e.sanitizeEQParams=function(e,t){return e?(t.forEach((function(t,n){e[n]&&delete e[n]})),Object.fromEntries(Object.entries(e).filter((function(e){return""!==e[1]})))):{}},e}(),qa=function(){function e(){this.parameters=new Map}return e.prototype.addResponseTypeCode=function(){this.parameters.set(w.RESPONSE_TYPE,encodeURIComponent(k.CODE_RESPONSE_TYPE))},e.prototype.addResponseTypeForTokenAndIdToken=function(){this.parameters.set(w.RESPONSE_TYPE,encodeURIComponent(k.TOKEN_RESPONSE_TYPE+" "+k.ID_TOKEN_RESPONSE_TYPE))},e.prototype.addResponseMode=function(e){this.parameters.set(w.RESPONSE_MODE,encodeURIComponent(e||N.QUERY))},e.prototype.addNativeBroker=function(){this.parameters.set(w.NATIVE_BROKER,encodeURIComponent("1"))},e.prototype.addScopes=function(e,t){void 0===t&&(t=!0);var n=t?b(e||[],S):e||[],r=new ji(n);this.parameters.set(w.SCOPE,encodeURIComponent(r.printScopes()))},e.prototype.addClientId=function(e){this.parameters.set(w.CLIENT_ID,encodeURIComponent(e))},e.prototype.addRedirectUri=function(e){Da.validateRedirectUri(e),this.parameters.set(w.REDIRECT_URI,encodeURIComponent(e))},e.prototype.addPostLogoutRedirectUri=function(e){Da.validateRedirectUri(e),this.parameters.set(w.POST_LOGOUT_URI,encodeURIComponent(e))},e.prototype.addIdTokenHint=function(e){this.parameters.set(w.ID_TOKEN_HINT,encodeURIComponent(e))},e.prototype.addDomainHint=function(e){this.parameters.set(R.DOMAIN_HINT,encodeURIComponent(e))},e.prototype.addLoginHint=function(e){this.parameters.set(R.LOGIN_HINT,encodeURIComponent(e))},e.prototype.addCcsUpn=function(e){this.parameters.set(C.CCS_HEADER,encodeURIComponent("UPN:"+e))},e.prototype.addCcsOid=function(e){this.parameters.set(C.CCS_HEADER,encodeURIComponent("Oid:"+e.uid+"@"+e.utid))},e.prototype.addSid=function(e){this.parameters.set(R.SID,encodeURIComponent(e))},e.prototype.addClaims=function(e,t){var n=this.addClientCapabilitiesToClaims(e,t);Da.validateClaims(n),this.parameters.set(w.CLAIMS,encodeURIComponent(n))},e.prototype.addCorrelationId=function(e){this.parameters.set(w.CLIENT_REQUEST_ID,encodeURIComponent(e))},e.prototype.addLibraryInfo=function(e){this.parameters.set(w.X_CLIENT_SKU,e.sku),this.parameters.set(w.X_CLIENT_VER,e.version),e.os&&this.parameters.set(w.X_CLIENT_OS,e.os),e.cpu&&this.parameters.set(w.X_CLIENT_CPU,e.cpu)},e.prototype.addApplicationTelemetry=function(e){(null==e?void 0:e.appName)&&this.parameters.set(w.X_APP_NAME,e.appName),(null==e?void 0:e.appVersion)&&this.parameters.set(w.X_APP_VER,e.appVersion)},e.prototype.addPrompt=function(e){Da.validatePrompt(e),this.parameters.set(""+w.PROMPT,encodeURIComponent(e))},e.prototype.addState=function(e){An.isEmpty(e)||this.parameters.set(w.STATE,encodeURIComponent(e))},e.prototype.addNonce=function(e){this.parameters.set(w.NONCE,encodeURIComponent(e))},e.prototype.addCodeChallengeParams=function(e,t){if(Da.validateCodeChallengeParams(e,t),!e||!t)throw Hi.createInvalidCodeChallengeParamsError();this.parameters.set(w.CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(w.CODE_CHALLENGE_METHOD,encodeURIComponent(t))},e.prototype.addAuthorizationCode=function(e){this.parameters.set(w.CODE,encodeURIComponent(e))},e.prototype.addDeviceCode=function(e){this.parameters.set(w.DEVICE_CODE,encodeURIComponent(e))},e.prototype.addRefreshToken=function(e){this.parameters.set(w.REFRESH_TOKEN,encodeURIComponent(e))},e.prototype.addCodeVerifier=function(e){this.parameters.set(w.CODE_VERIFIER,encodeURIComponent(e))},e.prototype.addClientSecret=function(e){this.parameters.set(w.CLIENT_SECRET,encodeURIComponent(e))},e.prototype.addClientAssertion=function(e){An.isEmpty(e)||this.parameters.set(w.CLIENT_ASSERTION,encodeURIComponent(e))},e.prototype.addClientAssertionType=function(e){An.isEmpty(e)||this.parameters.set(w.CLIENT_ASSERTION_TYPE,encodeURIComponent(e))},e.prototype.addOboAssertion=function(e){this.parameters.set(w.OBO_ASSERTION,encodeURIComponent(e))},e.prototype.addRequestTokenUse=function(e){this.parameters.set(w.REQUESTED_TOKEN_USE,encodeURIComponent(e))},e.prototype.addGrantType=function(e){this.parameters.set(w.GRANT_TYPE,encodeURIComponent(e))},e.prototype.addClientInfo=function(){this.parameters.set("client_info","1")},e.prototype.addExtraQueryParameters=function(e){var t=this,n=Da.sanitizeEQParams(e,this.parameters);Object.keys(n).forEach((function(n){t.parameters.set(n,e[n])}))},e.prototype.addClientCapabilitiesToClaims=function(e,t){var n;if(e)try{n=JSON.parse(e)}catch(e){throw Hi.createInvalidClaimsRequestError()}else n={};return t&&t.length>0&&(n.hasOwnProperty(I.ACCESS_TOKEN)||(n[I.ACCESS_TOKEN]={}),n[I.ACCESS_TOKEN][I.XMS_CC]={values:t}),JSON.stringify(n)},e.prototype.addUsername=function(e){this.parameters.set(K.username,encodeURIComponent(e))},e.prototype.addPassword=function(e){this.parameters.set(K.password,encodeURIComponent(e))},e.prototype.addPopToken=function(e){An.isEmpty(e)||(this.parameters.set(w.TOKEN_TYPE,j.POP),this.parameters.set(w.REQ_CNF,encodeURIComponent(e)))},e.prototype.addSshJwk=function(e){An.isEmpty(e)||(this.parameters.set(w.TOKEN_TYPE,j.SSH),this.parameters.set(w.REQ_CNF,encodeURIComponent(e)))},e.prototype.addServerTelemetry=function(e){this.parameters.set(w.X_CLIENT_CURR_TELEM,e.generateCurrentRequestHeaderValue()),this.parameters.set(w.X_CLIENT_LAST_TELEM,e.generateLastRequestHeaderValue())},e.prototype.addThrottling=function(){this.parameters.set(w.X_MS_LIB_CAPABILITY,"retry-after, h429")},e.prototype.addLogoutHint=function(e){this.parameters.set(w.LOGOUT_HINT,encodeURIComponent(e))},e.prototype.createQueryString=function(){var e=new Array;return this.parameters.forEach((function(t,n){e.push(n+"="+t)})),e.join("&")},e}(),xa=function(){function e(e,t){this.config=function(e){var t,n=e.authOptions,r=e.systemOptions,o=e.loggerOptions,i=e.cacheOptions,a=e.storageInterface,s=e.networkInterface,c=e.cryptoInterface,u=e.clientCredentials,l=e.libraryInfo,d=e.telemetry,h=e.serverTelemetryManager,p=e.persistencePlugin,f=e.serializableCache,m=y(y({},ma),o);return{authOptions:(t=n,y({clientCapabilities:[],azureCloudOptions:ba,skipAuthorityMetadataCache:!1},t)),systemOptions:y(y({},fa),r),loggerOptions:m,cacheOptions:y(y({},ga),i),storageInterface:a||new Ji(n.clientId,zo,new jo(m)),networkInterface:s||ya,cryptoInterface:c||zo,clientCredentials:u||_a,libraryInfo:y(y({},va),l),telemetry:y(y({},Ca),d),serverTelemetryManager:h||null,persistencePlugin:p||null,serializableCache:f||null}}(e),this.logger=new jo(this.config.loggerOptions,Wi,Yi),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new Ma(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}return e.prototype.createTokenRequestHeaders=function(e){var t={};if(t[C.CONTENT_TYPE]=k.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Gi.HOME_ACCOUNT_ID:try{var n=Ki(e.credential);t[C.CCS_HEADER]="Oid:"+n.uid+"@"+n.utid}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Gi.UPN:t[C.CCS_HEADER]="UPN: "+e.credential}return t},e.prototype.executePostToTokenEndpoint=function(e,t,n,r){return v(this,void 0,void 0,(function(){var o;return _(this,(function(i){switch(i.label){case 0:return[4,this.networkManager.sendPostRequest(r,e,{body:t,headers:n})];case 1:return o=i.sent(),this.config.serverTelemetryManager&&o.status<500&&429!==o.status&&this.config.serverTelemetryManager.clearTelemetryCache(),[2,o]}}))}))},e.prototype.updateAuthority=function(e){if(!e.discoveryComplete())throw Sn.createEndpointDiscoveryIncompleteError("Updated authority has not completed endpoint discovery.");this.authority=e},e.prototype.createTokenQueryParameters=function(e){var t=new qa;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()},e}(),Fa=function(e,t,n,r,o){this.account=e||null,this.idToken=t||null,this.accessToken=n||null,this.refreshToken=r||null,this.appMetadata=o||null};!function(e){e.SW="sw",e.UHW="uhw"}(Oa||(Oa={}));var La=function(){function e(e,t){this.cryptoUtils=e,this.performanceClient=t}return e.prototype.generateCnf=function(e){var t,n;return v(this,void 0,void 0,(function(){var r,i,a;return _(this,(function(s){switch(s.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.PopTokenGenerateCnf,e.correlationId),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(o.PopTokenGenerateKid,e.correlationId),[4,this.generateKid(e)];case 1:return r=s.sent(),i=this.cryptoUtils.base64Encode(JSON.stringify(r)),a={kid:r.kid,reqCnfString:i},[4,this.cryptoUtils.hashString(i)];case 2:return[2,(a.reqCnfHash=s.sent(),a)]}}))}))},e.prototype.generateKid=function(e){var t;return v(this,void 0,void 0,(function(){return _(this,(function(n){switch(n.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.PopTokenGenerateKid,e.correlationId),[4,this.cryptoUtils.getPublicKeyThumbprint(e)];case 1:return[2,{kid:n.sent(),xms_ksl:Oa.SW}]}}))}))},e.prototype.signPopToken=function(e,t,n){return v(this,void 0,void 0,(function(){return _(this,(function(r){return[2,this.signPayload(e,t,n)]}))}))},e.prototype.signPayload=function(e,t,n,r){return v(this,void 0,void 0,(function(){var o,i,a,s,c,u;return _(this,(function(l){switch(l.label){case 0:return o=n.resourceRequestMethod,i=n.resourceRequestUri,a=n.shrClaims,s=n.shrNonce,c=i?new ua(i):void 0,u=null==c?void 0:c.getUrlComponents(),[4,this.cryptoUtils.signJwt(y({at:e,ts:Xi.nowSeconds(),m:null==o?void 0:o.toUpperCase(),u:null==u?void 0:u.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:null==u?void 0:u.AbsolutePath,q:(null==u?void 0:u.QueryString)?[[],u.QueryString]:void 0,client_claims:a||void 0},r),t,n.correlationId)];case 1:return[2,l.sent()]}}))}))},e}(),Ua=function(){function e(e,t){this.cache=e,this.hasChanged=t}return Object.defineProperty(e.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenCache",{get:function(){return this.cache},enumerable:!1,configurable:!0}),e}(),Ba=function(){function e(e,t,n,r,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}return e.prototype.validateServerAuthorizationCodeResponse=function(e,t,n){if(!e.state||!t)throw e.state?Sn.createStateNotFoundError("Cached State"):Sn.createStateNotFoundError("Server State");if(decodeURIComponent(e.state)!==decodeURIComponent(t))throw Sn.createStateMismatchError();if(e.error||e.error_description||e.suberror){if(be.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new be(e.error||k.EMPTY_STRING,e.error_description,e.suberror,e.timestamp||k.EMPTY_STRING,e.trace_id||k.EMPTY_STRING,e.correlation_id||k.EMPTY_STRING,e.claims||k.EMPTY_STRING);throw new pe(e.error||k.EMPTY_STRING,e.error_description,e.suberror)}e.client_info&&Qi(e.client_info,n)},e.prototype.validateTokenResponse=function(e){if(e.error||e.error_description||e.suberror){if(be.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new be(e.error,e.error_description,e.suberror,e.timestamp||k.EMPTY_STRING,e.trace_id||k.EMPTY_STRING,e.correlation_id||k.EMPTY_STRING,e.claims||k.EMPTY_STRING);var t=e.error_codes+" - ["+e.timestamp+"]: "+e.error_description+" - Correlation ID: "+e.correlation_id+" - Trace ID: "+e.trace_id;throw new pe(e.error,t,e.suberror)}},e.prototype.handleServerTokenResponse=function(t,n,r,i,a,s,c,u,l){var d;return v(this,void 0,void 0,(function(){var h,p,f,m,g,y;return _(this,(function(v){switch(v.label){case 0:if(null===(d=this.performanceClient)||void 0===d||d.addQueueMeasurement(o.HandleServerTokenResponse,t.correlation_id),t.id_token){if(h=new Vi(t.id_token||k.EMPTY_STRING,this.cryptoObj),a&&!An.isEmpty(a.nonce)&&h.claims.nonce!==a.nonce)throw Sn.createNonceMismatchError();if(i.maxAge||0===i.maxAge){if(!(p=h.claims.auth_time))throw Sn.createAuthTimeNotFoundError();Vi.checkMaxAge(p,i.maxAge)}}this.homeAccountIdentifier=zi.generateHomeAccountId(t.client_info||k.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,h),a&&a.state&&(f=ia.parseRequestState(this.cryptoObj,a.state)),t.key_id=t.key_id||i.sshKid||void 0,m=this.generateCacheRecord(t,n,r,i,h,s,a),v.label=1;case 1:return v.trys.push([1,,5,8]),this.persistencePlugin&&this.serializableCache?(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new Ua(this.serializableCache,!0),[4,this.persistencePlugin.beforeCacheAccess(g)]):[3,3];case 2:v.sent(),v.label=3;case 3:return!c||u||!m.account||(y=m.account.generateAccountKey(),this.cacheStorage.getAccount(y))?[4,this.cacheStorage.saveCacheRecord(m)]:(this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),[2,e.generateAuthenticationResult(this.cryptoObj,n,m,!1,i,h,f,void 0,l)]);case 4:return v.sent(),[3,8];case 5:return this.persistencePlugin&&this.serializableCache&&g?(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),[4,this.persistencePlugin.afterCacheAccess(g)]):[3,7];case 6:v.sent(),v.label=7;case 7:return[7];case 8:return[2,e.generateAuthenticationResult(this.cryptoObj,n,m,!1,i,h,f,t,l)]}}))}))},e.prototype.generateCacheRecord=function(e,t,n,r,o,i,a){var s,c,u=t.getPreferredCache();if(An.isEmpty(u))throw Sn.createInvalidCacheEnvironmentError();!An.isEmpty(e.id_token)&&o&&(s=Wo.createIdTokenEntity(this.homeAccountIdentifier,u,e.id_token||k.EMPTY_STRING,this.clientId,o.claims.tid||k.EMPTY_STRING),c=this.generateAccountEntity(e,o,t,a));var l=null;if(!An.isEmpty(e.access_token)){var d=e.scope?ji.fromString(e.scope):new ji(r.scopes||[]),h=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,p=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,f=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,m=n+h,g=m+p,y=f&&f>0?n+f:void 0;l=Zi.createAccessTokenEntity(this.homeAccountIdentifier,u,e.access_token||k.EMPTY_STRING,this.clientId,o?o.claims.tid||k.EMPTY_STRING:t.tenant,d.printScopes(),m,g,this.cryptoObj,y,e.token_type,i,e.key_id,r.claims,r.requestedClaimsHash)}var v=null;An.isEmpty(e.refresh_token)||(v=ea.createRefreshTokenEntity(this.homeAccountIdentifier,u,e.refresh_token||k.EMPTY_STRING,this.clientId,e.foci,i));var _=null;return An.isEmpty(e.foci)||(_=ta.createAppMetadataEntity(this.clientId,u,e.foci)),new Fa(c,s,l,v,_)},e.prototype.generateAccountEntity=function(e,t,n,r){var o=n.authorityType,i=r?r.cloud_graph_host_name:k.EMPTY_STRING,a=r?r.msgraph_host:k.EMPTY_STRING;if(o===Ho.Adfs)return this.logger.verbose("Authority type is ADFS, creating ADFS account"),zi.createGenericAccount(this.homeAccountIdentifier,t,n,i,a);if(An.isEmpty(e.client_info)&&"AAD"===n.protocolMode)throw Sn.createClientInfoEmptyError();return e.client_info?zi.createAccount(e.client_info,this.homeAccountIdentifier,t,n,i,a):zi.createGenericAccount(this.homeAccountIdentifier,t,n,i,a)},e.generateAuthenticationResult=function(e,t,n,r,o,i,a,s,c){var u,l,d;return v(this,void 0,void 0,(function(){var h,p,f,m,g,y,v,b,C,E,T;return _(this,(function(_){switch(_.label){case 0:if(h=k.EMPTY_STRING,p=[],f=null,g=k.EMPTY_STRING,!n.accessToken)return[3,4];if(n.accessToken.tokenType!==j.POP)return[3,2];if(y=new La(e),v=n.accessToken,b=v.secret,!(C=v.keyId))throw Sn.createKeyIdMissingError();return[4,y.signPopToken(b,C,o)];case 1:return h=_.sent(),[3,3];case 2:h=n.accessToken.secret,_.label=3;case 3:p=ji.fromString(n.accessToken.target).asArray(),f=new Date(1e3*Number(n.accessToken.expiresOn)),m=new Date(1e3*Number(n.accessToken.extendedExpiresOn)),_.label=4;case 4:return n.appMetadata&&(g=n.appMetadata.familyId===B?B:k.EMPTY_STRING),E=(null==i?void 0:i.claims.oid)||(null==i?void 0:i.claims.sub)||k.EMPTY_STRING,T=(null==i?void 0:i.claims.tid)||k.EMPTY_STRING,(null==s?void 0:s.spa_accountid)&&n.account&&(n.account.nativeAccountId=null==s?void 0:s.spa_accountid),[2,{authority:t.canonicalAuthority,uniqueId:E,tenantId:T,scopes:p,account:n.account?n.account.getAccountInfo():null,idToken:i?i.rawToken:k.EMPTY_STRING,idTokenClaims:i?i.claims:{},accessToken:h,fromCache:r,expiresOn:f,correlationId:o.correlationId,requestId:c||k.EMPTY_STRING,extExpiresOn:m,familyId:g,tokenType:(null===(u=n.accessToken)||void 0===u?void 0:u.tokenType)||k.EMPTY_STRING,state:a?a.userRequestState:k.EMPTY_STRING,cloudGraphHostName:(null===(l=n.account)||void 0===l?void 0:l.cloudGraphHostName)||k.EMPTY_STRING,msGraphHost:(null===(d=n.account)||void 0===d?void 0:d.msGraphHost)||k.EMPTY_STRING,code:null==s?void 0:s.spa_code,fromNativeBroker:!1}]}}))}))},e}(),Ha=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.includeRedirectUri=!0,r}return g(t,e),t.prototype.getAuthCodeUrl=function(e){var t,n;return v(this,void 0,void 0,(function(){var r;return _(this,(function(i){switch(i.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.GetAuthCodeUrl,e.correlationId),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(o.AuthClientCreateQueryString,e.correlationId),[4,this.createAuthCodeUrlQueryString(e)];case 1:return r=i.sent(),[2,ua.appendQueryString(this.authority.authorizationEndpoint,r)]}}))}))},t.prototype.acquireToken=function(e,t){var n,r,i,a,s,c;return v(this,void 0,void 0,(function(){var u,l,d,h,p,f,m=this;return _(this,(function(g){switch(g.label){case 0:if(!e||!e.code)throw Sn.createTokenRequestCannotBeMadeError();return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(o.AuthClientAcquireToken,e.correlationId),u=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement("AuthCodeClientAcquireToken",e.correlationId),this.logger.info("in acquireToken call in auth-code client"),l=Xi.nowSeconds(),null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(o.AuthClientExecuteTokenRequest,e.correlationId),[4,this.executeTokenRequest(this.authority,e)];case 1:return d=g.sent(),h=null===(a=d.headers)||void 0===a?void 0:a[C.X_MS_REQUEST_ID],(p=null===(s=d.headers)||void 0===s?void 0:s[C.X_MS_HTTP_VERSION])&&(null==u||u.addStaticFields({httpVerAuthority:p})),(f=new Ba(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient)).validateTokenResponse(d.body),null===(c=this.performanceClient)||void 0===c||c.setPreQueueTime(o.HandleServerTokenResponse,e.correlationId),[2,f.handleServerTokenResponse(d.body,this.authority,l,e,t,void 0,void 0,void 0,h).then((function(e){return null==u||u.endMeasurement({success:!0}),e})).catch((function(t){throw m.logger.verbose("Error in fetching token in ACC",e.correlationId),null==u||u.endMeasurement({errorCode:t.errorCode,subErrorCode:t.subError,success:!1}),t}))]}}))}))},t.prototype.handleFragmentResponse=function(e,t){var n=new Ba(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null),r=new ua(e),o=ua.getDeserializedHash(r.getHash());if(n.validateServerAuthorizationCodeResponse(o,t,this.cryptoUtils),!o.code)throw Sn.createNoAuthCodeInServerResponseError();return y(y({},o),{code:o.code})},t.prototype.getLogoutUri=function(e){if(!e)throw Hi.createEmptyLogoutRequestError();var t=this.createLogoutUrlQueryString(e);return ua.appendQueryString(this.authority.endSessionEndpoint,t)},t.prototype.executeTokenRequest=function(e,t){var n,r;return v(this,void 0,void 0,(function(){var i,a,s,c,u,l,d;return _(this,(function(h){switch(h.label){case 0:return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(o.AuthClientExecuteTokenRequest,t.correlationId),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(o.AuthClientCreateTokenRequestBody,t.correlationId),i=this.createTokenQueryParameters(t),a=ua.appendQueryString(e.tokenEndpoint,i),[4,this.createTokenRequestBody(t)];case 1:if(s=h.sent(),c=void 0,t.clientInfo)try{u=Qi(t.clientInfo,this.cryptoUtils),c={credential:""+u.uid+D.CLIENT_INFO_SEPARATOR+u.utid,type:Gi.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}return l=this.createTokenRequestHeaders(c||t.ccsCredential),d={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},[2,this.executePostToTokenEndpoint(a,s,l,d)]}}))}))},t.prototype.createTokenRequestBody=function(e){var t,n;return v(this,void 0,void 0,(function(){var r,i,a,s,c,u,l,d;return _(this,(function(h){switch(h.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.AuthClientCreateTokenRequestBody,e.correlationId),(r=new qa).addClientId(this.config.authOptions.clientId),this.includeRedirectUri?r.addRedirectUri(e.redirectUri):Da.validateRedirectUri(e.redirectUri),r.addScopes(e.scopes),r.addAuthorizationCode(e.code),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&r.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&r.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(i=this.config.clientCredentials.clientAssertion,r.addClientAssertion(i.assertion),r.addClientAssertionType(i.assertionType)),r.addGrantType(P.AUTHORIZATION_CODE_GRANT),r.addClientInfo(),e.authenticationScheme!==j.POP?[3,2]:(a=new La(this.cryptoUtils,this.performanceClient),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(o.PopTokenGenerateCnf,e.correlationId),[4,a.generateCnf(e)]);case 1:return s=h.sent(),r.addPopToken(s.reqCnfString),[3,3];case 2:if(e.authenticationScheme===j.SSH){if(!e.sshJwk)throw Hi.createMissingSshJwkError();r.addSshJwk(e.sshJwk)}h.label=3;case 3:if(c=e.correlationId||this.config.cryptoInterface.createNewGuid(),r.addCorrelationId(c),(!An.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),u=void 0,e.clientInfo)try{l=Qi(e.clientInfo,this.cryptoUtils),u={credential:""+l.uid+D.CLIENT_INFO_SEPARATOR+l.utid,type:Gi.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else u=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&u)switch(u.type){case Gi.HOME_ACCOUNT_ID:try{l=Ki(u.credential),r.addCcsOid(l)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Gi.UPN:r.addCcsUpn(u.credential)}return e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[w.RETURN_SPA_CODE]||r.addExtraQueryParameters(((d={})[w.RETURN_SPA_CODE]="1",d)),[2,r.createQueryString()]}}))}))},t.prototype.createAuthCodeUrlQueryString=function(e){var t;return v(this,void 0,void 0,(function(){var n,r,i,a,s,c,u;return _(this,(function(l){switch(l.label){case 0:if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.AuthClientCreateQueryString,e.correlationId),(n=new qa).addClientId(this.config.authOptions.clientId),r=b(e.scopes||[],e.extraScopesToConsent||[]),n.addScopes(r),n.addRedirectUri(e.redirectUri),i=e.correlationId||this.config.cryptoInterface.createNewGuid(),n.addCorrelationId(i),n.addResponseMode(e.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&n.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&n.addPrompt(e.prompt),e.domainHint&&n.addDomainHint(e.domainHint),e.prompt!==O.SELECT_ACCOUNT)if(e.sid&&e.prompt===O.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(e.sid);else if(e.account){if(a=this.extractAccountSid(e.account),s=this.extractLoginHint(e.account)){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),n.addLoginHint(s);try{c=Ki(e.account.homeAccountId),n.addCcsOid(c)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===O.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(a);try{c=Ki(e.account.homeAccountId),n.addCcsOid(c)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(e.account.username);try{c=Ki(e.account.homeAccountId),n.addCcsOid(c)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&n.addNonce(e.nonce),e.state&&n.addState(e.state),(!An.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&n.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker?(n.addNativeBroker(),e.authenticationScheme!==j.POP?[3,2]:[4,new La(this.cryptoUtils).generateCnf(e)]):[3,2];case 1:u=l.sent(),n.addPopToken(u.reqCnfString),l.label=2;case 2:return[2,n.createQueryString()]}}))}))},t.prototype.createLogoutUrlQueryString=function(e){var t=new qa;return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()},t.prototype.extractAccountSid=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null},t.prototype.extractLoginHint=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null},t}(xa);function ja(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}var Qa,Ka={"https://login.microsoftonline.com/common/":{token_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/common/":{token_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/common/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/common/":{token_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/consumers/":{token_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/consumers/":{token_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/consumers/":{token_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/organizations/":{token_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/organizations/":{token_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/organizations/":{token_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"}},Ga={"https://login.microsoftonline.com/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/common/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/consumers/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/organizations/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},za=function(){function e(e,t,n){this.networkInterface=e,this.performanceClient=t,this.correlationId=n}return e.prototype.detectRegion=function(t,n){var r,i,a,s;return v(this,void 0,void 0,(function(){var c,u,l,d,h;return _(this,(function(p){switch(p.label){case 0:if(null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(o.RegionDiscoveryDetectRegion,this.correlationId),c=t)return[3,8];u=e.IMDS_OPTIONS,p.label=1;case 1:return p.trys.push([1,6,,7]),null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(o.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[4,this.getRegionFromIMDS(k.IMDS_VERSION,u)];case 2:return(l=p.sent()).status===G.httpSuccess&&(c=l.body,n.region_source=z.IMDS),l.status!==G.httpBadRequest?[3,5]:(null===(a=this.performanceClient)||void 0===a||a.setPreQueueTime(o.RegionDiscoveryGetCurrentVersion,this.correlationId),[4,this.getCurrentVersion(u)]);case 3:return(d=p.sent())?(null===(s=this.performanceClient)||void 0===s||s.setPreQueueTime(o.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[4,this.getRegionFromIMDS(d,u)]):(n.region_source=z.FAILED_AUTO_DETECTION,[2,null]);case 4:(h=p.sent()).status===G.httpSuccess&&(c=h.body,n.region_source=z.IMDS),p.label=5;case 5:return[3,7];case 6:return p.sent(),n.region_source=z.FAILED_AUTO_DETECTION,[2,null];case 7:return[3,9];case 8:n.region_source=z.ENVIRONMENT_VARIABLE,p.label=9;case 9:return c||(n.region_source=z.FAILED_AUTO_DETECTION),[2,c||null]}}))}))},e.prototype.getRegionFromIMDS=function(e,t){var n;return v(this,void 0,void 0,(function(){return _(this,(function(r){return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(o.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[2,this.networkInterface.sendGetRequestAsync(k.IMDS_ENDPOINT+"?api-version="+e+"&format=text",t,k.IMDS_TIMEOUT)]}))}))},e.prototype.getCurrentVersion=function(e){var t;return v(this,void 0,void 0,(function(){var n;return _(this,(function(r){switch(r.label){case 0:null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.RegionDiscoveryGetCurrentVersion,this.correlationId),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(k.IMDS_ENDPOINT+"?format=json",e)];case 2:return(n=r.sent()).status===G.httpBadRequest&&n.body&&n.body["newest-versions"]&&n.body["newest-versions"].length>0?[2,n.body["newest-versions"][0]]:[2,null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},e.IMDS_OPTIONS={headers:{Metadata:"true"}},e}(),Va=function(){function e(e,t,n,r,o,i,a){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=i,this.correlationId=a,this.regionDiscovery=new za(t,this.performanceClient,this.correlationId)}return e.prototype.getAuthorityType=function(e){if(e.HostNameAndPort.endsWith(k.CIAM_AUTH_URL))return Ho.Ciam;var t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case k.ADFS:return Ho.Adfs;case k.DSTS:return Ho.Dsts}return Ho.Default},Object.defineProperty(e.prototype,"authorityType",{get:function(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"protocolMode",{get:function(){return this.authorityOptions.protocolMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.authorityOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(e){this._canonicalAuthority=new ua(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthorityUrlComponents",{get:function(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hostnameAndPort",{get:function(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Sn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Sn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Sn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Sn.createLogoutNotSupportedError();return this.replacePath(this.metadata.end_session_endpoint)}throw Sn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Sn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jwksUri",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Sn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),e.prototype.canReplaceTenant=function(t){return 1===t.PathSegments.length&&!e.reservedTenantDomains.has(t.PathSegments[0])&&this.getAuthorityType(t)===Ho.Default&&this.protocolMode===aa.AAD},e.prototype.replaceTenant=function(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)},e.prototype.replacePath=function(e){var t=this,n=e,r=new ua(this.metadata.canonical_authority).getUrlComponents(),o=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((function(e,i){var a=o[i];if(0===i&&t.canReplaceTenant(r)){var s=new ua(t.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];a!==s&&(t.logger.verbose("Replacing tenant domain name "+a+" with id "+s),a=s)}e!==a&&(n=n.replace("/"+a+"/","/"+e+"/"))})),this.replaceTenant(n)},Object.defineProperty(e.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){return this.authorityType===Ho.Adfs||this.authorityType===Ho.Dsts||this.protocolMode===aa.OIDC?this.canonicalAuthority+".well-known/openid-configuration":this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!1,configurable:!0}),e.prototype.discoveryComplete=function(){return!!this.metadata},e.prototype.resolveEndpointsAsync=function(){var e,t,n;return v(this,void 0,void 0,(function(){var r,i,a,s;return _(this,(function(c){switch(c.label){case 0:return null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(o.AuthorityResolveEndpointsAsync,this.correlationId),(r=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort))||(r=new ra).updateCanonicalAuthority(this.canonicalAuthority),null===(t=this.performanceClient)||void 0===t||t.setPreQueueTime(o.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),[4,this.updateCloudDiscoveryMetadata(r)];case 1:return i=c.sent(),this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,r.preferred_network),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(o.AuthorityUpdateEndpointMetadata,this.correlationId),[4,this.updateEndpointMetadata(r)];case 2:return a=c.sent(),i!==L.CACHE&&a!==L.CACHE&&(r.resetExpiresAt(),r.updateCanonicalAuthority(this.canonicalAuthority)),s=this.cacheManager.generateAuthorityMetadataCacheKey(r.preferred_cache),this.cacheManager.setAuthorityMetadata(s,r),this.metadata=r,[2]}}))}))},e.prototype.updateEndpointMetadata=function(e){var t,n,r,i,a,s;return v(this,void 0,void 0,(function(){var c,u;return _(this,(function(l){switch(l.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.AuthorityUpdateEndpointMetadata,this.correlationId),(c=this.getEndpointMetadataFromConfig())?(e.updateEndpointMetadata(c,!1),[2,L.CONFIG]):this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!e.isExpired()?[2,L.CACHE]:(null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(o.AuthorityGetEndpointMetadataFromNetwork,this.correlationId),[4,this.getEndpointMetadataFromNetwork()]);case 1:return(c=l.sent())?(null===(r=this.authorityOptions.azureRegionConfiguration)||void 0===r?void 0:r.azureRegion)?(null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(o.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),[4,this.updateMetadataWithRegionalInformation(c)]):[3,3]:[3,4];case 2:c=l.sent(),l.label=3;case 3:return e.updateEndpointMetadata(c,!0),[2,L.NETWORK];case 4:return!(u=this.getEndpointMetadataFromHardcodedValues())||this.authorityOptions.skipAuthorityMetadataCache?[3,7]:(null===(a=this.authorityOptions.azureRegionConfiguration)||void 0===a?void 0:a.azureRegion)?(null===(s=this.performanceClient)||void 0===s||s.setPreQueueTime(o.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),[4,this.updateMetadataWithRegionalInformation(u)]):[3,6];case 5:u=l.sent(),l.label=6;case 6:return e.updateEndpointMetadata(u,!1),[2,L.HARDCODED_VALUES];case 7:throw Sn.createUnableToGetOpenidConfigError(this.defaultOpenIdConfigurationEndpoint)}}))}))},e.prototype.isAuthoritySameType=function(e){return new ua(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length},e.prototype.getEndpointMetadataFromConfig=function(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw Hi.createInvalidAuthorityMetadataError()}return null},e.prototype.getEndpointMetadataFromNetwork=function(){var e;return v(this,void 0,void 0,(function(){var t,n;return _(this,(function(r){switch(r.label){case 0:null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(o.AuthorityGetEndpointMetadataFromNetwork,this.correlationId),t={},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(this.defaultOpenIdConfigurationEndpoint,t)];case 2:return[2,ja((n=r.sent()).body)?n.body:null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},e.prototype.getEndpointMetadataFromHardcodedValues=function(){return this.canonicalAuthority in Ka?Ka[this.canonicalAuthority]:null},e.prototype.updateMetadataWithRegionalInformation=function(t){var n,r,i,a;return v(this,void 0,void 0,(function(){var s,c;return _(this,(function(u){switch(u.label){case 0:return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(o.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),(s=null===(r=this.authorityOptions.azureRegionConfiguration)||void 0===r?void 0:r.azureRegion)?s!==k.AZURE_REGION_AUTO_DISCOVER_FLAG?(this.regionDiscoveryMetadata.region_outcome=V.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=s,[2,e.replaceWithRegionalInformation(t,s)]):(null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(o.RegionDiscoveryDetectRegion,this.correlationId),[4,this.regionDiscovery.detectRegion(null===(a=this.authorityOptions.azureRegionConfiguration)||void 0===a?void 0:a.environmentRegion,this.regionDiscoveryMetadata)]):[3,2];case 1:if(c=u.sent())return this.regionDiscoveryMetadata.region_outcome=V.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=c,[2,e.replaceWithRegionalInformation(t,c)];this.regionDiscoveryMetadata.region_outcome=V.AUTO_DETECTION_REQUESTED_FAILED,u.label=2;case 2:return[2,t]}}))}))},e.prototype.updateCloudDiscoveryMetadata=function(e){var t,n;return v(this,void 0,void 0,(function(){var r,i,a;return _(this,(function(s){switch(s.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),this.logger.verbose("Attempting to get cloud discovery metadata in the config"),this.logger.verbosePii("Known Authorities: "+(this.authorityOptions.knownAuthorities||k.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: "+(this.authorityOptions.authorityMetadata||k.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: "+(e.canonical_authority||k.NOT_APPLICABLE)),(r=this.getCloudDiscoveryMetadataFromConfig())?(this.logger.verbose("Found cloud discovery metadata in the config."),e.updateCloudDiscoveryMetadata(r,!1),[2,L.CONFIG]):(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the cache."),i=e.isExpired(),this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!i?(this.logger.verbose("Found metadata in the cache."),[2,L.CACHE]):(i&&this.logger.verbose("The metadata entity is expired."),this.logger.verbose("Did not find cloud discovery metadata in the cache... Attempting to get cloud discovery metadata from the network."),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(o.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId),[4,this.getCloudDiscoveryMetadataFromNetwork()]));case 1:if(r=s.sent())return this.logger.verbose("cloud discovery metadata was successfully returned from getCloudDiscoveryMetadataFromNetwork()"),e.updateCloudDiscoveryMetadata(r,!0),[2,L.NETWORK];if(this.logger.verbose("Did not find cloud discovery metadata from the network... Attempting to get cloud discovery metadata from hardcoded values."),(a=this.getCloudDiscoveryMetadataFromHarcodedValues())&&!this.options.skipAuthorityMetadataCache)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),e.updateCloudDiscoveryMetadata(a,!1),[2,L.HARDCODED_VALUES];throw this.logger.error("Did not find cloud discovery metadata from hardcoded values... Metadata could not be obtained from config, cache, network or hardcoded values. Throwing Untrusted Authority Error."),Hi.createUntrustedAuthorityError()}}))}))},e.prototype.getCloudDiscoveryMetadataFromConfig=function(){if(this.authorityType===Ho.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");var t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=e.getCloudDiscoveryMetadataFromNetworkResponse(t.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Hi.createInvalidCloudDiscoveryMetadataError()}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null},e.prototype.getCloudDiscoveryMetadataFromNetwork=function(){var t;return v(this,void 0,void 0,(function(){var n,r,i,a,s,c,u,l;return _(this,(function(d){switch(d.label){case 0:null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId),n=""+k.AAD_INSTANCE_DISCOVERY_ENDPT+this.canonicalAuthority+"oauth2/v2.0/authorize",r={},i=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(n,r)];case 2:if(a=d.sent(),s=void 0,c=void 0,function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(a.body))s=a.body,c=s.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: "+s.tenant_discovery_endpoint);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(a.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),[2,null];if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: "+a.status),(s=a.body).error===k.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),[2,null];this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is "+s.error),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is "+s.error_description),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),c=[]}return this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),i=e.getCloudDiscoveryMetadataFromNetworkResponse(c,this.hostnameAndPort),[3,4];case 3:return(u=d.sent())instanceof he?this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: "+u.errorCode+"\nError Description: "+u.errorMessage):(l=u,this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: "+l.name+"\nError Description: "+l.message)),[2,null];case 4:return i||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),i=e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),[2,i]}}))}))},e.prototype.getCloudDiscoveryMetadataFromHarcodedValues=function(){return this.canonicalAuthority in Ga?Ga[this.canonicalAuthority]:null},e.prototype.isInKnownAuthorities=function(){var e=this;return this.authorityOptions.knownAuthorities.filter((function(t){return ua.getDomainFromUrl(t).toLowerCase()===e.hostnameAndPort})).length>0},e.generateAuthority=function(e,t){var n;if(t&&t.azureCloudInstance!==sa.None){var r=t.tenant?t.tenant:k.DEFAULT_COMMON_TENANT;n=t.azureCloudInstance+"/"+r+"/"}return n||e},e.createCloudDiscoveryMetadataFromHost=function(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}},e.getCloudDiscoveryMetadataFromNetworkResponse=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.aliases.indexOf(t)>-1)return r}return null},e.prototype.getPreferredCache=function(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw Sn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},e.prototype.isAlias=function(e){return this.metadata.aliases.indexOf(e)>-1},e.isPublicCloudAuthority=function(e){return k.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0},e.buildRegionalAuthorityString=function(e,t,n){var r=new ua(e);r.validateAsUri();var o=r.getUrlComponents(),i=t+"."+o.HostNameAndPort;this.isPublicCloudAuthority(o.HostNameAndPort)&&(i=t+"."+k.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX);var a=ua.constructAuthorityUriFromObject(y(y({},r.getUrlComponents()),{HostNameAndPort:i})).urlString;return n?a+"?"+n:a},e.replaceWithRegionalInformation=function(t,n){return t.authorization_endpoint=e.buildRegionalAuthorityString(t.authorization_endpoint,n),t.token_endpoint=e.buildRegionalAuthorityString(t.token_endpoint,n,k.REGIONAL_AUTH_NON_MSI_QUERY_STRING),t.end_session_endpoint&&(t.end_session_endpoint=e.buildRegionalAuthorityString(t.end_session_endpoint,n)),t},e.transformCIAMAuthority=function(e){var t=e.endsWith(k.FORWARD_SLASH)?e:""+e+k.FORWARD_SLASH,n=new ua(e).getUrlComponents();return 0===n.PathSegments.length&&n.HostNameAndPort.endsWith(k.CIAM_AUTH_URL)&&(t=""+t+n.HostNameAndPort.split(".")[0]+k.AAD_TENANT_DOMAIN_SUFFIX),t},e.reservedTenantDomains=new Set(["{tenant}","{tenantid}",T.COMMON,T.CONSUMERS,T.ORGANIZATIONS]),e}(),Wa=function(){function e(){}return e.createDiscoveredInstance=function(t,n,r,i,a,s,c){return v(this,void 0,void 0,(function(){var u,l,d;return _(this,(function(h){switch(h.label){case 0:null==s||s.addQueueMeasurement(o.AuthorityFactoryCreateDiscoveredInstance,c),u=Va.transformCIAMAuthority(t),l=e.createInstance(u,n,r,i,a,s,c),h.label=1;case 1:return h.trys.push([1,3,,4]),null==s||s.setPreQueueTime(o.AuthorityResolveEndpointsAsync,c),[4,l.resolveEndpointsAsync()];case 2:return h.sent(),[2,l];case 3:throw d=h.sent(),Sn.createEndpointDiscoveryIncompleteError(d);case 4:return[2]}}))}))},e.createInstance=function(e,t,n,r,o,i,a){if(An.isEmpty(e))throw Hi.createUrlEmptyError();return new Va(e,t,n,r,o,i,a)},e}(),Ya=function(){function e(e,t){this.cacheOutcome=W.NO_CACHE_HIT,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||k.EMPTY_STRING,this.wrapperVer=e.wrapperVer||k.EMPTY_STRING,this.telemetryCacheKey=Q.CACHE_KEY+D.CACHE_KEY_SEPARATOR+e.clientId}return e.prototype.generateCurrentRequestHeaderValue=function(){var e=""+this.apiId+Q.VALUE_SEPARATOR+this.cacheOutcome,t=[this.wrapperSKU,this.wrapperVer].join(Q.VALUE_SEPARATOR),n=[e,this.getRegionDiscoveryFields()].join(Q.VALUE_SEPARATOR);return[Q.SCHEMA_VERSION,n,t].join(Q.CATEGORY_SEPARATOR)},e.prototype.generateLastRequestHeaderValue=function(){var t=this.getLastRequests(),n=e.maxErrorsToSend(t),r=t.failedRequests.slice(0,2*n).join(Q.VALUE_SEPARATOR),o=t.errors.slice(0,n).join(Q.VALUE_SEPARATOR),i=t.errors.length,a=[i,n<i?Q.OVERFLOW_TRUE:Q.OVERFLOW_FALSE].join(Q.VALUE_SEPARATOR);return[Q.SCHEMA_VERSION,t.cacheHits,r,o,a].join(Q.CATEGORY_SEPARATOR)},e.prototype.cacheFailedRequest=function(e){var t=this.getLastRequests();t.errors.length>=Q.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),An.isEmpty(e.subError)?An.isEmpty(e.errorCode)?e&&e.toString()?t.errors.push(e.toString()):t.errors.push(Q.UNKNOWN_ERROR):t.errors.push(e.errorCode):t.errors.push(e.subError),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)},e.prototype.incrementCacheHits=function(){var e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits},e.prototype.getLastRequests=function(){var e=new na;return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e},e.prototype.clearTelemetryCache=function(){var t=this.getLastRequests(),n=e.maxErrorsToSend(t);if(n===t.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{var r=new na;r.failedRequests=t.failedRequests.slice(2*n),r.errors=t.errors.slice(n),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r)}},e.maxErrorsToSend=function(e){var t,n=0,r=0,o=e.errors.length;for(t=0;t<o;t++){var i=e.failedRequests[2*t]||k.EMPTY_STRING,a=e.failedRequests[2*t+1]||k.EMPTY_STRING,s=e.errors[t]||k.EMPTY_STRING;if(!((r+=i.toString().length+a.toString().length+s.length+3)<Q.MAX_LAST_HEADER_BYTES))break;n+=1}return n},e.prototype.getRegionDiscoveryFields=function(){var e=[];return e.push(this.regionUsed||k.EMPTY_STRING),e.push(this.regionSource||k.EMPTY_STRING),e.push(this.regionOutcome||k.EMPTY_STRING),e.join(",")},e.prototype.updateRegionDiscoveryMetadata=function(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome},e.prototype.setCacheOutcome=function(e){this.cacheOutcome=e},e}(),$a=function(){function e(e,t,n,r,o,i,a,s,c){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.nativeMessageHandler=s,this.correlationId=c||this.browserCrypto.createNewGuid(),this.logger=r.clone(Ee,Ra,this.correlationId),this.performanceClient=a}return e.prototype.clearCacheOnLogout=function(e){return l(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:if(!e)return[3,5];zi.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null)),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.browserStorage.removeAccount(zi.generateAccountCacheKey(e))];case 2:return t.sent(),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request."),[3,4];case 3:return t.sent(),this.logger.error("Account provided in logout request was not found. Local cache unchanged."),[3,4];case 4:return[3,9];case 5:return t.trys.push([5,8,,9]),this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),[4,this.browserStorage.clear()];case 6:return t.sent(),[4,this.browserCrypto.clearKeystore()];case 7:return t.sent(),[3,9];case 8:return t.sent(),this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged."),[3,9];case 9:return[2]}}))}))},e.prototype.initializeBaseRequest=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i,a;return d(this,(function(s){switch(s.label){case 0:return this.performanceClient.addQueueMeasurement(o.InitializeBaseRequest,e.correlationId),this.logger.verbose("Initializing BaseAuthRequest"),n=e.authority||this.config.auth.authority,t?[4,this.validateRequestAuthority(n,t)]:[3,2];case 1:s.sent(),s.label=2;case 2:if(r=p(e&&e.scopes||[]),(i=c(c({},e),{correlationId:this.correlationId,authority:n,scopes:r})).authenticationScheme){if(i.authenticationScheme===j.SSH){if(!e.sshJwk)throw Hi.createMissingSshJwkError();if(!e.sshKid)throw Hi.createMissingSshKidError()}this.logger.verbose('Authentication Scheme set to "'+i.authenticationScheme+'" as configured in Auth request')}else i.authenticationScheme=j.BEARER,this.logger.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return this.config.cache.claimsBasedCachingEnabled&&e.claims&&!An.isEmptyObj(e.claims)?(a=i,[4,this.browserCrypto.hashString(e.claims)]):[3,4];case 3:a.requestedClaimsHash=s.sent(),s.label=4;case 4:return[2,i]}}))}))},e.prototype.getRedirectUri=function(e){this.logger.verbose("getRedirectUri called");var t=e||this.config.auth.redirectUri||Ia.getCurrentUri();return ua.getAbsoluteUrl(t,Ia.getCurrentUri())},e.prototype.validateRequestAuthority=function(e,t){return l(this,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:return[4,this.getDiscoveredAuthority(e)];case 1:if(!n.sent().isAlias(t.environment))throw Hi.createAuthorityMismatchError();return[2]}}))}))},e.prototype.initializeServerTelemetryManager=function(e,t){this.logger.verbose("initializeServerTelemetryManager called");var n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Ya(n,this.browserStorage)},e.prototype.getDiscoveredAuthority=function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return this.logger.verbose("getDiscoveredAuthority called"),t={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata},e?(this.logger.verbose("Creating discovered authority with request authority"),[4,Wa.createDiscoveredInstance(e,this.config.system.networkClient,this.browserStorage,t,this.logger)]):[3,2];case 1:case 3:return[2,n.sent()];case 2:return this.logger.verbose("Creating discovered authority with configured authority"),[4,Wa.createDiscoveredInstance(this.config.auth.authority,this.config.system.networkClient,this.browserStorage,t,this.logger)]}}))}))},e}(),Ja=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.initializeAuthorizationCodeRequest=function(e){return l(this,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:return this.performanceClient.addQueueMeasurement(o.StandardInteractionClientInitializeAuthorizationCodeRequest,e.correlationId),this.logger.verbose("initializeAuthorizationRequest called",e.correlationId),[4,this.browserCrypto.generatePkceCodes()];case 1:return t=r.sent(),n=c(c({},e),{redirectUri:e.redirectUri,code:k.EMPTY_STRING,codeVerifier:t.verifier}),e.codeChallenge=t.challenge,e.codeChallengeMethod=k.S256_CODE_CHALLENGE_METHOD,[2,n]}}))}))},t.prototype.initializeLogoutRequest=function(e){this.logger.verbose("initializeLogoutRequest called",null==e?void 0:e.correlationId);var t=c({correlationId:this.correlationId||this.browserCrypto.createNewGuid()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){var n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=ua.getAbsoluteUrl(e.postLogoutRedirectUri,Ia.getCurrentUri())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=ua.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ia.getCurrentUri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=ua.getAbsoluteUrl(Ia.getCurrentUri(),Ia.getCurrentUri())),t},t.prototype.getLogoutHintFromIdTokenClaims=function(e){var t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null},t.prototype.createAuthCodeClient=function(e,t,n){return l(this,void 0,void 0,(function(){var r;return d(this,(function(i){switch(i.label){case 0:return this.performanceClient.addQueueMeasurement(o.StandardInteractionClientCreateAuthCodeClient,this.correlationId),this.performanceClient.setPreQueueTime(o.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(e,t,n)];case 1:return r=i.sent(),[2,new Ha(r,this.performanceClient)]}}))}))},t.prototype.getClientConfiguration=function(e,t,n){return l(this,void 0,void 0,(function(){var r,i;return d(this,(function(a){switch(a.label){case 0:return this.performanceClient.addQueueMeasurement(o.StandardInteractionClientGetClientConfiguration,this.correlationId),this.logger.verbose("getClientConfiguration called",this.correlationId),this.performanceClient.setPreQueueTime(o.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),[4,this.getDiscoveredAuthority(t,n)];case 1:return r=a.sent(),i=this.config.system.loggerOptions,[2,{authOptions:{clientId:this.config.auth.clientId,authority:r,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:i.loggerCallback,piiLoggingEnabled:i.piiLoggingEnabled,logLevel:i.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:Ee,version:Ra,cpu:k.EMPTY_STRING,os:k.EMPTY_STRING},telemetry:this.config.telemetry}]}}))}))},t.prototype.validateAndExtractStateFromHash=function(e,t,n){if(this.logger.verbose("validateAndExtractStateFromHash called",n),!e.state)throw ho.createHashDoesNotContainStateError();var r=la.extractBrowserRequestState(this.browserCrypto,e.state);if(!r)throw ho.createUnableToParseStateError();if(r.interactionType!==t)throw ho.createStateInteractionTypeMismatchError();return this.logger.verbose("Returning state from hash",n),e.state},t.prototype.getDiscoveredAuthority=function(e,t){var n;return l(this,void 0,void 0,(function(){var r,i,a,s;return d(this,(function(c){switch(c.label){case 0:return this.performanceClient.addQueueMeasurement(o.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),this.logger.verbose("getDiscoveredAuthority called",this.correlationId),r=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement(o.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e||this.config.auth.authority,s=Va.generateAuthority(a,t||this.config.auth.azureCloudOptions),this.logger.verbose("Creating discovered authority with configured authority",this.correlationId),this.performanceClient.setPreQueueTime(o.AuthorityFactoryCreateDiscoveredInstance,this.correlationId),[4,Wa.createDiscoveredInstance(s,this.config.system.networkClient,this.browserStorage,i,this.logger,this.performanceClient,this.correlationId).then((function(e){return r.endMeasurement({success:!0}),e})).catch((function(e){throw r.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}))];case 1:return[2,c.sent()]}}))}))},t.prototype.initializeAuthorizationRequest=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i,a,s,u,l;return d(this,(function(d){switch(d.label){case 0:return this.performanceClient.addQueueMeasurement(o.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId),this.logger.verbose("initializeAuthorizationRequest called",this.correlationId),n=this.getRedirectUri(e.redirectUri),r={interactionType:t},i=ia.setRequestState(this.browserCrypto,e&&e.state||k.EMPTY_STRING,r),this.performanceClient.setPreQueueTime(o.InitializeBaseRequest,this.correlationId),s=[{}],[4,this.initializeBaseRequest(e)];case 1:return a=c.apply(void 0,[c.apply(void 0,s.concat([d.sent()])),{redirectUri:n,state:i,nonce:e.nonce||this.browserCrypto.createNewGuid(),responseMode:N.FRAGMENT}]),(u=e.account||this.browserStorage.getActiveAccount())&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: "+u.homeAccountId,this.correlationId),a.account=u),An.isEmpty(a.loginHint)&&!u&&(l=this.browserStorage.getLegacyLoginHint())&&(a.loginHint=l),[2,a]}}))}))},t}($a);!function(e){e.USER_INTERACTION_REQUIRED="USER_INTERACTION_REQUIRED",e.USER_CANCEL="USER_CANCEL",e.NO_NETWORK="NO_NETWORK",e.TRANSIENT_ERROR="TRANSIENT_ERROR",e.PERSISTENT_ERROR="PERSISTENT_ERROR",e.DISABLED="DISABLED",e.ACCOUNT_UNAVAILABLE="ACCOUNT_UNAVAILABLE"}(Qa||(Qa={}));var Xa="ContentError",Za="user_switch",es="User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again.",ts="tokens_not_found_in_internal_memory_cache",ns="Tokens not cached in MSAL JS internal memory, please make the WAM request",rs=function(e){function t(n,r,o){var i=e.call(this,n,r)||this;return Object.setPrototypeOf(i,t.prototype),i.name="NativeAuthError",i.ext=o,i}return r(t,e),t.prototype.isFatal=function(){return!(!this.ext||!this.ext.status||this.ext.status!==Qa.PERSISTENT_ERROR&&this.ext.status!==Qa.DISABLED)||this.errorCode===Xa},t.createError=function(e,n,r){if(r&&r.status)switch(r.status){case Qa.ACCOUNT_UNAVAILABLE:return be.createNativeAccountUnavailableError();case Qa.USER_INTERACTION_REQUIRED:return new be(e,n);case Qa.USER_CANCEL:return ho.createUserCancelledError();case Qa.NO_NETWORK:return ho.createNoNetworkConnectivityError()}return new t(e,n,r)},t.createUserSwitchError=function(){return new t(Za,es)},t.createTokensNotFoundInCacheError=function(){return new t(ts,ns)},t}(he),os=function(e){function t(t,n){return e.call(this,t,n)||this}return g(t,e),t.prototype.acquireToken=function(e){var t,n,r,i,a,s,c;return v(this,void 0,void 0,(function(){var u,l,d,h,p,f,m=this;return _(this,(function(g){switch(g.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.RefreshTokenClientAcquireToken,e.correlationId),u=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement(o.RefreshTokenClientAcquireToken,e.correlationId),this.logger.verbose("RefreshTokenClientAcquireToken called",e.correlationId),l=Xi.nowSeconds(),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(o.RefreshTokenClientExecuteTokenRequest,e.correlationId),[4,this.executeTokenRequest(e,this.authority)];case 1:return d=g.sent(),h=null===(i=d.headers)||void 0===i?void 0:i[C.X_MS_HTTP_VERSION],null==u||u.addStaticFields({refreshTokenSize:(null===(a=d.body.refresh_token)||void 0===a?void 0:a.length)||0}),h&&(null==u||u.addStaticFields({httpVerToken:h})),p=null===(s=d.headers)||void 0===s?void 0:s[C.X_MS_REQUEST_ID],(f=new Ba(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(d.body),null===(c=this.performanceClient)||void 0===c||c.setPreQueueTime(o.HandleServerTokenResponse,e.correlationId),[2,f.handleServerTokenResponse(d.body,this.authority,l,e,void 0,void 0,!0,e.forceCache,p).then((function(e){return null==u||u.endMeasurement({success:!0}),e})).catch((function(t){throw m.logger.verbose("Error in fetching refresh token",e.correlationId),null==u||u.endMeasurement({errorCode:t.errorCode,subErrorCode:t.subError,success:!1}),t}))]}}))}))},t.prototype.acquireTokenByRefreshToken=function(e){var t,n,r,i;return v(this,void 0,void 0,(function(){var a,s;return _(this,(function(c){if(!e)throw Hi.createEmptyTokenRequestError();if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Sn.createNoAccountInSilentRequestError();if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(o.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!0)]}catch(t){if(a=t instanceof be&&t.errorCode===ge,s=t instanceof pe&&"invalid_grant"===t.errorCode&&"client_mismatch"===t.subError,a||s)return null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(o.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!1)];throw t}return null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(o.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!1)]}))}))},t.prototype.acquireTokenWithCachedRefreshToken=function(e,t){var n,r,i;return v(this,void 0,void 0,(function(){var a,s,c;return _(this,(function(u){if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(o.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),a=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(o.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),this.logger.verbose("RefreshTokenClientAcquireTokenWithCachedRefreshToken called",e.correlationId),!(s=this.cacheManager.getRefreshToken(e.account,t)))throw null==a||a.discardMeasurement(),be.createNoTokensFoundError();return null==a||a.endMeasurement({success:!0}),c=y(y({},e),{refreshToken:s.secret,authenticationScheme:e.authenticationScheme||j.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Gi.HOME_ACCOUNT_ID}}),null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(o.RefreshTokenClientAcquireToken,e.correlationId),[2,this.acquireToken(c)]}))}))},t.prototype.executeTokenRequest=function(e,t){var n,r,i;return v(this,void 0,void 0,(function(){var a,s,c,u,l,d;return _(this,(function(h){switch(h.label){case 0:return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(o.RefreshTokenClientExecuteTokenRequest,e.correlationId),a=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(o.RefreshTokenClientExecuteTokenRequest,e.correlationId),null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(o.RefreshTokenClientCreateTokenRequestBody,e.correlationId),s=this.createTokenQueryParameters(e),c=ua.appendQueryString(t.tokenEndpoint,s),[4,this.createTokenRequestBody(e)];case 1:return u=h.sent(),l=this.createTokenRequestHeaders(e.ccsCredential),d={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},[2,this.executePostToTokenEndpoint(c,u,l,d).then((function(e){return null==a||a.endMeasurement({success:!0}),e})).catch((function(e){throw null==a||a.endMeasurement({success:!1}),e}))]}}))}))},t.prototype.createTokenRequestBody=function(e){var t,n,r;return v(this,void 0,void 0,(function(){var i,a,s,c,u,l,d;return _(this,(function(h){switch(h.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(o.RefreshTokenClientCreateTokenRequestBody,e.correlationId),i=e.correlationId,a=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement(o.BaseClientCreateTokenRequestHeaders,i),(s=new qa).addClientId(this.config.authOptions.clientId),s.addScopes(e.scopes),s.addGrantType(P.REFRESH_TOKEN_GRANT),s.addClientInfo(),s.addLibraryInfo(this.config.libraryInfo),s.addApplicationTelemetry(this.config.telemetry.application),s.addThrottling(),this.serverTelemetryManager&&s.addServerTelemetry(this.serverTelemetryManager),s.addCorrelationId(i),s.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&s.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(c=this.config.clientCredentials.clientAssertion,s.addClientAssertion(c.assertion),s.addClientAssertionType(c.assertionType)),e.authenticationScheme!==j.POP?[3,2]:(u=new La(this.cryptoUtils,this.performanceClient),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(o.PopTokenGenerateCnf,e.correlationId),[4,u.generateCnf(e)]);case 1:return l=h.sent(),s.addPopToken(l.reqCnfString),[3,3];case 2:if(e.authenticationScheme===j.SSH){if(!e.sshJwk)throw null==a||a.endMeasurement({success:!1}),Hi.createMissingSshJwkError();s.addSshJwk(e.sshJwk)}h.label=3;case 3:if((!An.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&s.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Gi.HOME_ACCOUNT_ID:try{d=Ki(e.ccsCredential.credential),s.addCcsOid(d)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Gi.UPN:s.addCcsUpn(e.ccsCredential.credential)}return null==a||a.endMeasurement({success:!0}),[2,s.createQueryString()]}}))}))},t}(xa),is=function(e){function t(t,n){return e.call(this,t,n)||this}return g(t,e),t.prototype.acquireToken=function(e){return v(this,void 0,void 0,(function(){var t;return _(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.acquireCachedToken(e)];case 1:return[2,n.sent()];case 2:if((t=n.sent())instanceof Sn&&t.errorCode===un)return[2,new os(this.config,this.performanceClient).acquireTokenByRefreshToken(e)];throw t;case 3:return[2]}}))}))},t.prototype.acquireCachedToken=function(e){var t,n,r,o,i;return v(this,void 0,void 0,(function(){var a,s;return _(this,(function(c){switch(c.label){case 0:if(!e)throw Hi.createEmptyTokenRequestError();if(e.forceRefresh)throw null===(t=this.serverTelemetryManager)||void 0===t||t.setCacheOutcome(W.FORCE_REFRESH),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because forceRefresh is true."),Sn.createRefreshRequiredError();if(!this.config.cacheOptions.claimsBasedCachingEnabled&&!An.isEmptyObj(e.claims))throw null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(W.CLAIMS_REQUESTED_CACHE_SKIPPED),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because claims-based caching is disabled and claims were requested."),Sn.createRefreshRequiredError();if(!e.account)throw Sn.createNoAccountInSilentRequestError();if(a=e.authority||this.authority.getPreferredCache(),!(s=this.cacheManager.readCacheRecord(e.account,e,a)).accessToken)throw null===(r=this.serverTelemetryManager)||void 0===r||r.setCacheOutcome(W.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Sn.createRefreshRequiredError();if(Xi.wasClockTurnedBack(s.accessToken.cachedAt)||Xi.isTokenExpired(s.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw null===(o=this.serverTelemetryManager)||void 0===o||o.setCacheOutcome(W.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token is expired or will expire within "+this.config.systemOptions.tokenRenewalOffsetSeconds+" seconds."),Sn.createRefreshRequiredError();if(s.accessToken.refreshOn&&Xi.isTokenExpired(s.accessToken.refreshOn,0))throw null===(i=this.serverTelemetryManager)||void 0===i||i.setCacheOutcome(W.REFRESH_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'."),Sn.createRefreshRequiredError();return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[4,this.generateResultFromCacheRecord(s,e)];case 1:return[2,c.sent()]}}))}))},t.prototype.generateResultFromCacheRecord=function(e,t){return v(this,void 0,void 0,(function(){var n,r;return _(this,(function(o){switch(o.label){case 0:if(e.idToken&&(n=new Vi(e.idToken.secret,this.config.cryptoInterface)),t.maxAge||0===t.maxAge){if(!(r=null==n?void 0:n.claims.auth_time))throw Sn.createAuthTimeNotFoundError();Vi.checkMaxAge(r,t.maxAge)}return[4,Ba.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,n)];case 1:return[2,o.sent()]}}))}))},t}(xa),as=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.acquireToken=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,a;return d(this,(function(s){switch(s.label){case 0:return t=this.performanceClient.startMeasurement(o.SilentCacheClientAcquireToken,e.correlationId),n=this.initializeServerTelemetryManager(re.acquireTokenSilent_silentFlow),[4,this.createSilentFlowClient(n,e.authority,e.azureCloudOptions)];case 1:r=s.sent(),this.logger.verbose("Silent auth client created"),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,r.acquireCachedToken(e)];case 3:return i=s.sent(),t.endMeasurement({success:!0,fromCache:!0}),[2,i];case 4:throw(a=s.sent())instanceof ho&&a.errorCode===Qr&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),t.endMeasurement({errorCode:a instanceof he&&a.errorCode||void 0,subErrorCode:a instanceof he&&a.subError||void 0,success:!1}),a;case 5:return[2]}}))}))},t.prototype.logout=function(){return Promise.reject(ho.createSilentLogoutUnsupportedError())},t.prototype.createSilentFlowClient=function(e,t,n){return l(this,void 0,void 0,(function(){var r;return d(this,(function(i){switch(i.label){case 0:return this.performanceClient.setPreQueueTime(o.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(e,t,n)];case 1:return r=i.sent(),[2,new is(r,this.performanceClient)]}}))}))},t.prototype.initializeSilentRequest=function(e,t){return l(this,void 0,void 0,(function(){var n;return d(this,(function(r){switch(r.label){case 0:return this.performanceClient.addQueueMeasurement(o.InitializeSilentRequest,this.correlationId),this.performanceClient.setPreQueueTime(o.InitializeBaseRequest,this.correlationId),n=[c({},e)],[4,this.initializeBaseRequest(e,t)];case 1:return[2,c.apply(void 0,[c.apply(void 0,n.concat([r.sent()])),{account:t,forceRefresh:e.forceRefresh||!1}])]}}))}))},t}(Ja),ss=function(e){function t(t,n,r,o,i,a,s,c,u,l,d,h){var p=e.call(this,t,n,r,o,i,a,c,u,h)||this;return p.apiId=s,p.accountId=l,p.nativeMessageHandler=u,p.nativeStorageManager=d,p.silentCacheClient=new as(t,p.nativeStorageManager,r,o,i,a,c,u,h),p}return r(t,e),t.prototype.acquireToken=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,a,s,c;return d(this,(function(u){switch(u.label){case 0:return this.logger.trace("NativeInteractionClient - acquireToken called."),t=this.performanceClient.startMeasurement(o.NativeInteractionClientAcquireToken,e.correlationId),n=Xi.nowSeconds(),[4,this.initializeNativeRequest(e)];case 1:r=u.sent(),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.acquireTokensFromCache(this.accountId,r)];case 3:return i=u.sent(),t.endMeasurement({success:!0,isNativeBroker:!1,fromCache:!0}),[2,i];case 4:return u.sent(),this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call"),[3,5];case 5:return a={method:J.GetToken,request:r},[4,this.nativeMessageHandler.sendMessage(a)];case 6:return s=u.sent(),c=this.validateNativeResponse(s),[2,this.handleNativeResponse(c,r,n).then((function(e){return t.endMeasurement({success:!0,isNativeBroker:!0,requestId:e.requestId}),e})).catch((function(e){throw t.endMeasurement({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e}))]}}))}))},t.prototype.createSilentCacheRequest=function(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:ji.fromString(e.scope).asArray(),account:t,forceRefresh:!1}},t.prototype.acquireTokensFromCache=function(e,t){return l(this,void 0,void 0,(function(){var n,r;return d(this,(function(o){switch(o.label){case 0:if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Sn.createNoAccountFoundError();if(!(n=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:e})))throw Sn.createNoAccountFoundError();o.label=1;case 1:return o.trys.push([1,3,,4]),r=this.createSilentCacheRequest(t,n),[4,this.silentCacheClient.acquireToken(r)];case 2:return[2,o.sent()];case 3:throw o.sent();case 4:return[2]}}))}))},t.prototype.acquireTokenRedirect=function(e){return l(this,void 0,void 0,(function(){var t,n,r,o,i,a;return d(this,(function(s){switch(s.label){case 0:return this.logger.trace("NativeInteractionClient - acquireTokenRedirect called."),[4,this.initializeNativeRequest(e)];case 1:t=s.sent(),n={method:J.GetToken,request:t},s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.nativeMessageHandler.sendMessage(n)];case 3:return r=s.sent(),this.validateNativeResponse(r),[3,5];case 4:if((o=s.sent())instanceof rs&&o.isFatal())throw o;return[3,5];case 5:return this.browserStorage.setTemporaryCache(ee.NATIVE_REQUEST,JSON.stringify(t),!0),i={apiId:re.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri),[4,this.navigationClient.navigateExternal(a,i)];case 6:return s.sent(),[2]}}))}))},t.prototype.handleRedirectPromise=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,o,i,a,s;return d(this,(function(c){switch(c.label){case 0:if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null];if(!(e=this.browserStorage.getCachedNativeRequest()))return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),[2,null];t=e.prompt,n=u(e,["prompt"]),t&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ee.NATIVE_REQUEST)),r={method:J.GetToken,request:n},o=Xi.nowSeconds(),c.label=1;case 1:return c.trys.push([1,3,,4]),this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker."),[4,this.nativeMessageHandler.sendMessage(r)];case 2:return i=c.sent(),this.validateNativeResponse(i),a=this.handleNativeResponse(i,n,o),this.browserStorage.setInteractionInProgress(!1),[2,a];case 3:throw s=c.sent(),this.browserStorage.setInteractionInProgress(!1),s;case 4:return[2]}}))}))},t.prototype.logout=function(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")},t.prototype.handleNativeResponse=function(e,t,n){return l(this,void 0,void 0,(function(){var r,o,i,a,s,c;return d(this,(function(u){switch(u.label){case 0:if(this.logger.trace("NativeInteractionClient - handleNativeResponse called."),e.account.id!==t.accountId)throw rs.createUserSwitchError();return[4,this.getDiscoveredAuthority(t.authority)];case 1:return r=u.sent(),o=r.getPreferredCache(),i=this.createIdTokenObj(e),a=this.createHomeAccountIdentifier(e,i),s=this.createAccountEntity(e,a,i,o),[4,this.generateAuthenticationResult(e,t,i,s,r.canonicalAuthority,n)];case 2:return c=u.sent(),this.cacheAccount(s),this.cacheNativeTokens(e,t,a,s,i,c.accessToken,c.tenantId,n),[2,c]}}))}))},t.prototype.createIdTokenObj=function(e){return new Vi(e.id_token||k.EMPTY_STRING,this.browserCrypto)},t.prototype.createHomeAccountIdentifier=function(e,t){return zi.generateHomeAccountId(e.client_info||k.EMPTY_STRING,Ho.Default,this.logger,this.browserCrypto,t)},t.prototype.createAccountEntity=function(e,t,n,r){return zi.createAccount(e.client_info,t,n,void 0,void 0,void 0,r,e.account.id)},t.prototype.generateScopes=function(e,t){return e.scope?ji.fromString(e.scope):ji.fromString(t.scope)},t.prototype.generatePopAccessToken=function(e,t){return l(this,void 0,void 0,(function(){var n,r;return d(this,(function(o){switch(o.label){case 0:if(t.tokenType!==j.POP)return[3,2];if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),[2,e.shr];if(n=new La(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce},!t.keyId)throw Sn.createKeyIdMissingError();return[4,n.signPopToken(e.access_token,t.keyId,r)];case 1:return[2,o.sent()];case 2:return[2,e.access_token]}}))}))},t.prototype.generateAuthenticationResult=function(e,t,n,r,o,i){return l(this,void 0,void 0,(function(){var a,s,c,u,l,h,p;return d(this,(function(d){switch(d.label){case 0:return a=this.addTelemetryFromNativeResponse(e),s=e.scope?ji.fromString(e.scope):ji.fromString(t.scope),c=e.account.properties||{},u=c.UID||n.claims.oid||n.claims.sub||k.EMPTY_STRING,l=c.TenantId||n.claims.tid||k.EMPTY_STRING,[4,this.generatePopAccessToken(e,t)];case 1:return h=d.sent(),p=t.tokenType===j.POP?j.POP:j.BEARER,[2,{authority:o,uniqueId:u,tenantId:l,scopes:s.asArray(),account:r.getAccountInfo(),idToken:e.id_token,idTokenClaims:n.claims,accessToken:h,fromCache:!!a&&this.isResponseFromCache(a),expiresOn:new Date(1e3*Number(i+e.expires_in)),tokenType:p,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}]}}))}))},t.prototype.cacheAccount=function(e){var t=this;this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch((function(e){t.logger.error("Error occurred while removing account context from browser storage. "+e)}))},t.prototype.cacheNativeTokens=function(e,t,n,r,o,i,a,s){var c=Wo.createIdTokenEntity(n,t.authority,e.id_token||k.EMPTY_STRING,t.clientId,o.claims.tid||k.EMPTY_STRING),u=s+(t.tokenType===j.POP?k.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),l=this.generateScopes(e,t),d=Zi.createAccessTokenEntity(n,t.authority,i,t.clientId,o?o.claims.tid||k.EMPTY_STRING:a,l.printScopes(),u,0,this.browserCrypto),h=new Fa(r,c,d);this.nativeStorageManager.saveCacheRecord(h)},t.prototype.addTelemetryFromNativeResponse=function(e){var t=this.getMATSFromResponse(e);return t?(this.performanceClient.addStaticFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null},t.prototype.validateNativeResponse=function(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw rs.createUnexpectedError("Response missing expected properties.")},t.prototype.getMATSFromResponse=function(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(e){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null},t.prototype.isResponseFromCache=function(e){return void 0===e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached},t.prototype.initializeNativeRequest=function(e){return l(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,l,h,p=this;return d(this,(function(d){switch(d.label){case 0:return this.logger.trace("NativeInteractionClient - initializeNativeRequest called"),t=e.authority||this.config.auth.authority,e.account?[4,this.validateRequestAuthority(t,e.account)]:[3,2];case 1:d.sent(),d.label=2;case 2:return(n=new ua(t)).validateAsUri(),r=e.scopes,o=u(e,["scopes"]),(i=new ji(r||[])).appendScopes(S),a=function(){switch(p.apiId){case re.ssoSilent:case re.acquireTokenSilent_silentFlow:return p.logger.trace("initializeNativeRequest: silent request sets prompt to none"),O.NONE}if(e.prompt)switch(e.prompt){case O.NONE:case O.CONSENT:case O.LOGIN:return p.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw p.logger.trace("initializeNativeRequest: prompt = "+e.prompt+" is not compatible with native flow"),ho.createNativePromptParameterNotSupportedError()}else p.logger.trace("initializeNativeRequest: prompt was not provided")},s=c(c({},o),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:c(c(c({},e.extraQueryParameters),e.tokenQueryParameters),{telemetry:"MATS"}),extendedExpiryToken:!1}),e.authenticationScheme!==j.POP?[3,4]:(l={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},[4,new La(this.browserCrypto).generateCnf(l)]);case 3:h=d.sent(),s.reqCnf=h.reqCnfString,s.keyId=h.kid,d.label=4;case 4:return[2,s]}}))}))},t}($a),cs=function(){function e(e,t,n,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.responseId=0,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(o.NativeMessageHandlerHandshake)}return e.prototype.sendMessage=function(e){return l(this,void 0,void 0,(function(){var t,n=this;return d(this,(function(r){return this.logger.trace("NativeMessageHandler - sendMessage called."),t={channel:Te,extensionId:this.extensionId,responseId:this.responseId++,body:e},this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii("NativeMessageHandler - Sending request to browser extension: "+JSON.stringify(t)),this.messageChannel.port1.postMessage(t),[2,new Promise((function(e,r){n.resolvers.set(t.responseId,{resolve:e,reject:r})}))]}))}))},e.createProvider=function(t,n,r){return l(this,void 0,void 0,(function(){var o,i;return d(this,(function(a){switch(a.label){case 0:t.trace("NativeMessageHandler - createProvider called."),a.label=1;case 1:return a.trys.push([1,3,,5]),[4,(o=new e(t,n,r,"ppnbnpeolgkicgegkbkbjmhlideopiji")).sendHandshakeRequest()];case 2:return a.sent(),[2,o];case 3:return a.sent(),[4,(i=new e(t,n,r)).sendHandshakeRequest()];case 4:return a.sent(),[2,i];case 5:return[2]}}))}))},e.prototype.sendHandshakeRequest=function(){return l(this,void 0,void 0,(function(){var e,t=this;return d(this,(function(n){return this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1),e={channel:Te,extensionId:this.extensionId,responseId:this.responseId++,body:{method:J.HandshakeRequest}},this.handshakeEvent.addStaticFields({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=function(e){t.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),[2,new Promise((function(n,r){t.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),t.timeoutId=window.setTimeout((function(){window.removeEventListener("message",t.windowListener,!1),t.messageChannel.port1.close(),t.messageChannel.port2.close(),t.handshakeEvent.endMeasurement({extensionHandshakeTimedOut:!0,success:!1}),r(ho.createNativeHandshakeTimeoutError()),t.handshakeResolvers.delete(e.responseId)}),t.handshakeTimeoutMs)}))]}))}))},e.prototype.onWindowMessage=function(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source===window){var t=e.data;if(t.channel&&t.channel===Te&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===J.HandshakeRequest){this.logger.verbose(t.extensionId?"Extension with id: "+t.extensionId+" not installed":"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1);var n=this.handshakeResolvers.get(t.responseId);n&&(this.handshakeEvent.endMeasurement({success:!1,extensionInstalled:!1}),n.reject(ho.createNativeExtensionNotInstalledError()))}}},e.prototype.onChannelMessage=function(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");var t=e.data,n=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{var o=t.body.method;if(o===J.Response){if(!n)return;var i=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii("NativeMessageHandler - Received response from browser extension: "+JSON.stringify(i)),"Success"!==i.status)n.reject(rs.createError(i.code,i.description,i.ext));else{if(!i.result)throw he.createUnexpectedError("Event does not contain result.");i.result.code&&i.result.description?n.reject(rs.createError(i.result.code,i.result.description,i.result.ext)):n.resolve(i.result)}this.resolvers.delete(t.responseId)}else if(o===J.HandshakeResponse){if(!r)return;clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose("NativeMessageHandler - Received HandshakeResponse from extension: "+this.extensionId),this.handshakeEvent.endMeasurement({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(t){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: "+t.toString()),this.logger.errorPii("Unable to parse "+e),n?n.reject(t):r&&r.reject(t)}},e.prototype.getExtensionId=function(){return this.extensionId},e.prototype.getExtensionVersion=function(){return this.extensionVersion},e.isNativeAvailable=function(e,t,n,r){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!n)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(r)switch(r){case j.BEARER:case j.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0},e}(),us=function(){function e(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}return e.prototype.handleCodeResponseFromHash=function(e,t,n,r){return l(this,void 0,void 0,(function(){var i,a,s;return d(this,(function(c){if(this.performanceClient.addQueueMeasurement(o.HandleCodeResponseFromHash,this.authCodeRequest.correlationId),this.logger.verbose("InteractionHandler.handleCodeResponse called"),An.isEmpty(e))throw ho.createEmptyHashError(e);if(i=this.browserStorage.generateStateKey(t),!(a=this.browserStorage.getTemporaryCache(i)))throw Sn.createStateNotFoundError("Cached State");try{s=this.authModule.handleFragmentResponse(e,a)}catch(e){throw e instanceof pe&&e.subError===Zn?ho.createUserCancelledError():e}return this.performanceClient.setPreQueueTime(o.HandleCodeResponseFromServer,this.authCodeRequest.correlationId),[2,this.handleCodeResponseFromServer(s,t,n,r)]}))}))},e.prototype.handleCodeResponseFromServer=function(e,t,n,r,i){return void 0===i&&(i=!0),l(this,void 0,void 0,(function(){var a,s,c,u,l,h;return d(this,(function(d){switch(d.label){case 0:if(this.performanceClient.addQueueMeasurement(o.HandleCodeResponseFromServer,this.authCodeRequest.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),a=this.browserStorage.generateStateKey(t),!(s=this.browserStorage.getTemporaryCache(a)))throw Sn.createStateNotFoundError("Cached State");return c=this.browserStorage.generateNonceKey(s),u=this.browserStorage.getTemporaryCache(c),this.authCodeRequest.code=e.code,e.cloud_instance_host_name?(this.performanceClient.setPreQueueTime(o.UpdateTokenEndpointAuthority,this.authCodeRequest.correlationId),[4,this.updateTokenEndpointAuthority(e.cloud_instance_host_name,n,r)]):[3,2];case 1:d.sent(),d.label=2;case 2:return i&&(e.nonce=u||void 0),e.state=s,e.client_info?this.authCodeRequest.clientInfo=e.client_info:(l=this.checkCcsCredentials())&&(this.authCodeRequest.ccsCredential=l),this.performanceClient.setPreQueueTime(o.AuthClientAcquireToken,this.authCodeRequest.correlationId),[4,this.authModule.acquireToken(this.authCodeRequest,e)];case 3:return h=d.sent(),this.browserStorage.cleanRequestByState(t),[2,h]}}))}))},e.prototype.updateTokenEndpointAuthority=function(e,t,n){return l(this,void 0,void 0,(function(){var r,i;return d(this,(function(a){switch(a.label){case 0:return this.performanceClient.addQueueMeasurement(o.UpdateTokenEndpointAuthority,this.authCodeRequest.correlationId),r="https://"+e+"/"+t.tenant+"/",[4,Wa.createDiscoveredInstance(r,n,this.browserStorage,t.options,this.logger,this.performanceClient,this.authCodeRequest.correlationId)];case 1:return i=a.sent(),this.authModule.updateAuthority(i),[2]}}))}))},e.prototype.checkCcsCredentials=function(){var e=this.browserStorage.getTemporaryCache(ee.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch(t){this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii("Cache credential could not be parsed: "+e)}return null},e}(),ls=function(e){function t(t,n,r,o,i,a,s,c,u,l){var d=e.call(this,t,n,r,o,i,a,s,u,l)||this;return d.unloadWindow=d.unloadWindow.bind(d),d.nativeStorage=c,d}return r(t,e),t.prototype.acquireToken=function(e){try{var t=this.generatePopupName(e.scopes||S,e.authority||this.config.auth.authority),n=e.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,t,n);this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");var r=this.openSizedPopup("about:blank",t,n);return this.acquireTokenPopupAsync(e,t,n,r)}catch(e){return Promise.reject(e)}},t.prototype.logout=function(e){try{this.logger.verbose("logoutPopup called");var t=this.initializeLogoutRequest(e),n=this.generateLogoutPopupName(t),r=e&&e.authority,o=e&&e.mainWindowRedirectUri,i=(null==e?void 0:e.popupWindowAttributes)||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,n,i,r,void 0,o);this.logger.verbose("asyncPopup set to false, opening popup");var a=this.openSizedPopup("about:blank",n,i);return this.logoutPopupAsync(t,n,i,r,a,o)}catch(e){return Promise.reject(e)}},t.prototype.acquireTokenPopupAsync=function(e,t,n,r){return l(this,void 0,void 0,(function(){var i,a,s,u,l,h,p,f,m,g,y,v,_,b,C,E,T=this;return d(this,(function(d){switch(d.label){case 0:return this.logger.verbose("acquireTokenPopupAsync called"),i=this.initializeServerTelemetryManager(re.acquireTokenPopup),this.performanceClient.setPreQueueTime(o.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(e,oe.Popup)];case 1:a=d.sent(),this.browserStorage.updateCacheEntries(a.state,a.nonce,a.authority,a.loginHint||k.EMPTY_STRING,a.account||null),d.label=2;case 2:return d.trys.push([2,8,,9]),this.performanceClient.setPreQueueTime(o.StandardInteractionClientInitializeAuthorizationCodeRequest,e.correlationId),[4,this.initializeAuthorizationCodeRequest(a)];case 3:return s=d.sent(),this.performanceClient.setPreQueueTime(o.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(i,a.authority,a.azureCloudOptions)];case 4:return u=d.sent(),this.logger.verbose("Auth code client created"),l=cs.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme),h=void 0,l&&(h=this.performanceClient.startMeasurement(o.FetchAccountIdWithNativeBroker,e.correlationId)),[4,u.getAuthCodeUrl(c(c({},a),{nativeBroker:l}))];case 5:return p=d.sent(),f=new us(u,this.browserStorage,s,this.logger,this.performanceClient),m={popup:r,popupName:t,popupWindowAttributes:n},g=this.initiateAuthRequest(p,m),this.eventHandler.emitEvent(ha.POPUP_OPENED,oe.Popup,{popupWindow:g},null),[4,this.monitorPopupForHash(g)];case 6:if(y=d.sent(),v=ua.getDeserializedHash(y),_=this.validateAndExtractStateFromHash(v,oe.Popup,a.correlationId),Pa.removeThrottle(this.browserStorage,this.config.auth.clientId,s),v.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),h&&h.endMeasurement({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw ho.createNativeConnectionNotEstablishedError();return b=new ss(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,re.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,v.accountId,this.nativeStorage,a.correlationId),C=ia.parseRequestState(this.browserCrypto,_).userRequestState,[2,b.acquireToken(c(c({},a),{state:C,prompt:void 0})).finally((function(){T.browserStorage.cleanRequestByState(_)}))]}return[4,f.handleCodeResponseFromHash(y,_,u.authority,this.networkClient)];case 7:return[2,d.sent()];case 8:throw E=d.sent(),r&&r.close(),E instanceof he&&E.setCorrelationId(this.correlationId),i.cacheFailedRequest(E),this.browserStorage.cleanRequestByState(a.state),E;case 9:return[2]}}))}))},t.prototype.logoutPopupAsync=function(e,t,n,r,i,a){return l(this,void 0,void 0,(function(){var s,c,u,l,h,p,f;return d(this,(function(d){switch(d.label){case 0:this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(ha.LOGOUT_START,oe.Popup,e),s=this.initializeServerTelemetryManager(re.logoutPopup),d.label=1;case 1:return d.trys.push([1,5,,6]),[4,this.clearCacheOnLogout(e.account)];case 2:return d.sent(),this.performanceClient.setPreQueueTime(o.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(s,r)];case 3:return c=d.sent(),this.logger.verbose("Auth code client created"),u=c.getLogoutUri(e),this.eventHandler.emitEvent(ha.LOGOUT_SUCCESS,oe.Popup,e),l=this.openPopup(u,{popupName:t,popupWindowAttributes:n,popup:i}),this.eventHandler.emitEvent(ha.POPUP_OPENED,oe.Popup,{popupWindow:l},null),[4,this.waitForLogoutPopup(l)];case 4:return d.sent(),a?(h={apiId:re.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},p=ua.getAbsoluteUrl(a,Ia.getCurrentUri()),this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: "+p),this.navigationClient.navigateInternal(p,h)):this.logger.verbose("No main window navigation requested"),[3,6];case 5:throw f=d.sent(),i&&i.close(),f instanceof he&&f.setCorrelationId(this.correlationId),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(ha.LOGOUT_FAILURE,oe.Popup,null,f),this.eventHandler.emitEvent(ha.LOGOUT_END,oe.Popup),s.cacheFailedRequest(f),f;case 6:return this.eventHandler.emitEvent(ha.LOGOUT_END,oe.Popup),[2]}}))}))},t.prototype.initiateAuthRequest=function(e,t){if(An.isEmpty(e))throw this.logger.error("Navigate url is empty"),ho.createEmptyNavigationUriError();return this.logger.infoPii("Navigate to: "+e),this.openPopup(e,t)},t.prototype.monitorPopupForHash=function(e){var t=this;return new Promise((function(n,r){var o=t.config.system.windowHashTimeout/t.config.system.pollIntervalMilliseconds,i=0;t.logger.verbose("PopupHandler.monitorPopupForHash - polling started");var a=setInterval((function(){if(e.closed)return t.logger.error("PopupHandler.monitorPopupForHash - window closed"),t.cleanPopup(),clearInterval(a),void r(ho.createUserCancelledError());var s=k.EMPTY_STRING,c=k.EMPTY_STRING;try{s=e.location.href,c=e.location.hash}catch(e){}An.isEmpty(s)||"about:blank"===s||(t.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),i++,c?(t.logger.verbose("PopupHandler.monitorPopupForHash - found hash in url"),clearInterval(a),t.cleanPopup(e),ua.hashContainsKnownProperties(c)?(t.logger.verbose("PopupHandler.monitorPopupForHash - hash contains known properties, returning."),n(c)):(t.logger.error("PopupHandler.monitorPopupForHash - found hash in url but it does not contain known properties. Check that your router is not changing the hash prematurely."),t.logger.errorPii("PopupHandler.monitorPopupForHash - hash found: "+c),r(ho.createHashDoesNotContainKnownPropertiesError()))):i>o&&(t.logger.error("PopupHandler.monitorPopupForHash - unable to find hash in url, timing out"),clearInterval(a),r(ho.createMonitorPopupTimeoutError())))}),t.config.system.pollIntervalMilliseconds)}))},t.prototype.waitForLogoutPopup=function(e){var t=this;return new Promise((function(n){t.logger.verbose("PopupHandler.waitForLogoutPopup - polling started");var r=setInterval((function(){e.closed&&(t.logger.error("PopupHandler.waitForLogoutPopup - window closed"),t.cleanPopup(),clearInterval(r),n());var o=k.EMPTY_STRING;try{o=e.location.href}catch(e){}An.isEmpty(o)||"about:blank"===o||(t.logger.verbose("PopupHandler.waitForLogoutPopup - popup window is on same origin as caller, closing."),clearInterval(r),t.cleanPopup(e),n())}),t.config.system.pollIntervalMilliseconds)}))},t.prototype.openPopup=function(e,t){try{var n=void 0;if(t.popup?(n=t.popup,this.logger.verbosePii("Navigating popup window to: "+e),n.location.assign(e)):void 0===t.popup&&(this.logger.verbosePii("Opening popup window to: "+e),n=this.openSizedPopup(e,t.popupName,t.popupWindowAttributes)),!n)throw ho.createEmptyWindowCreatedError();return n.focus&&n.focus(),this.currentWindow=n,window.addEventListener("beforeunload",this.unloadWindow),n}catch(e){throw this.logger.error("error opening popup "+e.message),this.browserStorage.setInteractionInProgress(!1),ho.createPopupWindowError(e.toString())}},t.prototype.openSizedPopup=function(e,t,n){var r,o,i,a,s=window.screenLeft?window.screenLeft:window.screenX,c=window.screenTop?window.screenTop:window.screenY,u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=null===(r=n.popupSize)||void 0===r?void 0:r.width,h=null===(o=n.popupSize)||void 0===o?void 0:o.height,p=null===(i=n.popupPosition)||void 0===i?void 0:i.top,f=null===(a=n.popupPosition)||void 0===a?void 0:a.left;return(!d||d<0||d>u)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),d=483),(!h||h<0||h>l)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),h=600),(!p||p<0||p>l)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),p=Math.max(0,l/2-300+c)),(!f||f<0||f>u)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),f=Math.max(0,u/2-241.5+s)),window.open(e,t,"width="+d+", height="+h+", top="+p+", left="+f+", scrollbars=yes")},t.prototype.unloadWindow=function(e){this.browserStorage.cleanRequestByInteractionType(oe.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()},t.prototype.cleanPopup=function(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)},t.prototype.generatePopupName=function(e,t){return Ce+"."+this.config.auth.clientId+"."+e.join("-")+"."+t+"."+this.correlationId},t.prototype.generateLogoutPopupName=function(e){var t=e.account&&e.account.homeAccountId;return Ce+"."+this.config.auth.clientId+"."+t+"."+this.correlationId},t}(Ja),ds=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t,n,r,o,a)||this;return s.browserCrypto=i,s}return r(t,e),t.prototype.initiateAuthRequest=function(e,t){return l(this,void 0,void 0,(function(){var n;return d(this,(function(r){switch(r.label){case 0:return this.logger.verbose("RedirectHandler.initiateAuthRequest called"),An.isEmpty(e)?[3,7]:(t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(ee.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(ee.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest,this.browserCrypto),this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: "+e),n={apiId:re.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1},"function"!=typeof t.onRedirectNavigate?[3,4]:(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1===t.onRedirectNavigate(e)?[3,2]:(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),[4,t.navigationClient.navigateExternal(e,n)])));case 1:case 5:return r.sent(),[2];case 2:return this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation"),[2];case 3:return[3,6];case 4:return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),[4,t.navigationClient.navigateExternal(e,n)];case 6:return[3,8];case 7:throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),ho.createEmptyNavigationUriError();case 8:return[2]}}))}))},t.prototype.handleCodeResponseFromHash=function(e,t,n,r){return l(this,void 0,void 0,(function(){var o,i,a,s,c,u,l;return d(this,(function(d){switch(d.label){case 0:if(this.logger.verbose("RedirectHandler.handleCodeResponse called"),An.isEmpty(e))throw ho.createEmptyHashError(e);if(this.browserStorage.setInteractionInProgress(!1),o=this.browserStorage.generateStateKey(t),!(i=this.browserStorage.getTemporaryCache(o)))throw Sn.createStateNotFoundError("Cached State");try{a=this.authModule.handleFragmentResponse(e,i)}catch(e){throw e instanceof pe&&e.subError===Zn?ho.createUserCancelledError():e}return s=this.browserStorage.generateNonceKey(i),c=this.browserStorage.getTemporaryCache(s),this.authCodeRequest.code=a.code,a.cloud_instance_host_name?[4,this.updateTokenEndpointAuthority(a.cloud_instance_host_name,n,r)]:[3,2];case 1:d.sent(),d.label=2;case 2:return a.nonce=c||void 0,a.state=i,a.client_info?this.authCodeRequest.clientInfo=a.client_info:(u=this.checkCcsCredentials())&&(this.authCodeRequest.ccsCredential=u),[4,this.authModule.acquireToken(this.authCodeRequest,a)];case 3:return l=d.sent(),this.browserStorage.cleanRequestByState(t),[2,l]}}))}))},t}(us),hs=function(e){function t(t,n,r,o,i,a,s,c,u,l){var d=e.call(this,t,n,r,o,i,a,s,u,l)||this;return d.nativeStorage=c,d}return r(t,e),t.prototype.acquireToken=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,a,s,u,l,h,p=this;return d(this,(function(d){switch(d.label){case 0:return this.performanceClient.setPreQueueTime(o.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(e,oe.Redirect)];case 1:t=d.sent(),this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||k.EMPTY_STRING,t.account||null),n=this.initializeServerTelemetryManager(re.acquireTokenRedirect),r=function(e){e.persisted&&(p.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),p.browserStorage.cleanRequestByState(t.state),p.eventHandler.emitEvent(ha.RESTORE_FROM_BFCACHE,oe.Redirect))},d.label=2;case 2:return d.trys.push([2,7,,8]),this.performanceClient.setPreQueueTime(o.StandardInteractionClientInitializeAuthorizationCodeRequest,e.correlationId),[4,this.initializeAuthorizationCodeRequest(t)];case 3:return i=d.sent(),this.performanceClient.setPreQueueTime(o.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(n,t.authority,t.azureCloudOptions)];case 4:return a=d.sent(),this.logger.verbose("Auth code client created"),s=new ds(a,this.browserStorage,i,this.logger,this.browserCrypto,this.performanceClient),[4,a.getAuthCodeUrl(c(c({},t),{nativeBroker:cs.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}))];case 5:return u=d.sent(),l=this.getRedirectStartPage(e.redirectStartPage),this.logger.verbosePii("Redirect start page: "+l),window.addEventListener("pageshow",r),[4,s.initiateAuthRequest(u,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:l,onRedirectNavigate:e.onRedirectNavigate})];case 6:return[2,d.sent()];case 7:throw(h=d.sent())instanceof he&&h.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),n.cacheFailedRequest(h),this.browserStorage.cleanRequestByState(t.state),h;case 8:return[2]}}))}))},t.prototype.handleRedirectPromise=function(e){return l(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,c,u,l,h,p;return d(this,(function(d){switch(d.label){case 0:t=this.initializeServerTelemetryManager(re.handleRedirectPromise),d.label=1;case 1:if(d.trys.push([1,10,,11]),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null];if(!(n=this.getRedirectResponseHash(e||window.location.hash)))return this.logger.info("handleRedirectPromise did not detect a response hash as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(oe.Redirect),[2,null];r=void 0;try{o=ua.getDeserializedHash(n),r=this.validateAndExtractStateFromHash(o,oe.Redirect),this.logger.verbose("State extracted from hash")}catch(e){return this.logger.info("handleRedirectPromise was unable to extract state due to: "+e),this.browserStorage.cleanRequestByInteractionType(oe.Redirect),[2,null]}return i=this.browserStorage.getTemporaryCache(ee.ORIGIN_URI,!0)||k.EMPTY_STRING,a=ua.removeHashFromUrl(i),s=ua.removeHashFromUrl(window.location.href),a===s&&this.config.auth.navigateToLoginRequestUrl?(this.logger.verbose("Current page is loginRequestUrl, handling hash"),[4,this.handleHash(n,r,t)]):[3,3];case 2:return c=d.sent(),i.indexOf("#")>-1&&Ia.replaceHash(i),[2,c];case 3:return this.config.auth.navigateToLoginRequestUrl?[3,4]:(this.logger.verbose("NavigateToLoginRequestUrl set to false, handling hash"),[2,this.handleHash(n,r,t)]);case 4:return Ia.isInIframe()&&!this.config.system.allowRedirectInIframe?[3,9]:(this.browserStorage.setTemporaryCache(ee.URL_HASH,n,!0),u={apiId:re.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},l=!0,i&&"null"!==i?[3,6]:(h=Ia.getHomepage(),this.browserStorage.setTemporaryCache(ee.ORIGIN_URI,h,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),[4,this.navigationClient.navigateInternal(h,u)]));case 5:return l=d.sent(),[3,8];case 6:return this.logger.verbose("Navigating to loginRequestUrl: "+i),[4,this.navigationClient.navigateInternal(i,u)];case 7:l=d.sent(),d.label=8;case 8:if(!l)return[2,this.handleHash(n,r,t)];d.label=9;case 9:return[2,null];case 10:throw(p=d.sent())instanceof he&&p.setCorrelationId(this.correlationId),t.cacheFailedRequest(p),this.browserStorage.cleanRequestByInteractionType(oe.Redirect),p;case 11:return[2]}}))}))},t.prototype.getRedirectResponseHash=function(e){if(this.logger.verbose("getRedirectResponseHash called"),ua.hashContainsKnownProperties(e))return Ia.clearHash(window),this.logger.verbose("Hash contains known properties, returning response hash"),e;var t=this.browserStorage.getTemporaryCache(ee.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ee.URL_HASH)),this.logger.verbose("Hash does not contain known properties, returning cached hash"),t},t.prototype.handleHash=function(e,t,n){return l(this,void 0,void 0,(function(){var r,i,a,s,u,l,h=this;return d(this,(function(d){switch(d.label){case 0:if(r=this.browserStorage.getCachedRequest(t,this.browserCrypto),this.logger.verbose("handleHash called, retrieved cached request"),(i=ua.getDeserializedHash(e)).accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw ho.createNativeConnectionNotEstablishedError();return a=new ss(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,re.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,i.accountId,this.nativeStorage,r.correlationId),s=ia.parseRequestState(this.browserCrypto,t).userRequestState,[2,a.acquireToken(c(c({},r),{state:s,prompt:void 0})).finally((function(){h.browserStorage.cleanRequestByState(t)}))]}if(!(u=this.browserStorage.getCachedAuthority(t)))throw ho.createNoCachedAuthorityError();return this.performanceClient.setPreQueueTime(o.StandardInteractionClientCreateAuthCodeClient,r.correlationId),[4,this.createAuthCodeClient(n,u)];case 1:return l=d.sent(),this.logger.verbose("Auth code client created"),Pa.removeThrottle(this.browserStorage,this.config.auth.clientId,r),[4,new ds(l,this.browserStorage,r,this.logger,this.browserCrypto,this.performanceClient).handleCodeResponseFromHash(e,t,l.authority,this.networkClient)];case 2:return[2,d.sent()]}}))}))},t.prototype.logout=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,a,s;return d(this,(function(c){switch(c.label){case 0:this.logger.verbose("logoutRedirect called"),t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(re.logout),c.label=1;case 1:return c.trys.push([1,10,,11]),this.eventHandler.emitEvent(ha.LOGOUT_START,oe.Redirect,e),[4,this.clearCacheOnLogout(t.account)];case 2:return c.sent(),r={apiId:re.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},this.performanceClient.setPreQueueTime(o.StandardInteractionClientCreateAuthCodeClient,t.correlationId),[4,this.createAuthCodeClient(n,e&&e.authority)];case 3:return i=c.sent(),this.logger.verbose("Auth code client created"),a=i.getLogoutUri(t),this.eventHandler.emitEvent(ha.LOGOUT_SUCCESS,oe.Redirect,t),e&&"function"==typeof e.onRedirectNavigate?!1===e.onRedirectNavigate(a)?[3,5]:(this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),[4,this.navigationClient.navigateExternal(a,r)]):[3,7];case 4:return c.sent(),[2];case 5:this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation"),c.label=6;case 6:return[3,9];case 7:return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),[4,this.navigationClient.navigateExternal(a,r)];case 8:return c.sent(),[2];case 9:return[3,11];case 10:throw(s=c.sent())instanceof he&&s.setCorrelationId(this.correlationId),n.cacheFailedRequest(s),this.eventHandler.emitEvent(ha.LOGOUT_FAILURE,oe.Redirect,null,s),this.eventHandler.emitEvent(ha.LOGOUT_END,oe.Redirect),s;case 11:return this.eventHandler.emitEvent(ha.LOGOUT_END,oe.Redirect),[2]}}))}))},t.prototype.getRedirectStartPage=function(e){var t=e||window.location.href;return ua.getAbsoluteUrl(t,Ia.getCurrentUri())},t}(Ja),ps=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t,n,r,o,a)||this;return s.navigateFrameWait=i.navigateFrameWait,s.pollIntervalMilliseconds=i.pollIntervalMilliseconds,s}return r(t,e),t.prototype.initiateAuthRequest=function(e){return l(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:if(this.performanceClient.addQueueMeasurement(o.SilentHandlerInitiateAuthRequest,this.authCodeRequest.correlationId),An.isEmpty(e))throw this.logger.info("Navigate url is empty"),ho.createEmptyNavigationUriError();return this.navigateFrameWait?(this.performanceClient.setPreQueueTime(o.SilentHandlerLoadFrame,this.authCodeRequest.correlationId),[4,this.loadFrame(e)]):[3,2];case 1:return[2,t.sent()];case 2:return[2,this.loadFrameSync(e)]}}))}))},t.prototype.monitorIframeForHash=function(e,t){var n=this;return this.performanceClient.addQueueMeasurement(o.SilentHandlerMonitorIframeForHash,this.authCodeRequest.correlationId),new Promise((function(r,o){t<Sa&&n.logger.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower ("+t+"ms) than the default ("+Sa+"ms). This may result in timeouts.");var i=window.performance.now()+t,a=setInterval((function(){if(window.performance.now()>i)return n.removeHiddenIframe(e),clearInterval(a),void o(ho.createMonitorIframeTimeoutError());var t=k.EMPTY_STRING,s=e.contentWindow;try{t=s?s.location.href:k.EMPTY_STRING}catch(e){}if(!An.isEmpty(t)){var c=s?s.location.hash:k.EMPTY_STRING;return ua.hashContainsKnownProperties(c)?(n.removeHiddenIframe(e),clearInterval(a),void r(c)):void 0}}),n.pollIntervalMilliseconds)}))},t.prototype.loadFrame=function(e){var t=this;return this.performanceClient.addQueueMeasurement(o.SilentHandlerLoadFrame,this.authCodeRequest.correlationId),new Promise((function(n,r){var o=t.createHiddenIframe();setTimeout((function(){o?(o.src=e,n(o)):r("Unable to load iframe")}),t.navigateFrameWait)}))},t.prototype.loadFrameSync=function(e){var t=this.createHiddenIframe();return t.src=e,t},t.prototype.createHiddenIframe=function(){var e=document.createElement("iframe");return e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.getElementsByTagName("body")[0].appendChild(e),e},t.prototype.removeHiddenIframe=function(e){document.body===e.parentNode&&document.body.removeChild(e)},t}(us),fs=function(e){function t(t,n,r,o,i,a,s,c,u,l,d){var h=e.call(this,t,n,r,o,i,a,c,l,d)||this;return h.apiId=s,h.nativeStorage=u,h}return r(t,e),t.prototype.acquireToken=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,a;return d(this,(function(s){switch(s.label){case 0:if(this.performanceClient.addQueueMeasurement(o.SilentIframeClientAcquireToken,e.correlationId),this.logger.verbose("acquireTokenByIframe called"),t=this.performanceClient.startMeasurement(o.SilentIframeClientAcquireToken,e.correlationId),An.isEmpty(e.loginHint)&&An.isEmpty(e.sid)&&(!e.account||An.isEmpty(e.account.username))&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request."),e.prompt&&e.prompt!==O.NONE&&e.prompt!==O.NO_SESSION)throw t.endMeasurement({success:!1}),ho.createSilentPromptValueError(e.prompt);return this.performanceClient.setPreQueueTime(o.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(c(c({},e),{prompt:e.prompt||O.NONE}),oe.Silent)];case 1:n=s.sent(),this.browserStorage.updateCacheEntries(n.state,n.nonce,n.authority,n.loginHint||k.EMPTY_STRING,n.account||null),r=this.initializeServerTelemetryManager(this.apiId),s.label=2;case 2:return s.trys.push([2,5,,6]),this.performanceClient.setPreQueueTime(o.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(r,n.authority,n.azureCloudOptions)];case 3:return i=s.sent(),this.logger.verbose("Auth code client created"),this.performanceClient.setPreQueueTime(o.SilentIframeClientTokenHelper,e.correlationId),[4,this.silentTokenHelper(i,n).then((function(e){return t.endMeasurement({success:!0,fromCache:!1,requestId:e.requestId}),e}))];case 4:return[2,s.sent()];case 5:throw(a=s.sent())instanceof he&&a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a),this.browserStorage.cleanRequestByState(n.state),t.endMeasurement({errorCode:a instanceof he&&a.errorCode||void 0,subErrorCode:a instanceof he&&a.subError||void 0,success:!1}),a;case 6:return[2]}}))}))},t.prototype.logout=function(){return Promise.reject(ho.createSilentLogoutUnsupportedError())},t.prototype.silentTokenHelper=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i,a,s,u,l,h,p,f=this;return d(this,(function(d){switch(d.label){case 0:return this.performanceClient.addQueueMeasurement(o.SilentIframeClientTokenHelper,t.correlationId),this.performanceClient.setPreQueueTime(o.StandardInteractionClientInitializeAuthorizationCodeRequest,t.correlationId),[4,this.initializeAuthorizationCodeRequest(t)];case 1:return n=d.sent(),this.performanceClient.setPreQueueTime(o.GetAuthCodeUrl,t.correlationId),[4,e.getAuthCodeUrl(c(c({},t),{nativeBroker:cs.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)}))];case 2:return r=d.sent(),i=new ps(e,this.browserStorage,n,this.logger,this.config.system,this.performanceClient),this.performanceClient.setPreQueueTime(o.SilentHandlerInitiateAuthRequest,t.correlationId),[4,i.initiateAuthRequest(r)];case 3:return a=d.sent(),this.performanceClient.setPreQueueTime(o.SilentHandlerMonitorIframeForHash,t.correlationId),[4,i.monitorIframeForHash(a,this.config.system.iframeHashTimeout)];case 4:if(s=d.sent(),u=ua.getDeserializedHash(s),l=this.validateAndExtractStateFromHash(u,oe.Silent,n.correlationId),u.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw ho.createNativeConnectionNotEstablishedError();return h=new ss(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,u.accountId,this.browserStorage,this.correlationId),p=ia.parseRequestState(this.browserCrypto,l).userRequestState,[2,h.acquireToken(c(c({},t),{state:p,prompt:t.prompt||O.NONE})).finally((function(){f.browserStorage.cleanRequestByState(l)}))]}return this.performanceClient.setPreQueueTime(o.HandleCodeResponseFromHash,t.correlationId),[2,i.handleCodeResponseFromHash(s,l,e.authority,this.networkClient)]}}))}))},t}(Ja),ms=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.acquireToken=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,a,s=this;return d(this,(function(u){switch(u.label){case 0:return this.performanceClient.addQueueMeasurement(o.SilentRefreshClientAcquireToken,e.correlationId),this.performanceClient.setPreQueueTime(o.InitializeBaseRequest,e.correlationId),n=[c({},e)],[4,this.initializeBaseRequest(e,e.account)];case 1:return t=c.apply(void 0,n.concat([u.sent()])),r=this.performanceClient.startMeasurement(o.SilentRefreshClientAcquireToken,t.correlationId),i=this.initializeServerTelemetryManager(re.acquireTokenSilent_silentFlow),[4,this.createRefreshTokenClient(i,t.authority,t.azureCloudOptions)];case 2:return a=u.sent(),this.logger.verbose("Refresh token client created"),this.performanceClient.setPreQueueTime(o.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),[2,a.acquireTokenByRefreshToken(t).then((function(e){return r.endMeasurement({success:!0,fromCache:e.fromCache,requestId:e.requestId}),e})).catch((function(e){throw e instanceof he&&e.setCorrelationId(s.correlationId),i.cacheFailedRequest(e),r.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}))]}}))}))},t.prototype.logout=function(){return Promise.reject(ho.createSilentLogoutUnsupportedError())},t.prototype.createRefreshTokenClient=function(e,t,n){return l(this,void 0,void 0,(function(){var r;return d(this,(function(i){switch(i.label){case 0:return this.performanceClient.setPreQueueTime(o.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(e,t,n)];case 1:return r=i.sent(),[2,new os(r,this.performanceClient)]}}))}))},t}(Ja),gs=function(){function e(e,t,n,r){this.isBrowserEnvironment="undefined"!=typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=r}return e.prototype.loadExternalTokens=function(e,t,n){if(this.logger.info("TokenCache - loadExternalTokens called"),!t.id_token)throw ho.createUnableToLoadTokenError("Please ensure server response includes id token.");var r,o,i=new Vi(t.id_token,this.cryptoObj);if(e.account){var a=this.loadAccount(i,e.account.environment,void 0,void 0,e.account.homeAccountId);r=new Fa(a,this.loadIdToken(i,a.homeAccountId,e.account.environment,e.account.tenantId),this.loadAccessToken(e,t,a.homeAccountId,e.account.environment,e.account.tenantId,n),this.loadRefreshToken(e,t,a.homeAccountId,e.account.environment))}else{if(!e.authority)throw ho.createUnableToLoadTokenError("Please provide a request with an account or a request with authority.");var s=Va.generateAuthority(e.authority,e.azureCloudOptions),c={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};if(o=new Va(s,this.config.system.networkClient,this.storage,c,this.logger),n.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),a=this.loadAccount(i,o.hostnameAndPort,n.clientInfo,o.authorityType),r=new Fa(a,this.loadIdToken(i,a.homeAccountId,o.hostnameAndPort,o.tenant),this.loadAccessToken(e,t,a.homeAccountId,o.hostnameAndPort,o.tenant,n),this.loadRefreshToken(e,t,a.homeAccountId,o.hostnameAndPort));else{if(!t.client_info)throw ho.createUnableToLoadTokenError("Please provide clientInfo in the response or options.");this.logger.trace("TokenCache - homeAccountId from response"),a=this.loadAccount(i,o.hostnameAndPort,t.client_info,o.authorityType),r=new Fa(a,this.loadIdToken(i,a.homeAccountId,o.hostnameAndPort,o.tenant),this.loadAccessToken(e,t,a.homeAccountId,o.hostnameAndPort,o.tenant,n),this.loadRefreshToken(e,t,a.homeAccountId,o.hostnameAndPort))}}return this.generateAuthenticationResult(e,i,r,o)},e.prototype.loadAccount=function(e,t,n,r,o){var i;if(o?i=o:void 0!==r&&n&&(i=zi.generateHomeAccountId(n,r,this.logger,this.cryptoObj,e)),!i)throw ho.createUnableToLoadTokenError("Unexpected missing homeAccountId");var a=n?zi.createAccount(n,i,e,void 0,void 0,void 0,t):zi.createGenericAccount(i,e,void 0,void 0,void 0,t);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading account"),this.storage.setAccount(a),a;throw ho.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.loadIdToken=function(e,t,n,r){var o=Wo.createIdTokenEntity(t,n,e.rawToken,this.config.auth.clientId,r);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(o),o;throw ho.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.loadAccessToken=function(e,t,n,r,o,i){if(!t.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!t.expires_in)throw ho.createUnableToLoadTokenError("Please ensure server response includes expires_in value.");if(!i.extendedExpiresOn)throw ho.createUnableToLoadTokenError("Please provide an extendedExpiresOn value in the options.");var a=new ji(e.scopes).printScopes(),s=i.expiresOn||t.expires_in+(new Date).getTime()/1e3,c=i.extendedExpiresOn,u=Zi.createAccessTokenEntity(n,r,t.access_token,this.config.auth.clientId,o,a,s,c,this.cryptoObj);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(u),u;throw ho.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.loadRefreshToken=function(e,t,n,r){if(!t.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;var o=ea.createRefreshTokenEntity(n,r,t.refresh_token,this.config.auth.clientId);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(o),o;throw ho.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.generateAuthenticationResult=function(e,t,n,r){var o,i,a,s,c=k.EMPTY_STRING,u=[],l=null;(null==n?void 0:n.accessToken)&&(c=n.accessToken.secret,u=ji.fromString(n.accessToken.target).asArray(),l=new Date(1e3*Number(n.accessToken.expiresOn)),s=new Date(1e3*Number(n.accessToken.extendedExpiresOn)));var d=(null==t?void 0:t.claims.oid)||(null==t?void 0:t.claims.sub)||k.EMPTY_STRING,h=(null==t?void 0:t.claims.tid)||k.EMPTY_STRING;return{authority:r?r.canonicalAuthority:k.EMPTY_STRING,uniqueId:d,tenantId:h,scopes:u,account:(null==n?void 0:n.account)?n.account.getAccountInfo():null,idToken:t?t.rawToken:k.EMPTY_STRING,idTokenClaims:t?t.claims:{},accessToken:c,fromCache:!0,expiresOn:l,correlationId:e.correlationId||k.EMPTY_STRING,requestId:k.EMPTY_STRING,extExpiresOn:s,familyId:k.EMPTY_STRING,tokenType:(null===(o=null==n?void 0:n.accessToken)||void 0===o?void 0:o.tokenType)||k.EMPTY_STRING,state:k.EMPTY_STRING,cloudGraphHostName:(null===(i=null==n?void 0:n.account)||void 0===i?void 0:i.cloudGraphHostName)||k.EMPTY_STRING,msGraphHost:(null===(a=null==n?void 0:n.account)||void 0===a?void 0:a.msGraphHost)||k.EMPTY_STRING,code:void 0,fromNativeBroker:!1}},e}(),ys=function(e){function t(t){var n=e.call(this,t)||this;return n.includeRedirectUri=!1,n}return r(t,e),t}(Ha),vs=function(e){function t(t,n,r,o,i,a,s,c,u,l){var d=e.call(this,t,n,r,o,i,a,c,u,l)||this;return d.apiId=s,d}return r(t,e),t.prototype.acquireToken=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,a,s;return d(this,(function(u){switch(u.label){case 0:if(this.logger.trace("SilentAuthCodeClient.acquireToken called"),!e.code)throw ho.createAuthCodeRequiredError();return this.performanceClient.setPreQueueTime(o.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(e,oe.Silent)];case 1:t=u.sent(),this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||k.EMPTY_STRING,t.account||null),n=this.initializeServerTelemetryManager(this.apiId),u.label=2;case 2:return u.trys.push([2,4,,5]),r=c(c({},t),{code:e.code}),this.performanceClient.setPreQueueTime(o.StandardInteractionClientGetClientConfiguration,e.correlationId),[4,this.getClientConfiguration(n,t.authority)];case 3:return i=u.sent(),a=new ys(i),this.logger.verbose("Auth code client created"),[2,new ps(a,this.browserStorage,r,this.logger,this.config.system,this.performanceClient).handleCodeResponseFromServer({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t.state,a.authority,this.networkClient,!1)];case 4:throw(s=u.sent())instanceof he&&s.setCorrelationId(this.correlationId),n.cacheFailedRequest(s),this.browserStorage.cleanRequestByState(t.state),s;case 5:return[2]}}))}))},t.prototype.logout=function(){return Promise.reject(ho.createSilentLogoutUnsupportedError())},t}(Ja),_s=function(){function e(t,n){this.correlationId=n,this.measureName=e.makeMeasureName(t,n),this.startMark=e.makeStartMark(t,n),this.endMark=e.makeEndMark(t,n)}return e.makeMeasureName=function(e,t){return"msal.measure."+e+"."+t},e.makeStartMark=function(e,t){return"msal.start."+e+"."+t},e.makeEndMark=function(e,t){return"msal.end."+e+"."+t},e.supportsBrowserPerformance=function(){return"undefined"!=typeof window&&void 0!==window.performance&&"function"==typeof window.performance.mark&&"function"==typeof window.performance.measure&&"function"==typeof window.performance.clearMarks&&"function"==typeof window.performance.clearMeasures&&"function"==typeof window.performance.getEntriesByName},e.flushMeasurements=function(t,n){if(e.supportsBrowserPerformance())try{n.forEach((function(n){var r=e.makeMeasureName(n.name,t);window.performance.getEntriesByName(r,"measure").length>0&&(window.performance.clearMeasures(r),window.performance.clearMarks(e.makeStartMark(r,t)),window.performance.clearMarks(e.makeEndMark(r,t)))}))}catch(e){}},e.prototype.startMeasurement=function(){if(e.supportsBrowserPerformance())try{window.performance.mark(this.startMark)}catch(e){}},e.prototype.endMeasurement=function(){if(e.supportsBrowserPerformance())try{window.performance.mark(this.endMark),window.performance.measure(this.measureName,this.startMark,this.endMark)}catch(e){}},e.prototype.flushMeasurement=function(){if(e.supportsBrowserPerformance())try{var t=window.performance.getEntriesByName(this.measureName,"measure");if(t.length>0){var n=t[0].duration;return window.performance.clearMeasures(this.measureName),window.performance.clearMarks(this.startMark),window.performance.clearMarks(this.endMark),n}}catch(e){}return null},e}(),bs=function(e){function t(t,n,r,o,i,a,s){var c=e.call(this,t,n,r,o,i,a)||this;return c.browserCrypto=new Do(c.logger,s),c.guidGenerator=new Le(c.browserCrypto),c}return r(t,e),t.prototype.startPerformanceMeasuremeant=function(e,t){return new _s(e,t)},t.prototype.generateId=function(){return this.guidGenerator.generateGuid()},t.prototype.getPageVisibility=function(){var e;return(null===(e=document.visibilityState)||void 0===e?void 0:e.toString())||null},t.prototype.deleteIncompleteSubMeasurements=function(e){var t=this.eventsByCorrelationId.get(e.event.correlationId),n=t&&t.eventId===e.event.eventId,r=[];n&&(null==t?void 0:t.incompleteSubMeasurements)&&t.incompleteSubMeasurements.forEach((function(e){r.push(c({},e))})),r.length>0&&_s.flushMeasurements(e.event.correlationId,r)},t.prototype.supportsBrowserPerformanceNow=function(){return"undefined"!=typeof window&&void 0!==window.performance&&"function"==typeof window.performance.now},t.prototype.startMeasurement=function(t,n){var r=this,o=this.getPageVisibility(),i=e.prototype.startMeasurement.call(this,t,n);return c(c({},i),{endMeasurement:function(e){var t=i.endMeasurement(c({startPageVisibility:o,endPageVisibility:r.getPageVisibility()},e));return r.deleteIncompleteSubMeasurements(i),t},discardMeasurement:function(){i.discardMeasurement(),r.deleteIncompleteSubMeasurements(i),i.measurement.flushMeasurement()}})},t.prototype.setPreQueueTime=function(e,t){if(this.supportsBrowserPerformanceNow())if(t){var n=this.preQueueTimeByCorrelationId.get(t);n&&(this.logger.trace("BrowserPerformanceClient: Incomplete pre-queue "+n.name+" found",t),this.addQueueMeasurement(n.name,t,void 0,!0)),this.preQueueTimeByCorrelationId.set(t,{name:e,time:window.performance.now()})}else this.logger.trace("BrowserPerformanceClient: correlationId for "+e+" not provided, unable to set telemetry queue time");else this.logger.trace("BrowserPerformanceClient: window performance API not available, unable to set telemetry queue time for "+e)},t.prototype.addQueueMeasurement=function(t,n,r,o){if(this.supportsBrowserPerformanceNow())if(n){var i=e.prototype.getPreQueueTime.call(this,t,n);if(i){var a=window.performance.now(),s=r||e.prototype.calculateQueuedTime.call(this,i,a);return e.prototype.addQueueMeasurement.call(this,t,n,s,o)}}else this.logger.trace("BrowserPerformanceClient: correlationId for "+t+" not provided, unable to add queue measurement");else this.logger.trace("BrowserPerformanceClient: window performance API not available, unable to add queue measurement for "+t)},t}(Qo),Cs=function(){function e(e){var t,n,r;this.isBrowserEnvironment="undefined"!=typeof window,this.config=function(e,t){var n=e.auth,r=e.cache,o=e.system,i=e.telemetry,a={clientId:k.EMPTY_STRING,authority:""+k.DEFAULT_AUTHORITY,knownAuthorities:[],cloudDiscoveryMetadata:k.EMPTY_STRING,authorityMetadata:k.EMPTY_STRING,redirectUri:k.EMPTY_STRING,postLogoutRedirectUri:k.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:aa.AAD,azureCloudOptions:{azureCloudInstance:sa.None,tenant:k.EMPTY_STRING},skipAuthorityMetadataCache:!1},s={cacheLocation:X.SessionStorage,temporaryCacheLocation:X.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!r||r.cacheLocation!==X.LocalStorage),claimsBasedCachingEnabled:!0},u={loggerCallback:function(){},logLevel:Lo.Info,piiLoggingEnabled:!1},l=c(c({},fa),{loggerOptions:u,networkClient:t?Ia.getBrowserNetworkClient():Ea,navigationClient:new ka,loadFrameTimeout:0,windowHashTimeout:(null==o?void 0:o.loadFrameTimeout)||6e4,iframeHashTimeout:(null==o?void 0:o.loadFrameTimeout)||Sa,navigateFrameWait:t&&Ia.detectIEOrEdge()?500:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(null==o?void 0:o.nativeBrokerHandshakeTimeout)||2e3,pollIntervalMilliseconds:30,cryptoOptions:{useMsrCrypto:!1,entropy:void 0}}),d=c(c({},o),{loggerOptions:(null==o?void 0:o.loggerOptions)||u}),h={application:{appName:k.EMPTY_STRING,appVersion:k.EMPTY_STRING}};return{auth:c(c({},a),n),cache:c(c({},s),r),system:c(c({},l),d),telemetry:c(c({},h),i)}}(e,this.isBrowserEnvironment),this.initialized=!1,this.logger=new jo(this.config.system.loggerOptions,Aa,Ra),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.isBrowserEnvironment?new bs(this.config.auth.clientId,this.config.auth.authority,this.logger,Aa,Ra,this.config.telemetry.application,this.config.system.cryptoOptions):new Go(this.config.auth.clientId,this.config.auth.authority,this.logger,Aa,Ra,this.config.telemetry.application),this.browserCrypto=this.isBrowserEnvironment?new Bo(this.logger,this.performanceClient,this.config.system.cryptoOptions):zo,this.eventHandler=new Na(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new da(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger):(t=this.config.auth.clientId,n=this.logger,r={cacheLocation:X.MemoryStorage,temporaryCacheLocation:X.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!0},new da(t,r,zo,n));var o={cacheLocation:X.MemoryStorage,temporaryCacheLocation:X.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!0};this.nativeInternalStorage=new da(this.config.auth.clientId,o,this.browserCrypto,this.logger),this.tokenCache=new gs(this.config,this.browserStorage,this.logger,this.browserCrypto),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}return e.prototype.initialize=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i;return d(this,(function(a){switch(a.label){case 0:if(this.logger.trace("initialize called"),this.initialized)return this.logger.info("initialize has already been called, exiting early."),[2];if(e=this.config.system.allowNativeBroker,t=this.performanceClient.startMeasurement(o.InitializeClientApplication),this.eventHandler.emitEvent(ha.INITIALIZE_START),!e)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),n=this,[4,cs.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)];case 2:return n.nativeExtensionProvider=a.sent(),[3,4];case 3:return r=a.sent(),this.logger.verbose(r),[3,4];case 4:return this.config.cache.claimsBasedCachingEnabled?[3,6]:(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),i=this.performanceClient.startMeasurement(o.ClearTokensAndKeysWithClaims),[4,this.browserStorage.clearTokensAndKeysWithClaims()]);case 5:a.sent(),i.endMeasurement({success:!0}),a.label=6;case 6:return this.initialized=!0,this.eventHandler.emitEvent(ha.INITIALIZE_END),t.endMeasurement({allowNativeBroker:e,success:!0}),[2]}}))}))},e.prototype.handleRedirectPromise=function(e){return l(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,c,u=this;return d(this,(function(l){return this.logger.verbose("handleRedirectPromise called"),Ia.blockNativeBrokerCalledBeforeInitialized(this.config.system.allowNativeBroker,this.initialized),t=this.getAllAccounts(),this.isBrowserEnvironment?(n=e||k.EMPTY_STRING,void 0===(r=this.redirectResponse.get(n))?(this.eventHandler.emitEvent(ha.HANDLE_REDIRECT_START,oe.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise"),o=this.browserStorage.getCachedNativeRequest(),i=void 0,o&&cs.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e?(this.logger.trace("handleRedirectPromise - acquiring token from native platform"),a=new ss(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,re.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,o.accountId,this.nativeInternalStorage,o.correlationId),i=a.handleRedirectPromise()):(this.logger.trace("handleRedirectPromise - acquiring token from web flow"),s=this.browserStorage.getTemporaryCache(ee.CORRELATION_ID,!0)||k.EMPTY_STRING,c=this.createRedirectClient(s),i=c.handleRedirectPromise(e)),r=i.then((function(e){return e&&(t.length<u.getAllAccounts().length?(u.eventHandler.emitEvent(ha.LOGIN_SUCCESS,oe.Redirect,e),u.logger.verbose("handleRedirectResponse returned result, login success")):(u.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_SUCCESS,oe.Redirect,e),u.logger.verbose("handleRedirectResponse returned result, acquire token success"))),u.eventHandler.emitEvent(ha.HANDLE_REDIRECT_END,oe.Redirect),e})).catch((function(e){throw t.length>0?u.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_FAILURE,oe.Redirect,null,e):u.eventHandler.emitEvent(ha.LOGIN_FAILURE,oe.Redirect,null,e),u.eventHandler.emitEvent(ha.HANDLE_REDIRECT_END,oe.Redirect),e})),this.redirectResponse.set(n,r)):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),[2,r]):(this.logger.verbose("handleRedirectPromise returns null, not browser environment"),[2,null])}))}))},e.prototype.acquireTokenRedirect=function(e){return l(this,void 0,void 0,(function(){var t,n,r,o,i,a=this;return d(this,(function(s){return t=this.getRequestCorrelationId(e),this.logger.verbose("acquireTokenRedirect called",t),this.preflightBrowserEnvironmentCheck(oe.Redirect),(n=this.getAllAccounts().length>0)?this.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_START,oe.Redirect,e):this.eventHandler.emitEvent(ha.LOGIN_START,oe.Redirect,e),this.nativeExtensionProvider&&this.canUseNative(e)?(o=new ss(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,re.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId),r=o.acquireTokenRedirect(e).catch((function(t){if(t instanceof rs&&t.isFatal())return a.nativeExtensionProvider=void 0,a.createRedirectClient(e.correlationId).acquireToken(e);if(t instanceof be)return a.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),a.createRedirectClient(e.correlationId).acquireToken(e);throw a.browserStorage.setInteractionInProgress(!1),t}))):(i=this.createRedirectClient(e.correlationId),r=i.acquireToken(e)),[2,r.catch((function(e){throw n?a.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_FAILURE,oe.Redirect,null,e):a.eventHandler.emitEvent(ha.LOGIN_FAILURE,oe.Redirect,null,e),e}))]}))}))},e.prototype.acquireTokenPopup=function(e){var t=this,n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(o.AcquireTokenPopup,n);try{this.logger.verbose("acquireTokenPopup called",n),this.preflightBrowserEnvironmentCheck(oe.Popup)}catch(e){return Promise.reject(e)}var i=this.getAllAccounts();return i.length>0?this.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_START,oe.Popup,e):this.eventHandler.emitEvent(ha.LOGIN_START,oe.Popup,e),(this.canUseNative(e)?this.acquireTokenNative(e,re.acquireTokenPopup).then((function(e){return t.browserStorage.setInteractionInProgress(!1),r.endMeasurement({success:!0,isNativeBroker:!0,requestId:e.requestId}),e})).catch((function(n){if(n instanceof rs&&n.isFatal())return t.nativeExtensionProvider=void 0,t.createPopupClient(e.correlationId).acquireToken(e);if(n instanceof be)return t.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),t.createPopupClient(e.correlationId).acquireToken(e);throw t.browserStorage.setInteractionInProgress(!1),n})):this.createPopupClient(e.correlationId).acquireToken(e)).then((function(e){return i.length<t.getAllAccounts().length?t.eventHandler.emitEvent(ha.LOGIN_SUCCESS,oe.Popup,e):t.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_SUCCESS,oe.Popup,e),r.addStaticFields({accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length}),r.endMeasurement({success:!0,requestId:e.requestId}),e})).catch((function(e){return i.length>0?t.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_FAILURE,oe.Popup,null,e):t.eventHandler.emitEvent(ha.LOGIN_FAILURE,oe.Popup,null,e),r.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),Promise.reject(e)}))},e.prototype.trackPageVisibilityWithMeasurement=function(){var e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))},e.prototype.ssoSilent=function(e){var t;return l(this,void 0,void 0,(function(){var n,r,i,a,s=this;return d(this,(function(u){return n=this.getRequestCorrelationId(e),r=c(c({},e),{prompt:e.prompt,correlationId:n}),this.preflightBrowserEnvironmentCheck(oe.Silent),this.ssoSilentMeasurement=this.performanceClient.startMeasurement(o.SsoSilent,n),null===(t=this.ssoSilentMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(ha.SSO_SILENT_START,oe.Silent,r),this.canUseNative(r)?i=this.acquireTokenNative(r,re.ssoSilent).catch((function(e){if(e instanceof rs&&e.isFatal())return s.nativeExtensionProvider=void 0,s.createSilentIframeClient(r.correlationId).acquireToken(r);throw e})):(a=this.createSilentIframeClient(r.correlationId),i=a.acquireToken(r)),[2,i.then((function(e){var t,n;return s.eventHandler.emitEvent(ha.SSO_SILENT_SUCCESS,oe.Silent,e),null===(t=s.ssoSilentMeasurement)||void 0===t||t.addStaticFields({accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length}),null===(n=s.ssoSilentMeasurement)||void 0===n||n.endMeasurement({success:!0,isNativeBroker:e.fromNativeBroker,requestId:e.requestId}),e})).catch((function(e){var t;throw s.eventHandler.emitEvent(ha.SSO_SILENT_FAILURE,oe.Silent,null,e),null===(t=s.ssoSilentMeasurement)||void 0===t||t.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e})).finally((function(){document.removeEventListener("visibilitychange",s.trackPageVisibilityWithMeasurement)}))]}))}))},e.prototype.acquireTokenByCode=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,a=this;return d(this,(function(s){t=this.getRequestCorrelationId(e),this.preflightBrowserEnvironmentCheck(oe.Silent),this.logger.trace("acquireTokenByCode called",t),this.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_BY_CODE_START,oe.Silent,e),n=this.performanceClient.startMeasurement(o.AcquireTokenByCode,e.correlationId);try{if(e.code&&e.nativeAccountId)throw ho.createSpaCodeAndNativeAccountIdPresentError();if(e.code)return r=e.code,(i=this.hybridAuthCodeResponses.get(r))?(this.logger.verbose("Existing acquireTokenByCode request found",e.correlationId),n.discardMeasurement()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(c(c({},e),{correlationId:t})).then((function(e){return a.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_BY_CODE_SUCCESS,oe.Silent,e),a.hybridAuthCodeResponses.delete(r),n.addStaticFields({accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length}),n.endMeasurement({success:!0,isNativeBroker:e.fromNativeBroker,requestId:e.requestId}),e})).catch((function(e){throw a.hybridAuthCodeResponses.delete(r),a.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_BY_CODE_FAILURE,oe.Silent,null,e),n.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e})),this.hybridAuthCodeResponses.set(r,i)),[2,i];if(e.nativeAccountId){if(this.canUseNative(e,e.nativeAccountId))return[2,this.acquireTokenNative(e,re.acquireTokenByCode,e.nativeAccountId).catch((function(e){throw e instanceof rs&&e.isFatal()&&(a.nativeExtensionProvider=void 0),e}))];throw ho.createUnableToAcquireTokenFromNativePlatformError()}throw ho.createAuthCodeOrNativeAccountIdRequiredError()}catch(e){throw this.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_BY_CODE_FAILURE,oe.Silent,null,e),n.endMeasurement({errorCode:e instanceof he&&e.errorCode||void 0,subErrorCode:e instanceof he&&e.subError||void 0,success:!1}),e}return[2]}))}))},e.prototype.acquireTokenByCodeAsync=function(e){var t;return l(this,void 0,void 0,(function(){var n=this;return d(this,(function(r){switch(r.label){case 0:return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(o.AcquireTokenByCodeAsync,e.correlationId),null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),[4,this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then((function(e){var t;return null===(t=n.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.endMeasurement({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker,requestId:e.requestId}),e})).catch((function(e){var t;throw null===(t=n.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e})).finally((function(){document.removeEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement)}))];case 1:return[2,r.sent()]}}))}))},e.prototype.acquireTokenFromCache=function(e,t,n){return l(this,void 0,void 0,(function(){return d(this,(function(r){switch(this.performanceClient.addQueueMeasurement(o.AcquireTokenFromCache,t.correlationId),n.cacheLookupPolicy){case Se.Default:case Se.AccessToken:case Se.AccessTokenAndRefreshToken:return[2,e.acquireToken(t)];default:throw Sn.createRefreshRequiredError()}return[2]}))}))},e.prototype.acquireTokenByRefreshToken=function(e,t){return l(this,void 0,void 0,(function(){var n;return d(this,(function(r){switch(this.performanceClient.addQueueMeasurement(o.AcquireTokenByRefreshToken,e.correlationId),t.cacheLookupPolicy){case Se.Default:case Se.AccessTokenAndRefreshToken:case Se.RefreshToken:case Se.RefreshTokenAndNetwork:return n=this.createSilentRefreshClient(e.correlationId),this.performanceClient.setPreQueueTime(o.SilentRefreshClientAcquireToken,e.correlationId),[2,n.acquireToken(e)];default:throw Sn.createRefreshRequiredError()}return[2]}))}))},e.prototype.acquireTokenBySilentIframe=function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){return this.performanceClient.addQueueMeasurement(o.AcquireTokenBySilentIframe,e.correlationId),t=this.createSilentIframeClient(e.correlationId),this.performanceClient.setPreQueueTime(o.SilentIframeClientAcquireToken,e.correlationId),[2,t.acquireToken(e)]}))}))},e.prototype.logout=function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){return t=this.getRequestCorrelationId(e),this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),[2,this.logoutRedirect(c({correlationId:t},e))]}))}))},e.prototype.logoutRedirect=function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){return t=this.getRequestCorrelationId(e),this.preflightBrowserEnvironmentCheck(oe.Redirect),[2,this.createRedirectClient(t).logout(e)]}))}))},e.prototype.logoutPopup=function(e){try{var t=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(oe.Popup),this.createPopupClient(t).logout(e)}catch(e){return Promise.reject(e)}},e.prototype.getAllAccounts=function(){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts():[]},e.prototype.getAccountByUsername=function(e){if(this.logger.trace("getAccountByUsername called"),!e)return this.logger.warning("getAccountByUsername: No username provided"),null;var t=this.browserStorage.getAccountInfoFilteredBy({username:e});return t?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: "+e),t):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)},e.prototype.getAccountByHomeId=function(e){if(this.logger.trace("getAccountByHomeId called"),!e)return this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null;var t=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:e});return t?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: "+e),t):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)},e.prototype.getAccountByLocalId=function(e){if(this.logger.trace("getAccountByLocalId called"),!e)return this.logger.warning("getAccountByLocalId: No localAccountId provided"),null;var t=this.browserStorage.getAccountInfoFilteredBy({localAccountId:e});return t?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: "+e),t):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)},e.prototype.setActiveAccount=function(e){this.browserStorage.setActiveAccount(e)},e.prototype.getActiveAccount=function(){return this.browserStorage.getActiveAccount()},e.prototype.preflightBrowserEnvironmentCheck=function(e,t){if(void 0===t&&(t=!0),this.logger.verbose("preflightBrowserEnvironmentCheck started"),Ia.blockNonBrowserEnvironment(this.isBrowserEnvironment),Ia.blockRedirectInIframe(e,this.config.system.allowRedirectInIframe),Ia.blockReloadInHiddenIframes(),Ia.blockAcquireTokenInPopups(),Ia.blockNativeBrokerCalledBeforeInitialized(this.config.system.allowNativeBroker,this.initialized),e===oe.Redirect&&this.config.cache.cacheLocation===X.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw No.createInMemoryRedirectUnavailableError();e!==oe.Redirect&&e!==oe.Popup||this.preflightInteractiveRequest(t)},e.prototype.preflightInteractiveRequest=function(e){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),Ia.blockReloadInHiddenIframes(),e&&this.browserStorage.setInteractionInProgress(!0)},e.prototype.acquireTokenNative=function(e,t,n){return l(this,void 0,void 0,(function(){return d(this,(function(r){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw ho.createNativeConnectionNotEstablishedError();return[2,new ss(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)]}))}))},e.prototype.canUseNative=function(e,t){if(this.logger.trace("canUseNative called"),!cs.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case O.NONE:case O.CONSENT:case O.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace("canUseNative: prompt = "+e.prompt+" is not compatible with native flow, returning false"),!1}return!(!t&&!this.getNativeAccountId(e)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))},e.prototype.getNativeAccountId=function(e){var t=e.account||this.browserStorage.getAccountInfoByHints(e.loginHint,e.sid)||this.getActiveAccount();return t&&t.nativeAccountId||""},e.prototype.createPopupClient=function(e){return new ls(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)},e.prototype.createRedirectClient=function(e){return new hs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)},e.prototype.createSilentIframeClient=function(e){return new fs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,re.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)},e.prototype.createSilentCacheClient=function(e){return new as(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.createSilentRefreshClient=function(e){return new ms(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.createSilentAuthCodeClient=function(e){return new vs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,re.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.addEventCallback=function(e){return this.eventHandler.addEventCallback(e)},e.prototype.removeEventCallback=function(e){this.eventHandler.removeEventCallback(e)},e.prototype.addPerformanceCallback=function(e){return this.performanceClient.addPerformanceCallback(e)},e.prototype.removePerformanceCallback=function(e){return this.performanceClient.removePerformanceCallback(e)},e.prototype.enableAccountStorageEvents=function(){this.eventHandler.enableAccountStorageEvents()},e.prototype.disableAccountStorageEvents=function(){this.eventHandler.disableAccountStorageEvents()},e.prototype.getTokenCache=function(){return this.tokenCache},e.prototype.getLogger=function(){return this.logger},e.prototype.setLogger=function(e){this.logger=e},e.prototype.initializeWrapperLibrary=function(e,t){this.browserStorage.setWrapperMetadata(e,t)},e.prototype.setNavigationClient=function(e){this.navigationClient=e},e.prototype.getConfiguration=function(){return this.config},e.prototype.getRequestCorrelationId=function(e){return(null==e?void 0:e.correlationId)?e.correlationId:this.isBrowserEnvironment?this.browserCrypto.createNewGuid():k.EMPTY_STRING},e}(),Es=function(e){function t(t){var n=e.call(this,t)||this;return n.astsAsyncMeasurement=void 0,n.activeSilentTokenRequests=new Map,n.trackPageVisibility=n.trackPageVisibility.bind(n),n}return r(t,e),t.prototype.loginRedirect=function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){return t=this.getRequestCorrelationId(e),this.logger.verbose("loginRedirect called",t),[2,this.acquireTokenRedirect(c({correlationId:t},e||Ie))]}))}))},t.prototype.loginPopup=function(e){var t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(c({correlationId:t},e||Ie))},t.prototype.acquireTokenSilent=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,a,s,u,l=this;return d(this,(function(d){if(t=this.getRequestCorrelationId(e),(n=this.performanceClient.startMeasurement(o.AcquireTokenSilent,t)).addStaticFields({cacheLookupPolicy:e.cacheLookupPolicy}),this.preflightBrowserEnvironmentCheck(oe.Silent),this.logger.verbose("acquireTokenSilent called",t),!(r=e.account||this.getActiveAccount()))throw ho.createNoAccountError();return i={clientId:this.config.auth.clientId,authority:e.authority||k.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:r.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},a=JSON.stringify(i),void 0===(s=this.activeSilentTokenRequests.get(a))?(this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t),this.performanceClient.setPreQueueTime(o.AcquireTokenSilentAsync,t),u=this.acquireTokenSilentAsync(c(c({},e),{correlationId:t}),r).then((function(t){return l.activeSilentTokenRequests.delete(a),n.addStaticFields({accessTokenSize:t.accessToken.length,idTokenSize:t.idToken.length}),n.endMeasurement({success:!0,fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:t.requestId}),t})).catch((function(e){throw l.activeSilentTokenRequests.delete(a),n.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e})),this.activeSilentTokenRequests.set(a,u),[2,u]):(this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),n.discardMeasurement(),[2,s])}))}))},t.prototype.trackPageVisibility=function(){this.astsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.astsAsyncMeasurement.increment({visibilityChangeCount:1}))},t.prototype.acquireTokenSilentAsync=function(e,t){var n;return l(this,void 0,void 0,(function(){var r,i,a,s,u,h=this;return d(this,(function(p){switch(p.label){case 0:return this.performanceClient.addQueueMeasurement(o.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_START,oe.Silent,e),this.astsAsyncMeasurement=this.performanceClient.startMeasurement(o.AcquireTokenSilentAsync,e.correlationId),null===(n=this.astsAsyncMeasurement)||void 0===n||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibility),cs.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&t.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),i=c(c({},e),{account:t}),r=this.acquireTokenNative(i,re.acquireTokenSilent_silentFlow).catch((function(t){return l(h,void 0,void 0,(function(){return d(this,(function(n){if(t instanceof rs&&t.isFatal())return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,[2,this.createSilentIframeClient(e.correlationId).acquireToken(e)];throw t}))}))})),[3,3]):[3,1];case 1:return this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),a=this.createSilentCacheClient(e.correlationId),this.performanceClient.setPreQueueTime(o.InitializeSilentRequest,e.correlationId),[4,a.initializeSilentRequest(e,t)];case 2:s=p.sent(),u=c(c({},e),{cacheLookupPolicy:e.cacheLookupPolicy||Se.Default}),this.performanceClient.setPreQueueTime(o.AcquireTokenFromCache,s.correlationId),r=this.acquireTokenFromCache(a,s,u).catch((function(t){if(u.cacheLookupPolicy===Se.AccessToken)throw t;return Ia.blockReloadInHiddenIframes(),h.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_NETWORK_START,oe.Silent,s),h.performanceClient.setPreQueueTime(o.AcquireTokenByRefreshToken,s.correlationId),h.acquireTokenByRefreshToken(s,u).catch((function(t){var n=t instanceof pe,r=t instanceof be,i=t.errorCode===ge,a="invalid_grant"===t.errorCode;if((!n||!a||r||u.cacheLookupPolicy===Se.AccessTokenAndRefreshToken||u.cacheLookupPolicy===Se.RefreshToken)&&u.cacheLookupPolicy!==Se.Skip&&!i)throw t;return h.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",e.correlationId),h.performanceClient.setPreQueueTime(o.AcquireTokenBySilentIframe,s.correlationId),h.acquireTokenBySilentIframe(s)}))})),p.label=3;case 3:return[2,r.then((function(e){var t;return h.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_SUCCESS,oe.Silent,e),null===(t=h.astsAsyncMeasurement)||void 0===t||t.endMeasurement({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker,requestId:e.requestId}),e})).catch((function(e){var t;throw h.eventHandler.emitEvent(ha.ACQUIRE_TOKEN_FAILURE,oe.Silent,null,e),null===(t=h.astsAsyncMeasurement)||void 0===t||t.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e})).finally((function(){document.removeEventListener("visibilitychange",h.trackPageVisibility)}))]}}))}))},t}(Cs),Ts={auth:{clientId:"".concat("bce3a488-22ef-4757-a375-bc1b1bd0d4f7"),authority:"".concat("https://login.microsoftonline.com/b148f14c-2397-402c-ab6a-1b4711177ac0"),redirectUri:"https://alunos.igerminare.org.br/",postLogoutRedirectUri:"https://alunos.igerminare.org.br/"},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookies:!1}},ws={scopes:["User.Read","openid","profile","api://bce3a488-22ef-4757-a375-bc1b1bd0d4f7/api"]},Is=("".concat("https://graph.microsoft.com/v1.0/me/photos/48x48/$value"),"".concat("https://alunos.igerminare.org.br/"),"".concat("https://graph.microsoft.com/v1.0/me"),new Es(Ts)),ks=function(){var e=t(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(sessionStorage.getItem("Germinare_user")),t.account=Is.getAccountByUsername(n.account.username),e.prev=2,e.next=5,Is.acquireTokenSilent(t);case 5:return r=e.sent,e.abrupt("return",r.accessToken);case 9:if(e.prev=9,e.t0=e.catch(2),!(e.t0 instanceof be)){e.next=15;break}return e.abrupt("return",Is.acquireTokenRedirect(t));case 15:console.warn(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Ss=function(){Is.loginRedirect(ws)},As=function(e){var t={account:Is.getAccountByUsername(e)};Is.logoutRedirect(t),sessionStorage.removeItem("Germinare_user")},Rs=function(){var e=t(regeneratorRuntime.mark((function e(){var t,n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Headers,e.next=3,ks(ws);case 3:return n=e.sent,r="Bearer ".concat(n),t.append("Authorization",r),o={method:"GET",headers:t},e.prev=7,e.next=10,fetch("".concat("https://graph.microsoft.com/v1.0/me"),o);case 10:return i=e.sent,e.next=13,i.json();case 13:return e.abrupt("return",e.sent);case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",console.error(e.t0));case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(){return e.apply(this,arguments)}}(),Os=function(){var e=t(regeneratorRuntime.mark((function e(){var t,n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Headers,e.next=3,ks(ws);case 3:return n=e.sent,r="Bearer ".concat(n),t.append("Authorization",r),o={method:"GET",headers:t},e.prev=7,e.next=10,fetch("".concat("https://graph.microsoft.com/v1.0/me/photos/48x48/$value"),o);case 10:return i=e.sent,e.next=13,i.blob();case 13:return e.abrupt("return",e.sent);case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",console.error(e.t0));case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(){return e.apply(this,arguments)}}(),Ns=function(){var e=t(regeneratorRuntime.mark((function e(){var t,n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Headers,e.next=3,ks(ws);case 3:return n=e.sent,r="Bearer ".concat(n),t.append("Authorization",r),o={method:"GET",headers:t},e.prev=7,e.next=10,fetch("".concat("https://alunos.igerminare.org.br/"),o);case 10:return i=e.sent,e.next=13,i.json();case 13:return e.abrupt("return",e.sent);case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",console.error(e.t0));case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(){return e.apply(this,arguments)}}(),Ps=function(){return!!JSON.parse(sessionStorage.getItem("Germinare_user"))};function Ms(e){return Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ms(e)}function Ds(e,t,n){return r=function(e,t){if("object"!=Ms(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ms(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ms(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var r}function qs(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Is.handleRedirectPromise().then((function(e){if(null!==e)sessionStorage.setItem("Germinare_user",JSON.stringify(e));else{var t=Is.getAllAccounts();if(null===t)return;1===t.length&&sessionStorage.setItem("Germunare_account",JSON.stringify(t))}})).catch((function(e){console.error(e)}));var xs=function(e,t){return xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},xs(e,t)};function Fs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}xs(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ls=function(){return Ls=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ls.apply(this,arguments)};function Us(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function Bs(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function Hs(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function js(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function Qs(e){return Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qs(e)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var Ks="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function Gs(e,t){for(var n,r=/\r\n|[\n\r]/g,o=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)o+=1,i=t+1-(n.index+n[0].length);return{line:o,column:i}}function zs(e){return Vs(e.source,Gs(e.source,e.start))}function Vs(e,t){var n=e.locationOffset.column-1,r=Ys(n)+e.body,o=t.line-1,i=e.locationOffset.line-1,a=t.line+i,s=1===t.line?n:0,c=t.column+s,u="".concat(e.name,":").concat(a,":").concat(c,"\n"),l=r.split(/\r\n|[\n\r]/g),d=l[o];if(d.length>120){for(var h=Math.floor(c/80),p=c%80,f=[],m=0;m<d.length;m+=80)f.push(d.slice(m,m+80));return u+Ws([["".concat(a),f[0]]].concat(f.slice(1,h+1).map((function(e){return["",e]})),[[" ",Ys(p-1)+"^"],["",f[h+1]]]))}return u+Ws([["".concat(a-1),l[o-1]],["".concat(a),d],["",Ys(c-1)+"^"],["".concat(a+1),l[o+1]]])}function Ws(e){var t=e.filter((function(e){return e[0],void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t,r=e[0],o=e[1];return Ys(n-(t=r).length)+t+(o?" | "+o:" |")})).join("\n")}function Ys(e){return Array(e+1).join(" ")}function $s(e){return $s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$s(e)}function Js(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ec(e,t){return!t||"object"!==$s(t)&&"function"!=typeof t?tc(e):t}function tc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nc(e){var t="function"==typeof Map?new Map:void 0;return nc=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return rc(e,arguments,ac(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ic(r,e)},nc(e)}function rc(e,t,n){return rc=oc()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&ic(o,n.prototype),o},rc.apply(null,arguments)}function oc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ic(e,t){return ic=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ic(e,t)}function ac(e){return ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ac(e)}var sc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ic(e,t)}(a,e);var t,n,r,o,i=(t=a,n=oc(),function(){var e,r=ac(t);if(n){var o=ac(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return ec(this,e)});function a(e,t,n,r,o,s,c){var u,l,d,h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(h=i.call(this,e)).name="GraphQLError",h.originalError=null!=s?s:void 0,h.nodes=cc(Array.isArray(t)?t:t?[t]:void 0);for(var p=[],f=0,m=null!==(g=h.nodes)&&void 0!==g?g:[];f<m.length;f++){var g,y=m[f].loc;null!=y&&p.push(y)}p=cc(p),h.source=null!=n?n:null===(u=p)||void 0===u?void 0:u[0].source,h.positions=null!=r?r:null===(l=p)||void 0===l?void 0:l.map((function(e){return e.start})),h.locations=r&&n?r.map((function(e){return Gs(n,e)})):null===(d=p)||void 0===d?void 0:d.map((function(e){return Gs(e.source,e.start)})),h.path=null!=o?o:void 0;var v,_=null==s?void 0:s.extensions;return null==c&&"object"==Qs(v=_)&&null!==v?h.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Js(Object(n),!0).forEach((function(t){Xs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Js(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},_):h.extensions=null!=c?c:{},Object.defineProperties(tc(h),{message:{enumerable:!0},locations:{enumerable:null!=h.locations},path:{enumerable:null!=h.path},extensions:{enumerable:null!=h.extensions&&Object.keys(h.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=s&&s.stack?(Object.defineProperty(tc(h),"stack",{value:s.stack,writable:!0,configurable:!0}),ec(h)):(Error.captureStackTrace?Error.captureStackTrace(tc(h),a):Object.defineProperty(tc(h),"stack",{value:Error().stack,writable:!0,configurable:!0}),h)}return r=a,(o=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var o=r[n];o.loc&&(t+="\n\n"+zs(o.loc))}else if(e.source&&e.locations)for(var i=0,a=e.locations;i<a.length;i++){var s=a[i];t+="\n\n"+Vs(e.source,s)}return t}(this)}},{key:Ks,get:function(){return"Object"}}])&&Zs(r.prototype,o),a}(nc(Error));function cc(e){return void 0===e||0===e.length?void 0:e}function uc(e,t,n){return new sc("Syntax Error: ".concat(n),void 0,e,[t])}var lc=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});const dc="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function hc(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(0))throw new Error("Unexpected invariant triggered.")}(),e.prototype.inspect=t,dc&&(e.prototype[dc]=t)}var pc=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();hc(pc);var fc=function(){function e(e,t,n,r,o,i,a){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=o,this.value=a,this.prev=i,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function mc(e){return null!=e&&"string"==typeof e.kind}hc(fc);var gc=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function yc(e){return yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yc(e)}var vc=10,_c=2;function bc(e){return Cc(e,[])}function Cc(e,t){switch(yc(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),r=function(e){var t=e[String(dc)];return"function"==typeof t?t:"function"==typeof e.inspect?e.inspect:void 0}(e);if(void 0!==r){var o=r.call(e);if(o!==e)return"string"==typeof o?o:Cc(o,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>_c)return"[Array]";for(var n=Math.min(vc,e.length),r=e.length-n,o=[],i=0;i<n;++i)o.push(Cc(e[i],t));return 1===r?o.push("... 1 more item"):r>1&&o.push("... ".concat(r," more items")),"["+o.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);return 0===n.length?"{}":t.length>_c?"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]":"{ "+n.map((function(n){return n+": "+Cc(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}function Ec(e,t){if(!Boolean(e))throw new Error(t)}function Tc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wc=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||Ec(0,"Body must be a string. Received: ".concat(bc(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Ec(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Ec(0,"column in locationOffset is 1-indexed and must be positive.")}var t,n;return t=e,(n=[{key:Ks,get:function(){return"Source"}}])&&Tc(t.prototype,n),e}(),Ic=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function kc(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,o=0,i=null,a=0;a<e.length;++a)switch(e.charCodeAt(a)){case 13:10===e.charCodeAt(a+1)&&++a;case 10:n=!1,r=!0,o=0;break;case 9:case 32:++o;break;default:r&&!n&&(null===i||o<i)&&(i=o),r=!1}return null!==(t=i)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var o=0;o<t.length&&Sc(t[o]);)++o;for(var i=t.length;i>o&&Sc(t[i-1]);)--i;return t.slice(o,i).join("\n")}function Sc(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}var Ac=function(){function e(e){var t=new fc(gc.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==gc.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=Oc(this,e)}while(e.kind===gc.COMMENT);return e},e}();function Rc(e){return isNaN(e)?gc.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Oc(e,t){for(var n=e.source,r=n.body,o=r.length,i=t.end;i<o;){var a=r.charCodeAt(i),s=e.line,c=1+i-e.lineStart;switch(a){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++e.line,e.lineStart=i;continue;case 13:10===r.charCodeAt(i+1)?i+=2:++i,++e.line,e.lineStart=i;continue;case 33:return new fc(gc.BANG,i,i+1,s,c,t);case 35:return Pc(n,i,s,c,t);case 36:return new fc(gc.DOLLAR,i,i+1,s,c,t);case 38:return new fc(gc.AMP,i,i+1,s,c,t);case 40:return new fc(gc.PAREN_L,i,i+1,s,c,t);case 41:return new fc(gc.PAREN_R,i,i+1,s,c,t);case 46:if(46===r.charCodeAt(i+1)&&46===r.charCodeAt(i+2))return new fc(gc.SPREAD,i,i+3,s,c,t);break;case 58:return new fc(gc.COLON,i,i+1,s,c,t);case 61:return new fc(gc.EQUALS,i,i+1,s,c,t);case 64:return new fc(gc.AT,i,i+1,s,c,t);case 91:return new fc(gc.BRACKET_L,i,i+1,s,c,t);case 93:return new fc(gc.BRACKET_R,i,i+1,s,c,t);case 123:return new fc(gc.BRACE_L,i,i+1,s,c,t);case 124:return new fc(gc.PIPE,i,i+1,s,c,t);case 125:return new fc(gc.BRACE_R,i,i+1,s,c,t);case 34:return 34===r.charCodeAt(i+1)&&34===r.charCodeAt(i+2)?xc(n,i,s,c,t,e):qc(n,i,s,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Mc(n,i,a,s,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return Lc(n,i,s,c,t)}throw uc(n,i,Nc(a))}var u=e.line,l=1+i-e.lineStart;return new fc(gc.EOF,o,o,u,l,t)}function Nc(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(Rc(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(Rc(e),".")}function Pc(e,t,n,r,o){var i,a=e.body,s=t;do{i=a.charCodeAt(++s)}while(!isNaN(i)&&(i>31||9===i));return new fc(gc.COMMENT,t,s,n,r,o,a.slice(t+1,s))}function Mc(e,t,n,r,o,i){var a=e.body,s=n,c=t,u=!1;if(45===s&&(s=a.charCodeAt(++c)),48===s){if((s=a.charCodeAt(++c))>=48&&s<=57)throw uc(e,c,"Invalid number, unexpected digit after 0: ".concat(Rc(s),"."))}else c=Dc(e,c,s),s=a.charCodeAt(c);if(46===s&&(u=!0,s=a.charCodeAt(++c),c=Dc(e,c,s),s=a.charCodeAt(c)),69!==s&&101!==s||(u=!0,43!==(s=a.charCodeAt(++c))&&45!==s||(s=a.charCodeAt(++c)),c=Dc(e,c,s),s=a.charCodeAt(c)),46===s||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(s))throw uc(e,c,"Invalid number, expected digit but got: ".concat(Rc(s),"."));return new fc(u?gc.FLOAT:gc.INT,t,c,r,o,i,a.slice(t,c))}function Dc(e,t,n){var r=e.body,o=t,i=n;if(i>=48&&i<=57){do{i=r.charCodeAt(++o)}while(i>=48&&i<=57);return o}throw uc(e,o,"Invalid number, expected digit but got: ".concat(Rc(i),"."))}function qc(e,t,n,r,o){for(var i,a,s,c,u=e.body,l=t+1,d=l,h=0,p="";l<u.length&&!isNaN(h=u.charCodeAt(l))&&10!==h&&13!==h;){if(34===h)return p+=u.slice(d,l),new fc(gc.STRING,t,l+1,n,r,o,p);if(h<32&&9!==h)throw uc(e,l,"Invalid character within String: ".concat(Rc(h),"."));if(++l,92===h){switch(p+=u.slice(d,l-1),h=u.charCodeAt(l)){case 34:p+='"';break;case 47:p+="/";break;case 92:p+="\\";break;case 98:p+="\b";break;case 102:p+="\f";break;case 110:p+="\n";break;case 114:p+="\r";break;case 116:p+="\t";break;case 117:var f=(i=u.charCodeAt(l+1),a=u.charCodeAt(l+2),s=u.charCodeAt(l+3),c=u.charCodeAt(l+4),Fc(i)<<12|Fc(a)<<8|Fc(s)<<4|Fc(c));if(f<0){var m=u.slice(l+1,l+5);throw uc(e,l,"Invalid character escape sequence: \\u".concat(m,"."))}p+=String.fromCharCode(f),l+=4;break;default:throw uc(e,l,"Invalid character escape sequence: \\".concat(String.fromCharCode(h),"."))}d=++l}}throw uc(e,l,"Unterminated string.")}function xc(e,t,n,r,o,i){for(var a=e.body,s=t+3,c=s,u=0,l="";s<a.length&&!isNaN(u=a.charCodeAt(s));){if(34===u&&34===a.charCodeAt(s+1)&&34===a.charCodeAt(s+2))return l+=a.slice(c,s),new fc(gc.BLOCK_STRING,t,s+3,n,r,o,kc(l));if(u<32&&9!==u&&10!==u&&13!==u)throw uc(e,s,"Invalid character within String: ".concat(Rc(u),"."));10===u?(++s,++i.line,i.lineStart=s):13===u?(10===a.charCodeAt(s+1)?s+=2:++s,++i.line,i.lineStart=s):92===u&&34===a.charCodeAt(s+1)&&34===a.charCodeAt(s+2)&&34===a.charCodeAt(s+3)?(l+=a.slice(c,s)+'"""',c=s+=4):++s}throw uc(e,s,"Unterminated string.")}function Fc(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function Lc(e,t,n,r,o){for(var i=e.body,a=i.length,s=t+1,c=0;s!==a&&!isNaN(c=i.charCodeAt(s))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++s;return new fc(gc.NAME,t,s,n,r,o,i.slice(t,s))}var Uc=function(){function e(e,t){var n=function(e){return e instanceof wc}(e)?e:new wc(e);this._lexer=new Ac(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(gc.NAME);return{kind:lc.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:lc.DOCUMENT,definitions:this.many(gc.SOF,this.parseDefinition,gc.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(gc.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(gc.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(gc.BRACE_L))return{kind:lc.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(gc.NAME)&&(t=this.parseName()),{kind:lc.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(gc.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(gc.PAREN_L,this.parseVariableDefinition,gc.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:lc.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(gc.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(gc.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(gc.DOLLAR),{kind:lc.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:lc.SELECTION_SET,selections:this.many(gc.BRACE_L,this.parseSelection,gc.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(gc.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(gc.COLON)?(e=r,t=this.parseName()):t=r,{kind:lc.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(gc.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(gc.PAREN_L,t,gc.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(gc.COLON),{kind:lc.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:lc.ARGUMENT,name:this.parseName(),value:(this.expectToken(gc.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(gc.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(gc.NAME)?{kind:lc.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:lc.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:lc.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:lc.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case gc.BRACKET_L:return this.parseList(e);case gc.BRACE_L:return this.parseObject(e);case gc.INT:return this._lexer.advance(),{kind:lc.INT,value:t.value,loc:this.loc(t)};case gc.FLOAT:return this._lexer.advance(),{kind:lc.FLOAT,value:t.value,loc:this.loc(t)};case gc.STRING:case gc.BLOCK_STRING:return this.parseStringLiteral();case gc.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:lc.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:lc.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:lc.NULL,loc:this.loc(t)};default:return{kind:lc.ENUM,value:t.value,loc:this.loc(t)}}case gc.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:lc.STRING,value:e.value,block:e.kind===gc.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:lc.LIST,values:this.any(gc.BRACKET_L,(function(){return t.parseValueLiteral(e)}),gc.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:lc.OBJECT,fields:this.any(gc.BRACE_L,(function(){return t.parseObjectField(e)}),gc.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(gc.COLON),{kind:lc.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(gc.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(gc.AT),{kind:lc.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(gc.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(gc.BRACKET_R),e={kind:lc.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(gc.BANG)?{kind:lc.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:lc.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===gc.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(gc.STRING)||this.peek(gc.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(gc.BRACE_L,this.parseOperationTypeDefinition,gc.BRACE_R);return{kind:lc.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(gc.COLON);var n=this.parseNamedType();return{kind:lc.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:lc.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),i=this.parseFieldsDefinition();return{kind:lc.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:o,fields:i,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(gc.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(gc.AMP)||this.peek(gc.NAME));return t}return this.delimitedMany(gc.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(gc.BRACE_L)&&this._lexer.lookahead().kind===gc.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(gc.BRACE_L,this.parseFieldDefinition,gc.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(gc.COLON);var o=this.parseTypeReference(),i=this.parseDirectives(!0);return{kind:lc.FIELD_DEFINITION,description:t,name:n,arguments:r,type:o,directives:i,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(gc.PAREN_L,this.parseInputValueDef,gc.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(gc.COLON);var r,o=this.parseTypeReference();this.expectOptionalToken(gc.EQUALS)&&(r=this.parseValueLiteral(!0));var i=this.parseDirectives(!0);return{kind:lc.INPUT_VALUE_DEFINITION,description:t,name:n,type:o,defaultValue:r,directives:i,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),i=this.parseFieldsDefinition();return{kind:lc.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:o,fields:i,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),o=this.parseUnionMemberTypes();return{kind:lc.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:o,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(gc.EQUALS)?this.delimitedMany(gc.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();return{kind:lc.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:o,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(gc.BRACE_L,this.parseEnumValueDefinition,gc.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:lc.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();return{kind:lc.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:o,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(gc.BRACE_L,this.parseInputValueDef,gc.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===gc.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(gc.BRACE_L,this.parseOperationTypeDefinition,gc.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:lc.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:lc.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===o.length)throw this.unexpected();return{kind:lc.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:o,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===o.length)throw this.unexpected();return{kind:lc.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:o,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:lc.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:lc.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:lc.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(gc.AT);var n=this.parseName(),r=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var i=this.parseDirectiveLocations();return{kind:lc.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:o,locations:i,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(gc.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==Ic[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new pc(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw uc(this._lexer.source,t.start,"Expected ".concat(Hc(e),", found ").concat(Bc(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==gc.NAME||t.value!==e)throw uc(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(Bc(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===gc.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return uc(this._lexer.source,t.start,"Unexpected ".concat(Bc(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}();function Bc(e){var t=e.value;return Hc(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function Hc(e){return function(e){return e===gc.BANG||e===gc.DOLLAR||e===gc.AMP||e===gc.PAREN_L||e===gc.PAREN_R||e===gc.SPREAD||e===gc.COLON||e===gc.EQUALS||e===gc.AT||e===gc.BRACKET_L||e===gc.BRACKET_R||e===gc.BRACE_L||e===gc.PIPE||e===gc.BRACE_R}(e)?'"'.concat(e,'"'):e}var jc=new Map,Qc=new Map,Kc=!0,Gc=!1;function zc(e){return e.replace(/[\s,]+/g," ").trim()}function Vc(e){var t,n,r,o=zc(e);if(!jc.has(o)){var i=function(e,t){return new Uc(e,t).parseDocument()}(e,{experimentalFragmentVariables:Gc,allowLegacyFragmentVariables:Gc});if(!i||"Document"!==i.kind)throw new Error("Not a valid GraphQL document.");jc.set(o,function(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(n){var r=e[n];r&&"object"==typeof r&&t.add(r)}))}));var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}((t=i,n=new Set,r=[],t.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var t=e.name.value,o=zc((a=e.loc).source.body.substring(a.start,a.end)),i=Qc.get(t);i&&!i.has(o)?Kc&&console.warn("Warning: fragment with name "+t+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):i||Qc.set(t,i=new Set),i.add(o),n.has(o)||(n.add(o),r.push(e))}else r.push(e);var a})),Ls(Ls({},t),{definitions:r}))))}return jc.get(o)}function Wc(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];"string"==typeof e&&(e=[e]);var r=e[0];return t.forEach((function(t,n){t&&"Document"===t.kind?r+=t.loc.source.body:r+=t,r+=e[n+1]})),Vc(r)}var Yc,$c=Wc;(Yc=Wc||(Wc={})).gql=$c,Yc.resetCaches=function(){jc.clear(),Qc.clear()},Yc.disableFragmentWarnings=function(){Kc=!1},Yc.enableExperimentalFragmentVariables=function(){Gc=!0},Yc.disableExperimentalFragmentVariables=function(){Gc=!1},Wc.default=Wc;var Jc=a(616),Xc=a.t(Jc,2);function Zc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)}))})),n}function eu(e,t){return Zc(e,t,t.variables&&{variables:Zc(Ls(Ls({},e&&e.variables),t.variables))})}const{toString:tu,hasOwnProperty:nu}=Object.prototype,ru=Function.prototype.toString,ou=new Map;function iu(e,t){try{return su(e,t)}finally{ou.clear()}}const au=iu;function su(e,t){if(e===t)return!0;const n=tu.call(e);if(n!==tu.call(t))return!1;switch(n){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":{if(du(e,t))return!0;const n=cu(e),r=cu(t),o=n.length;if(o!==r.length)return!1;for(let e=0;e<o;++e)if(!nu.call(t,n[e]))return!1;for(let r=0;r<o;++r){const o=n[r];if(!su(e[o],t[o]))return!1}return!0}case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!=e)return t!=t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==`${t}`;case"[object Map]":case"[object Set]":{if(e.size!==t.size)return!1;if(du(e,t))return!0;const r=e.entries(),o="[object Map]"===n;for(;;){const e=r.next();if(e.done)break;const[n,i]=e.value;if(!t.has(n))return!1;if(o&&!su(i,t.get(n)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":{let n=e.byteLength;if(n===t.byteLength)for(;n--&&e[n]===t[n];);return-1===n}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const n=ru.call(e);return n===ru.call(t)&&!function(e,t){const n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}(n,lu)}}return!1}function cu(e){return Object.keys(e).filter(uu,e)}function uu(e){return void 0!==this[e]}const lu="{ [native code] }";function du(e,t){let n=ou.get(e);if(n){if(n.has(t))return!0}else ou.set(e,n=new Set);return n.add(t),!1}var hu="Invariant Violation",pu=Object.setPrototypeOf,fu=void 0===pu?function(e,t){return e.__proto__=t,e}:pu,mu=function(e){function t(n){void 0===n&&(n=hu);var r=e.call(this,"number"==typeof n?hu+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=hu,fu(r,t.prototype),r}return Fs(t,e),t}(Error);function gu(e,t){if(!e)throw new mu(t)}var yu,vu=["debug","log","warn","error","silent"],_u=vu.indexOf("log");function bu(e){return function(){if(vu.indexOf(e)>=_u)return(console[e]||console.log).apply(console,arguments)}}(yu=gu||(gu={})).debug=bu("debug"),yu.log=bu("log"),yu.warn=bu("warn"),yu.error=bu("error");var Cu="3.9.2";function Eu(e){try{return e()}catch(e){}}const Tu=Eu((function(){return globalThis}))||Eu((function(){return window}))||Eu((function(){return self}))||Eu((function(){return global}))||Eu((function(){return Eu.constructor("return this")()}));var wu=new Map;function Iu(e){var t=wu.get(e)||1;return wu.set(e,t+1),"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}function ku(e,t){void 0===t&&(t=0);var n=Iu("stringifyForDisplay");return JSON.stringify(e,(function(e,t){return void 0===t?n:t}),t).split(JSON.stringify(n)).join("<undefined>")}function Su(e){return function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if("number"==typeof t){var o=t;(t=Pu(o))||(t=Mu(o,n),n=[])}e.apply(void 0,[t].concat(n))}}var Au=Object.assign((function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e||gu(e,Pu(t,n)||Mu(t,n))}),{debug:Su(gu.debug),log:Su(gu.log),warn:Su(gu.warn),error:Su(gu.error)});function Ru(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new mu(Pu(e,t)||Mu(e,t))}var Ou=Symbol.for("ApolloErrorMessageHandler_"+Cu);function Nu(e){return"string"==typeof e?e:ku(e,2).slice(0,1e3)}function Pu(e,t){if(void 0===t&&(t=[]),e)return Tu[Ou]&&Tu[Ou](e,t.map(Nu))}function Mu(e,t){if(void 0===t&&(t=[]),e)return"An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#".concat(encodeURIComponent(JSON.stringify({version:Cu,message:e,args:t.map(Nu)})))}function Du(){}globalThis.__DEV__;const qu=Du,xu="undefined"!=typeof WeakRef?WeakRef:function(e){return{deref:()=>e}},Fu="undefined"!=typeof WeakMap?WeakMap:Map,Lu="undefined"!=typeof FinalizationRegistry?FinalizationRegistry:function(){return{register:Du,unregister:Du}};class Uu{constructor(e=1/0,t=qu){this.max=e,this.dispose=t,this.map=new Fu,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{const e=this.unfinalizedNodes.values();for(let t=0;t<10024;t++){const t=e.next().value;if(!t)break;this.unfinalizedNodes.delete(t);const n=t.key;delete t.key,t.keyRef=new xu(n),this.registry.register(n,t,t)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new Lu(this.deleteNode.bind(this))}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:e,newer:n}=t;n&&(n.older=e),e&&(e.newer=n),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=n)}return t}set(e,t){let n=this.getNode(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.scheduleFinalization(n),this.map.set(e,n),this.size++,n.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(e){e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.size--;const t=e.key||e.keyRef&&e.keyRef.deref();this.dispose(e.value,t),e.keyRef?this.registry.unregister(e):this.unfinalizedNodes.delete(e),t&&this.map.delete(t)}delete(e){const t=this.map.get(e);return!!t&&(this.deleteNode(t),!0)}scheduleFinalization(e){this.unfinalizedNodes.add(e),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}function Bu(){}class Hu{constructor(e=1/0,t=Bu){this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}get size(){return this.map.size}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:e,newer:n}=t;n&&(n.older=e),e&&(e.newer=n),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=n)}return t}set(e,t){let n=this.getNode(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(e){const t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)}}var ju=new WeakSet;function Qu(e){ju.has(e)||(ju.add(e),setTimeout((function(){e.clean(),ju.delete(e)}),100))}var Ku=function(e,t){var n=new Uu(e,t);return n.set=function(e,t){return Qu(this),Uu.prototype.set.call(this,e,t)},n},Gu=function(e,t){var n=new Hu(e,t);return n.set=function(e,t){return Qu(this),Hu.prototype.set.call(this,e,t)},n},zu=Symbol.for("apollo.cacheSize"),Vu=Ls({},Tu[zu]),Wu={};function Yu(e,t){Wu[e]=t}var $u,Ju,Xu=!1!==globalThis.__DEV__?function(){var e,t,n,r,o;if(!1===globalThis.__DEV__)throw new Error("only supported in development mode");return{limits:Object.fromEntries(Object.entries({parser:1e3,canonicalStringify:1e3,print:2e3,"documentTransform.cache":2e3,"queryManager.getDocumentInfo":2e3,"PersistedQueryLink.persistedQueryHashes":2e3,"fragmentRegistry.transform":2e3,"fragmentRegistry.lookup":1e3,"fragmentRegistry.findFragmentSpreads":4e3,"cache.fragmentQueryDocuments":1e3,"removeTypenameFromVariables.getVariableDefinitions":2e3,"inMemoryCache.maybeBroadcastWatch":5e3,"inMemoryCache.executeSelectionSet":5e4,"inMemoryCache.executeSubSelectedArray":1e4}).map((function(e){var t=e[0],n=e[1];return[t,Vu[t]||n]}))),sizes:Ls({print:null===(e=Wu.print)||void 0===e?void 0:e.call(Wu),parser:null===(t=Wu.parser)||void 0===t?void 0:t.call(Wu),canonicalStringify:null===(n=Wu.canonicalStringify)||void 0===n?void 0:n.call(Wu),links:al(this.link),queryManager:{getDocumentInfo:this.queryManager.transformCache.size,documentTransforms:ol(this.queryManager.documentTransform)}},null===(o=(r=this.cache).getMemoryInternals)||void 0===o?void 0:o.call(r))}}:void 0,Zu=!1!==globalThis.__DEV__?function(){var e=this.config.fragments;return Ls(Ls({},tl.apply(this)),{addTypenameDocumentTransform:ol(this.addTypenameTransform),inMemoryCache:{executeSelectionSet:nl(this.storeReader.executeSelectionSet),executeSubSelectedArray:nl(this.storeReader.executeSubSelectedArray),maybeBroadcastWatch:nl(this.maybeBroadcastWatch)},fragmentRegistry:{findFragmentSpreads:nl(null==e?void 0:e.findFragmentSpreads),lookup:nl(null==e?void 0:e.lookup),transform:nl(null==e?void 0:e.transform)}})}:void 0,el=!1!==globalThis.__DEV__?tl:void 0;function tl(){return{cache:{fragmentQueryDocuments:nl(this.getFragmentDoc)}}}function nl(e){return function(e){return!!e&&"dirtyKey"in e}(e)?e.size:void 0}function rl(e){return null!=e}function ol(e){return il(e).map((function(e){return{cache:e}}))}function il(e){return e?js(js([nl(null==e?void 0:e.performWork)],il(null==e?void 0:e.left),!0),il(null==e?void 0:e.right),!0).filter(rl):[]}function al(e){var t;return e?js(js([null===(t=null==e?void 0:e.getMemoryInternals)||void 0===t?void 0:t.call(e)],al(null==e?void 0:e.left),!0),al(null==e?void 0:e.right),!0).filter(rl):[]}function sl(e){var t;switch(e){case $u.Query:t="Query";break;case $u.Mutation:t="Mutation";break;case $u.Subscription:t="Subscription"}return t}function cl(e){Ju||(Ju=new Ku(Vu.parser||1e3));var t,n,r=Ju.get(e);if(r)return r;Au(!!e&&!!e.kind,59,e);for(var o=[],i=[],a=[],s=[],c=0,u=e.definitions;c<u.length;c++){var l=u[c];if("FragmentDefinition"!==l.kind){if("OperationDefinition"===l.kind)switch(l.operation){case"query":i.push(l);break;case"mutation":a.push(l);break;case"subscription":s.push(l)}}else o.push(l)}Au(!o.length||i.length||a.length||s.length,60),Au(i.length+a.length+s.length<=1,61,e,i.length,s.length,a.length),n=i.length?$u.Query:$u.Mutation,i.length||a.length||(n=$u.Subscription);var d=i.length?i:a.length?a:s;Au(1===d.length,62,e,d.length);var h=d[0];t=h.variableDefinitions||[];var p={name:h.name&&"Name"===h.name.kind?h.name.value:"data",type:n,variables:t};return Ju.set(e,p),p}function ul(e,t){var n=cl(e),r=sl(t),o=sl(n.type);Au(n.type===t,63,r,r,o)}function ll(e){return null!==e&&"object"==typeof e}!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}($u||($u={})),cl.resetCache=function(){Ju=void 0},!1!==globalThis.__DEV__&&Yu("parser",(function(){return Ju?Ju.size:0}));var dl=Symbol(),hl=function(e){function t(n){var r,o,i=n.graphQLErrors,a=n.protocolErrors,s=n.clientErrors,c=n.networkError,u=n.errorMessage,l=n.extraInfo,d=e.call(this,u)||this;return d.name="ApolloError",d.graphQLErrors=i||[],d.protocolErrors=a||[],d.clientErrors=s||[],d.networkError=c||null,d.message=u||(o=js(js(js([],(r=d).graphQLErrors,!0),r.clientErrors,!0),r.protocolErrors,!0),r.networkError&&o.push(r.networkError),o.map((function(e){return ll(e)&&e.message||"Error message not found."})).join("\n")),d.extraInfo=l,d.__proto__=t.prototype,d}return Fs(t,e),t}(Error),pl="function"==typeof WeakMap&&!Eu((function(){return"ReactNative"==navigator.product&&!global.HermesInternal})),fl="function"==typeof WeakSet,ml="function"==typeof Symbol&&"function"==typeof Symbol.for,gl=ml&&Symbol.asyncIterator,yl="function"==typeof Eu((function(){return window.document.createElement})),vl=Eu((function(){return navigator.userAgent.indexOf("jsdom")>=0}))||!1,_l=yl&&!vl,bl=ml?Symbol.for("__APOLLO_CONTEXT__"):"__APOLLO_CONTEXT__";function Cl(){Au("createContext"in Xc,45);var e=Jc.createContext[bl];return e||(Object.defineProperty(Jc.createContext,bl,{value:e=Jc.createContext({}),enumerable:!1,writable:!1,configurable:!0}),e.displayName="ApolloContext"),e}function El(e){var t=Jc.useContext(Cl()),n=e||t.client;return Au(!!n,49),n}function Tl(e,t){var n=El(null==t?void 0:t.client);ul(e,$u.Mutation);var r=Jc.useState({called:!1,loading:!1,client:n}),o=r[0],i=r[1],a=Jc.useRef({result:o,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});Object.assign(a.current,{client:n,options:t,mutation:e});var s=Jc.useCallback((function(e){void 0===e&&(e={});var t=a.current,n=t.options,r=t.mutation,o=Ls(Ls({},n),{mutation:r}),s=e.client||a.current.client;a.current.result.loading||o.ignoreResults||!a.current.isMounted||i(a.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:s});var c=++a.current.mutationId,u=eu(o,e);return s.mutate(u).then((function(t){var n,r,o=t.data,l=t.errors,d=l&&l.length>0?new hl({graphQLErrors:l}):void 0,h=e.onError||(null===(n=a.current.options)||void 0===n?void 0:n.onError);if(d&&h&&h(d,u),c===a.current.mutationId&&!u.ignoreResults){var p={called:!0,loading:!1,data:o,error:d,client:s};a.current.isMounted&&!iu(a.current.result,p)&&i(a.current.result=p)}var f=e.onCompleted||(null===(r=a.current.options)||void 0===r?void 0:r.onCompleted);return d||null==f||f(t.data,u),t})).catch((function(t){var n;if(c===a.current.mutationId&&a.current.isMounted){var r={loading:!1,error:t,data:void 0,called:!0,client:s};iu(a.current.result,r)||i(a.current.result=r)}var o=e.onError||(null===(n=a.current.options)||void 0===n?void 0:n.onError);if(o)return o(t,u),{data:void 0,errors:t};throw t}))}),[]),c=Jc.useCallback((function(){if(a.current.isMounted){var e={called:!1,loading:!1,client:n};Object.assign(a.current,{mutationId:0,result:e}),i(e)}}),[]);return Jc.useEffect((function(){return a.current.isMounted=!0,function(){a.current.isMounted=!1}}),[]),[s,Ls({reset:c},o)]}var wl,Il=!1,kl=Xc.useSyncExternalStore||function(e,t,n){var r=t();!1===globalThis.__DEV__||Il||r===t()||(Il=!0,!1!==globalThis.__DEV__&&Au.error(58));var o=Jc.useState({inst:{value:r,getSnapshot:t}}),i=o[0].inst,a=o[1];return _l?Jc.useLayoutEffect((function(){Object.assign(i,{value:r,getSnapshot:t}),Sl(i)&&a({inst:i})}),[e,r,t]):Object.assign(i,{value:r,getSnapshot:t}),Jc.useEffect((function(){return Sl(i)&&a({inst:i}),e((function(){Sl(i)&&a({inst:i})}))}),[e]),r};function Sl(e){var t=e.value,n=e.getSnapshot;try{return t!==n()}catch(e){return!0}}function Al(e){return!!e&&e<7}function Rl(e){return!1!==globalThis.__DEV__&&(t=e,(n=new Set([t])).forEach((function(e){ll(e)&&function(e){if(!1!==globalThis.__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch(e){if(e instanceof TypeError)return null;throw e}return e}(e)===e&&Object.getOwnPropertyNames(e).forEach((function(t){ll(e[t])&&n.add(e[t])}))}))),e;var t,n}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(wl||(wl={}));var Ol=Array.isArray;function Nl(e){return Array.isArray(e)&&e.length>0}var Pl=Object.prototype.hasOwnProperty;function Ml(e,t){return void 0===t&&(t=Object.create(null)),Dl(El(t.client),e).useQuery(t)}function Dl(e,t){var n=Jc.useRef();n.current&&e===n.current.client&&t===n.current.query||(n.current=new nh(e,t,n.current));var r=n.current;return r.forceUpdateState=Jc.useReducer((function(e){return e+1}),0)[1],r}var ql,xl,Fl,Ll,Ul,Bl,Hl,jl,Ql,Kl,Gl,zl,Vl,Wl,Yl,$l,Jl,Xl,Zl,ed,td,nd,rd,od,id,ad,sd,cd,ud,ld,dd,hd,pd,fd,md,gd,yd,vd,_d,bd,Cd,Ed,Td,wd,Id,kd,Sd,Ad,Rd,Od,Nd,Pd,Md,Dd,qd,xd,Fd,Ld,Ud,Bd,Hd,jd,Qd,Kd,Gd,zd,Vd,Wd,Yd,$d,Jd,Xd,Zd,eh,th,nh=function(){function e(e,t,n){var r=this;this.client=e,this.query=t,this.forceUpdate=function(){return r.forceUpdateState()},this.ssrDisabledResult=Rl({loading:!0,data:void 0,error:void 0,networkStatus:wl.loading}),this.skipStandbyResult=Rl({loading:!1,data:void 0,error:void 0,networkStatus:wl.ready}),this.toQueryResultCache=new(pl?WeakMap:Map),ul(t,$u.Query);var o=n&&n.result,i=o&&o.data;i&&(this.previousData=i)}return e.prototype.forceUpdateState=function(){!1!==globalThis.__DEV__&&Au.warn(51)},e.prototype.executeQuery=function(e){var t,n=this;e.query&&Object.assign(this,{query:e.query}),this.watchQueryOptions=this.createWatchQueryOptions(this.queryHookOptions=e);var r=this.observable.reobserveAsConcast(this.getObsQueryOptions());return this.previousData=(null===(t=this.result)||void 0===t?void 0:t.data)||this.previousData,this.result=void 0,this.forceUpdate(),new Promise((function(e){var t;r.subscribe({next:function(e){t=e},error:function(){e(n.toQueryResult(n.observable.getCurrentResult()))},complete:function(){e(n.toQueryResult(t))}})}))},e.prototype.useQuery=function(e){var t=this;this.renderPromises=Jc.useContext(Cl()).renderPromises,this.useOptions(e);var n=this.useObservableQuery(),r=kl(Jc.useCallback((function(e){if(t.renderPromises)return function(){};t.forceUpdate=e;var r=function(){var e=t.result,r=n.getCurrentResult();e&&e.loading===r.loading&&e.networkStatus===r.networkStatus&&iu(e.data,r.data)||t.setResult(r)},o=function(e){if(i.unsubscribe(),i=n.resubscribeAfterError(r,o),!Pl.call(e,"graphQLErrors"))throw e;var a=t.result;(!a||a&&a.loading||!iu(e,a.error))&&t.setResult({data:a&&a.data,error:e,loading:!1,networkStatus:wl.error})},i=n.subscribe(r,o);return function(){setTimeout((function(){return i.unsubscribe()})),t.forceUpdate=function(){return t.forceUpdateState()}}}),[n,this.renderPromises,this.client.disableNetworkFetches]),(function(){return t.getCurrentResult()}),(function(){return t.getCurrentResult()}));return this.unsafeHandlePartialRefetch(r),this.toQueryResult(r)},e.prototype.useOptions=function(t){var n,r=this.createWatchQueryOptions(this.queryHookOptions=t),o=this.watchQueryOptions;iu(r,o)||(this.watchQueryOptions=r,o&&this.observable&&(this.observable.reobserve(this.getObsQueryOptions()),this.previousData=(null===(n=this.result)||void 0===n?void 0:n.data)||this.previousData,this.result=void 0)),this.onCompleted=t.onCompleted||e.prototype.onCompleted,this.onError=t.onError||e.prototype.onError,!this.renderPromises&&!this.client.disableNetworkFetches||!1!==this.queryHookOptions.ssr||this.queryHookOptions.skip?this.queryHookOptions.skip||"standby"===this.watchQueryOptions.fetchPolicy?this.result=this.skipStandbyResult:this.result!==this.ssrDisabledResult&&this.result!==this.skipStandbyResult||(this.result=void 0):this.result=this.ssrDisabledResult},e.prototype.getObsQueryOptions=function(){var e=[],t=this.client.defaultOptions.watchQuery;return t&&e.push(t),this.queryHookOptions.defaultOptions&&e.push(this.queryHookOptions.defaultOptions),e.push(Zc(this.observable&&this.observable.options,this.watchQueryOptions)),e.reduce(eu)},e.prototype.createWatchQueryOptions=function(e){var t;void 0===e&&(e={});var n=e.skip,r=(e.ssr,e.onCompleted,e.onError,e.defaultOptions,Us(e,["skip","ssr","onCompleted","onError","defaultOptions"])),o=Object.assign(r,{query:this.query});if(!this.renderPromises||"network-only"!==o.fetchPolicy&&"cache-and-network"!==o.fetchPolicy||(o.fetchPolicy="cache-first"),o.variables||(o.variables={}),n){var i=o.fetchPolicy,a=void 0===i?this.getDefaultFetchPolicy():i,s=o.initialFetchPolicy,c=void 0===s?a:s;Object.assign(o,{initialFetchPolicy:c,fetchPolicy:"standby"})}else o.fetchPolicy||(o.fetchPolicy=(null===(t=this.observable)||void 0===t?void 0:t.options.initialFetchPolicy)||this.getDefaultFetchPolicy());return o},e.prototype.getDefaultFetchPolicy=function(){var e,t;return(null===(e=this.queryHookOptions.defaultOptions)||void 0===e?void 0:e.fetchPolicy)||(null===(t=this.client.defaultOptions.watchQuery)||void 0===t?void 0:t.fetchPolicy)||"cache-first"},e.prototype.onCompleted=function(e){},e.prototype.onError=function(e){},e.prototype.useObservableQuery=function(){var e=this.observable=this.renderPromises&&this.renderPromises.getSSRObservable(this.watchQueryOptions)||this.observable||this.client.watchQuery(this.getObsQueryOptions());this.obsQueryFields=Jc.useMemo((function(){return{refetch:e.refetch.bind(e),reobserve:e.reobserve.bind(e),fetchMore:e.fetchMore.bind(e),updateQuery:e.updateQuery.bind(e),startPolling:e.startPolling.bind(e),stopPolling:e.stopPolling.bind(e),subscribeToMore:e.subscribeToMore.bind(e)}}),[e]);var t=!(!1===this.queryHookOptions.ssr||this.queryHookOptions.skip);return this.renderPromises&&t&&(this.renderPromises.registerSSRObservable(e),e.getCurrentResult().loading&&this.renderPromises.addObservableQueryPromise(e)),e},e.prototype.setResult=function(e){var t=this.result;t&&t.data&&(this.previousData=t.data),this.result=e,this.forceUpdate(),this.handleErrorOrCompleted(e,t)},e.prototype.handleErrorOrCompleted=function(e,t){var n=this;if(!e.loading){var r=this.toApolloError(e);Promise.resolve().then((function(){r?n.onError(r):e.data&&(null==t?void 0:t.networkStatus)!==e.networkStatus&&e.networkStatus===wl.ready&&n.onCompleted(e.data)})).catch((function(e){!1!==globalThis.__DEV__&&Au.warn(e)}))}},e.prototype.toApolloError=function(e){return Nl(e.errors)?new hl({graphQLErrors:e.errors}):e.error},e.prototype.getCurrentResult=function(){return this.result||this.handleErrorOrCompleted(this.result=this.observable.getCurrentResult()),this.result},e.prototype.toQueryResult=function(e){var t=this.toQueryResultCache.get(e);if(t)return t;var n=e.data,r=(e.partial,Us(e,["data","partial"]));return this.toQueryResultCache.set(e,t=Ls(Ls(Ls({data:n},r),this.obsQueryFields),{client:this.client,observable:this.observable,variables:this.observable.variables,called:!this.queryHookOptions.skip,previousData:this.previousData})),!t.error&&Nl(e.errors)&&(t.error=new hl({graphQLErrors:e.errors})),t},e.prototype.unsafeHandlePartialRefetch=function(e){!e.partial||!this.queryHookOptions.partialRefetch||e.loading||e.data&&0!==Object.keys(e.data).length||"cache-only"===this.observable.options.fetchPolicy||(Object.assign(e,{loading:!0,networkStatus:wl.refetch}),this.observable.refetch())},e}(),rh=["refetch","reobserve","fetchMore","updateQuery","startPolling","subscribeToMore"];function oh(e,t){var n,r=Jc.useRef(),o=Jc.useRef(),i=Jc.useRef(),a=eu(t,r.current||{}),s=null!==(n=null==a?void 0:a.query)&&void 0!==n?n:e;o.current=a,i.current=s;var c=Dl(El(t&&t.client),s),u=c.useQuery(Ls(Ls({},a),{skip:!r.current})),l=u.observable.options.initialFetchPolicy||c.getDefaultFetchPolicy(),d=Object.assign(u,{called:!!r.current}),h=Jc.useMemo((function(){for(var e={},t=function(t){var n=d[t];e[t]=function(){return r.current||(r.current=Object.create(null),c.forceUpdateState()),n.apply(this,arguments)}},n=0,o=rh;n<o.length;n++)t(o[n]);return e}),[]);Object.assign(d,h);var p=Jc.useCallback((function(e){r.current=e?Ls(Ls({},e),{fetchPolicy:e.fetchPolicy||l}):{fetchPolicy:l};var t=eu(o.current,Ls({query:i.current},r.current)),n=c.executeQuery(Ls(Ls({},t),{skip:!1})).then((function(e){return Object.assign(e,h)}));return n.catch((function(){})),n}),[]);return[p,d]}function ih(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ah(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ih(Object(n),!0).forEach((function(t){Ds(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ih(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sh={},ch=Wc(ql||(ql=qs(["\n    mutation CreateBookClassification($data: CreateBookClassificationsInput!) {\n  createBookClassification(data: $data) {\n    book {\n      pk_id\n    }\n  }\n}\n    "])));function uh(e){var t=ah(ah({},sh),e);return Tl(ch,t)}var lh=Wc(xl||(xl=qs(["\n    mutation CreateBookFavorite($data: CreateBookFavoritesInput!) {\n  createBookFavorite(data: $data) {\n    person {\n      oid\n    }\n    book {\n      pk_id\n      title\n    }\n  }\n}\n    "])));function dh(e){var t=ah(ah({},sh),e);return Tl(lh,t)}var hh=Wc(Fl||(Fl=qs(["\n    mutation CreateBookLoan($data: CreateBookLoanInput!) {\n  createBookLoan(data: $data) {\n    pk_id\n    expected_date\n  }\n}\n    "])));function ph(e){var t=ah(ah({},sh),e);return Tl(hh,t)}var fh=Wc(Ll||(Ll=qs(["\n    mutation CreateClassification($data: CreateClassificationInput!) {\n  createClassification(data: $data) {\n    pk_id\n    creation_date\n  }\n}\n    "])));function mh(e){var t=ah(ah({},sh),e);return Tl(fh,t)}var gh=Wc(Ul||(Ul=qs(["\n    mutation CreateNotebookRichText($data: CreateNotebookRichTextInput!, $pagination: FindNotebookRichTextsPaginationInput) {\n  createNotebookRichText(data: $data) {\n    notebook {\n      richTexts(pagination: $pagination) {\n        nodes {\n          id: pk_id\n          title: page_name\n          text\n        }\n      }\n      pk_id\n    }\n  }\n}\n    "])));function yh(e){var t=ah(ah({},sh),e);return Tl(gh,t)}var vh=Wc(Bl||(Bl=qs(["\n    mutation CreateTicketToSuport($attachmentData: [CreateAttachmentWithTicketInput!], $ticketData: CreateTicketInput!) {\n  createTicket(attachmentData: $attachmentData, ticketData: $ticketData) {\n    ticket {\n      pk_id\n      description\n    }\n    signedUrls {\n      fileName\n      signedURL\n    }\n  }\n}\n    "])));function _h(e){var t=ah(ah({},sh),e);return Tl(vh,t)}var bh=Wc(Hl||(Hl=qs(["\n    mutation DeactivateActivityDeliveryContent($activityContentId: Int!) {\n  deactivateActivityDeliveryContent(activityContentId: $activityContentId)\n}\n    "])));function Ch(e){var t=ah(ah({},sh),e);return Tl(bh,t)}var Eh=Wc(jl||(jl=qs(["\n    mutation deactivateBookLoan($where: DeactivateBookLoanWhereInput!) {\n  deactivateBookLoan(where: $where)\n}\n    "])));function Th(e){var t=ah(ah({},sh),e);return Tl(Eh,t)}var wh=Wc(Ql||(Ql=qs(["\n    mutation DeactivateNotebookRichText($where: DeactivateNotebookRichTextWhereInput!) {\n  deactivateNotebookRichText(where: $where)\n}\n    "])));function Ih(e){var t=ah(ah({},sh),e);return Tl(wh,t)}var kh=Wc(Kl||(Kl=qs(["\n    mutation DeleteBookFavorite($bookId: Int) {\n  deleteBookFavorite(bookId: $bookId)\n}\n    "])));function Sh(e){var t=ah(ah({},sh),e);return Tl(kh,t)}var Ah=Wc(Gl||(Gl=qs(["\n    mutation DeliverActivityContent($data: [DeliveryActivityContentInput!]!) {\n  deliveryActivity(data: $data) {\n    deliveryActivityContents {\n      pk_id\n      title\n    }\n    signedUrls {\n      fileName\n      signedURL\n    }\n  }\n}\n    "])));function Rh(e){var t=ah(ah({},sh),e);return Tl(Ah,t)}var Oh=Wc(zl||(zl=qs(["\n    mutation FinishQuizStudent($quizStudentId: Int!) {\n  finishQuizStudent(quizStudentId: $quizStudentId) {\n    pk_id\n  }\n}\n    "])));function Nh(e){var t=ah(ah({},sh),e);return Tl(Oh,t)}var Ph=Wc(Vl||(Vl=qs(["\n    mutation GetOrCreateNotebook($data: CreateNotebookInput!, $pagination: FindNotebookRichTextsPaginationInput) {\n  upsertNotebook(data: $data) {\n    richTexts(pagination: $pagination) {\n      nodes {\n        title: page_name\n        id: pk_id\n        text\n      }\n    }\n    pk_id\n  }\n}\n    "])));function Mh(e){var t=ah(ah({},sh),e);return Tl(Ph,t)}var Dh=Wc(Wl||(Wl=qs(["\n    mutation MarkAlternativeAtQuizStudentQuestionInput($data: MarkAlternativeAtQuizStudentQuestionInput!, $millisecondsIddled: Int!, $quizStudentQuestionId: Int!) {\n  markAlternativeAtQuizStudentQuestion(\n    data: $data\n    millisecondsIddled: $millisecondsIddled\n    quizStudentQuestionId: $quizStudentQuestionId\n  ) {\n    pk_id\n  }\n}\n    "])));function qh(e){var t=ah(ah({},sh),e);return Tl(Dh,t)}var xh=Wc(Yl||(Yl=qs(["\n    mutation ProlongBookLoan($where: ProlongBookLoanWhereInput!, $data: ProlongBookLoanDataInput!) {\n  prolongBookLoan(where: $where, data: $data)\n}\n    "])));function Fh(e){var t=ah(ah({},sh),e);return Tl(xh,t)}var Lh=Wc($l||($l=qs(["\n    mutation startQuizStudent($quizId: Int!) {\n  startQuizStudent(quizId: $quizId) {\n    pk_id\n    start_quiz\n    end_quiz\n    remainingTime {\n      time\n    }\n    quizStudentQuestions {\n      pk_id\n      alternative {\n        pk_id\n      }\n      question {\n        questionRichText {\n          text\n        }\n        alternatives {\n          pk_id\n          richText {\n            pk_id\n            text\n          }\n        }\n      }\n    }\n  }\n}\n    "])));function Uh(e){var t=ah(ah({},sh),e);return Tl(Lh,t)}var Bh=Wc(Jl||(Jl=qs(["\n    mutation UpdateNotebookRichText($data: UpdateNotebookRichTextInput!, $where: FindUniqueNotebookRichTextWhereInput!, $pagination: FindNotebookRichTextsPaginationInput) {\n  updateNotebookRichText(data: $data, where: $where) {\n    notebook {\n      richTexts(pagination: $pagination) {\n        nodes {\n          id: pk_id\n          title: page_name\n          text\n        }\n      }\n    }\n  }\n}\n    "])));function Hh(e){var t=ah(ah({},sh),e);return Tl(Bh,t)}var jh=Wc(Xl||(Xl=qs(["\n    mutation UpdateBookLoan($data: UpdateBookLoanInput!, $where: FindUniqueBookLoanWhereInput!) {\n  updateBookLoan(data: $data, where: $where) {\n    pk_id\n  }\n}\n    "])));function Qh(e){var t=ah(ah({},sh),e);return Tl(jh,t)}Wc(Zl||(Zl=qs(["\n    mutation UpsertPersonAddress($personOid: String!, $data: UpsertPersonAddressInput!) {\n  upsertPersonAddress(personOid: $personOid, data: $data) {\n    pk_id\n    postal_code\n    public_place\n    number\n    complement\n    neighborhood\n    city\n    state\n  }\n}\n    "]))),Wc(ed||(ed=qs(["\n    query GetPersonDetailsByCpf($where: FindFirstPersonWhereInput!) {\n  person(where: $where) {\n    oid\n    grouping {\n      groups {\n        pk_id\n        name\n      }\n    }\n    name\n    social_name\n    mainEmail {\n      pk_id\n      description\n      name\n    }\n    mainPhoneContact {\n      pk_id\n      description\n      name\n      is_principal\n    }\n    cpf\n    raceType {\n      pk_id\n      name\n    }\n    sexType {\n      pk_id\n      name\n    }\n    birth_date\n    birth_city\n    birth_state\n    birth_country\n    documents {\n      pk_id\n      documentType {\n        pk_id\n        name\n      }\n      issue_agency\n      issue_state\n      issue_date\n      expiration_date\n    }\n    contacts {\n      pk_id\n      name\n      description\n      is_principal\n      contactType {\n        pk_id\n        name\n      }\n    }\n    socialMedias {\n      pk_id\n      is_authorized\n      socialMediaType {\n        pk_id\n        name\n      }\n      url\n    }\n    student_register_code\n    ra\n    inep\n    publication_number\n    addresses {\n      pk_id\n      postal_code\n      addressType {\n        pk_id\n        name\n      }\n      public_place\n      number\n      complement\n      neighborhood\n      city\n      state\n    }\n    studentResponsibles {\n      responsibles {\n        oid\n        cpf\n        name\n        social_name\n        mainEmail {\n          pk_id\n          name\n          description\n          is_principal\n        }\n        raceType {\n          pk_id\n          name\n        }\n        sexType {\n          pk_id\n          name\n        }\n        maritalType {\n          pk_id\n          name\n        }\n        birth_date\n        birth_city\n        birth_state\n        birth_country\n        documents {\n          pk_id\n          documentType {\n            pk_id\n            name\n          }\n          issue_agency\n          issue_state\n          issue_date\n          expiration_date\n        }\n      }\n    }\n    number_residents\n    socioEconomics {\n      pk_id\n      monetary_value\n      incomeType {\n        name\n      }\n      name\n      is_live_residence\n      relationType {\n        name\n      }\n    }\n    academicFormations {\n      pk_id\n      study_area\n      start_date\n      certificate_url\n      education_institution\n      end_date\n    }\n    teacherAvailabilities {\n      pk_id\n      day {\n        name\n      }\n      start_time\n      end_time\n    }\n  }\n}\n    "])));var Kh=Wc(td||(td=qs(["\n    query FetchStudentNotificationsWsClientToken {\n  wssUrl: fetchStudentNotificationsWsClientToken\n}\n    "])));function Gh(e){var t=ah(ah({},sh),e);return Ml(Kh,t)}var zh=Wc(nd||(nd=qs(["\n    query FetchUrlToDownloadClassDiaryContent($classDiaryContentId: Int!) {\n  contentUrl: fetchUrlToDownloadClassDiaryContent(\n    classDiaryContentId: $classDiaryContentId\n  )\n}\n    "])));function Vh(e){var t=ah(ah({},sh),e);return Ml(zh,t)}function Wh(e){var t=ah(ah({},sh),e);return oh(zh,t)}var Yh=Wc(rd||(rd=qs(["\n    query FetchUrlToDownloadCatalogContent($contentId: Int!) {\n  contentUrl: fetchUrlToDownloadContent(contentId: $contentId)\n}\n    "])));function $h(e){var t=ah(ah({},sh),e);return Ml(Yh,t)}function Jh(e){var t=ah(ah({},sh),e);return oh(Yh,t)}var Xh=Wc(od||(od=qs(["\n    query getActivityInfo($where: FindUniqueActivityWhereInput!) {\n  viewWork(where: $where) {\n    activity {\n      title\n      final_date\n      close_date\n      instruction\n      point\n      contentUrls {\n        pk_id\n        fileName\n        signedURL\n      }\n      teacher {\n        name\n        url_photo\n      }\n    }\n    comments {\n      pk_id\n      message\n      creation_date\n      teacher {\n        name\n      }\n    }\n    activityWorkStatus {\n      pk_id\n      name\n    }\n    deliveryContents {\n      title\n      pk_id\n      url_bucket\n    }\n    components {\n      grade_value\n      student {\n        oid\n      }\n    }\n    group {\n      name\n      students {\n        url_photo\n        name\n      }\n    }\n  }\n}\n    "])));function Zh(e){var t=ah(ah({},sh),e);return Ml(Xh,t)}function ep(e){var t=ah(ah({},sh),e);return oh(Xh,t)}var tp=Wc(id||(id=qs(["\n    query GetAllBooks($pagination: FindBooksPaginationInput, $orderBy: FindBooksOrderByInput) {\n  books(pagination: $pagination, orderBy: $orderBy) {\n    nodes {\n      bookWriter {\n        author {\n          name\n          pk_id\n        }\n      }\n      pk_id\n      title\n      ISBN\n      img_url\n      creation_date\n    }\n  }\n}\n    "])));function np(e){var t=ah(ah({},sh),e);return Ml(tp,t)}function rp(e){var t=ah(ah({},sh),e);return oh(tp,t)}var op=Wc(ad||(ad=qs(["\n    query AttendancesByStudentAndDate($where: FindAttendancesByStudentAndDateInput!) {\n  attendancesByStudentAndDate(where: $where) {\n    date\n    attendances {\n      classDiary {\n        start_time\n        end_time\n        discipline {\n          name\n          color {\n            hexadecimal\n          }\n        }\n        teacher {\n          name\n        }\n        classroom {\n          originalDiscipline {\n            name\n            color {\n              hexadecimal\n            }\n          }\n          principalTeacher {\n            name\n          }\n        }\n        classType {\n          pk_id\n        }\n      }\n      is_present\n      occurrences {\n        description\n        occurrenceType {\n          name\n        }\n      }\n      date_attendance\n    }\n  }\n}\n    "])));function ip(e){var t=ah(ah({},sh),e);return Ml(op,t)}function ap(e){var t=ah(ah({},sh),e);return oh(op,t)}var sp=Wc(sd||(sd=qs(["\n    query GetBookByGenre($where: FindBooksWhereInput) {\n  books(where: $where) {\n    nodes {\n      pk_id\n      title\n      img_url\n    }\n  }\n}\n    "])));function cp(e){var t=ah(ah({},sh),e);return Ml(sp,t)}function up(e){var t=ah(ah({},sh),e);return oh(sp,t)}var lp=Wc(cd||(cd=qs(["\n    query GetBookById($where: FindBooksWhereInput, $pagination: FindBooksPaginationInput) {\n  books(where: $where, pagination: $pagination) {\n    nodes {\n      pk_id\n      title\n      img_url\n      bookWriter {\n        author {\n          name\n        }\n      }\n      is_active\n      synopsis\n      publisher {\n        pk_id\n        name\n      }\n      bookSubject {\n        subjectType {\n          name\n        }\n      }\n      copies\n      language {\n        language\n        pk_id\n      }\n      locationPublication {\n        name\n      }\n      physicalType {\n        name\n      }\n      responsability_statement\n      type {\n        name\n      }\n      year_publication\n      page_number\n    }\n    totalCount\n  }\n}\n    "])));function dp(e){var t=ah(ah({},sh),e);return Ml(lp,t)}function hp(e){var t=ah(ah({},sh),e);return oh(lp,t)}var pp=Wc(ud||(ud=qs(["\n    query FindBookClassifications($where: FindBookClassificationsWhereInput) {\n  findBookClassifications(where: $where) {\n    nodes {\n      book {\n        pk_id\n        title\n      }\n      person {\n        oid\n        name\n        classgroup {\n          schoolClass {\n            name\n          }\n        }\n      }\n      classification\n      comment\n    }\n  }\n}\n    "])));function fp(e){var t=ah(ah({},sh),e);return oh(pp,t)}var mp=Wc(ld||(ld=qs(["\n    query GetBookLoans {\n  bookLoans {\n    nodes {\n      pk_id\n      status {\n        name\n      }\n      expected_date\n      end_date\n      start_date\n      bookExample {\n        example\n      }\n      book {\n        title\n        bookWriter {\n          author {\n            name\n          }\n        }\n        img_url\n      }\n      bookQueue {\n        position\n      }\n    }\n  }\n}\n    "])));function gp(e){var t=ah(ah({},sh),e);return Ml(mp,t)}function yp(e){var t=ah(ah({},sh),e);return oh(mp,t)}var vp=Wc(dd||(dd=qs(["\n    query FindBookPendentClassification($where: FindBookClassificationsWhereInput) {\n  findPendentClassification(where: $where) {\n    nodes {\n      book {\n        loan {\n          pk_id\n        }\n        title\n        pk_id\n        img_url\n      }\n    }\n  }\n}\n    "])));function _p(e){var t=ah(ah({},sh),e);return Ml(vp,t)}function bp(e){var t=ah(ah({},sh),e);return oh(vp,t)}var Cp=Wc(hd||(hd=qs(["\n    query getBookPublishers($where: FindBookPublishersWhereInput) {\n  bookPublishers(where: $where) {\n    nodes {\n      pk_id\n      name\n    }\n  }\n}\n    "])));function Ep(e){var t=ah(ah({},sh),e);return Ml(Cp,t)}function Tp(e){var t=ah(ah({},sh),e);return oh(Cp,t)}var wp=Wc(pd||(pd=qs(["\n    query GetBookUserTypeAccess($where: FindBookUserTypeAccessWhereInput) {\n  bookUserTypeAccesses(where: $where) {\n    nodes {\n      pk_id\n    }\n  }\n}\n    "])));function Ip(e){var t=ah(ah({},sh),e);return Ml(wp,t)}function kp(e){var t=ah(ah({},sh),e);return oh(wp,t)}var Sp=Wc(fd||(fd=qs(["\n    query CalendarsByClassId($findCalendarsByIdClassInput: FindCalendarsByIdClassInput!, $classesIds: [Int!]) {\n  calendarsByClassId(data: $findCalendarsByIdClassInput) {\n    calendar {\n      date\n      classrooms(classesIds: $classesIds) {\n        originalDiscipline {\n          pk_id\n          name\n          knowledgeAreas {\n            color {\n              hexadecimal\n            }\n          }\n        }\n        principalTeacher {\n          name\n        }\n        classDiaries {\n          start_time\n          end_time\n          discipline {\n            pk_id\n            name\n            knowledgeAreas {\n              color {\n                hexadecimal\n              }\n            }\n          }\n          teacher {\n            name\n            oid\n          }\n          summaries {\n            subtheme {\n              pk_id\n              name\n            }\n          }\n          pk_id\n          is_substitute_teacher\n        }\n      }\n    }\n  }\n}\n    "])));function Ap(e){var t=ah(ah({},sh),e);return Ml(Sp,t)}function Rp(e){var t=ah(ah({},sh),e);return oh(Sp,t)}var Op=Wc(md||(md=qs(["\n    query GetCalendarsByClassId($findCalendarsByIdClassInput: FindCalendarsByIdClassInput!) {\n  calendarsByClassId(data: $findCalendarsByIdClassInput) {\n    calendar {\n      date\n      classrooms {\n        originalDiscipline {\n          pk_id\n          name\n          knowledgeAreas {\n            color {\n              hexadecimal\n            }\n          }\n        }\n        principalTeacher {\n          name\n        }\n        classDiaries {\n          start_time\n          end_time\n          discipline {\n            pk_id\n            name\n            knowledgeAreas {\n              color {\n                hexadecimal\n              }\n            }\n          }\n          teacher {\n            name\n          }\n          summaries {\n            subtheme {\n              pk_id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n}\n    "])));function Np(e){var t=ah(ah({},sh),e);return Ml(Op,t)}var Pp=Wc(gd||(gd=qs(["\n    query GetClassDiaryById($where: FindFirstClassDiaryWhereInput!, $contentsWhere: FindClassDiaryContentsWhereInput) {\n  classDiary(where: $where) {\n    end_time\n    classroom {\n      calendar {\n        date\n      }\n    }\n    contents(where: $contentsWhere) {\n      author\n      pk_id\n      title\n      url_bucket\n      is_active\n      file_type\n      description\n    }\n    summaries {\n      subtheme {\n        catalogDocuments {\n          content {\n            name\n            title\n            file_type\n            url_bucket\n            pk_id\n          }\n        }\n        name\n        pk_id\n        richText {\n          description\n          pk_id\n        }\n        standardVideo {\n          url_bucket\n          url_streaming\n          videoContents {\n            file_type\n            is_active\n            name\n            pk_id\n            group {\n              pk_id\n            }\n          }\n        }\n      }\n    }\n  }\n}\n    "])));function Mp(e){var t=ah(ah({},sh),e);return Ml(Pp,t)}function Dp(e){var t=ah(ah({},sh),e);return oh(Pp,t)}var qp=Wc(yd||(yd=qs(["\n    query GetClassDiaries($findClassDiariesWhereInput: FindClassDiariesWhereInput!) {\n  classDiaries(where: $findClassDiariesWhereInput) {\n    nodes {\n      pk_id\n      classType {\n        pk_id\n        name\n        observation\n      }\n      classroom {\n        classDiaries {\n          start_time\n          end_time\n          discipline {\n            name\n          }\n          teacher {\n            name\n          }\n        }\n        originalDiscipline {\n          name\n        }\n        principalTeacher {\n          name\n        }\n        room {\n          name\n        }\n        calendar {\n          date\n        }\n      }\n    }\n  }\n}\n    "])));function xp(e){var t=ah(ah({},sh),e);return Ml(qp,t)}function Fp(e){var t=ah(ah({},sh),e);return oh(qp,t)}var Lp=Wc(vd||(vd=qs(["\n    query GetClassDiariesById($contentsWhere: FindClassDiaryContentsWhereInput, $where: FindClassDiariesWhereInput) {\n  classDiaries(where: $where) {\n    nodes {\n      end_time\n      start_time\n      classroom {\n        calendar {\n          date\n        }\n      }\n      contents(where: $contentsWhere) {\n        author\n        pk_id\n        title\n        url_bucket\n        is_active\n        file_type\n        description\n      }\n      summaries {\n        subtheme {\n          catalogDocuments {\n            content {\n              name\n              title\n              file_type\n              url_bucket\n              pk_id\n            }\n          }\n          name\n          pk_id\n          richText {\n            description\n            pk_id\n          }\n          standardVideo {\n            url_bucket\n            url_streaming\n            videoContents {\n              file_type\n              is_active\n              name\n              pk_id\n              group {\n                pk_id\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n    "])));function Up(e){var t=ah(ah({},sh),e);return Ml(Lp,t)}function Bp(e){var t=ah(ah({},sh),e);return oh(Lp,t)}var Hp=Wc(_d||(_d=qs(["\n    query GetClassDiary($findFirstClassDiaryWhereInput: FindFirstClassDiaryWhereInput!) {\n  classDiary(where: $findFirstClassDiaryWhereInput) {\n    classType {\n      pk_id\n      name\n      observation\n    }\n    classroom {\n      classDiaries {\n        discipline {\n          name\n        }\n        teacher {\n          name\n        }\n      }\n      originalDiscipline {\n        name\n      }\n      principalTeacher {\n        name\n      }\n      room {\n        name\n      }\n      calendar {\n        date\n      }\n    }\n  }\n}\n    "])));function jp(e){var t=ah(ah({},sh),e);return Ml(Hp,t)}function Qp(e){var t=ah(ah({},sh),e);return oh(Hp,t)}var Kp=Wc(bd||(bd=qs(["\n    query GetClassId {\n  me {\n    classgroup {\n      schoolClass {\n        pk_id\n        grade {\n          pk_id\n        }\n      }\n    }\n  }\n}\n    "])));function Gp(e){var t=ah(ah({},sh),e);return Ml(Kp,t)}function zp(e){var t=ah(ah({},sh),e);return oh(Kp,t)}var Vp=Wc(Cd||(Cd=qs(["\n    query GetPendentClassifications {\n  pendentClassifications {\n    discipline\n    color\n    teacher\n    local\n    class_date\n    remainingTime\n    classDiaryId\n    date\n  }\n}\n    "])));function Wp(e){var t=ah(ah({},sh),e);return Ml(Vp,t)}function Yp(e){var t=ah(ah({},sh),e);return oh(Vp,t)}var $p=Wc(Ed||(Ed=qs(["\n    query GetClassRoom($findFirstClassroomWhereInput: FindFirstClassroomWhereInput!) {\n  classroom(where: $findFirstClassroomWhereInput) {\n    classDiaries {\n      start_time\n      end_time\n      discipline {\n        pk_id\n        name\n        color {\n          hexadecimal\n        }\n      }\n      teacher {\n        name\n      }\n    }\n    originalDiscipline {\n      pk_id\n      name\n      color {\n        hexadecimal\n      }\n    }\n    principalTeacher {\n      name\n    }\n    room {\n      name\n      floor\n    }\n    calendar {\n      date\n    }\n  }\n}\n    "])));function Jp(e){var t=ah(ah({},sh),e);return Ml($p,t)}function Xp(e){var t=ah(ah({},sh),e);return oh($p,t)}var Zp=Wc(Td||(Td=qs(["\n    query getBookFavorites($where: FindBookFavoriteWhereInput) {\n  findBookFavorites(where: $where) {\n    nodes {\n      book {\n        title\n        pk_id\n        img_url\n      }\n    }\n  }\n}\n    "])));function ef(e){var t=ah(ah({},sh),e);return Ml(Zp,t)}function tf(e){var t=ah(ah({},sh),e);return oh(Zp,t)}var nf=Wc(wd||(wd=qs(["\n    query GetFinalRecuperationsByStudent($classId: Int, $studentOid: String) {\n  finalRecuperationsByStudent(classId: $classId, studentOid: $studentOid) {\n    average\n    discipline\n    disciplineId\n    finalAverageValue\n    isShow\n    is_council: isCouncil\n    status\n    value\n  }\n}\n    "])));function rf(e){var t=ah(ah({},sh),e);return Ml(nf,t)}function of(e){var t=ah(ah({},sh),e);return oh(nf,t)}var af=Wc(Id||(Id=qs(["\n    query GetGenres($pagination: FindBookGenrePaginationInput, $where: FindBookGenresWhereInput) {\n  bookGenres(pagination: $pagination, where: $where) {\n    nodes {\n      pk_id\n      name\n    }\n    totalCount\n  }\n}\n    "])));function sf(e){var t=ah(ah({},sh),e);return Ml(af,t)}function cf(e){var t=ah(ah({},sh),e);return oh(af,t)}var uf=Wc(kd||(kd=qs(["\n    query getMenus($orderBy: FindMenusOrderByInput, $pagination: PaginationInput) {\n  menus(orderBy: $orderBy, pagination: $pagination) {\n    nodes {\n      pk_id\n      url_bucket_mobile\n      url_bucket\n      creation_date\n    }\n  }\n}\n    "])));function lf(e){var t=ah(ah({},sh),e);return Ml(uf,t)}function df(e){var t=ah(ah({},sh),e);return oh(uf,t)}var hf=Wc(Sd||(Sd=qs(["\n    query getMyDisciplines {\n  me {\n    classgroup {\n      schoolClass {\n        grade {\n          disciplinesList {\n            disciplines {\n              pk_id\n              name\n              knowledgeAreas {\n                color {\n                  hexadecimal\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n    "])));function pf(e){var t=ah(ah({},sh),e);return Ml(hf,t)}function ff(e){var t=ah(ah({},sh),e);return oh(hf,t)}var mf=Wc(Ad||(Ad=qs(["\n    query GetMyGroups {\n  me {\n    grouping {\n      groups {\n        pk_id\n      }\n    }\n  }\n}\n    "])));function gf(e){var t=ah(ah({},sh),e);return Ml(mf,t)}function yf(e){var t=ah(ah({},sh),e);return oh(mf,t)}var vf=Wc(Rd||(Rd=qs(["\n    query GetOrdainedBooks($orderBy: FindBooksOrderByInput, $pagination: FindBooksPaginationInput) {\n  books(orderBy: $orderBy, pagination: $pagination) {\n    nodes {\n      pk_id\n      title\n      img_url\n    }\n    totalCount\n  }\n}\n    "])));function _f(e){var t=ah(ah({},sh),e);return Ml(vf,t)}function bf(e){var t=ah(ah({},sh),e);return oh(vf,t)}var Cf=Wc(Od||(Od=qs(["\n    query GetOrderedSubthemesByDisciplineAndGrade($findSubthemesWhereInput: FindSubthemesWhereInput!, $disciplineId: Int!, $gradeId: Int!) {\n  orderedThemes(disciplineId: $disciplineId, gradeId: $gradeId) {\n    name\n    orderedSubthemes(where: $findSubthemesWhereInput) {\n      pk_id\n      name\n      change_date\n      isSubthemeFinished {\n        is_finished\n      }\n    }\n  }\n}\n    "])));function Ef(e){var t=ah(ah({},sh),e);return Ml(Cf,t)}function Tf(e){var t=ah(ah({},sh),e);return oh(Cf,t)}var wf=Wc(Nd||(Nd=qs(["\n    query PercentualBookClassification($bookId: Int!) {\n  percentualBookClassification(bookId: $bookId) {\n    classification\n    percentage\n    total\n    quantity\n    avg\n  }\n}\n    "])));function If(e){var t=ah(ah({},sh),e);return oh(wf,t)}var kf=Wc(Pd||(Pd=qs(["\n    query GetPopularBooks {\n  popular {\n    book {\n      pk_id\n      img_url\n      title\n      synopsis\n      bookWriter {\n        author {\n          name\n          pk_id\n        }\n      }\n      publisher {\n        name\n        pk_id\n      }\n      bookSubject {\n        subjectType {\n          name\n          pk_id\n        }\n      }\n    }\n    qntLoans\n  }\n}\n    "])));function Sf(e){var t=ah(ah({},sh),e);return Ml(kf,t)}function Af(e){var t=ah(ah({},sh),e);return oh(kf,t)}var Rf=Wc(Md||(Md=qs(["\n    query GetQuizByStudent($where: FindOneQuizStudentWhereInput!) {\n  quizStudent(where: $where) {\n    pk_id\n    creation_date\n    student {\n      oid\n      classgroup {\n        schoolClass {\n          pk_id\n        }\n      }\n    }\n    remainingTime {\n      time\n    }\n    quiz {\n      pk_id\n      name\n      quiz_time\n    }\n    quizStudentQuestions {\n      alternative {\n        pk_id\n      }\n      question {\n        pk_id\n        questionRichText {\n          text\n        }\n        alternatives {\n          pk_id\n          richText {\n            text\n            pk_id\n          }\n          is_correct\n        }\n      }\n      grade_value\n    }\n  }\n}\n    "])));function Of(e){var t=ah(ah({},sh),e);return Ml(Rf,t)}function Nf(e){var t=ah(ah({},sh),e);return oh(Rf,t)}var Pf=Wc(Dd||(Dd=qs(["\n    query GetBookLoansReaded {\n  bookLoansReaded {\n    nodes {\n      pk_id\n      book {\n        img_url\n        pk_id\n        title\n        bookWriter {\n          author {\n            pk_id\n            name\n          }\n        }\n      }\n      status {\n        pk_id\n        name\n      }\n      is_completed\n      read_page\n    }\n  }\n}\n    "])));function Mf(e){var t=ah(ah({},sh),e);return Ml(Pf,t)}function Df(e){var t=ah(ah({},sh),e);return oh(Pf,t)}var qf=Wc(qd||(qd=qs(["\n    query GetRelatedBooks($bookId: Int!) {\n  related(bookId: $bookId) {\n    img_url\n    pk_id\n    synopsis\n    title\n  }\n}\n    "])));function xf(e){var t=ah(ah({},sh),e);return Ml(qf,t)}function Ff(e){var t=ah(ah({},sh),e);return oh(qf,t)}var Lf=Wc(xd||(xd=qs(["\n    query GetSchoolYears($where: FindSchoolYearsWhereInput, $pagination: PaginationInput, $orderBy: FindSchoolYearsOrderByInput, $allowAccessToAllYears: Boolean) {\n  schoolYears(\n    where: $where\n    pagination: $pagination\n    orderBy: $orderBy\n    allowAccessToAllYears: $allowAccessToAllYears\n  ) {\n    nodes {\n      year\n      pk_id\n    }\n  }\n}\n    "])));function Uf(e){var t=ah(ah({},sh),e);return Ml(Lf,t)}function Bf(e){var t=ah(ah({},sh),e);return oh(Lf,t)}var Hf=Wc(Fd||(Fd=qs(["\n    query GetSemesterAverageByStudent($classId: Int) {\n  semesterAverageByStudent(classId: $classId) {\n    semester1\n    semester2\n    final\n    status\n    discipline\n    disciplineId\n  }\n}\n    "])));function jf(e){var t=ah(ah({},sh),e);return Ml(Hf,t)}function Qf(e){var t=ah(ah({},sh),e);return oh(Hf,t)}var Kf=Wc(Ld||(Ld=qs(["\n    query GetSemesterPhases($where: FindSemesterPhasesWhereInput, $orderBy: FindSemesterPhasesOrderByInput, $pagination: FindSemesterPhasesPaginationInput) {\n  semesterPhases(where: $where, orderBy: $orderBy, pagination: $pagination) {\n    nodes {\n      name\n      pk_id\n    }\n  }\n}\n    "])));function Gf(e){var t=ah(ah({},sh),e);return Ml(Kf,t)}function zf(e){var t=ah(ah({},sh),e);return oh(Kf,t)}var Vf=Wc(Ud||(Ud=qs(["\n    query GetSemesters($where: FindSemesterPeriodWhereInput) {\n  semesterPeriod(where: $where) {\n    nodes {\n      pk_id\n      name\n      is_recuperation\n    }\n  }\n}\n    "])));function Wf(e){var t=ah(ah({},sh),e);return Ml(Vf,t)}function Yf(e){var t=ah(ah({},sh),e);return oh(Vf,t)}var $f=Wc(Bd||(Bd=qs(["\n    query GetStudentActivities($where: FindAssignedActivitiesWhereInput!) {\n  studentWorks(where: $where) {\n    pk_id\n    activity {\n      pk_id\n      title\n      final_date\n      is_group\n      teacher {\n        name\n      }\n    }\n    activityWorkStatus {\n      pk_id\n      name\n    }\n  }\n}\n    "])));function Jf(e){var t=ah(ah({},sh),e);return Ml($f,t)}function Xf(e){var t=ah(ah({},sh),e);return oh($f,t)}var Zf=Wc(Hd||(Hd=qs(["\n    query GetStudentAppliedSubthemesByDiscipline($disciplineId: Int!) {\n  studentAppliedSubthemes(disciplineId: $disciplineId) {\n    theme {\n      name\n    }\n    pk_id\n    name\n    change_date\n    isSubthemeFinished {\n      is_finished\n    }\n  }\n}\n    "])));function em(e){var t=ah(ah({},sh),e);return Ml(Zf,t)}function tm(e){var t=ah(ah({},sh),e);return oh(Zf,t)}var nm=Wc(jd||(jd=qs(["\n    query GetStudentClassAndGrade {\n  me {\n    name\n    external_oid\n    classgroup {\n      schoolClass {\n        pk_id\n        name\n        grade {\n          pk_id\n          name\n        }\n      }\n    }\n  }\n}\n    "])));function rm(e){var t=ah(ah({},sh),e);return Ml(nm,t)}function om(e){var t=ah(ah({},sh),e);return oh(nm,t)}var im=Wc(Qd||(Qd=qs(["\n    query GetStudentClassByYearId($where: FindFirstStudentWhereInput!, $yearId: Int) {\n  student(where: $where) {\n    classgroupHistory(yearId: $yearId) {\n      schoolClass {\n        pk_id\n        name\n        grade {\n          pk_id\n          name\n          disciplinesList {\n            disciplines {\n              pk_id\n              name\n              knowledgeAreas {\n                color {\n                  hexadecimal\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n    "])));function am(e){var t=ah(ah({},sh),e);return Ml(im,t)}function sm(e){var t=ah(ah({},sh),e);return oh(im,t)}var cm=Wc(Kd||(Kd=qs(["\n    query GetStudentGrades($semesterPeriodId: Int!, $gradeId: Int!) {\n  studentsGrade(semesterPeriodId: $semesterPeriodId, gradeId: $gradeId) {\n    media\n    n1\n    n2\n    discipline {\n      pk_id: id\n      name\n    }\n  }\n}\n    "])));function um(e){var t=ah(ah({},sh),e);return Ml(cm,t)}function lm(e){var t=ah(ah({},sh),e);return oh(cm,t)}var dm=Wc(Gd||(Gd=qs(["\n    query GetStudentGradesByDiscipline($classId: Int!, $semesterId: Int!, $disciplineId: Int!) {\n  studentsGradeByDiscipline(\n    classId: $classId\n    semesterId: $semesterId\n    disciplineId: $disciplineId\n  ) {\n    n1 {\n      average\n      weight\n      activities {\n        grade\n        title\n        weight\n      }\n    }\n    n2 {\n      weight\n      average\n      activities {\n        grade\n        title\n        weight\n      }\n    }\n    semesterAverageValue\n  }\n}\n    "])));function hm(e){var t=ah(ah({},sh),e);return Ml(dm,t)}function pm(e){var t=ah(ah({},sh),e);return oh(dm,t)}var fm=Wc(zd||(zd=qs(["\n    query GetStudentOid {\n  me {\n    oid\n  }\n}\n    "])));function mm(e){var t=ah(ah({},sh),e);return Ml(fm,t)}function gm(e){var t=ah(ah({},sh),e);return oh(fm,t)}var ym=Wc(Vd||(Vd=qs(["\n    query getStudentOidByStudentName($where: FindStudentsByNameWhereInput) {\n  findStudentsByName(where: $where) {\n    oid\n    classgroup {\n      schoolClass {\n        pk_id\n        name\n        grade {\n          pk_id\n        }\n      }\n    }\n  }\n}\n    "])));function vm(e){var t=ah(ah({},sh),e);return Ml(ym,t)}function _m(e){var t=ah(ah({},sh),e);return oh(ym,t)}var bm=Wc(Wd||(Wd=qs(["\n    query GetStudentProfile($findStudentContactsWhereInput: FindContactsWhereInput, $findFirstTeacherContactWhereInput: FindFirstContactWhereInput!, $findTeacherDisciplinesWhereInput: FindTeacherDisciplinesWhereInput) {\n  me {\n    name\n    url_photo\n    studentTeachers {\n      teachers {\n        name\n        contact(where: $findFirstTeacherContactWhereInput) {\n          description\n          contactType {\n            contactTypeId: pk_id\n            name\n          }\n        }\n        teacherDisciplines(where: $findTeacherDisciplinesWhereInput) {\n          name\n          knowledgeAreas {\n            color {\n              hexadecimal\n            }\n          }\n        }\n      }\n    }\n    contacts(where: $findStudentContactsWhereInput) {\n      description\n      contactType {\n        contactTypeId: pk_id\n        name\n      }\n    }\n    classgroup {\n      schoolClass {\n        name\n        grade {\n          name\n          periodType {\n            name\n          }\n        }\n      }\n    }\n  }\n}\n    "])));function Cm(e){var t=ah(ah({},sh),e);return Ml(bm,t)}function Em(e){var t=ah(ah({},sh),e);return oh(bm,t)}var Tm=Wc(Yd||(Yd=qs(["\n    query GetStudentQuizzes($disciplineId: Int!) {\n  me {\n    studentQuizzes {\n      quizzes(disciplineId: $disciplineId) {\n        id: pk_id\n        end_quiz\n        grade_value\n        quiz {\n          id: pk_id\n          name\n          is_show\n          expiration_date\n          quizExpiration {\n            is_expired\n          }\n          classDiary {\n            teacher {\n              name\n            }\n            classroom {\n              principalTeacher {\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n    "])));function wm(e){var t=ah(ah({},sh),e);return Ml(Tm,t)}function Im(e){var t=ah(ah({},sh),e);return oh(Tm,t)}var km=Wc($d||($d=qs(["\n    query GetStudentScore {\n  scores {\n    nodes {\n      pk_id\n      score\n      classDiary {\n        summaries {\n          subtheme {\n            name\n          }\n        }\n        classroom {\n          principalTeacher {\n            name\n          }\n          calendar {\n            date\n          }\n          classDiaries {\n            teacher {\n              name\n            }\n          }\n        }\n      }\n      scoreType {\n        name\n      }\n    }\n  }\n}\n    "])));function Sm(e){var t=ah(ah({},sh),e);return Ml(km,t)}function Am(e){var t=ah(ah({},sh),e);return oh(km,t)}var Rm=Wc(Jd||(Jd=qs(["\n    query GetStudentScoreByDiscipline($where: FindStudentScoresByDisciplineInput!) {\n  studentScoresByDiscipline(where: $where) {\n    pk_id\n    score\n    classDiary {\n      summaries {\n        subtheme {\n          name\n        }\n      }\n      classroom {\n        principalTeacher {\n          name\n        }\n        calendar {\n          date\n        }\n        classDiaries {\n          teacher {\n            name\n          }\n        }\n      }\n    }\n    scoreType {\n      name\n    }\n  }\n}\n    "])));function Om(e){var t=ah(ah({},sh),e);return Ml(Rm,t)}function Nm(e){var t=ah(ah({},sh),e);return oh(Rm,t)}var Pm=Wc(Xd||(Xd=qs(["\n    query GetSubtheme($findFirstSubthemeWhereInput: FindFirstSubthemeWhereInput!, $findFirstContentWhereInput: FindFirstContentWhereInput!) {\n  subtheme(where: $findFirstSubthemeWhereInput) {\n    pk_id\n    name\n    richText {\n      description\n    }\n    contents(where: $findFirstContentWhereInput) {\n      pk_id\n      author\n      file_type\n      name\n      url_bucket\n    }\n    standardVideo {\n      pk_id\n      author\n      url_bucket\n      title\n      url_streaming\n      videoContents {\n        pk_id\n        author\n        file_type\n        name\n        url_bucket\n      }\n    }\n  }\n}\n    "])));function Mm(e){var t=ah(ah({},sh),e);return Ml(Pm,t)}function Dm(e){var t=ah(ah({},sh),e);return oh(Pm,t)}Wc(Zd||(Zd=qs(["\n    query GetSubthemesStatus($findSubthemesWhereInput: FindSubthemesWhereInput!, $where: FindCatalogsWhereInput) {\n  catalogs(where: $where) {\n    nodes {\n      discipline {\n        pk_id\n        name\n      }\n      theme {\n        pk_id\n        name\n        orderedSubthemes(where: $findSubthemesWhereInput) {\n          name\n          pk_id\n          isSubthemeFinished {\n            is_finished\n          }\n        }\n      }\n    }\n  }\n}\n    "])));var qm=Wc(eh||(eh=qs(["\n    query GetSubthemesFilteredWithFiles($disciplineId: Int!) {\n  orderedThemesStudents(disciplineId: $disciplineId) {\n    pk_id\n    name\n    orderedSubthemes {\n      pk_id\n      name\n      number_classes\n      contents {\n        pk_id\n        author\n        file_type\n        name\n        url_bucket\n        creation_date\n      }\n    }\n  }\n}\n    "])));function xm(e){var t=ah(ah({},sh),e);return Ml(qm,t)}function Fm(e){var t=ah(ah({},sh),e);return oh(qm,t)}var Lm=Wc(th||(th=qs(["\n    query GetTextOfNotebookRichText($findFirstNotebookRichTextWhereInput: FindFirstNotebookRichTextWhereInput!) {\n  notebookRichText(where: $findFirstNotebookRichTextWhereInput) {\n    id: pk_id\n    text\n  }\n}\n    "])));function Um(e){var t=ah(ah({},sh),e);return Ml(Lm,t)}function Bm(e){var t=ah(ah({},sh),e);return oh(Lm,t)}var Hm=1,jm=2,Qm=3;function Km(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gm(e,t){if(e){if("string"==typeof e)return Km(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Km(e,t):void 0}}function zm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||Gm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Vm=a(264),Wm={initialize:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},acquireTokenPopup:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},acquireTokenRedirect:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},acquireTokenSilent:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},acquireTokenByCode:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},getAllAccounts:function(){return[]},getAccountByHomeId:function(){return null},getAccountByUsername:function(){return null},getAccountByLocalId:function(){return null},handleRedirectPromise:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},loginPopup:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},loginRedirect:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},logout:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},logoutRedirect:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},logoutPopup:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},ssoSilent:function(){return Promise.reject(No.createStubPcaInstanceCalledError())},addEventCallback:function(){return null},removeEventCallback:function(){},addPerformanceCallback:function(){return""},removePerformanceCallback:function(){return!1},enableAccountStorageEvents:function(){},disableAccountStorageEvents:function(){},getTokenCache:function(){throw No.createStubPcaInstanceCalledError()},getLogger:function(){throw No.createStubPcaInstanceCalledError()},setLogger:function(){},setActiveAccount:function(){},getActiveAccount:function(){return null},initializeWrapperLibrary:function(){},setNavigationClient:function(){},getConfiguration:function(){throw No.createStubPcaInstanceCalledError()}},Ym=function(){function e(){}return e.getInteractionStatusFromEvent=function(e,t){switch(e.eventType){case ha.LOGIN_START:return ie.Login;case ha.SSO_SILENT_START:return ie.SsoSilent;case ha.ACQUIRE_TOKEN_START:if(e.interactionType===oe.Redirect||e.interactionType===oe.Popup)return ie.AcquireToken;break;case ha.HANDLE_REDIRECT_START:return ie.HandleRedirect;case ha.LOGOUT_START:return ie.Logout;case ha.SSO_SILENT_SUCCESS:case ha.SSO_SILENT_FAILURE:if(t&&t!==ie.SsoSilent)break;return ie.None;case ha.LOGOUT_END:if(t&&t!==ie.Logout)break;return ie.None;case ha.HANDLE_REDIRECT_END:if(t&&t!==ie.HandleRedirect)break;return ie.None;case ha.LOGIN_SUCCESS:case ha.LOGIN_FAILURE:case ha.ACQUIRE_TOKEN_SUCCESS:case ha.ACQUIRE_TOKEN_FAILURE:case ha.RESTORE_FROM_BFCACHE:if(e.interactionType===oe.Redirect||e.interactionType===oe.Popup){if(t&&t!==ie.Login&&t!==ie.AcquireToken)break;return ie.None}}return null},e}();const $m={instance:Wm,inProgress:ie.None,accounts:[],logger:new jo({})},Jm=(0,Vm.createContext)($m);function Xm(e,t){if(e.length!==t.length)return!1;const n=[...t];return e.every((e=>{const t=n.shift();return!(!e||!t)&&e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username}))}Jm.Consumer;const Zm="1.5.12";var eg;!function(e){e.UNBLOCK_INPROGRESS="UNBLOCK_INPROGRESS",e.EVENT="EVENT"}(eg||(eg={}));const tg=(e,t)=>{const{type:n,payload:r}=t;let o=e.inProgress;switch(n){case eg.UNBLOCK_INPROGRESS:e.inProgress===ie.Startup&&(o=ie.None,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case eg.EVENT:const t=r.message,i=Ym.getInteractionStatusFromEvent(t,e.inProgress);i&&(r.logger.info(`MsalProvider - ${t.eventType} results in setting inProgress from ${e.inProgress} to ${i}`),o=i);break;default:throw new Error(`Unknown action type: ${n}`)}const i=r.instance.getAllAccounts();return o===e.inProgress||Xm(i,e.accounts)?o!==e.inProgress?{...e,inProgress:o}:Xm(i,e.accounts)?e:{...e,accounts:i}:{...e,inProgress:o,accounts:i}};function ng(e){let{instance:t,children:n}=e;(0,Vm.useEffect)((()=>{t.initializeWrapperLibrary(we.React,Zm)}),[t]);const r=(0,Vm.useMemo)((()=>t.getLogger().clone("@azure/msal-react",Zm)),[t]),[o,i]=(0,Vm.useReducer)(tg,void 0,(()=>({inProgress:ie.Startup,accounts:t.getAllAccounts()})));(0,Vm.useEffect)((()=>{const e=t.addEventCallback((e=>{i({payload:{instance:t,logger:r,message:e},type:eg.EVENT})}));return r.verbose(`MsalProvider - Registered event callback with id: ${e}`),t.initialize().then((()=>{t.handleRedirectPromise().catch((()=>{})).finally((()=>{i({payload:{instance:t,logger:r},type:eg.UNBLOCK_INPROGRESS})}))})),()=>{e&&(r.verbose(`MsalProvider - Removing event callback ${e}`),t.removeEventCallback(e))}}),[t,r]);const a={instance:t,inProgress:o.inProgress,accounts:o.accounts,logger:r};return Vm.default.createElement(Jm.Provider,{value:a},n)}const rg=()=>(0,Vm.useContext)(Jm);function og(){var e=rg(),t=e.instance,n=e.accounts,r=zm((0,Vm.useState)(null),2),o=r[0],i=r[1];if(n.length>0){var a={scopes:["openid"],account:n[0]};t.acquireTokenSilent(a).then((function(e){i(e.idToken)})).catch((function(e){e instanceof be&&t.acquireTokenPopup(a).then((function(e){i(e.idToken)}))}))}return o}function ig(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ag(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sg(e,t,n){return t&&ag(e.prototype,t),n&&ag(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var cg=function(){return"function"==typeof Symbol},ug=function(e){return cg()&&Boolean(Symbol[e])},lg=function(e){return ug(e)?Symbol[e]:"@@"+e};cg()&&!ug("observable")&&(Symbol.observable=Symbol("observable"));var dg=lg("iterator"),hg=lg("observable"),pg=lg("species");function fg(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function mg(e){var t=e.constructor;return void 0!==t&&null===(t=t[pg])&&(t=void 0),void 0!==t?t:Ig}function gg(e){return e instanceof Ig}function yg(e){yg.log?yg.log(e):setTimeout((function(){throw e}))}function vg(e){Promise.resolve().then((function(){try{e()}catch(e){yg(e)}}))}function _g(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=fg(t,"unsubscribe");n&&n.call(t)}}catch(e){yg(e)}}function bg(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function Cg(e,t,n){e._state="running";var r=e._observer;try{var o=fg(r,t);switch(t){case"next":o&&o.call(r,n);break;case"error":if(bg(e),!o)throw n;o.call(r,n);break;case"complete":bg(e),o&&o.call(r)}}catch(e){yg(e)}"closed"===e._state?_g(e):"running"===e._state&&(e._state="ready")}function Eg(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void vg((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(Cg(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void Cg(e,t,n);e._queue.push({type:t,value:n})}}var Tg=function(){function e(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var n=new wg(this);try{this._cleanup=t.call(void 0,n)}catch(e){n.error(e)}"initializing"===this._state&&(this._state="ready")}return e.prototype.unsubscribe=function(){"closed"!==this._state&&(bg(this),_g(this))},sg(e,[{key:"closed",get:function(){return"closed"===this._state}}]),e}(),wg=function(){function e(e){this._subscription=e}var t=e.prototype;return t.next=function(e){Eg(this._subscription,"next",e)},t.error=function(e){Eg(this._subscription,"error",e)},t.complete=function(){Eg(this._subscription,"complete")},sg(e,[{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),Ig=function(){function e(t){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}var t=e.prototype;return t.subscribe=function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new Tg(e,this._subscriber)},t.forEach=function(e){var t=this;return new Promise((function(n,r){if("function"==typeof e)var o=t.subscribe({next:function(t){try{e(t,i)}catch(e){r(e),o.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function i(){o.unsubscribe(),n()}}))},t.map=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(mg(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},t.filter=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(mg(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},t.reduce=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=mg(this),r=arguments.length>1,o=!1,i=arguments[1];return new n((function(n){return t.subscribe({next:function(t){var a=!o;if(o=!0,!a||r)try{i=e(i,t)}catch(e){return n.error(e)}else i=t},error:function(e){n.error(e)},complete:function(){if(!o&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(i),n.complete()}})}))},t.concat=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=mg(this);return new o((function(t){var r,i=0;return function e(a){r=a.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){i===n.length?(r=void 0,t.complete()):e(o.from(n[i++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))},t.flatMap=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=mg(this);return new n((function(r){var o=[],i=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return r.error(e)}var i=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=o.indexOf(i);e>=0&&o.splice(e,1),a()}});o.push(i)},error:function(e){r.error(e)},complete:function(){a()}});function a(){i.closed&&0===o.length&&r.complete()}return function(){o.forEach((function(e){return e.unsubscribe()})),i.unsubscribe()}}))},t[hg]=function(){return this},e.from=function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=fg(t,hg);if(r){var o=r.call(t);if(Object(o)!==o)throw new TypeError(o+" is not an object");return gg(o)&&o.constructor===n?o:new n((function(e){return o.subscribe(e)}))}if(ug("iterator")&&(r=fg(t,dg)))return new n((function(e){vg((function(){if(!e.closed){for(var n,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ig(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ig(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(r.call(t));!(n=o()).done;){var i=n.value;if(e.next(i),e.closed)return}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){vg((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")},e.of=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new("function"==typeof this?this:e)((function(e){vg((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))},sg(e,null,[{key:pg,get:function(){return this}}]),e}();function kg(e,t){var n=t,r=[];return e.definitions.forEach((function(e){if("OperationDefinition"===e.kind)throw Ru(71,e.operation,e.name?" named '".concat(e.name.value,"'"):"");"FragmentDefinition"===e.kind&&r.push(e)})),void 0===n&&(Au(1===r.length,72,r.length),n=r[0].name.value),Ls(Ls({},e),{definitions:js([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions,!0)})}function Sg(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){t[e.name.value]=e})),t}function Ag(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":var n=e.name.value;if("function"==typeof t)return t(n);var r=t&&t[n];return Au(r,73,n),r||null;default:return null}}cg()&&Object.defineProperty(Ig,Symbol("extensions"),{value:{symbol:hg,hostReportError:yg},configurable:!0});var Rg,Og=Object.assign((function(e){return JSON.stringify(e,Ng)}),{reset:function(){Rg=new Gu(Vu.canonicalStringify||1e3)}});function Ng(e,t){if(t&&"object"==typeof t){var n=Object.getPrototypeOf(t);if(n===Object.prototype||null===n){var r=Object.keys(t);if(r.every(Pg))return t;var o=JSON.stringify(r),i=Rg.get(o);if(!i){r.sort();var a=JSON.stringify(r);i=Rg.get(a)||r,Rg.set(o,i),Rg.set(a,i)}var s=Object.create(n);return i.forEach((function(e){s[e]=t[e]})),s}}return t}function Pg(e,t,n){return 0===t||n[t-1]<=e}function Mg(e){return{__ref:String(e)}}function Dg(e){return Boolean(e&&"object"==typeof e&&"string"==typeof e.__ref)}function qg(e,t,n,r){if(function(e){return"IntValue"===e.kind}(n)||function(e){return"FloatValue"===e.kind}(n))e[t.value]=Number(n.value);else if(function(e){return"BooleanValue"===e.kind}(n)||function(e){return"StringValue"===e.kind}(n))e[t.value]=n.value;else if(function(e){return"ObjectValue"===e.kind}(n)){var o={};n.fields.map((function(e){return qg(o,e.name,e.value,r)})),e[t.value]=o}else if(function(e){return"Variable"===e.kind}(n)){var i=(r||{})[n.name.value];e[t.value]=i}else if(function(e){return"ListValue"===e.kind}(n))e[t.value]=n.values.map((function(e){var n={};return qg(n,t,e,r),n[t.value]}));else if(function(e){return"EnumValue"===e.kind}(n))e[t.value]=n.value;else{if(!function(e){return"NullValue"===e.kind}(n))throw Ru(82,t.value,n.kind);e[t.value]=null}}!1!==globalThis.__DEV__&&Yu("canonicalStringify",(function(){return Rg.size})),Og.reset();var xg=["connection","include","skip","client","rest","export","nonreactive"],Fg=Og,Lg=Object.assign((function(e,t,n){if(t&&n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var o={};return r.forEach((function(e){o[e]=t[e]})),"".concat(n.connection.key,"(").concat(Fg(o),")")}return n.connection.key}var i=e;if(t){var a=Fg(t);i+="(".concat(a,")")}return n&&Object.keys(n).forEach((function(e){-1===xg.indexOf(e)&&(n[e]&&Object.keys(n[e]).length?i+="@".concat(e,"(").concat(Fg(n[e]),")"):i+="@".concat(e))})),i}),{setStringify:function(e){var t=Fg;return Fg=e,t}});function Ug(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach((function(e){var r=e.name,o=e.value;return qg(n,r,o,t)})),n}return null}function Bg(e){return e.alias?e.alias.value:e.name.value}function Hg(e,t,n){for(var r,o=0,i=t.selections;o<i.length;o++)if(jg(c=i[o])){if("__typename"===c.name.value)return e[Bg(c)]}else r?r.push(c):r=[c];if("string"==typeof e.__typename)return e.__typename;if(r)for(var a=0,s=r;a<s.length;a++){var c,u=Hg(e,Ag(c=s[a],n).selectionSet,n);if("string"==typeof u)return u}}function jg(e){return"Field"===e.kind}function Qg(e){Au(e&&"Document"===e.kind,74);var t=e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw Ru(75,e.kind);return e}));return Au(t.length<=1,76,t.length),e}function Kg(e){return Qg(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}function Gg(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&!!e.name})).map((function(e){return e.name.value}))[0]||null}function zg(e){return e.definitions.filter((function(e){return"FragmentDefinition"===e.kind}))}function Vg(e){var t=Kg(e);return Au(t&&"query"===t.operation,77),t}function Wg(e){var t;Qg(e);for(var n=0,r=e.definitions;n<r.length;n++){var o=r[n];if("OperationDefinition"===o.kind){var i=o.operation;if("query"===i||"mutation"===i||"subscription"===i)return o}"FragmentDefinition"!==o.kind||t||(t=o)}if(t)return t;throw Ru(81)}function Yg(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach((function(e){e.defaultValue&&qg(t,e.variable.name,e.defaultValue)})),t}function $g(e,t){return t?t(e):Ig.of()}function Jg(e){return"function"==typeof e?new Zg(e):e}function Xg(e){return e.request.length<=1}var Zg=function(){function e(e){e&&(this.request=e)}return e.empty=function(){return new e((function(){return Ig.of()}))},e.from=function(t){return 0===t.length?e.empty():t.map(Jg).reduce((function(e,t){return e.concat(t)}))},e.split=function(t,n,r){var o,i=Jg(n),a=Jg(r||new e($g));return o=Xg(i)&&Xg(a)?new e((function(e){return t(e)?i.request(e)||Ig.of():a.request(e)||Ig.of()})):new e((function(e,n){return t(e)?i.request(e,n)||Ig.of():a.request(e,n)||Ig.of()})),Object.assign(o,{left:i,right:a})},e.execute=function(e,t){return e.request(function(e,t){var n=Ls({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){n=Ls(Ls({},n),"function"==typeof e?e(n):e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return Ls({},n)}}),t}(t.context,function(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?Gg(t.query)||void 0:""),t}(function(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(t.indexOf(o)<0)throw Ru(43,o)}return e}(t))))||Ig.of()},e.concat=function(t,n){var r=Jg(t);if(Xg(r))return!1!==globalThis.__DEV__&&Au.warn(35,r),r;var o,i=Jg(n);return o=Xg(i)?new e((function(e){return r.request(e,(function(e){return i.request(e)||Ig.of()}))||Ig.of()})):new e((function(e,t){return r.request(e,(function(e){return i.request(e,t)||Ig.of()}))||Ig.of()})),Object.assign(o,{left:r,right:i})},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e($g)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(e,t){throw Ru(36)},e.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},e.prototype.setOnError=function(e){return this.onError=e,this},e}(),ey={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},ty=Object.freeze({});function ny(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ey,r=void 0,o=Array.isArray(e),i=[e],a=-1,s=[],c=void 0,u=void 0,l=void 0,d=[],h=[],p=e;do{var f=++a===i.length,m=f&&0!==s.length;if(f){if(u=0===h.length?void 0:d[d.length-1],c=l,l=h.pop(),m){if(o)c=c.slice();else{for(var g={},y=0,v=Object.keys(c);y<v.length;y++){var _=v[y];g[_]=c[_]}c=g}for(var b=0,C=0;C<s.length;C++){var E=s[C][0],T=s[C][1];o&&(E-=b),o&&null===T?(c.splice(E,1),b++):c[E]=T}}a=r.index,i=r.keys,s=r.edits,o=r.inArray,r=r.prev}else{if(u=l?o?a:i[a]:void 0,null==(c=l?l[u]:p))continue;l&&d.push(u)}var w,I=void 0;if(!Array.isArray(c)){if(!mc(c))throw new Error("Invalid AST Node: ".concat(bc(c),"."));var k=ry(t,c.kind,f);if(k){if((I=k.call(t,c,u,l,d,h))===ty)break;if(!1===I){if(!f){d.pop();continue}}else if(void 0!==I&&(s.push([u,I]),!f)){if(!mc(I)){d.pop();continue}c=I}}}void 0===I&&m&&s.push([u,c]),f?d.pop():(r={inArray:o,index:a,keys:i,edits:s,prev:r},i=(o=Array.isArray(c))?c:null!==(w=n[c.kind])&&void 0!==w?w:[],a=-1,s=[],l&&h.push(l),l=c)}while(void 0!==r);return 0!==s.length&&(p=s[s.length-1][1]),p}function ry(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var o=n?r.leave:r.enter;if("function"==typeof o)return o}else{var i=n?e.leave:e.enter;if(i){if("function"==typeof i)return i;var a=i[t];if("function"==typeof a)return a}}}function oy(e,t){var n=e.directives;return!n||!n.length||function(e){var t=[];return e&&e.length&&e.forEach((function(e){if(function(e){var t=e.name.value;return"skip"===t||"include"===t}(e)){var n=e.arguments,r=e.name.value;Au(n&&1===n.length,68,r);var o=n[0];Au(o.name&&"if"===o.name.value,69,r);var i=o.value;Au(i&&("Variable"===i.kind||"BooleanValue"===i.kind),70,r),t.push({directive:e,ifArgument:o})}})),t}(n).every((function(e){var n=e.directive,r=e.ifArgument,o=!1;return"Variable"===r.value.kind?(o=t&&t[r.value.name.value],Au(void 0!==o,67,n.name.value)):o=r.value.value,"skip"===n.name.value?!o:o}))}function iy(e,t,n){var r=new Set(e),o=r.size;return ny(t,{Directive:function(e){if(r.delete(e.name.value)&&(!n||!r.size))return ty}}),n?!r.size:r.size<o}function ay(e){return e&&iy(["client","export"],e,!0)}var sy=function(e,t){var n;try{n=JSON.stringify(e)}catch(e){var r=Ru(39,t,e.message);throw r.parseError=e,r}return n};function cy(e){var t={next:function(){return e.read()}};return gl&&(t[Symbol.asyncIterator]=function(){return this}),t}function uy(e){var t,n,r,o,i=e;if(e.body&&(i=e.body),o=i,gl&&o[Symbol.asyncIterator])return function(e){var t,n=e[Symbol.asyncIterator]();return(t={next:function(){return n.next()}})[Symbol.asyncIterator]=function(){return this},t}(i);if(function(e){return!!e.getReader}(i))return cy(i.getReader());if(function(e){return!!e.stream}(i))return cy(i.stream().getReader());if(function(e){return!!e.arrayBuffer}(i))return t=i.arrayBuffer(),n=!1,r={next:function(){return n?Promise.resolve({value:void 0,done:!0}):(n=!0,new Promise((function(e,n){t.then((function(t){e({value:t,done:!1})})).catch(n)})))}},gl&&(r[Symbol.asyncIterator]=function(){return this}),r;if(function(e){return!!e.pipe}(i))return function(e){var t=null,n=null,r=!1,o=[],i=[];function a(e){if(!n){if(i.length){var t=i.shift();if(Array.isArray(t)&&t[0])return t[0]({value:e,done:!1})}o.push(e)}}function s(e){n=e,i.slice().forEach((function(t){t[1](e)})),!t||t()}function c(){r=!0,i.slice().forEach((function(e){e[0]({value:void 0,done:!0})})),!t||t()}t=function(){t=null,e.removeListener("data",a),e.removeListener("error",s),e.removeListener("end",c),e.removeListener("finish",c),e.removeListener("close",c)},e.on("data",a),e.on("error",s),e.on("end",c),e.on("finish",c),e.on("close",c);var u={next:function(){return new Promise((function(e,t){return n?t(n):o.length?e({value:o.shift(),done:!1}):r?e({value:void 0,done:!0}):void i.push([e,t])}))}};return gl&&(u[Symbol.asyncIterator]=function(){return this}),u}(i);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var ly=function(e,t,n){var r=new Error(n);throw r.name="ServerError",r.response=e,r.statusCode=e.status,r.result=t,r},dy=Object.prototype.hasOwnProperty;function hy(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return py(e)}function py(e){var t=e[0]||{},n=e.length;if(n>1)for(var r=new my,o=1;o<n;++o)t=r.merge(t,e[o]);return t}var fy=function(e,t,n){return this.merge(e[n],t[n])},my=function(){function e(e){void 0===e&&(e=fy),this.reconciler=e,this.isObject=ll,this.pastCopies=new Set}return e.prototype.merge=function(e,t){for(var n=this,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return ll(t)&&ll(e)?(Object.keys(t).forEach((function(o){if(dy.call(e,o)){var i=e[o];if(t[o]!==i){var a=n.reconciler.apply(n,js([e,t,o],r,!1));a!==i&&((e=n.shallowCopyForMerge(e))[o]=a)}}else(e=n.shallowCopyForMerge(e))[o]=t[o]})),e):t},e.prototype.shallowCopyForMerge=function(e){return ll(e)&&(this.pastCopies.has(e)||(e=Array.isArray(e)?e.slice(0):Ls({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},e}();function gy(e){return"incremental"in e}function yy(e){return ll(e)&&"payload"in e}function vy(e,t){var n=e,r=new my;return gy(t)&&Nl(t.incremental)&&t.incremental.forEach((function(e){for(var t=e.data,o=e.path,i=o.length-1;i>=0;--i){var a=o[i],s=isNaN(+a)?{}:[];s[a]=t,t=s}n=r.merge(n,t)})),n}var _y=Object.prototype.hasOwnProperty;function by(e){var t={};return e.split("\n").forEach((function(e){var n=e.indexOf(":");if(n>-1){var r=e.slice(0,n).trim().toLowerCase(),o=e.slice(n+1).trim();t[r]=o}})),t}function Cy(e,t){e.status>=300&&ly(e,function(){try{return JSON.parse(t)}catch(e){return t}}(),"Response not successful: Received status code ".concat(e.status));try{return JSON.parse(t)}catch(r){var n=r;throw n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=t,n}}var Ey,Ty={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return Iy(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=Sy("(",Iy(e.variableDefinitions,", "),")"),o=Iy(e.directives," "),i=e.selectionSet;return n||o||r||"query"!==t?Iy([t,Iy([n,r]),o,i]," "):i},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,o=e.directives;return t+": "+n+Sy(" = ",r)+Sy(" ",Iy(o," "))},SelectionSet:function(e){return ky(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,i=e.selectionSet,a=Sy("",t,": ")+n,s=a+Sy("(",Iy(r,", "),")");return s.length>80&&(s=a+Sy("(\n",Ay(Iy(r,"\n")),"\n)")),Iy([s,Iy(o," "),i]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+Sy(" ",Iy(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return Iy(["...",Sy("on ",t),Iy(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,i=e.selectionSet;return"fragment ".concat(t).concat(Sy("(",Iy(r,", "),")")," ")+"on ".concat(n," ").concat(Sy("",Iy(o," ")," "))+i},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),o=" "===e[0]||"\t"===e[0],i='"'===e[e.length-1],a="\\"===e[e.length-1],s=!r||i||a||n,c="";return!s||r&&o||(c+="\n"+t),c+=t?e.replace(/\n/g,"\n"+t):e,s&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+Iy(e.values,", ")+"]"},ObjectValue:function(e){return"{"+Iy(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+Sy("(",Iy(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:wy((function(e){var t=e.directives,n=e.operationTypes;return Iy(["schema",Iy(t," "),ky(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:wy((function(e){return Iy(["scalar",e.name,Iy(e.directives," ")]," ")})),ObjectTypeDefinition:wy((function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return Iy(["type",t,Sy("implements ",Iy(n," & ")),Iy(r," "),ky(o)]," ")})),FieldDefinition:wy((function(e){var t=e.name,n=e.arguments,r=e.type,o=e.directives;return t+(Oy(n)?Sy("(\n",Ay(Iy(n,"\n")),"\n)"):Sy("(",Iy(n,", "),")"))+": "+r+Sy(" ",Iy(o," "))})),InputValueDefinition:wy((function(e){var t=e.name,n=e.type,r=e.defaultValue,o=e.directives;return Iy([t+": "+n,Sy("= ",r),Iy(o," ")]," ")})),InterfaceTypeDefinition:wy((function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return Iy(["interface",t,Sy("implements ",Iy(n," & ")),Iy(r," "),ky(o)]," ")})),UnionTypeDefinition:wy((function(e){var t=e.name,n=e.directives,r=e.types;return Iy(["union",t,Iy(n," "),r&&0!==r.length?"= "+Iy(r," | "):""]," ")})),EnumTypeDefinition:wy((function(e){var t=e.name,n=e.directives,r=e.values;return Iy(["enum",t,Iy(n," "),ky(r)]," ")})),EnumValueDefinition:wy((function(e){return Iy([e.name,Iy(e.directives," ")]," ")})),InputObjectTypeDefinition:wy((function(e){var t=e.name,n=e.directives,r=e.fields;return Iy(["input",t,Iy(n," "),ky(r)]," ")})),DirectiveDefinition:wy((function(e){var t=e.name,n=e.arguments,r=e.repeatable,o=e.locations;return"directive @"+t+(Oy(n)?Sy("(\n",Ay(Iy(n,"\n")),"\n)"):Sy("(",Iy(n,", "),")"))+(r?" repeatable":"")+" on "+Iy(o," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return Iy(["extend schema",Iy(t," "),ky(n)]," ")},ScalarTypeExtension:function(e){return Iy(["extend scalar",e.name,Iy(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return Iy(["extend type",t,Sy("implements ",Iy(n," & ")),Iy(r," "),ky(o)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return Iy(["extend interface",t,Sy("implements ",Iy(n," & ")),Iy(r," "),ky(o)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return Iy(["extend union",t,Iy(n," "),r&&0!==r.length?"= "+Iy(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return Iy(["extend enum",t,Iy(n," "),ky(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return Iy(["extend input",t,Iy(n," "),ky(r)]," ")}};function wy(e){return function(t){return Iy([t.description,e(t)],"\n")}}function Iy(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function ky(e){return Sy("{\n",Ay(Iy(e,"\n")),"\n}")}function Sy(e,t){return null!=t&&""!==t?e+t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""):""}function Ay(e){return Sy("  ",e.replace(/\n/g,"\n  "))}function Ry(e){return-1!==e.indexOf("\n")}function Oy(e){return null!=e&&e.some(Ry)}var Ny=Object.assign((function(e){var t=Ey.get(e);return t||(t=function(e){return ny(e,{leave:Ty})}(e),Ey.set(e,t)),t}),{reset:function(){Ey=new Ku(Vu.print||2e3)}});Ny.reset(),!1!==globalThis.__DEV__&&Yu("print",(function(){return Ey?Ey.size:0}));var Py={http:{includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},My=function(e,t){return t(e)};function Dy(e){return new Ig((function(t){t.error(e)}))}var qy={kind:lc.FIELD,name:{kind:lc.NAME,value:"__typename"}};function xy(e,t){return!e||e.selectionSet.selections.every((function(e){return e.kind===lc.FRAGMENT_SPREAD&&xy(t[e.name.value],t)}))}function Fy(e){return xy(Kg(e)||function(e){Au("Document"===e.kind,78),Au(e.definitions.length<=1,79);var t=e.definitions[0];return Au("FragmentDefinition"===t.kind,80),t}(e),Sg(zg(e)))?null:e}function Ly(e){var t=new Map;return function(n){void 0===n&&(n=e);var r=t.get(n);return r||t.set(n,r={variables:new Set,fragmentSpreads:new Set}),r}}function Uy(e,t){Qg(t);for(var n=Ly(""),r=Ly(""),o=function(e){for(var t=0,o=void 0;t<e.length&&(o=e[t]);++t)if(!Ol(o)){if(o.kind===lc.OPERATION_DEFINITION)return n(o.name&&o.name.value);if(o.kind===lc.FRAGMENT_DEFINITION)return r(o.name.value)}return!1!==globalThis.__DEV__&&Au.error(83),null},i=0,a=t.definitions.length-1;a>=0;--a)t.definitions[a].kind===lc.OPERATION_DEFINITION&&++i;var s,c,u,l=(s=e,c=new Map,u=new Map,s.forEach((function(e){e&&(e.name?c.set(e.name,e):e.test&&u.set(e.test,e))})),function(e){var t=c.get(e.name.value);return!t&&u.size&&u.forEach((function(n,r){r(e)&&(t=n)})),t}),d=function(e){return Nl(e)&&e.map(l).some((function(e){return e&&e.remove}))},h=new Map,p=!1,f={enter:function(e){if(d(e.directives))return p=!0,null}},m=ny(t,{Field:f,InlineFragment:f,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(e,t,n,r,i){var a=o(i);a&&a.variables.add(e.name.value)}},FragmentSpread:{enter:function(e,t,n,r,i){if(d(e.directives))return p=!0,null;var a=o(i);a&&a.fragmentSpreads.add(e.name.value)}},FragmentDefinition:{enter:function(e,t,n,r){h.set(JSON.stringify(r),e)},leave:function(e,t,n,o){return e===h.get(JSON.stringify(o))?e:i>0&&e.selectionSet.selections.every((function(e){return e.kind===lc.FIELD&&"__typename"===e.name.value}))?(r(e.name.value).removed=!0,p=!0,null):void 0}},Directive:{leave:function(e){if(l(e))return p=!0,null}}});if(!p)return t;var g=function(e){return e.transitiveVars||(e.transitiveVars=new Set(e.variables),e.removed||e.fragmentSpreads.forEach((function(t){g(r(t)).transitiveVars.forEach((function(t){e.transitiveVars.add(t)}))}))),e},y=new Set;m.definitions.forEach((function(e){e.kind===lc.OPERATION_DEFINITION?g(n(e.name&&e.name.value)).fragmentSpreads.forEach((function(e){y.add(e)})):e.kind!==lc.FRAGMENT_DEFINITION||0!==i||r(e.name.value).removed||y.add(e.name.value)})),y.forEach((function(e){g(r(e)).fragmentSpreads.forEach((function(e){y.add(e)}))}));var v={enter:function(e){if(t=e.name.value,!y.has(t)||r(t).removed)return null;var t}};return Fy(ny(m,{FragmentSpread:v,FragmentDefinition:v,OperationDefinition:{leave:function(e){if(e.variableDefinitions){var t=g(n(e.name&&e.name.value)).transitiveVars;if(t.size<e.variableDefinitions.length)return Ls(Ls({},e),{variableDefinitions:e.variableDefinitions.filter((function(e){return t.has(e.variable.name.value)}))})}}}}))}var By=Object.assign((function(e){return ny(e,{SelectionSet:{enter:function(e,t,n){if(!n||n.kind!==lc.OPERATION_DEFINITION){var r=e.selections;if(r&&!r.some((function(e){return jg(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))}))){var o=n;if(!(jg(o)&&o.directives&&o.directives.some((function(e){return"export"===e.name.value}))))return Ls(Ls({},e),{selections:js(js([],r,!0),[qy],!1)})}}}}})}),{added:function(e){return e===qy}});function Hy(e){return"query"===Wg(e).operation?e:ny(e,{OperationDefinition:{enter:function(e){return Ls(Ls({},e),{operation:"query"})}}})}function jy(e){return Qg(e),Uy([{test:function(e){return"client"===e.name.value},remove:!0}],e)}var Qy=Eu((function(){return fetch})),Ky=function(e){void 0===e&&(e={});var t=e.uri,n=void 0===t?"/graphql":t,r=e.fetch,o=e.print,i=void 0===o?My:o,a=e.includeExtensions,s=e.preserveHeaderCase,c=e.useGETForQueries,u=e.includeUnusedVariables,l=void 0!==u&&u,d=Us(e,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);!1!==globalThis.__DEV__&&function(e){if(!e&&"undefined"==typeof fetch)throw Ru(37)}(r||Qy);var h={http:{includeExtensions:a,preserveHeaderCase:s},options:d.fetchOptions,credentials:d.credentials,headers:d.headers};return new Zg((function(e){var t=function(e,t){return e.getContext().uri||("function"==typeof t?t(e):t||"/graphql")}(e,n),o=e.getContext(),a={};if(o.clientAwareness){var s=o.clientAwareness,u=s.name,d=s.version;u&&(a["apollographql-client-name"]=u),d&&(a["apollographql-client-version"]=d)}var p=Ls(Ls({},a),o.headers),f={http:o.http,options:o.fetchOptions,credentials:o.credentials,headers:p};if(iy(["client"],e.query)){var m=jy(e.query);if(!m)return Dy(new Error("HttpLink: Trying to send a client-only query to the server. To send to the server, ensure a non-client field is added to the query or set the `transformOptions.removeClientFields` option to `true`."));e.query=m}var g,y,v,_,b,C=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o={},i={};n.forEach((function(e){o=Ls(Ls(Ls({},o),e.options),{headers:Ls(Ls({},o.headers),e.headers)}),e.credentials&&(o.credentials=e.credentials),i=Ls(Ls({},i),e.http)})),o.headers&&(o.headers=function(e,t){if(!t){var n=Object.create(null);return Object.keys(Object(e)).forEach((function(t){n[t.toLowerCase()]=e[t]})),n}var r=Object.create(null);Object.keys(Object(e)).forEach((function(t){r[t.toLowerCase()]={originalName:t,value:e[t]}}));var o=Object.create(null);return Object.keys(r).forEach((function(e){o[r[e].originalName]=r[e].value})),o}(o.headers,i.preserveHeaderCase));var a=e.operationName,s=e.extensions,c=e.variables,u=e.query,l={operationName:a,variables:c};return i.includeExtensions&&(l.extensions=s),i.includeQuery&&(l.query=t(u,Ny)),{options:o,body:l}}(e,i,Py,h,f),E=C.options,T=C.body;T.variables&&!l&&(T.variables=(g=T.variables,y=e.query,v=Ls({},g),_=new Set(Object.keys(g)),ny(y,{Variable:function(e,t,n){n&&"VariableDefinition"!==n.kind&&_.delete(e.name.value)}}),_.forEach((function(e){delete v[e]})),v)),E.signal||"undefined"==typeof AbortController||(b=new AbortController,E.signal=b.signal);var w,I="OperationDefinition"===(w=Wg(e.query)).kind&&"subscription"===w.operation,k=iy(["defer"],e.query);if(c&&!e.query.definitions.some((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}))&&(E.method="GET"),k||I){E.headers=E.headers||{};var S="multipart/mixed;";I&&k&&!1!==globalThis.__DEV__&&Au.warn(38),I?S+="boundary=graphql;subscriptionSpec=1.0,application/json":k&&(S+="deferSpec=20220824,application/json"),E.headers.accept=S}if("GET"===E.method){var A=function(e,t){var n=[],r=function(e,t){n.push("".concat(e,"=").concat(encodeURIComponent(t)))};if("query"in t&&r("query",t.query),t.operationName&&r("operationName",t.operationName),t.variables){var o=void 0;try{o=sy(t.variables,"Variables map")}catch(e){return{parseError:e}}r("variables",o)}if(t.extensions){var i=void 0;try{i=sy(t.extensions,"Extensions map")}catch(e){return{parseError:e}}r("extensions",i)}var a="",s=e,c=e.indexOf("#");-1!==c&&(a=e.substr(c),s=e.substr(0,c));var u=-1===s.indexOf("?")?"?":"&";return{newURI:s+u+n.join("&")+a}}(t,T),R=A.newURI,O=A.parseError;if(O)return Dy(O);t=R}else try{E.body=sy(T,"Payload")}catch(O){return Dy(O)}return new Ig((function(n){var o=r||Eu((function(){return fetch}))||Qy,i=n.next.bind(n);return o(t,E).then((function(t){var n;e.setContext({response:t});var r,o=null===(n=t.headers)||void 0===n?void 0:n.get("content-type");return null!==o&&/^multipart\/mixed/i.test(o)?function(e,t){var n;return Bs(this,void 0,void 0,(function(){var r,o,i,a,s,c,u,l,d,h,p,f,m,g,y,v,_,b,C,E,T,w,I;return Hs(this,(function(k){switch(k.label){case 0:if(void 0===TextDecoder)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");r=new TextDecoder("utf-8"),o=null===(n=e.headers)||void 0===n?void 0:n.get("content-type"),i="boundary=",a=(null==o?void 0:o.includes(i))?null==o?void 0:o.substring((null==o?void 0:o.indexOf(i))+9).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",s="\r\n--".concat(a),c="",u=uy(e),l=!0,k.label=1;case 1:return l?[4,u.next()]:[3,3];case 2:for(d=k.sent(),h=d.value,p=d.done,f="string"==typeof h?h:r.decode(h),m=c.length-s.length+1,l=!p,g=(c+=f).indexOf(s,m);g>-1;){if(y=void 0,w=[c.slice(0,g),c.slice(g+s.length)],c=w[1],v=(y=w[0]).indexOf("\r\n\r\n"),_=by(y.slice(0,v)),(b=_["content-type"])&&-1===b.toLowerCase().indexOf("application/json"))throw new Error("Unsupported patch content type: application/json is required.");if(C=y.slice(v))if(E=Cy(e,C),Object.keys(E).length>1||"data"in E||"incremental"in E||"errors"in E||"payload"in E)yy(E)?(T={},"payload"in E&&(T=Ls({},E.payload)),"errors"in E&&(T=Ls(Ls({},T),{extensions:Ls(Ls({},"extensions"in T?T.extensions:null),(I={},I[dl]=E.errors,I))})),t(T)):t(E);else if(1===Object.keys(E).length&&"hasNext"in E&&!E.hasNext)return[2];g=c.indexOf(s)}return[3,1];case 3:return[2]}}))}))}(t,i):(r=e,function(e){return e.text().then((function(t){return Cy(e,t)})).then((function(t){return Array.isArray(t)||_y.call(t,"data")||_y.call(t,"errors")||ly(e,t,"Server response was missing for query '".concat(Array.isArray(r)?r.map((function(e){return e.operationName})):r.operationName,"'.")),t}))})(t).then(i)})).then((function(){b=void 0,n.complete()})).catch((function(e){b=void 0,function(e,t){e.result&&e.result.errors&&e.result.data&&t.next(e.result),t.error(e)}(e,n)})),function(){b&&b.abort()}}))}))},Gy=Zg.execute,zy=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,Ky(t).request)||this;return n.options=t,n}return Fs(t,e),t}(Zg);const Vy=()=>Object.create(null),{forEach:Wy,slice:Yy}=Array.prototype,{hasOwnProperty:$y}=Object.prototype;class Jy{constructor(e=!0,t=Vy){this.weakness=e,this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(e){let t=this;return Wy.call(e,(e=>t=t.getChildTrie(e))),$y.call(t,"data")?t.data:t.data=this.makeData(Yy.call(e))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let n=0,r=e.length;t&&n<r;++n){const r=t.mapFor(e[n],!1);t=r&&r.get(e[n])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let t;if(e.length){const n=e[0],r=this.mapFor(n,!1),o=r&&r.get(n);o&&(t=o.removeArray(Yy.call(e,1)),o.data||o.weak||o.strong&&o.strong.size||r.delete(n))}else t=this.data,delete this.data;return t}getChildTrie(e){const t=this.mapFor(e,!0);let n=t.get(e);return n||t.set(e,n=new Jy(this.weakness,this.makeData)),n}mapFor(e,t){return this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}}const Xy=()=>Object.create(null),{forEach:Zy,slice:ev}=Array.prototype,{hasOwnProperty:tv}=Object.prototype;class nv{constructor(e=!0,t=Xy){this.weakness=e,this.makeData=t}lookup(...e){return this.lookupArray(e)}lookupArray(e){let t=this;return Zy.call(e,(e=>t=t.getChildTrie(e))),tv.call(t,"data")?t.data:t.data=this.makeData(ev.call(e))}peek(...e){return this.peekArray(e)}peekArray(e){let t=this;for(let n=0,r=e.length;t&&n<r;++n){const r=this.weakness&&rv(e[n])?t.weak:t.strong;t=r&&r.get(e[n])}return t&&t.data}getChildTrie(e){const t=this.weakness&&rv(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map);let n=t.get(e);return n||t.set(e,n=new nv(this.weakness,this.makeData)),n}}function rv(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}let ov=null;const iv={};let av=1;function sv(e){try{return e()}catch(e){}}const cv="@wry/context:Slot",uv=sv((()=>globalThis))||sv((()=>global))||Object.create(null),lv=uv[cv]||Array[cv]||function(e){try{Object.defineProperty(uv,cv,{value:e,enumerable:!1,writable:!1,configurable:!0})}finally{return e}}(class{constructor(){this.id=["slot",av++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=ov;e;e=e.parent)if(this.id in e.slots){const t=e.slots[this.id];if(t===iv)break;return e!==ov&&(ov.slots[this.id]=t),!0}return ov&&(ov.slots[this.id]=iv),!1}getValue(){if(this.hasValue())return ov.slots[this.id]}withValue(e,t,n,r){const o={__proto__:null,[this.id]:e},i=ov;ov={parent:i,slots:o};try{return t.apply(r,n)}finally{ov=i}}static bind(e){const t=ov;return function(){const n=ov;try{return ov=t,e.apply(this,arguments)}finally{ov=n}}}static noContext(e,t,n){if(!ov)return e.apply(n,t);{const r=ov;try{return ov=null,e.apply(n,t)}finally{ov=r}}}}),{bind:dv,noContext:hv}=lv,pv=new lv,{hasOwnProperty:fv}=Object.prototype,mv=Array.from||function(e){const t=[];return e.forEach((e=>t.push(e))),t};function gv(e){const{unsubscribe:t}=e;"function"==typeof t&&(e.unsubscribe=void 0,t())}const yv=[],vv=100;function _v(e,t){if(!e)throw new Error(t||"assertion failure")}function bv(e,t){const n=e.length;return n>0&&n===t.length&&e[n-1]===t[n-1]}function Cv(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}function Ev(e){return e.slice(0)}class Tv{constructor(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++Tv.count}peek(){if(1===this.value.length&&!kv(this))return wv(this),this.value[0]}recompute(e){return _v(!this.recomputing,"already recomputing"),wv(this),kv(this)?function(e,t){return Mv(e),pv.withValue(e,Iv,[e,t]),function(e,t){if("function"==typeof e.subscribe)try{gv(e),e.unsubscribe=e.subscribe.apply(null,t)}catch(t){return e.setDirty(),!1}return!0}(e,t)&&function(e){e.dirty=!1,kv(e)||Av(e)}(e),Cv(e.value)}(this,e):Cv(this.value)}setDirty(){this.dirty||(this.dirty=!0,Sv(this),gv(this))}dispose(){this.setDirty(),Mv(this),Rv(this,((e,t)=>{e.setDirty(),Dv(e,this)}))}forget(){this.dispose()}dependOn(e){e.add(this),this.deps||(this.deps=yv.pop()||new Set),this.deps.add(e)}forgetDeps(){this.deps&&(mv(this.deps).forEach((e=>e.delete(this))),this.deps.clear(),yv.push(this.deps),this.deps=null)}}function wv(e){const t=pv.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),kv(e)?Ov(t,e):Nv(t,e),t}function Iv(e,t){e.recomputing=!0;const{normalizeResult:n}=e;let r;n&&1===e.value.length&&(r=Ev(e.value)),e.value.length=0;try{if(e.value[0]=e.fn.apply(null,t),n&&r&&!bv(r,e.value))try{e.value[0]=n(e.value[0],r[0])}catch(e){}}catch(t){e.value[1]=t}e.recomputing=!1}function kv(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function Sv(e){Rv(e,Ov)}function Av(e){Rv(e,Nv)}function Rv(e,t){const n=e.parents.size;if(n){const r=mv(e.parents);for(let o=0;o<n;++o)t(r[o],e)}}function Ov(e,t){_v(e.childValues.has(t)),_v(kv(t));const n=!kv(e);if(e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=yv.pop()||new Set;e.dirtyChildren.add(t),n&&Sv(e)}function Nv(e,t){_v(e.childValues.has(t)),_v(!kv(t));const n=e.childValues.get(t);0===n.length?e.childValues.set(t,Ev(t.value)):bv(n,t.value)||e.setDirty(),Pv(e,t),kv(e)||Av(e)}function Pv(e,t){const n=e.dirtyChildren;n&&(n.delete(t),0===n.size&&(yv.length<vv&&yv.push(n),e.dirtyChildren=null))}function Mv(e){e.childValues.size>0&&e.childValues.forEach(((t,n)=>{Dv(e,n)})),e.forgetDeps(),_v(null===e.dirtyChildren)}function Dv(e,t){t.parents.delete(e),e.childValues.delete(t),Pv(e,t)}Tv.count=0;const qv={setDirty:!0,dispose:!0,forget:!0};function xv(e){const t=new Map,n=e&&e.subscribe;function r(e){const r=pv.getValue();if(r){let o=t.get(e);o||t.set(e,o=new Set),r.dependOn(o),"function"==typeof n&&(gv(o),o.unsubscribe=n(e))}}return r.dirty=function(e,n){const r=t.get(e);if(r){const o=n&&fv.call(qv,n)?n:"setDirty";mv(r).forEach((e=>e[o]())),t.delete(e),gv(r)}},r}let Fv;function Lv(...e){return(Fv||(Fv=new nv("function"==typeof WeakMap))).lookupArray(e)}const Uv=new Set;function Bv(e,{max:t=Math.pow(2,16),keyArgs:n,makeCacheKey:r=Lv,normalizeResult:o,subscribe:i,cache:a=Hu}=Object.create(null)){const s="function"==typeof a?new a(t,(e=>e.dispose())):a,c=function(){const t=r.apply(null,n?n.apply(null,arguments):arguments);if(void 0===t)return e.apply(null,arguments);let a=s.get(t);a||(s.set(t,a=new Tv(e)),a.normalizeResult=o,a.subscribe=i,a.forget=()=>s.delete(t));const c=a.recompute(Array.prototype.slice.call(arguments));return s.set(t,a),Uv.add(s),pv.hasValue()||(Uv.forEach((e=>e.clean())),Uv.clear()),c};function u(e){const t=e&&s.get(e);t&&t.setDirty()}function l(e){const t=e&&s.get(e);if(t)return t.peek()}function d(e){return!!e&&s.delete(e)}return Object.defineProperty(c,"size",{get:()=>s.size,configurable:!1,enumerable:!1}),Object.freeze(c.options={max:t,keyArgs:n,makeCacheKey:r,normalizeResult:o,subscribe:i,cache:s}),c.dirtyKey=u,c.dirty=function(){u(r.apply(null,arguments))},c.peekKey=l,c.peek=function(){return l(r.apply(null,arguments))},c.forgetKey=d,c.forget=function(){return d(r.apply(null,arguments))},c.makeCacheKey=r,c.getKey=n?function(){return r.apply(null,n.apply(null,arguments))}:r,Object.freeze(c)}function Hv(e){return e}var jv=function(){function e(e,t){void 0===t&&(t=Object.create(null)),this.resultCache=fl?new WeakSet:new Set,this.transform=e,t.getCacheKey&&(this.getCacheKey=t.getCacheKey),this.cached=!1!==t.cache,this.resetCache()}return e.prototype.getCacheKey=function(e){return[e]},e.identity=function(){return new e(Hv,{cache:!1})},e.split=function(t,n,r){return void 0===r&&(r=e.identity()),Object.assign(new e((function(e){return(t(e)?n:r).transformDocument(e)}),{cache:!1}),{left:n,right:r})},e.prototype.resetCache=function(){var t=this;if(this.cached){var n=new Jy(pl);this.performWork=Bv(e.prototype.performWork.bind(this),{makeCacheKey:function(e){var r=t.getCacheKey(e);if(r)return Au(Array.isArray(r),66),n.lookupArray(r)},max:Vu["documentTransform.cache"],cache:Uu})}},e.prototype.performWork=function(e){return Qg(e),this.transform(e)},e.prototype.transformDocument=function(e){if(this.resultCache.has(e))return e;var t=this.performWork(e);return this.resultCache.add(t),t},e.prototype.concat=function(t){var n=this;return Object.assign(new e((function(e){return t.transformDocument(n.transformDocument(e))}),{cache:!1}),{left:this,right:t})},e}();function Qv(e,t,n){return new Ig((function(r){var o={then:function(e){return new Promise((function(t){return t(e())}))}};function i(e,t){return function(n){if(e){var i=function(){return r.closed?0:e(n)};o=o.then(i,i).then((function(e){return r.next(e)}),(function(e){return r.error(e)}))}else r[t](n)}}var a={next:i(t,"next"),error:i(n,"error"),complete:function(){o.then((function(){return r.complete()}))}},s=e.subscribe(a);return function(){return s.unsubscribe()}}))}function Kv(e){return Nl(Gv(e))}function Gv(e){var t=Nl(e.errors)?e.errors.slice(0):[];return gy(e)&&Nl(e.incremental)&&e.incremental.forEach((function(e){e.errors&&t.push.apply(t,e.errors)})),t}function zv(e,t,n){var r=[];e.forEach((function(e){return e[t]&&r.push(e)})),r.forEach((function(e){return e[t](n)}))}function Vv(e){function t(t){Object.defineProperty(e,t,{value:Ig})}return ml&&Symbol.species&&t(Symbol.species),t("@@species"),e}function Wv(e){return e&&"function"==typeof e.then}var Yv=function(e){function t(t){var n=e.call(this,(function(e){return n.addObserver(e),function(){return n.removeObserver(e)}}))||this;return n.observers=new Set,n.promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),n.handlers={next:function(e){null!==n.sub&&(n.latest=["next",e],n.notify("next",e),zv(n.observers,"next",e))},error:function(e){var t=n.sub;null!==t&&(t&&setTimeout((function(){return t.unsubscribe()})),n.sub=null,n.latest=["error",e],n.reject(e),n.notify("error",e),zv(n.observers,"error",e))},complete:function(){var e=n,t=e.sub,r=e.sources;if(null!==t){var o=(void 0===r?[]:r).shift();o?Wv(o)?o.then((function(e){return n.sub=e.subscribe(n.handlers)}),n.handlers.error):n.sub=o.subscribe(n.handlers):(t&&setTimeout((function(){return t.unsubscribe()})),n.sub=null,n.latest&&"next"===n.latest[0]?n.resolve(n.latest[1]):n.resolve(),n.notify("complete"),zv(n.observers,"complete"))}}},n.nextResultListeners=new Set,n.cancel=function(e){n.reject(e),n.sources=[],n.handlers.complete()},n.promise.catch((function(e){})),"function"==typeof t&&(t=[new Ig(t)]),Wv(t)?t.then((function(e){return n.start(e)}),n.handlers.error):n.start(t),n}return Fs(t,e),t.prototype.start=function(e){void 0===this.sub&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var t=this.latest[0],n=e[t];n&&n.call(e,this.latest[1]),null===this.sub&&"next"===t&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e))},t.prototype.removeObserver=function(e){this.observers.delete(e)&&this.observers.size<1&&this.handlers.complete()},t.prototype.notify=function(e,t){var n=this.nextResultListeners;n.size&&(this.nextResultListeners=new Set,n.forEach((function(n){return n(e,t)})))},t.prototype.beforeNext=function(e){var t=!1;this.nextResultListeners.add((function(n,r){t||(t=!0,e(n,r))}))},t}(Ig);Vv(Yv);var $v=Object.prototype.toString;function Jv(e){return Xv(e)}function Xv(e,t){switch($v.call(e)){case"[object Array]":if((t=t||new Map).has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach((function(e,r){n[r]=Xv(e,t)})),n;case"[object Object]":if((t=t||new Map).has(e))return t.get(e);var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Object.keys(e).forEach((function(n){r[n]=Xv(e[n],t)})),r;default:return e}}function Zv(e,t,n,r){var o=t.data,i=Us(t,["data"]),a=n.data,s=Us(n,["data"]);return au(i,s)&&e_(Wg(e).selectionSet,o,a,{fragmentMap:Sg(zg(e)),variables:r})}function e_(e,t,n,r){if(t===n)return!0;var o=new Set;return e.selections.every((function(e){if(o.has(e))return!0;if(o.add(e),!oy(e,r.variables))return!0;if(t_(e))return!0;if(jg(e)){var i=Bg(e),a=t&&t[i],s=n&&n[i],c=e.selectionSet;if(!c)return au(a,s);var u=Array.isArray(a),l=Array.isArray(s);if(u!==l)return!1;if(u&&l){var d=a.length;if(s.length!==d)return!1;for(var h=0;h<d;++h)if(!e_(c,a[h],s[h],r))return!1;return!0}return e_(c,a,s,r)}var p=Ag(e,r.fragmentMap);return p?!!t_(p)||e_(p.selectionSet,t,n,r):void 0}))}function t_(e){return!!e.directives&&e.directives.some(n_)}function n_(e){return"nonreactive"===e.name.value}var r_=Object.assign,o_=Object.hasOwnProperty,i_=function(e){function t(t){var n=t.queryManager,r=t.queryInfo,o=t.options,i=e.call(this,(function(e){try{var t=e._subscription._observer;t&&!t.error&&(t.error=s_)}catch(e){}var n=!i.observers.size;i.observers.add(e);var r=i.last;return r&&r.error?e.error&&e.error(r.error):r&&r.result&&e.next&&e.next(r.result),n&&i.reobserve().catch((function(){})),function(){i.observers.delete(e)&&!i.observers.size&&i.tearDownQuery()}}))||this;i.observers=new Set,i.subscriptions=new Set,i.queryInfo=r,i.queryManager=n,i.waitForOwnResult=u_(o.fetchPolicy),i.isTornDown=!1;var a=n.defaultOptions.watchQuery,s=(void 0===a?{}:a).fetchPolicy,c=void 0===s?"cache-first":s,u=o.fetchPolicy,l=void 0===u?c:u,d=o.initialFetchPolicy,h=void 0===d?"standby"===l?c:l:d;i.options=Ls(Ls({},o),{initialFetchPolicy:h,fetchPolicy:l}),i.queryId=r.queryId||n.generateQueryId();var p=Kg(i.query);return i.queryName=p&&p.name&&p.name.value,i}return Fs(t,e),Object.defineProperty(t.prototype,"query",{get:function(){return this.lastQuery||this.options.query},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return new Promise((function(t,n){var r={next:function(n){t(n),e.observers.delete(r),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){o.unsubscribe()}),0)},error:n},o=e.subscribe(r)}))},t.prototype.resetDiff=function(){this.queryInfo.resetDiff()},t.prototype.getCurrentResult=function(e){void 0===e&&(e=!0);var t=this.getLastResult(!0),n=this.queryInfo.networkStatus||t&&t.networkStatus||wl.ready,r=Ls(Ls({},t),{loading:Al(n),networkStatus:n}),o=this.options.fetchPolicy,i=void 0===o?"cache-first":o;if(u_(i)||this.queryManager.getDocumentInfo(this.query).hasForcedResolvers);else if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var a=this.queryInfo.getDiff();(a.complete||this.options.returnPartialData)&&(r.data=a.result),iu(r.data,{})&&(r.data=void 0),a.complete?(delete r.partial,!a.complete||r.networkStatus!==wl.loading||"cache-first"!==i&&"cache-only"!==i||(r.networkStatus=wl.ready,r.loading=!1)):r.partial=!0,!1===globalThis.__DEV__||a.complete||this.options.partialRefetch||r.loading||r.data||r.error||c_(a.missing)}return e&&this.updateLastResult(r),r},t.prototype.isDifferentFromLastResult=function(e,t){return!this.last||(this.queryManager.getDocumentInfo(this.query).hasNonreactiveDirective?!Zv(this.query,this.last.result,e,this.variables):!iu(this.last.result,e))||t&&!iu(this.last.variables,t)},t.prototype.getLast=function(e,t){var n=this.last;if(n&&n[e]&&(!t||iu(n.variables,this.variables)))return n[e]},t.prototype.getLastResult=function(e){return this.getLast("result",e)},t.prototype.getLastError=function(e){return this.getLast("error",e)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var t,n={pollInterval:0},r=this.options.fetchPolicy;if(n.fetchPolicy="cache-and-network"===r?r:"no-cache"===r?"no-cache":"network-only",!1!==globalThis.__DEV__&&e&&o_.call(e,"variables")){var o=Vg(this.query),i=o.variableDefinitions;i&&i.some((function(e){return"variables"===e.variable.name.value}))||!1!==globalThis.__DEV__&&Au.warn(20,e,(null===(t=o.name)||void 0===t?void 0:t.value)||o)}return e&&!iu(this.options.variables,e)&&(n.variables=this.options.variables=Ls(Ls({},this.options.variables),e)),this.queryInfo.resetLastWrite(),this.reobserve(n,wl.refetch)},t.prototype.fetchMore=function(e){var t=this,n=Ls(Ls({},e.query?e:Ls(Ls(Ls(Ls({},this.options),{query:this.options.query}),e),{variables:Ls(Ls({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"});n.query=this.transformDocument(n.query);var r=this.queryManager.generateQueryId();this.lastQuery=e.query?this.transformDocument(this.options.query):n.query;var o=this.queryInfo,i=o.networkStatus;o.networkStatus=wl.fetchMore,n.notifyOnNetworkStatusChange&&this.observe();var a=new Set;return this.queryManager.fetchQuery(r,n,wl.fetchMore).then((function(s){return t.queryManager.removeQuery(r),o.networkStatus===wl.fetchMore&&(o.networkStatus=i),t.queryManager.cache.batch({update:function(r){var o=e.updateQuery;o?r.updateQuery({query:t.query,variables:t.variables,returnPartialData:!0,optimistic:!1},(function(e){return o(e,{fetchMoreResult:s.data,variables:n.variables})})):r.writeQuery({query:n.query,variables:n.variables,data:s.data})},onWatchUpdated:function(e){a.add(e.query)}}),s})).finally((function(){a.has(t.query)||a_(t)}))},t.prototype.subscribeToMore=function(e){var t=this,n=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(n){var r=e.updateQuery;r&&t.updateQuery((function(e,t){var o=t.variables;return r(e,{subscriptionData:n,variables:o})}))},error:function(t){e.onError?e.onError(t):!1!==globalThis.__DEV__&&Au.error(21,t)}});return this.subscriptions.add(n),function(){t.subscriptions.delete(n)&&n.unsubscribe()}},t.prototype.setOptions=function(e){return this.reobserve(e)},t.prototype.silentSetOptions=function(e){var t=Zc(this.options,e||{});r_(this.options,t)},t.prototype.setVariables=function(e){return iu(this.variables,e)?this.observers.size?this.result():Promise.resolve():(this.options.variables=e,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:e},wl.setVariables):Promise.resolve())},t.prototype.updateQuery=function(e){var t=this.queryManager,n=e(t.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});n&&(t.cache.writeQuery({query:this.options.query,data:n,variables:this.variables}),t.broadcastQueries())},t.prototype.startPolling=function(e){this.options.pollInterval=e,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(e,t){if(t.nextFetchPolicy){var n=t.fetchPolicy,r=void 0===n?"cache-first":n,o=t.initialFetchPolicy,i=void 0===o?r:o;"standby"===r||("function"==typeof t.nextFetchPolicy?t.fetchPolicy=t.nextFetchPolicy(r,{reason:e,options:t,observable:this,initialFetchPolicy:i}):t.fetchPolicy="variables-changed"===e?i:t.nextFetchPolicy)}return t.fetchPolicy},t.prototype.fetch=function(e,t,n){return this.queryManager.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(this.queryId,e,t,n)},t.prototype.updatePolling=function(){var e=this;if(!this.queryManager.ssrMode){var t=this.pollingInfo,n=this.options.pollInterval;if(n){if(!t||t.interval!==n){Au(n,22),(t||(this.pollingInfo={})).interval=n;var r=function(){var t,n;e.pollingInfo&&(Al(e.queryInfo.networkStatus)||(null===(n=(t=e.options).skipPollAttempt)||void 0===n?void 0:n.call(t))?o():e.reobserve({fetchPolicy:"no-cache"===e.options.initialFetchPolicy?"no-cache":"network-only"},wl.poll).then(o,o))},o=function(){var t=e.pollingInfo;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(r,t.interval))};o()}}else t&&(clearTimeout(t.timeout),delete this.pollingInfo)}},t.prototype.updateLastResult=function(e,t){void 0===t&&(t=this.variables);var n=this.getLastError();return n&&this.last&&!iu(t,this.last.variables)&&(n=void 0),this.last=Ls({result:this.queryManager.assumeImmutableResults?e:Jv(e),variables:t},n?{error:n}:null)},t.prototype.reobserveAsConcast=function(e,t){var n=this;this.isTornDown=!1;var r=t===wl.refetch||t===wl.fetchMore||t===wl.poll,o=this.options.variables,i=this.options.fetchPolicy,a=Zc(this.options,e||{}),s=r?a:r_(this.options,a),c=this.transformDocument(s.query);this.lastQuery=c,r||(this.updatePolling(),e&&e.variables&&!iu(e.variables,o)&&"standby"!==s.fetchPolicy&&s.fetchPolicy===i&&(this.applyNextFetchPolicy("variables-changed",s),void 0===t&&(t=wl.setVariables))),this.waitForOwnResult&&(this.waitForOwnResult=u_(s.fetchPolicy));var u=function(){n.concast===h&&(n.waitForOwnResult=!1)},l=s.variables&&Ls({},s.variables),d=this.fetch(s,t,c),h=d.concast,p=d.fromLink,f={next:function(e){iu(n.variables,l)&&(u(),n.reportResult(e,l))},error:function(e){iu(n.variables,l)&&(u(),n.reportError(e,l))}};return r||!p&&this.concast||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=h,this.observer=f),h.addObserver(f),h},t.prototype.reobserve=function(e,t){return this.reobserveAsConcast(e,t).promise},t.prototype.resubscribeAfterError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.last;this.resetLastResults();var r=this.subscribe.apply(this,e);return this.last=n,r},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(e,t){var n=this.getLastError(),r=this.isDifferentFromLastResult(e,t);(n||!e.partial||this.options.returnPartialData)&&this.updateLastResult(e,t),(n||r)&&zv(this.observers,"next",e)},t.prototype.reportError=function(e,t){var n=Ls(Ls({},this.getLastResult()),{error:e,errors:e.graphQLErrors,networkStatus:wl.error,loading:!1});this.updateLastResult(n,t),zv(this.observers,"error",this.last.error=e)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t.prototype.transformDocument=function(e){return this.queryManager.transform(e)},t}(Ig);function a_(e){var t=e.options,n=t.fetchPolicy,r=t.nextFetchPolicy;return"cache-and-network"===n||"network-only"===n?e.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(e,t){return this.nextFetchPolicy=r,"function"==typeof this.nextFetchPolicy?this.nextFetchPolicy(e,t):n}}):e.reobserve()}function s_(e){!1!==globalThis.__DEV__&&Au.error(23,e.message,e.stack)}function c_(e){!1!==globalThis.__DEV__&&e&&!1!==globalThis.__DEV__&&Au.debug(24,e)}function u_(e){return"network-only"===e||"no-cache"===e||"standby"===e}function l_(e){return e.kind===lc.FIELD||e.kind===lc.FRAGMENT_SPREAD||e.kind===lc.INLINE_FRAGMENT}Vv(i_);var d_=new lv,h_=new WeakMap;function p_(e){var t=h_.get(e);return t||h_.set(e,t={vars:new Set,dep:xv()}),t}function f_(e){p_(e).vars.forEach((function(t){return t.forgetCache(e)}))}function m_(e){var t=new Set,n=new Set,r=function(i){if(arguments.length>0){if(e!==i){e=i,t.forEach((function(e){p_(e).dep.dirty(r),function(e){e.broadcastWatches&&e.broadcastWatches()}(e)}));var a=Array.from(n);n.clear(),a.forEach((function(t){return t(e)}))}}else{var s=d_.getValue();s&&(o(s),p_(s).dep(r))}return e};r.onNextChange=function(e){return n.add(e),function(){n.delete(e)}};var o=r.attachCache=function(e){return t.add(e),p_(e).vars.add(r),r};return r.forgetCache=function(e){return t.delete(e)},r}var g_=function(){function e(e){var t=e.cache,n=e.client,r=e.resolvers,o=e.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=t,n&&(this.client=n),r&&this.addResolvers(r),o&&this.setFragmentMatcher(o)}return e.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach((function(e){t.resolvers=hy(t.resolvers,e)})):this.resolvers=hy(this.resolvers,e)},e.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(e){var t=e.document,n=e.remoteResult,r=e.context,o=e.variables,i=e.onlyRunForcedResolvers,a=void 0!==i&&i;return Bs(this,void 0,void 0,(function(){return Hs(this,(function(e){return t?[2,this.resolveDocument(t,n.data,r,o,this.fragmentMatcher,a).then((function(e){return Ls(Ls({},n),{data:e.result})}))]:[2,n]}))}))},e.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(e){return iy(["client"],e)&&this.resolvers?e:null},e.prototype.serverQuery=function(e){return jy(e)},e.prototype.prepareContext=function(e){var t=this.cache;return Ls(Ls({},e),{cache:t,getCacheKey:function(e){return t.identify(e)}})},e.prototype.addExportedVariables=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),Bs(this,void 0,void 0,(function(){return Hs(this,(function(r){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(n),t).then((function(e){return Ls(Ls({},t),e.exportedVariables)}))]:[2,Ls({},t)]}))}))},e.prototype.shouldForceResolvers=function(e){var t=!1;return ny(e,{Directive:{enter:function(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some((function(e){return"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value}))))return ty}}}),t},e.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:Hy(e),variables:t,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(e,t,n,r,o,i){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o=function(){return!0}),void 0===i&&(i=!1),Bs(this,void 0,void 0,(function(){var a,s,c,u,l,d,h,p,f,m;return Hs(this,(function(g){return a=Wg(e),s=zg(e),c=Sg(s),u=this.collectSelectionsToResolve(a,c),l=a.operation,d=l?l.charAt(0).toUpperCase()+l.slice(1):"Query",p=(h=this).cache,f=h.client,m={fragmentMap:c,context:Ls(Ls({},n),{cache:p,client:f}),variables:r,fragmentMatcher:o,defaultOperationType:d,exportedVariables:{},selectionsToResolve:u,onlyRunForcedResolvers:i},[2,this.resolveSelectionSet(a.selectionSet,!1,t,m).then((function(e){return{result:e,exportedVariables:m.exportedVariables}}))]}))}))},e.prototype.resolveSelectionSet=function(e,t,n,r){return Bs(this,void 0,void 0,(function(){var o,i,a,s,c,u=this;return Hs(this,(function(l){return o=r.fragmentMap,i=r.context,a=r.variables,s=[n],c=function(e){return Bs(u,void 0,void 0,(function(){var c,u;return Hs(this,(function(l){return(t||r.selectionsToResolve.has(e))&&oy(e,a)?jg(e)?[2,this.resolveField(e,t,n,r).then((function(t){var n;void 0!==t&&s.push(((n={})[Bg(e)]=t,n))}))]:(function(e){return"InlineFragment"===e.kind}(e)?c=e:(c=o[e.name.value],Au(c,18,e.name.value)),c&&c.typeCondition&&(u=c.typeCondition.name.value,r.fragmentMatcher(n,u,i))?[2,this.resolveSelectionSet(c.selectionSet,t,n,r).then((function(e){s.push(e)}))]:[2]):[2]}))}))},[2,Promise.all(e.selections.map(c)).then((function(){return py(s)}))]}))}))},e.prototype.resolveField=function(e,t,n,r){return Bs(this,void 0,void 0,(function(){var o,i,a,s,c,u,l,d,h,p=this;return Hs(this,(function(f){return n?(o=r.variables,i=e.name.value,a=Bg(e),s=i!==a,c=n[a]||n[i],u=Promise.resolve(c),r.onlyRunForcedResolvers&&!this.shouldForceResolvers(e)||(l=n.__typename||r.defaultOperationType,(d=this.resolvers&&this.resolvers[l])&&(h=d[s?i:a])&&(u=Promise.resolve(d_.withValue(this.cache,h,[n,Ug(e,o),r.context,{field:e,fragmentMap:r.fragmentMap}])))),[2,u.then((function(n){var o,i;if(void 0===n&&(n=c),e.directives&&e.directives.forEach((function(e){"export"===e.name.value&&e.arguments&&e.arguments.forEach((function(e){"as"===e.name.value&&"StringValue"===e.value.kind&&(r.exportedVariables[e.value.value]=n)}))})),!e.selectionSet)return n;if(null==n)return n;var a=null!==(i=null===(o=e.directives)||void 0===o?void 0:o.some((function(e){return"client"===e.name.value})))&&void 0!==i&&i;return Array.isArray(n)?p.resolveSubSelectedArray(e,t||a,n,r):e.selectionSet?p.resolveSelectionSet(e.selectionSet,t||a,n,r):void 0}))]):[2,null]}))}))},e.prototype.resolveSubSelectedArray=function(e,t,n,r){var o=this;return Promise.all(n.map((function(n){return null===n?null:Array.isArray(n)?o.resolveSubSelectedArray(e,t,n,r):e.selectionSet?o.resolveSelectionSet(e.selectionSet,t,n,r):void 0})))},e.prototype.collectSelectionsToResolve=function(e,t){var n=function(e){return!Array.isArray(e)},r=this.selectionsToResolveCache;return function e(o){if(!r.has(o)){var i=new Set;r.set(o,i),ny(o,{Directive:function(e,t,r,o,a){"client"===e.name.value&&a.forEach((function(e){n(e)&&l_(e)&&i.add(e)}))},FragmentSpread:function(r,o,a,s,c){var u=t[r.name.value];Au(u,19,r.name.value);var l=e(u);l.size>0&&(c.forEach((function(e){n(e)&&l_(e)&&i.add(e)})),i.add(r),l.forEach((function(e){i.add(e)})))}})}return r.get(o)}(e)},e}(),y_=new(pl?WeakMap:Map);function v_(e,t){var n=e[t];"function"==typeof n&&(e[t]=function(){return y_.set(e,(y_.get(e)+1)%1e15),n.apply(this,arguments)})}function __(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var b_=function(){function e(e,t){void 0===t&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var n=this.cache=e.cache;y_.has(n)||(y_.set(n,0),v_(n,"evict"),v_(n,"modify"),v_(n,"reset"))}return e.prototype.init=function(e){var t=e.networkStatus||wl.loading;return this.variables&&this.networkStatus!==wl.loading&&!iu(this.variables,e.variables)&&(t=wl.setVariables),iu(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},e.prototype.reset=function(){__(this),this.dirty=!1},e.prototype.resetDiff=function(){this.lastDiff=void 0},e.prototype.getDiff=function(){var e=this.getDiffOptions();if(this.lastDiff&&iu(e,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables);var t=this.observableQuery;if(t&&"no-cache"===t.options.fetchPolicy)return{complete:!1};var n=this.cache.diff(e);return this.updateLastDiff(n,e),n},e.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},e.prototype.getDiffOptions=function(e){var t;return void 0===e&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:null===(t=this.observableQuery)||void 0===t?void 0:t.options.canonizeResults}},e.prototype.setDiff=function(e){var t=this,n=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(e),this.dirty||iu(n&&n.result,e&&e.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout((function(){return t.notify()}),0)))},e.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){t.getDiff().fromOptimisticTransaction?e.observe():a_(e)})):delete this.oqListener)},e.prototype.notify=function(){var e=this;__(this),this.shouldNotify()&&this.listeners.forEach((function(t){return t(e)})),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(Al(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if("cache-only"!==e&&"cache-and-network"!==e)return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=e.prototype.cancel;var t=this.observableQuery;t&&t.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(e){var t=this;void 0===e&&(e=this.variables);var n=this.observableQuery;if(!n||"no-cache"!==n.options.fetchPolicy){var r=Ls(Ls({},this.getDiffOptions(e)),{watcher:this,callback:function(e){return t.setDiff(e)}});this.lastWatch&&iu(r,this.lastWatch)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=r))}},e.prototype.resetLastWrite=function(){this.lastWrite=void 0},e.prototype.shouldWrite=function(e,t){var n=this.lastWrite;return!(n&&n.dmCount===y_.get(this.cache)&&iu(t,n.variables)&&iu(e.data,n.result.data))},e.prototype.markResult=function(e,t,n,r){var o=this;e=Ls({},e);var i=new my,a=Nl(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&Nl(e.incremental)){var s=vy(this.getDiff().result,e);e.data=s}else if("hasNext"in e&&e.hasNext){var c=this.getDiff();e.data=i.merge(c.result,e.data)}return this.graphQLErrors=a,"no-cache"===n.fetchPolicy?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(n.variables)):0!==r&&(C_(e,n.errorPolicy)?this.cache.performTransaction((function(i){if(o.shouldWrite(e,n.variables))i.writeQuery({query:t,data:e.data,variables:n.variables,overwrite:1===r}),o.lastWrite={result:Ls({},e),variables:n.variables,dmCount:y_.get(o.cache)};else if(o.lastDiff&&o.lastDiff.diff.complete)return void(e.data=o.lastDiff.diff.result);var a=o.getDiffOptions(n.variables),s=i.diff(a);!o.stopped&&iu(o.variables,n.variables)&&o.updateWatch(n.variables),o.updateLastDiff(s,a),e.data=s.result})):this.lastWrite=void 0),e},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=wl.ready},e.prototype.markError=function(e){return this.networkStatus=wl.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},e}();function C_(e,t){void 0===t&&(t="none");var n="ignore"===t||"all"===t,r=!Kv(e);return!r&&n&&e.data&&(r=!0),r}var E_=Object.prototype.hasOwnProperty,T_=Object.create(null),w_=function(){function e(e){var t=e.cache,n=e.link,r=e.defaultOptions,o=e.documentTransform,i=e.queryDeduplication,a=void 0!==i&&i,s=e.onBroadcast,c=e.ssrMode,u=void 0!==c&&c,l=e.clientAwareness,d=void 0===l?{}:l,h=e.localState,p=e.assumeImmutableResults,f=void 0===p?!!t.assumeImmutableResults:p,m=e.defaultContext,g=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new Ku(Vu["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Jy(!1);var y=new jv((function(e){return g.cache.transformDocument(e)}),{cache:!1});this.cache=t,this.link=n,this.defaultOptions=r||Object.create(null),this.queryDeduplication=a,this.clientAwareness=d,this.localState=h||new g_({cache:t}),this.ssrMode=u,this.assumeImmutableResults=f,this.documentTransform=o?y.concat(o).concat(y):y,this.defaultContext=m||Object.create(null),(this.onBroadcast=s)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var e=this;this.queries.forEach((function(t,n){e.stopQueryNoBroadcast(n)})),this.cancelPendingFetches(Ru(25))},e.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach((function(t){return t(e)})),this.fetchCancelFns.clear()},e.prototype.mutate=function(e){var t,n,r=e.mutation,o=e.variables,i=e.optimisticResponse,a=e.updateQueries,s=e.refetchQueries,c=void 0===s?[]:s,u=e.awaitRefetchQueries,l=void 0!==u&&u,d=e.update,h=e.onQueryUpdated,p=e.fetchPolicy,f=void 0===p?(null===(t=this.defaultOptions.mutate)||void 0===t?void 0:t.fetchPolicy)||"network-only":p,m=e.errorPolicy,g=void 0===m?(null===(n=this.defaultOptions.mutate)||void 0===n?void 0:n.errorPolicy)||"none":m,y=e.keepRootFields,v=e.context;return Bs(this,void 0,void 0,(function(){var e,t,n,s,u;return Hs(this,(function(p){switch(p.label){case 0:return Au(r,26),Au("network-only"===f||"no-cache"===f,27),e=this.generateMutationId(),r=this.cache.transformForLink(this.transform(r)),t=this.getDocumentInfo(r).hasClientExports,o=this.getVariables(r,o),t?[4,this.localState.addExportedVariables(r,o,v)]:[3,2];case 1:o=p.sent(),p.label=2;case 2:return n=this.mutationStore&&(this.mutationStore[e]={mutation:r,variables:o,loading:!0,error:null}),s=i&&this.markMutationOptimistic(i,{mutationId:e,document:r,variables:o,fetchPolicy:f,errorPolicy:g,context:v,updateQueries:a,update:d,keepRootFields:y}),this.broadcastQueries(),u=this,[2,new Promise((function(t,p){return Qv(u.getObservableFromLink(r,Ls(Ls({},v),{optimisticResponse:s?i:void 0}),o,!1),(function(t){if(Kv(t)&&"none"===g)throw new hl({graphQLErrors:Gv(t)});n&&(n.loading=!1,n.error=null);var i=Ls({},t);return"function"==typeof c&&(c=c(i)),"ignore"===g&&Kv(i)&&delete i.errors,u.markMutationResult({mutationId:e,result:i,document:r,variables:o,fetchPolicy:f,errorPolicy:g,context:v,update:d,updateQueries:a,awaitRefetchQueries:l,refetchQueries:c,removeOptimistic:s?e:void 0,onQueryUpdated:h,keepRootFields:y})})).subscribe({next:function(e){u.broadcastQueries(),"hasNext"in e&&!1!==e.hasNext||t(e)},error:function(t){n&&(n.loading=!1,n.error=t),s&&u.cache.removeOptimistic(e),u.broadcastQueries(),p(t instanceof hl?t:new hl({networkError:t}))}})}))]}}))}))},e.prototype.markMutationResult=function(e,t){var n=this;void 0===t&&(t=this.cache);var r=e.result,o=[],i="no-cache"===e.fetchPolicy;if(!i&&C_(r,e.errorPolicy)){if(gy(r)||o.push({result:r.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),gy(r)&&Nl(r.incremental)){var a=t.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),s=void 0;a.result&&(s=vy(a.result,r)),void 0!==s&&(r.data=s,o.push({result:s,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var c=e.updateQueries;c&&this.queries.forEach((function(e,i){var a=e.observableQuery,s=a&&a.queryName;if(s&&E_.call(c,s)){var u=c[s],l=n.queries.get(i),d=l.document,h=l.variables,p=t.diff({query:d,variables:h,returnPartialData:!0,optimistic:!1}),f=p.result;if(p.complete&&f){var m=u(f,{mutationResult:r,queryName:d&&Gg(d)||void 0,queryVariables:h});m&&o.push({result:m,dataId:"ROOT_QUERY",query:d,variables:h})}}}))}if(o.length>0||(e.refetchQueries||"").length>0||e.update||e.onQueryUpdated||e.removeOptimistic){var u=[];if(this.refetchQueries({updateCache:function(t){i||o.forEach((function(e){return t.write(e)}));var a,s=e.update,c=!(gy(a=r)||function(e){return"hasNext"in e&&"data"in e}(a))||gy(r)&&!r.hasNext;if(s){if(!i){var u=t.diff({id:"ROOT_MUTATION",query:n.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});u.complete&&("incremental"in(r=Ls(Ls({},r),{data:u.result}))&&delete r.incremental,"hasNext"in r&&delete r.hasNext)}c&&s(t,r,{context:e.context,variables:e.variables})}i||e.keepRootFields||!c||t.modify({id:"ROOT_MUTATION",fields:function(e,t){var n=t.fieldName,r=t.DELETE;return"__typename"===n?e:r}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach((function(e){return u.push(e)})),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(u).then((function(){return r}))}return Promise.resolve(r)},e.prototype.markMutationOptimistic=function(e,t){var n=this,r="function"==typeof e?e(t.variables,{IGNORE:T_}):e;return r!==T_&&(this.cache.recordOptimisticTransaction((function(e){try{n.markMutationResult(Ls(Ls({},t),{result:{data:r}}),e)}catch(e){!1!==globalThis.__DEV__&&Au.error(e)}}),t.mutationId),!0)},e.prototype.fetchQuery=function(e,t,n){return this.fetchConcastWithInfo(e,t,n).concast.promise},e.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach((function(t,n){e[n]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}})),e},e.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},e.prototype.transform=function(e){return this.documentTransform.transformDocument(e)},e.prototype.getDocumentInfo=function(e){var t=this.transformCache;if(!t.has(e)){var n={hasClientExports:ay(e),hasForcedResolvers:this.localState.shouldForceResolvers(e),hasNonreactiveDirective:iy(["nonreactive"],e),clientQuery:this.localState.clientQuery(e),serverQuery:Uy([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"}],e),defaultVars:Yg(Kg(e)),asQuery:Ls(Ls({},e),{definitions:e.definitions.map((function(e){return"OperationDefinition"===e.kind&&"query"!==e.operation?Ls(Ls({},e),{operation:"query"}):e}))})};t.set(e,n)}return t.get(e)},e.prototype.getVariables=function(e,t){return Ls(Ls({},this.getDocumentInfo(e).defaultVars),t)},e.prototype.watchQuery=function(e){var t=this.transform(e.query);void 0===(e=Ls(Ls({},e),{variables:this.getVariables(t,e.variables)})).notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var n=new b_(this),r=new i_({queryManager:this,queryInfo:n,options:e});return r.lastQuery=t,this.queries.set(r.queryId,n),n.init({document:t,observableQuery:r,variables:r.variables}),r},e.prototype.query=function(e,t){var n=this;return void 0===t&&(t=this.generateQueryId()),Au(e.query,28),Au("Document"===e.query.kind,29),Au(!e.returnPartialData,30),Au(!e.pollInterval,31),this.fetchQuery(t,Ls(Ls({},e),{query:this.transform(e.query)})).finally((function(){return n.stopQuery(t)}))},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},e.prototype.clearStore=function(e){return void 0===e&&(e={discardWatches:!0}),this.cancelPendingFetches(Ru(32)),this.queries.forEach((function(e){e.observableQuery?e.networkStatus=wl.loading:e.stop()})),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},e.prototype.getObservableQueries=function(e){var t=this;void 0===e&&(e="active");var n=new Map,r=new Map,o=new Set;return Array.isArray(e)&&e.forEach((function(e){var n;"string"==typeof e?r.set(e,!1):ll(n=e)&&"Document"===n.kind&&Array.isArray(n.definitions)?r.set(t.transform(e),!1):ll(e)&&e.query&&o.add(e)})),this.queries.forEach((function(t,o){var i=t.observableQuery,a=t.document;if(i){if("all"===e)return void n.set(o,i);var s=i.queryName;if("standby"===i.options.fetchPolicy||"active"===e&&!i.hasObservers())return;("active"===e||s&&r.has(s)||a&&r.has(a))&&(n.set(o,i),s&&r.set(s,!0),a&&r.set(a,!0))}})),o.size&&o.forEach((function(e){var r=Iu("legacyOneTimeQuery"),o=t.getQuery(r).init({document:e.query,variables:e.variables}),i=new i_({queryManager:t,queryInfo:o,options:Ls(Ls({},e),{fetchPolicy:"network-only"})});Au(i.queryId===r),o.setObservableQuery(i),n.set(r,i)})),!1!==globalThis.__DEV__&&r.size&&r.forEach((function(e,t){e||!1!==globalThis.__DEV__&&Au.warn("string"==typeof t?33:34,t)})),n},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var n=[];return this.getObservableQueries(e?"all":"active").forEach((function(r,o){var i=r.options.fetchPolicy;r.resetLastResults(),(e||"standby"!==i&&"cache-only"!==i)&&n.push(r.refetch()),t.getQuery(o).setDiff(null)})),this.broadcastQueries(),Promise.all(n)},e.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},e.prototype.startGraphQLSubscription=function(e){var t=this,n=e.query,r=e.fetchPolicy,o=e.errorPolicy,i=void 0===o?"none":o,a=e.variables,s=e.context,c=void 0===s?{}:s;n=this.transform(n),a=this.getVariables(n,a);var u=function(e){return t.getObservableFromLink(n,c,e).map((function(o){"no-cache"!==r&&(C_(o,i)&&t.cache.write({query:n,result:o.data,dataId:"ROOT_SUBSCRIPTION",variables:e}),t.broadcastQueries());var a=Kv(o),s=function(e){return!!e.extensions&&Array.isArray(e.extensions[dl])}(o);if(a||s){var c={};if(a&&(c.graphQLErrors=o.errors),s&&(c.protocolErrors=o.extensions[dl]),"none"===i||s)throw new hl(c)}return"ignore"===i&&delete o.errors,o}))};if(this.getDocumentInfo(n).hasClientExports){var l=this.localState.addExportedVariables(n,a,c).then(u);return new Ig((function(e){var t=null;return l.then((function(n){return t=n.subscribe(e)}),e.error),function(){return t&&t.unsubscribe()}}))}return u(a)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach((function(e){return e.notify()}))},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,n,r){var o,i,a=this;void 0===r&&(r=null!==(o=null==t?void 0:t.queryDeduplication)&&void 0!==o?o:this.queryDeduplication);var s=this.getDocumentInfo(e),c=s.serverQuery,u=s.clientQuery;if(c){var l=this.inFlightLinkObservables,d=this.link,h={query:c,variables:n,operationName:Gg(c)||void 0,context:this.prepareContext(Ls(Ls({},t),{forceFetch:!r}))};if(t=h.context,r){var p=Ny(c),f=Og(n),m=l.lookup(p,f);if(!(i=m.observable)){var g=new Yv([Gy(d,h)]);i=m.observable=g,g.beforeNext((function(){l.remove(p,f)}))}}else i=new Yv([Gy(d,h)])}else i=new Yv([Ig.of({data:{}})]),t=this.prepareContext(t);return u&&(i=Qv(i,(function(e){return a.localState.runResolvers({document:u,remoteResult:e,context:t,variables:n})}))),i},e.prototype.getResultsFromLink=function(e,t,n){var r=e.lastRequestId=this.generateRequestId(),o=this.cache.transformForLink(n.query);return Qv(this.getObservableFromLink(o,n.context,n.variables),(function(i){var a=Gv(i),s=a.length>0;if(r>=e.lastRequestId){if(s&&"none"===n.errorPolicy)throw e.markError(new hl({graphQLErrors:a}));i=e.markResult(i,o,n,t),e.markReady()}var c={data:i.data,loading:!1,networkStatus:wl.ready};return s&&"ignore"!==n.errorPolicy&&(c.errors=a,c.networkStatus=wl.error),c}),(function(t){var n=t.hasOwnProperty("graphQLErrors")?t:new hl({networkError:t});throw r>=e.lastRequestId&&e.markError(n),n}))},e.prototype.fetchConcastWithInfo=function(e,t,n,r){var o=this;void 0===n&&(n=wl.loading),void 0===r&&(r=t.query);var i,a,s=this.getVariables(r,t.variables),c=this.getQuery(e),u=this.defaultOptions.watchQuery,l=t.fetchPolicy,d=void 0===l?u&&u.fetchPolicy||"cache-first":l,h=t.errorPolicy,p=void 0===h?u&&u.errorPolicy||"none":h,f=t.returnPartialData,m=void 0!==f&&f,g=t.notifyOnNetworkStatusChange,y=void 0!==g&&g,v=t.context,_=void 0===v?{}:v,b=Object.assign({},t,{query:r,variables:s,fetchPolicy:d,errorPolicy:p,returnPartialData:m,notifyOnNetworkStatusChange:y,context:_}),C=function(e){b.variables=e;var r=o.fetchQueryByPolicy(c,b,n);return"standby"!==b.fetchPolicy&&r.sources.length>0&&c.observableQuery&&c.observableQuery.applyNextFetchPolicy("after-fetch",t),r},E=function(){return o.fetchCancelFns.delete(e)};if(this.fetchCancelFns.set(e,(function(e){E(),setTimeout((function(){return i.cancel(e)}))})),this.getDocumentInfo(b.query).hasClientExports)i=new Yv(this.localState.addExportedVariables(b.query,b.variables,b.context).then(C).then((function(e){return e.sources}))),a=!0;else{var T=C(b.variables);a=T.fromLink,i=new Yv(T.sources)}return i.promise.then(E,E),{concast:i,fromLink:a}},e.prototype.refetchQueries=function(e){var t=this,n=e.updateCache,r=e.include,o=e.optimistic,i=void 0!==o&&o,a=e.removeOptimistic,s=void 0===a?i?Iu("refetchQueries"):void 0:a,c=e.onQueryUpdated,u=new Map;r&&this.getObservableQueries(r).forEach((function(e,n){u.set(n,{oq:e,lastDiff:t.getQuery(n).getDiff()})}));var l=new Map;return n&&this.cache.batch({update:n,optimistic:i&&s||!1,removeOptimistic:s,onWatchUpdated:function(e,t,n){var r=e.watcher instanceof b_&&e.watcher.observableQuery;if(r){if(c){u.delete(r.queryId);var o=c(r,t,n);return!0===o&&(o=r.refetch()),!1!==o&&l.set(r,o),o}null!==c&&u.set(r.queryId,{oq:r,lastDiff:n,diff:t})}}}),u.size&&u.forEach((function(e,n){var r,o=e.oq,i=e.lastDiff,a=e.diff;if(c){if(!a){var s=o.queryInfo;s.reset(),a=s.getDiff()}r=c(o,a,i)}c&&!0!==r||(r=o.refetch()),!1!==r&&l.set(o,r),n.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(n)})),s&&this.cache.removeOptimistic(s),l},e.prototype.fetchQueryByPolicy=function(e,t,n){var r=this,o=t.query,i=t.variables,a=t.fetchPolicy,s=t.refetchWritePolicy,c=t.errorPolicy,u=t.returnPartialData,l=t.context,d=t.notifyOnNetworkStatusChange,h=e.networkStatus;e.init({document:o,variables:i,networkStatus:n});var p=function(){return e.getDiff()},f=function(t,n){void 0===n&&(n=e.networkStatus||wl.loading);var a=t.result;!1===globalThis.__DEV__||u||iu(a,{})||c_(t.missing);var s=function(e){return Ig.of(Ls({data:e,loading:Al(n),networkStatus:n},t.complete?null:{partial:!0}))};return a&&r.getDocumentInfo(o).hasForcedResolvers?r.localState.runResolvers({document:o,remoteResult:{data:a},context:l,variables:i,onlyRunForcedResolvers:!0}).then((function(e){return s(e.data||void 0)})):"none"===c&&n===wl.refetch&&Array.isArray(t.missing)?s(void 0):s(a)},m="no-cache"===a?0:n===wl.refetch&&"merge"!==s?1:2,g=function(){return r.getResultsFromLink(e,m,{query:o,variables:i,context:l,fetchPolicy:a,errorPolicy:c})},y=d&&"number"==typeof h&&h!==n&&Al(n);switch(a){default:case"cache-first":return(v=p()).complete?{fromLink:!1,sources:[f(v,e.markReady())]}:u||y?{fromLink:!0,sources:[f(v),g()]}:{fromLink:!0,sources:[g()]};case"cache-and-network":var v;return(v=p()).complete||u||y?{fromLink:!0,sources:[f(v),g()]}:{fromLink:!0,sources:[g()]};case"cache-only":return{fromLink:!1,sources:[f(p(),e.markReady())]};case"network-only":return y?{fromLink:!0,sources:[f(p()),g()]}:{fromLink:!0,sources:[g()]};case"no-cache":return y?{fromLink:!0,sources:[f(e.getDiff()),g()]}:{fromLink:!0,sources:[g()]};case"standby":return{fromLink:!1,sources:[]}}},e.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new b_(this,e)),this.queries.get(e)},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return Ls(Ls(Ls({},this.defaultContext),t),{clientAwareness:this.clientAwareness})},e}(),I_=!1,k_=function(){function e(e){var t=this;if(this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],!e.cache)throw Ru(15);var n=e.uri,r=e.credentials,o=e.headers,i=e.cache,a=e.documentTransform,s=e.ssrMode,c=void 0!==s&&s,u=e.ssrForceFetchDelay,l=void 0===u?0:u,d=e.connectToDevTools,h=void 0===d?"object"==typeof window&&!window.__APOLLO_CLIENT__&&!1!==globalThis.__DEV__:d,p=e.queryDeduplication,f=void 0===p||p,m=e.defaultOptions,g=e.defaultContext,y=e.assumeImmutableResults,v=void 0===y?i.assumeImmutableResults:y,_=e.resolvers,b=e.typeDefs,C=e.fragmentMatcher,E=e.name,T=e.version,w=e.link;w||(w=n?new zy({uri:n,credentials:r,headers:o}):Zg.empty()),this.link=w,this.cache=i,this.disableNetworkFetches=c||l>0,this.queryDeduplication=f,this.defaultOptions=m||Object.create(null),this.typeDefs=b,l&&setTimeout((function(){return t.disableNetworkFetches=!1}),l),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),this.version=Cu,this.localState=new g_({cache:i,client:this,resolvers:_,fragmentMatcher:C}),this.queryManager=new w_({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,defaultContext:g,documentTransform:a,queryDeduplication:f,ssrMode:c,clientAwareness:{name:E,version:T},localState:this.localState,assumeImmutableResults:v,onBroadcast:h?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0}),h&&this.connectToDevTools()}return e.prototype.connectToDevTools=function(){if("object"==typeof window){var e=window,t=Symbol.for("apollo.devtools");(e[t]=e[t]||[]).push(this),e.__APOLLO_CLIENT__=this}I_||!1===globalThis.__DEV__||(I_=!0,setTimeout((function(){if("undefined"!=typeof window&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__){var e=window.navigator,t=e&&e.userAgent,n=void 0;"string"==typeof t&&(t.indexOf("Chrome/")>-1?n="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":t.indexOf("Firefox/")>-1&&(n="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),n&&!1!==globalThis.__DEV__&&Au.log("Download the Apollo DevTools for a better development experience: %s",n)}}),1e4))},Object.defineProperty(e.prototype,"documentTransform",{get:function(){return this.queryManager.documentTransform},enumerable:!1,configurable:!0}),e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=eu(this.defaultOptions.watchQuery,e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=Ls(Ls({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){return this.defaultOptions.query&&(e=eu(this.defaultOptions.query,e)),Au("cache-and-network"!==e.fetchPolicy,16),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=Ls(Ls({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=eu(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},e.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return!1!==e.broadcast&&this.queryManager.broadcastQueries(),t},e.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return!1!==e.broadcast&&this.queryManager.broadcastQueries(),t},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return Gy(this.link,e)},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore({discardWatches:!1})})).then((function(){return Promise.all(e.resetStoreCallbacks.map((function(e){return e()})))})).then((function(){return e.reFetchObservableQueries()}))},e.prototype.clearStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore({discardWatches:!0})})).then((function(){return Promise.all(e.clearStoreCallbacks.map((function(e){return e()})))}))},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},e.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),n=[],r=[];t.forEach((function(e,t){n.push(t),r.push(e)}));var o=Promise.all(r);return o.queries=n,o.results=r,o.catch((function(e){!1!==globalThis.__DEV__&&Au.debug(17,e)})),o},e.prototype.getObservableQueries=function(e){return void 0===e&&(e="active"),this.queryManager.getObservableQueries(e)},e.prototype.extract=function(e){return this.cache.extract(e)},e.prototype.restore=function(e){return this.cache.restore(e)},e.prototype.addResolvers=function(e){this.localState.addResolvers(e)},e.prototype.setResolvers=function(e){this.localState.setResolvers(e)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},e.prototype.setLink=function(e){this.link=this.queryManager.link=e},Object.defineProperty(e.prototype,"defaultContext",{get:function(){return this.queryManager.defaultContext},enumerable:!1,configurable:!0}),e}();!1!==globalThis.__DEV__&&(k_.prototype.getMemoryInternals=Xu);var S_=Zg.from,A_=function(){function e(){this.assumeImmutableResults=!1,this.getFragmentDoc=Bv(kg,{max:Vu["cache.fragmentQueryDocuments"]||1e3,cache:Uu})}return e.prototype.batch=function(e){var t,n=this,r="string"==typeof e.optimistic?e.optimistic:!1===e.optimistic?null:void 0;return this.performTransaction((function(){return t=e.update(n)}),r),t},e.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},e.prototype.transformDocument=function(e){return e},e.prototype.transformForLink=function(e){return e},e.prototype.identify=function(e){},e.prototype.gc=function(){return[]},e.prototype.modify=function(e){return!1},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read(Ls(Ls({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read(Ls(Ls({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},e.prototype.writeQuery=function(e){var t=e.id,n=e.data,r=Us(e,["id","data"]);return this.write(Object.assign(r,{dataId:t||"ROOT_QUERY",result:n}))},e.prototype.writeFragment=function(e){var t=e.id,n=e.data,r=e.fragment,o=e.fragmentName,i=Us(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(i,{query:this.getFragmentDoc(r,o),dataId:t,result:n}))},e.prototype.updateQuery=function(e,t){return this.batch({update:function(n){var r=n.readQuery(e),o=t(r);return null==o?r:(n.writeQuery(Ls(Ls({},e),{data:o})),o)}})},e.prototype.updateFragment=function(e,t){return this.batch({update:function(n){var r=n.readFragment(e),o=t(r);return null==o?r:(n.writeFragment(Ls(Ls({},e),{data:o})),o)}})},e}();!1!==globalThis.__DEV__&&(A_.prototype.getMemoryInternals=el);var R_=function(e){function t(n,r,o,i){var a,s=e.call(this,n)||this;if(s.message=n,s.path=r,s.query=o,s.variables=i,Array.isArray(s.path)){s.missing=s.message;for(var c=s.path.length-1;c>=0;--c)s.missing=((a={})[s.path[c]]=s.missing,a)}else s.missing=s.path;return s.__proto__=t.prototype,s}return Fs(t,e),t}(Error),O_=Object.prototype.hasOwnProperty;function N_(e){return null==e}function P_(e,t){var n=e.__typename,r=e.id,o=e._id;if("string"==typeof n&&(t&&(t.keyObject=N_(r)?N_(o)?void 0:{_id:o}:{id:r}),N_(r)&&!N_(o)&&(r=o),!N_(r)))return"".concat(n,":").concat("number"==typeof r||"string"==typeof r?r:JSON.stringify(r))}var M_={dataIdFromObject:P_,addTypename:!0,resultCaching:!0,canonizeResults:!1};function D_(e){var t=e.canonizeResults;return void 0===t?M_.canonizeResults:t}var q_=/^[_a-z][_0-9a-z]*/i;function x_(e){var t=e.match(q_);return t?t[0]:e}function F_(e,t,n){return!!ll(t)&&(Ol(t)?t.every((function(t){return F_(e,t,n)})):e.selections.every((function(e){if(jg(e)&&oy(e,n)){var r=Bg(e);return O_.call(t,r)&&(!e.selectionSet||F_(e.selectionSet,t[r],n))}return!0})))}function L_(e){return ll(e)&&!Dg(e)&&!Ol(e)}function U_(e,t){var n=Sg(zg(e));return{fragmentMap:n,lookupFragment:function(e){var r=n[e];return!r&&t&&(r=t.lookup(e)),r||null}}}var B_=Object.create(null),H_=function(){return B_},j_=Object.create(null),Q_=function(){function e(e,t){var n=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(e,t){return Rl(Dg(e)?n.get(e.__ref,t):e&&e[t])},this.canRead=function(e){return Dg(e)?n.has(e.__ref):"object"==typeof e},this.toReference=function(e,t){if("string"==typeof e)return Mg(e);if(Dg(e))return e;var r=n.policies.identify(e)[0];if(r){var o=Mg(r);return t&&n.merge(r,e),o}}}return e.prototype.toObject=function(){return Ls({},this.data)},e.prototype.has=function(e){return void 0!==this.lookup(e,!0)},e.prototype.get=function(e,t){if(this.group.depend(e,t),O_.call(this.data,e)){var n=this.data[e];if(n&&O_.call(n,t))return n[t]}return"__typename"===t&&O_.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof V_?this.parent.get(e,t):void 0},e.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),O_.call(this.data,e)?this.data[e]:this instanceof V_?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},e.prototype.merge=function(e,t){var n,r=this;Dg(e)&&(e=e.__ref),Dg(t)&&(t=t.__ref);var o="string"==typeof e?this.lookup(n=e):e,i="string"==typeof t?this.lookup(n=t):t;if(i){Au("string"==typeof n,1);var a=new my(Y_).merge(o,i);if(this.data[n]=a,a!==o&&(delete this.refs[n],this.group.caching)){var s=Object.create(null);o||(s.__exists=1),Object.keys(i).forEach((function(e){if(!o||o[e]!==a[e]){s[e]=1;var t=x_(e);t===e||r.policies.hasKeyArgs(a.__typename,t)||(s[t]=1),void 0!==a[e]||r instanceof V_||delete a[e]}})),!s.__typename||o&&o.__typename||this.policies.rootTypenamesById[n]!==a.__typename||delete s.__typename,Object.keys(s).forEach((function(e){return r.group.dirty(n,e)}))}}},e.prototype.modify=function(e,t){var n=this,r=this.lookup(e);if(r){var o=Object.create(null),i=!1,a=!0,s={DELETE:B_,INVALIDATE:j_,isReference:Dg,toReference:this.toReference,canRead:this.canRead,readField:function(t,r){return n.policies.readField("string"==typeof t?{fieldName:t,from:r||Mg(e)}:t,{store:n})}};if(Object.keys(r).forEach((function(c){var u=x_(c),l=r[c];if(void 0!==l){var d="function"==typeof t?t:t[c]||t[u];if(d){var h=d===H_?B_:d(Rl(l),Ls(Ls({},s),{fieldName:u,storeFieldName:c,storage:n.getStorage(e,c)}));if(h===j_)n.group.dirty(e,c);else if(h===B_&&(h=void 0),h!==l&&(o[c]=h,i=!0,l=h,!1!==globalThis.__DEV__)){var p=function(e){if(void 0===n.lookup(e.__ref))return!1!==globalThis.__DEV__&&Au.warn(2,e),!0};if(Dg(h))p(h);else if(Array.isArray(h))for(var f=!1,m=void 0,g=0,y=h;g<y.length;g++){var v=y[g];if(Dg(v)){if(f=!0,p(v))break}else"object"==typeof v&&v&&n.policies.identify(v)[0]&&(m=v);if(f&&void 0!==m){!1!==globalThis.__DEV__&&Au.warn(3,m);break}}}}void 0!==l&&(a=!1)}})),i)return this.merge(e,o),a&&(this instanceof V_?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},e.prototype.delete=function(e,t,n){var r,o=this.lookup(e);if(o){var i=this.getFieldValue(o,"__typename"),a=t&&n?this.policies.getStoreFieldName({typename:i,fieldName:t,args:n}):t;return this.modify(e,a?((r={})[a]=H_,r):H_)}return!1},e.prototype.evict=function(e,t){var n=!1;return e.id&&(O_.call(this.data,e.id)&&(n=this.delete(e.id,e.fieldName,e.args)),this instanceof V_&&this!==t&&(n=this.parent.evict(e,t)||n),(e.fieldName||n)&&this.group.dirty(e.id,e.fieldName||"__exists")),n},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var e=this,t=this.toObject(),n=[];return this.getRootIdSet().forEach((function(t){O_.call(e.policies.rootTypenamesById,t)||n.push(t)})),n.length&&(t.__META={extraRootIds:n.sort()}),t},e.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach((function(n){e&&O_.call(e,n)||t.delete(n)})),e){var n=e.__META,r=Us(e,["__META"]);Object.keys(r).forEach((function(e){t.merge(e,r[e])})),n&&n.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},e.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},e.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof V_?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},e.prototype.gc=function(){var e=this,t=this.getRootIdSet(),n=this.toObject();t.forEach((function(r){O_.call(n,r)&&(Object.keys(e.findChildRefIds(r)).forEach(t.add,t),delete n[r])}));var r=Object.keys(n);if(r.length){for(var o=this;o instanceof V_;)o=o.parent;r.forEach((function(e){return o.delete(e)}))}return r},e.prototype.findChildRefIds=function(e){if(!O_.call(this.refs,e)){var t=this.refs[e]=Object.create(null),n=this.data[e];if(!n)return t;var r=new Set([n]);r.forEach((function(e){Dg(e)&&(t[e.__ref]=!0),ll(e)&&Object.keys(e).forEach((function(t){var n=e[t];ll(n)&&r.add(n)}))}))}return this.refs[e]},e.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},e}(),K_=function(){function e(e,t){void 0===t&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return e.prototype.resetCaching=function(){this.d=this.caching?xv():null,this.keyMaker=new Jy(pl)},e.prototype.depend=function(e,t){if(this.d){this.d(G_(e,t));var n=x_(t);n!==t&&this.d(G_(e,n)),this.parent&&this.parent.depend(e,t)}},e.prototype.dirty=function(e,t){this.d&&this.d.dirty(G_(e,t),"__exists"===t?"forget":"setDirty")},e}();function G_(e,t){return t+"#"+e}function z_(e,t){$_(e)&&e.group.depend(t,"__exists")}!function(e){var t=function(e){function t(t){var n=t.policies,r=t.resultCaching,o=void 0===r||r,i=t.seed,a=e.call(this,n,new K_(o))||this;return a.stump=new W_(a),a.storageTrie=new Jy(pl),i&&a.replace(i),a}return Fs(t,e),t.prototype.addLayer=function(e,t){return this.stump.addLayer(e,t)},t.prototype.removeLayer=function(){return this},t.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},t}(e);e.Root=t}(Q_||(Q_={}));var V_=function(e){function t(t,n,r,o){var i=e.call(this,n.policies,o)||this;return i.id=t,i.parent=n,i.replay=r,i.group=o,r(i),i}return Fs(t,e),t.prototype.addLayer=function(e,n){return new t(e,this,n,this.group)},t.prototype.removeLayer=function(e){var t=this,n=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach((function(e){var r=t.data[e],o=n.lookup(e);o?r?r!==o&&Object.keys(r).forEach((function(n){iu(r[n],o[n])||t.group.dirty(e,n)})):(t.group.dirty(e,"__exists"),Object.keys(o).forEach((function(n){t.group.dirty(e,n)}))):t.delete(e)})),n):n===this.parent?this:n.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return Ls(Ls({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(t){var n=this.parent.findChildRefIds(t);return O_.call(this.data,t)?Ls(Ls({},n),e.prototype.findChildRefIds.call(this,t)):n},t.prototype.getStorage=function(){for(var e=this.parent;e.parent;)e=e.parent;return e.getStorage.apply(e,arguments)},t}(Q_),W_=function(e){function t(t){return e.call(this,"EntityStore.Stump",t,(function(){}),new K_(t.group.caching,t.group))||this}return Fs(t,e),t.prototype.removeLayer=function(){return this},t.prototype.merge=function(e,t){return this.parent.merge(e,t)},t}(V_);function Y_(e,t,n){var r=e[n],o=t[n];return iu(r,o)?r:o}function $_(e){return!!(e instanceof Q_&&e.group.caching)}var J_=function(){function e(){this.known=new(fl?WeakSet:Set),this.pool=new Jy(pl),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return e.prototype.isKnown=function(e){return ll(e)&&this.known.has(e)},e.prototype.pass=function(e){if(ll(e)){var t=function(e){return ll(e)?Ol(e)?e.slice(0):Ls({__proto__:Object.getPrototypeOf(e)},e):e}(e);return this.passes.set(t,e),t}return e},e.prototype.admit=function(e){var t=this;if(ll(e)){var n=this.passes.get(e);if(n)return n;switch(Object.getPrototypeOf(e)){case Array.prototype:if(this.known.has(e))return e;var r=e.map(this.admit,this);return(s=this.pool.lookupArray(r)).array||(this.known.add(s.array=r),!1!==globalThis.__DEV__&&Object.freeze(r)),s.array;case null:case Object.prototype:if(this.known.has(e))return e;var o=Object.getPrototypeOf(e),i=[o],a=this.sortedKeys(e);i.push(a.json);var s,c=i.length;if(a.sorted.forEach((function(n){i.push(t.admit(e[n]))})),!(s=this.pool.lookupArray(i)).object){var u=s.object=Object.create(o);this.known.add(u),a.sorted.forEach((function(e,t){u[e]=i[c+t]})),!1!==globalThis.__DEV__&&Object.freeze(u)}return s.object}}return e},e.prototype.sortedKeys=function(e){var t=Object.keys(e),n=this.pool.lookupArray(t);if(!n.keys){t.sort();var r=JSON.stringify(t);(n.keys=this.keysByJSON.get(r))||this.keysByJSON.set(r,n.keys={sorted:t,json:r})}return n.keys},e}();function X_(e){return[e.selectionSet,e.objectOrReference,e.context,e.context.canonizeResults]}var Z_=function(){function e(e){var t=this;this.knownResults=new(pl?WeakMap:Map),this.config=Zc(e,{addTypename:!1!==e.addTypename,canonizeResults:D_(e)}),this.canon=e.canon||new J_,this.executeSelectionSet=Bv((function(e){var n,r=e.context.canonizeResults,o=X_(e);o[3]=!r;var i=(n=t.executeSelectionSet).peek.apply(n,o);return i?r?Ls(Ls({},i),{result:t.canon.admit(i.result)}):i:(z_(e.context.store,e.enclosingRef.__ref),t.execSelectionSetImpl(e))}),{max:this.config.resultCacheMaxSize||Vu["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:X_,makeCacheKey:function(e,t,n,r){if($_(n.store))return n.store.makeCacheKey(e,Dg(t)?t.__ref:t,n.varString,r)}}),this.executeSubSelectedArray=Bv((function(e){return z_(e.context.store,e.enclosingRef.__ref),t.execSubSelectedArrayImpl(e)}),{max:this.config.resultCacheMaxSize||Vu["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(e){var t=e.field,n=e.array,r=e.context;if($_(r.store))return r.store.makeCacheKey(t,n,r.varString)}})}return e.prototype.resetCanon=function(){this.canon=new J_},e.prototype.diffQueryAgainstStore=function(e){var t=e.store,n=e.query,r=e.rootId,o=void 0===r?"ROOT_QUERY":r,i=e.variables,a=e.returnPartialData,s=void 0===a||a,c=e.canonizeResults,u=void 0===c?this.config.canonizeResults:c,l=this.config.cache.policies;i=Ls(Ls({},Yg(Vg(n))),i);var d,h=Mg(o),p=this.executeSelectionSet({selectionSet:Wg(n).selectionSet,objectOrReference:h,enclosingRef:h,context:Ls({store:t,query:n,policies:l,variables:i,varString:Og(i),canonizeResults:u},U_(n,this.config.fragments))});if(p.missing&&(d=[new R_(eb(p.missing),p.missing,n,i)],!s))throw d[0];return{result:p.result,complete:!d,missing:d}},e.prototype.isFresh=function(e,t,n,r){if($_(r.store)&&this.knownResults.get(e)===n){var o=this.executeSelectionSet.peek(n,t,r,this.canon.isKnown(e));if(o&&e===o.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(e){var t=this,n=e.selectionSet,r=e.objectOrReference,o=e.enclosingRef,i=e.context;if(Dg(r)&&!i.policies.rootTypenamesById[r.__ref]&&!i.store.has(r.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(r.__ref," object")};var a,s=i.variables,c=i.policies,u=i.store.getFieldValue(r,"__typename"),l=[],d=new my;function h(e,t){var n;return e.missing&&(a=d.merge(a,((n={})[t]=e.missing,n))),e.result}this.config.addTypename&&"string"==typeof u&&!c.rootIdsByTypename[u]&&l.push({__typename:u});var p=new Set(n.selections);p.forEach((function(e){var n,f;if(oy(e,s))if(jg(e)){var m=c.readField({fieldName:e.name.value,field:e,variables:i.variables,from:r},i),g=Bg(e);void 0===m?By.added(e)||(a=d.merge(a,((n={})[g]="Can't find field '".concat(e.name.value,"' on ").concat(Dg(r)?r.__ref+" object":"object "+JSON.stringify(r,null,2)),n))):Ol(m)?m=h(t.executeSubSelectedArray({field:e,array:m,enclosingRef:o,context:i}),g):e.selectionSet?null!=m&&(m=h(t.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:m,enclosingRef:Dg(m)?m:o,context:i}),g)):i.canonizeResults&&(m=t.canon.pass(m)),void 0!==m&&l.push(((f={})[g]=m,f))}else{var y=Ag(e,i.lookupFragment);if(!y&&e.kind===lc.FRAGMENT_SPREAD)throw Ru(9,e.name.value);y&&c.fragmentMatches(y,u)&&y.selectionSet.selections.forEach(p.add,p)}}));var f={result:py(l),missing:a},m=i.canonizeResults?this.canon.admit(f):Rl(f);return m.result&&this.knownResults.set(m.result,n),m},e.prototype.execSubSelectedArrayImpl=function(e){var t,n=this,r=e.field,o=e.array,i=e.enclosingRef,a=e.context,s=new my;function c(e,n){var r;return e.missing&&(t=s.merge(t,((r={})[n]=e.missing,r))),e.result}return r.selectionSet&&(o=o.filter(a.store.canRead)),o=o.map((function(e,t){return null===e?null:Ol(e)?c(n.executeSubSelectedArray({field:r,array:e,enclosingRef:i,context:a}),t):r.selectionSet?c(n.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:e,enclosingRef:Dg(e)?e:i,context:a}),t):(!1!==globalThis.__DEV__&&function(e,t,n){if(!t.selectionSet){var r=new Set([n]);r.forEach((function(n){ll(n)&&(Au(!Dg(n),10,function(e,t){return Dg(t)?e.get(t.__ref,"__typename"):t&&t.__typename}(e,n),t.name.value),Object.values(n).forEach(r.add,r))}))}}(a.store,r,e),e)})),{result:a.canonizeResults?this.canon.admit(o):o,missing:t}},e}();function eb(e){try{JSON.stringify(e,(function(e,t){if("string"==typeof t)throw t;return t}))}catch(e){return e}}var tb=Object.create(null);function nb(e){var t=JSON.stringify(e);return tb[t]||(tb[t]=Object.create(null))}function rb(e){var t=nb(e);return t.keyFieldsFn||(t.keyFieldsFn=function(t,n){var r=function(e,t){return n.readField(t,e)},o=n.keyObject=ib(e,(function(e){var o=cb(n.storeObject,e,r);return void 0===o&&t!==n.storeObject&&O_.call(t,e[0])&&(o=cb(t,e,sb)),Au(void 0!==o,4,e.join("."),t),o}));return"".concat(n.typename,":").concat(JSON.stringify(o))})}function ob(e){var t=nb(e);return t.keyArgsFn||(t.keyArgsFn=function(t,n){var r=n.field,o=n.variables,i=n.fieldName,a=ib(e,(function(e){var n=e[0],i=n.charAt(0);if("@"!==i)if("$"!==i){if(t)return cb(t,e)}else{var a=n.slice(1);if(o&&O_.call(o,a)){var s=e.slice(0);return s[0]=a,cb(o,s)}}else if(r&&Nl(r.directives)){var c=n.slice(1),u=r.directives.find((function(e){return e.name.value===c})),l=u&&Ug(u,o);return l&&cb(l,e.slice(1))}})),s=JSON.stringify(a);return(t||"{}"!==s)&&(i+=":"+s),i})}function ib(e,t){var n=new my;return ab(e).reduce((function(e,r){var o,i=t(r);if(void 0!==i){for(var a=r.length-1;a>=0;--a)(o={})[r[a]]=i,i=o;e=n.merge(e,i)}return e}),Object.create(null))}function ab(e){var t=nb(e);if(!t.paths){var n=t.paths=[],r=[];e.forEach((function(t,o){Ol(t)?(ab(t).forEach((function(e){return n.push(r.concat(e))})),r.length=0):(r.push(t),Ol(e[o+1])||(n.push(r.slice(0)),r.length=0))}))}return t.paths}function sb(e,t){return e[t]}function cb(e,t,n){return n=n||sb,ub(t.reduce((function e(t,r){return Ol(t)?t.map((function(t){return e(t,r)})):t&&n(t,r)}),e))}function ub(e){return ll(e)?Ol(e)?e.map(ub):ib(Object.keys(e).sort(),(function(t){return cb(e,t)})):e}function lb(e){return void 0!==e.args?e.args:e.field?Ug(e.field,e.variables):null}var db=function(){},hb=function(e,t){return t.fieldName},pb=function(e,t,n){return(0,n.mergeObjects)(e,t)},fb=function(e,t){return t},mb=function(){function e(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=Ls({dataIdFromObject:P_},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return e.prototype.identify=function(e,t){var n,r=this,o=t&&(t.typename||(null===(n=t.storeObject)||void 0===n?void 0:n.__typename))||e.__typename;if(o===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var i,a=t&&t.storeObject||e,s=Ls(Ls({},t),{typename:o,storeObject:a,readField:t&&t.readField||function(){var e=yb(arguments,a);return r.readField(e,{store:r.cache.data,variables:e.variables})}}),c=o&&this.getTypePolicy(o),u=c&&c.keyFn||this.config.dataIdFromObject;u;){var l=u(Ls(Ls({},e),a),s);if(!Ol(l)){i=l;break}u=rb(l)}return i=i?String(i):void 0,s.keyObject?[i,s.keyObject]:[i]},e.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],o=r.queryType,i=r.mutationType,a=r.subscriptionType,s=Us(r,["queryType","mutationType","subscriptionType"]);o&&t.setRootTypename("Query",n),i&&t.setRootTypename("Mutation",n),a&&t.setRootTypename("Subscription",n),O_.call(t.toBeAdded,n)?t.toBeAdded[n].push(s):t.toBeAdded[n]=[s]}))},e.prototype.updateTypePolicy=function(e,t){var n=this,r=this.getTypePolicy(e),o=t.keyFields,i=t.fields;function a(e,t){e.merge="function"==typeof t?t:!0===t?pb:!1===t?fb:e.merge}a(r,t.merge),r.keyFn=!1===o?db:Ol(o)?rb(o):"function"==typeof o?o:r.keyFn,i&&Object.keys(i).forEach((function(t){var r=n.getFieldPolicy(e,t,!0),o=i[t];if("function"==typeof o)r.read=o;else{var s=o.keyArgs,c=o.read,u=o.merge;r.keyFn=!1===s?hb:Ol(s)?ob(s):"function"==typeof s?s:r.keyFn,"function"==typeof c&&(r.read=c),a(r,u)}r.read&&r.merge&&(r.keyFn=r.keyFn||hb)}))},e.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var n="ROOT_"+e.toUpperCase(),r=this.rootTypenamesById[n];t!==r&&(Au(!r||r===e,5,e),r&&delete this.rootIdsByTypename[r],this.rootIdsByTypename[t]=n,this.rootTypenamesById[n]=t)},e.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach((function(n){t.getSupertypeSet(n,!0),e[n].forEach((function(e){t.getSupertypeSet(e,!0).add(n);var r=e.match(q_);r&&r[0]===e||t.fuzzySubtypes.set(e,new RegExp(e))}))}))},e.prototype.getTypePolicy=function(e){var t=this;if(!O_.call(this.typePolicies,e)){var n=this.typePolicies[e]=Object.create(null);n.fields=Object.create(null);var r=this.supertypeMap.get(e);!r&&this.fuzzySubtypes.size&&(r=this.getSupertypeSet(e,!0),this.fuzzySubtypes.forEach((function(n,o){if(n.test(e)){var i=t.supertypeMap.get(o);i&&i.forEach((function(e){return r.add(e)}))}}))),r&&r.size&&r.forEach((function(e){var r=t.getTypePolicy(e),o=r.fields,i=Us(r,["fields"]);Object.assign(n,i),Object.assign(n.fields,o)}))}var o=this.toBeAdded[e];return o&&o.length&&o.splice(0).forEach((function(n){t.updateTypePolicy(e,n)})),this.typePolicies[e]},e.prototype.getFieldPolicy=function(e,t,n){if(e){var r=this.getTypePolicy(e).fields;return r[t]||n&&(r[t]=Object.create(null))}},e.prototype.getSupertypeSet=function(e,t){var n=this.supertypeMap.get(e);return!n&&t&&this.supertypeMap.set(e,n=new Set),n},e.prototype.fragmentMatches=function(e,t,n,r){var o=this;if(!e.typeCondition)return!0;if(!t)return!1;var i=e.typeCondition.name.value;if(t===i)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(i))for(var a=this.getSupertypeSet(t,!0),s=[a],c=function(e){var t=o.getSupertypeSet(e,!1);t&&t.size&&s.indexOf(t)<0&&s.push(t)},u=!(!n||!this.fuzzySubtypes.size),l=!1,d=0;d<s.length;++d){var h=s[d];if(h.has(i))return a.has(i)||(l&&!1!==globalThis.__DEV__&&Au.warn(6,t,i),a.add(i)),!0;h.forEach(c),u&&d===s.length-1&&F_(e.selectionSet,n,r)&&(u=!1,l=!0,this.fuzzySubtypes.forEach((function(e,n){var r=t.match(e);r&&r[0]===t&&c(n)})))}return!1},e.prototype.hasKeyArgs=function(e,t){var n=this.getFieldPolicy(e,t,!1);return!(!n||!n.keyFn)},e.prototype.getStoreFieldName=function(e){var t,n=e.typename,r=e.fieldName,o=this.getFieldPolicy(n,r,!1),i=o&&o.keyFn;if(i&&n)for(var a={typename:n,fieldName:r,field:e.field||null,variables:e.variables},s=lb(e);i;){var c=i(s,a);if(!Ol(c)){t=c||r;break}i=ob(c)}return void 0===t&&(t=e.field?function(e,t){var n=null;e.directives&&(n={},e.directives.forEach((function(e){n[e.name.value]={},e.arguments&&e.arguments.forEach((function(r){var o=r.name,i=r.value;return qg(n[e.name.value],o,i,t)}))})));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach((function(e){var n=e.name,o=e.value;return qg(r,n,o,t)}))),Lg(e.name.value,r,n)}(e.field,e.variables):Lg(r,lb(e))),!1===t?r:r===x_(t)?t:r+":"+t},e.prototype.readField=function(e,t){var n=e.from;if(n&&(e.field||e.fieldName)){if(void 0===e.typename){var r=t.store.getFieldValue(n,"__typename");r&&(e.typename=r)}var o=this.getStoreFieldName(e),i=x_(o),a=t.store.getFieldValue(n,o),s=this.getFieldPolicy(e.typename,i,!1),c=s&&s.read;if(c){var u=gb(this,n,e,t,t.store.getStorage(Dg(n)?n.__ref:n,o));return d_.withValue(this.cache,c,[a,u])}return a}},e.prototype.getReadFunction=function(e,t){var n=this.getFieldPolicy(e,t,!1);return n&&n.read},e.prototype.getMergeFunction=function(e,t,n){var r=this.getFieldPolicy(e,t,!1),o=r&&r.merge;return!o&&n&&(o=(r=this.getTypePolicy(n))&&r.merge),o},e.prototype.runMergeFunction=function(e,t,n,r,o){var i=n.field,a=n.typename,s=n.merge;return s===pb?vb(r.store)(e,t):s===fb?t:(r.overwrite&&(e=void 0),s(e,t,gb(this,void 0,{typename:a,fieldName:i.name.value,field:i,variables:r.variables},r,o||Object.create(null))))},e}();function gb(e,t,n,r,o){var i=e.getStoreFieldName(n),a=x_(i),s=n.variables||r.variables,c=r.store,u=c.toReference,l=c.canRead;return{args:lb(n),field:n.field||null,fieldName:a,storeFieldName:i,variables:s,isReference:Dg,toReference:u,storage:o,cache:e.cache,canRead:l,readField:function(){return e.readField(yb(arguments,t,s),r)},mergeObjects:vb(r.store)}}function yb(e,t,n){var r,o=e[0],i=e[1],a=e.length;return"string"==typeof o?r={fieldName:o,from:a>1?i:t}:(r=Ls({},o),O_.call(r,"from")||(r.from=t)),!1!==globalThis.__DEV__&&void 0===r.from&&!1!==globalThis.__DEV__&&Au.warn(7,ku(Array.from(e))),void 0===r.variables&&(r.variables=n),r}function vb(e){return function(t,n){if(Ol(t)||Ol(n))throw Ru(8);if(ll(t)&&ll(n)){var r=e.getFieldValue(t,"__typename"),o=e.getFieldValue(n,"__typename");if(r&&o&&r!==o)return n;if(Dg(t)&&L_(n))return e.merge(t.__ref,n),t;if(L_(t)&&Dg(n))return e.merge(t,n.__ref),n;if(L_(t)&&L_(n))return Ls(Ls({},t),n)}return n}}function _b(e,t,n){var r="".concat(t).concat(n),o=e.flavors.get(r);return o||e.flavors.set(r,o=e.clientOnly===t&&e.deferred===n?e:Ls(Ls({},e),{clientOnly:t,deferred:n})),o}var bb=function(){function e(e,t,n){this.cache=e,this.reader=t,this.fragments=n}return e.prototype.writeToStore=function(e,t){var n=this,r=t.query,o=t.result,i=t.dataId,a=t.variables,s=t.overwrite,c=Kg(r),u=new my;a=Ls(Ls({},Yg(c)),a);var l=Ls(Ls({store:e,written:Object.create(null),merge:function(e,t){return u.merge(e,t)},variables:a,varString:Og(a)},U_(r,this.fragments)),{overwrite:!!s,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),d=this.processSelectionSet({result:o||Object.create(null),dataId:i,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:l});if(!Dg(d))throw Ru(11,o);return l.incomingById.forEach((function(t,r){var o=t.storeObject,i=t.mergeTree,a=t.fieldNodeSet,s=Mg(r);if(i&&i.map.size){var c=n.applyMerges(i,s,o,l);if(Dg(c))return;o=c}if(!1!==globalThis.__DEV__&&!l.overwrite){var u=Object.create(null);a.forEach((function(e){e.selectionSet&&(u[e.name.value]=!0)})),Object.keys(o).forEach((function(e){(function(e){return!0===u[x_(e)]})(e)&&!function(e){var t=i&&i.map.get(e);return Boolean(t&&t.info&&t.info.merge)}(e)&&function(e,t,n,r){var o=function(e){var t=r.getFieldValue(e,n);return"object"==typeof t&&t},i=o(e);if(i){var a=o(t);if(a&&!Dg(i)&&!iu(i,a)&&!Object.keys(i).every((function(e){return void 0!==r.getFieldValue(a,e)}))){var s=r.getFieldValue(e,"__typename")||r.getFieldValue(t,"__typename"),c=x_(n),u="".concat(s,".").concat(c);if(!kb.has(u)){kb.add(u);var l=[];Ol(i)||Ol(a)||[i,a].forEach((function(e){var t=r.getFieldValue(e,"__typename");"string"!=typeof t||l.includes(t)||l.push(t)})),!1!==globalThis.__DEV__&&Au.warn(14,c,s,l.length?"either ensure all objects of type "+l.join(" and ")+" have an ID or a custom merge function, or ":"",u,i,a)}}}}(s,o,e,l.store)}))}e.merge(r,o)})),e.retain(d.__ref),d},e.prototype.processSelectionSet=function(e){var t=this,n=e.dataId,r=e.result,o=e.selectionSet,i=e.context,a=e.mergeTree,s=this.cache.policies,c=Object.create(null),u=n&&s.rootTypenamesById[n]||Hg(r,o,i.fragmentMap)||n&&i.store.get(n,"__typename");"string"==typeof u&&(c.__typename=u);var l=function(){var e=yb(arguments,c,i.variables);if(Dg(e.from)){var t=i.incomingById.get(e.from.__ref);if(t){var n=s.readField(Ls(Ls({},e),{from:t.storeObject}),i);if(void 0!==n)return n}}return s.readField(e,i)},d=new Set;this.flattenFields(o,r,i,u).forEach((function(e,n){var o,i=Bg(n),h=r[i];if(d.add(n),void 0!==h){var p=s.getStoreFieldName({typename:u,fieldName:n.name.value,field:n,variables:e.variables}),f=Eb(a,p),m=t.processFieldValue(h,n,n.selectionSet?_b(e,!1,!1):e,f),g=void 0;n.selectionSet&&(Dg(m)||L_(m))&&(g=l("__typename",m));var y=s.getMergeFunction(u,n.name.value,g);y?f.info={field:n,typename:u,merge:y}:Ib(a,p),c=e.merge(c,((o={})[p]=m,o))}else!1===globalThis.__DEV__||e.clientOnly||e.deferred||By.added(n)||s.getReadFunction(u,n.name.value)||!1!==globalThis.__DEV__&&Au.error(12,Bg(n),r)}));try{var h=s.identify(r,{typename:u,selectionSet:o,fragmentMap:i.fragmentMap,storeObject:c,readField:l}),p=h[0],f=h[1];n=n||p,f&&(c=i.merge(c,f))}catch(e){if(!n)throw e}if("string"==typeof n){var m=Mg(n),g=i.written[n]||(i.written[n]=[]);if(g.indexOf(o)>=0)return m;if(g.push(o),this.reader&&this.reader.isFresh(r,m,o,i))return m;var y=i.incomingById.get(n);return y?(y.storeObject=i.merge(y.storeObject,c),y.mergeTree=Tb(y.mergeTree,a),d.forEach((function(e){return y.fieldNodeSet.add(e)}))):i.incomingById.set(n,{storeObject:c,mergeTree:wb(a)?void 0:a,fieldNodeSet:d}),m}return c},e.prototype.processFieldValue=function(e,t,n,r){var o=this;return t.selectionSet&&null!==e?Ol(e)?e.map((function(e,i){var a=o.processFieldValue(e,t,n,Eb(r,i));return Ib(r,i),a})):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:n,mergeTree:r}):!1!==globalThis.__DEV__?Jv(e):e},e.prototype.flattenFields=function(e,t,n,r){void 0===r&&(r=Hg(t,e,n.fragmentMap));var o=new Map,i=this.cache.policies,a=new Jy(!1);return function e(s,c){var u=a.lookup(s,c.clientOnly,c.deferred);u.visited||(u.visited=!0,s.selections.forEach((function(a){if(oy(a,n.variables)){var s=c.clientOnly,u=c.deferred;if(s&&u||!Nl(a.directives)||a.directives.forEach((function(e){var t=e.name.value;if("client"===t&&(s=!0),"defer"===t){var r=Ug(e,n.variables);r&&!1===r.if||(u=!0)}})),jg(a)){var l=o.get(a);l&&(s=s&&l.clientOnly,u=u&&l.deferred),o.set(a,_b(n,s,u))}else{var d=Ag(a,n.lookupFragment);if(!d&&a.kind===lc.FRAGMENT_SPREAD)throw Ru(13,a.name.value);d&&i.fragmentMatches(d,r,t,n.variables)&&e(d.selectionSet,_b(n,s,u))}}})))}(e,n),o},e.prototype.applyMerges=function(e,t,n,r,o){var i,a=this;if(e.map.size&&!Dg(n)){var s,c=Ol(n)||!Dg(t)&&!L_(t)?void 0:t,u=n;c&&!o&&(o=[Dg(c)?c.__ref:c]);var l=function(e,t){return Ol(e)?"number"==typeof t?e[t]:void 0:r.store.getFieldValue(e,String(t))};e.map.forEach((function(e,t){var n=l(c,t),i=l(u,t);if(void 0!==i){o&&o.push(t);var d=a.applyMerges(e,n,i,r,o);d!==i&&(s=s||new Map).set(t,d),o&&Au(o.pop()===t)}})),s&&(n=Ol(u)?u.slice(0):Ls({},u),s.forEach((function(e,t){n[t]=e})))}return e.info?this.cache.policies.runMergeFunction(t,n,e.info,r,o&&(i=r.store).getStorage.apply(i,o)):n},e}(),Cb=[];function Eb(e,t){var n=e.map;return n.has(t)||n.set(t,Cb.pop()||{map:new Map}),n.get(t)}function Tb(e,t){if(e===t||!t||wb(t))return e;if(!e||wb(e))return t;var n=e.info&&t.info?Ls(Ls({},e.info),t.info):e.info||t.info,r=e.map.size&&t.map.size,o={info:n,map:r?new Map:e.map.size?e.map:t.map};if(r){var i=new Set(t.map.keys());e.map.forEach((function(e,n){o.map.set(n,Tb(e,t.map.get(n))),i.delete(n)})),i.forEach((function(n){o.map.set(n,Tb(t.map.get(n),e.map.get(n)))}))}return o}function wb(e){return!e||!(e.info||e.map.size)}function Ib(e,t){var n=e.map,r=n.get(t);r&&wb(r)&&(Cb.push(r),n.delete(t))}var kb=new Set,Sb=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.watches=new Set,n.addTypenameTransform=new jv(By),n.assumeImmutableResults=!0,n.makeVar=m_,n.txCount=0,n.config=function(e){return Zc(M_,e)}(t),n.addTypename=!!n.config.addTypename,n.policies=new mb({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.init(),n}return Fs(t,e),t.prototype.init=function(){var e=this.data=new Q_.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=e.stump,this.resetResultCache()},t.prototype.resetResultCache=function(e){var t=this,n=this.storeReader,r=this.config.fragments;this.storeWriter=new bb(this,this.storeReader=new Z_({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:D_(this.config),canon:e?void 0:n&&n.canon,fragments:r}),r),this.maybeBroadcastWatch=Bv((function(e,n){return t.broadcastWatch(e,n)}),{max:this.config.resultCacheMaxSize||Vu["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(e){var n=e.optimistic?t.optimisticData:t.data;if($_(n)){var r=e.optimistic,o=e.id,i=e.variables;return n.makeCacheKey(e.query,e.callback,Og({optimistic:r,id:o,variables:i}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach((function(e){return e.resetCaching()}))},t.prototype.restore=function(e){return this.init(),e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var t=e.returnPartialData,n=void 0!==t&&t;try{return this.storeReader.diffQueryAgainstStore(Ls(Ls({},e),{store:e.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:n})).result||null}catch(e){if(e instanceof R_)return null;throw e}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore(this.data,e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.modify=function(e){if(O_.call(e,"id")&&!e.id)return!1;var t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore(Ls(Ls({},e),{store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(e){var t=this;return this.watches.size||function(e){p_(e).vars.forEach((function(t){return t.attachCache(e)}))}(this),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){t.watches.delete(e)&&!t.watches.size&&f_(t),t.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(e){var t;Og.reset(),Ny.reset(),this.addTypenameTransform.resetCache(),null===(t=this.config.fragments)||void 0===t||t.resetCaches();var n=this.optimisticData.gc();return e&&!this.txCount&&(e.resetResultCache?this.resetResultCache(e.resetResultIdentities):e.resetResultIdentities&&this.storeReader.resetCanon()),n},t.prototype.retain=function(e,t){return(t?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,t){return(t?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){if(Dg(e))return e.__ref;try{return this.policies.identify(e)[0]}catch(e){!1!==globalThis.__DEV__&&Au.warn(e)}},t.prototype.evict=function(e){if(!e.id){if(O_.call(e,"id"))return!1;e=Ls(Ls({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e,this.data)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.reset=function(e){var t=this;return this.init(),Og.reset(),e&&e.discardWatches?(this.watches.forEach((function(e){return t.maybeBroadcastWatch.forget(e)})),this.watches.clear(),f_(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())},t.prototype.batch=function(e){var t,n=this,r=e.update,o=e.optimistic,i=void 0===o||o,a=e.removeOptimistic,s=e.onWatchUpdated,c=function(e){var o=n,i=o.data,a=o.optimisticData;++n.txCount,e&&(n.data=n.optimisticData=e);try{return t=r(n)}finally{--n.txCount,n.data=i,n.optimisticData=a}},u=new Set;return s&&!this.txCount&&this.broadcastWatches(Ls(Ls({},e),{onWatchUpdated:function(e){return u.add(e),!1}})),"string"==typeof i?this.optimisticData=this.optimisticData.addLayer(i,c):!1===i?c(this.data):c(),"string"==typeof a&&(this.optimisticData=this.optimisticData.removeLayer(a)),s&&u.size?(this.broadcastWatches(Ls(Ls({},e),{onWatchUpdated:function(e,t){var n=s.call(this,e,t);return!1!==n&&u.delete(e),n}})),u.size&&u.forEach((function(e){return n.maybeBroadcastWatch.dirty(e)}))):this.broadcastWatches(e),t},t.prototype.performTransaction=function(e,t){return this.batch({update:e,optimistic:t||null!==t})},t.prototype.transformDocument=function(e){return this.addTypenameToDocument(this.addFragmentsToDocument(e))},t.prototype.broadcastWatches=function(e){var t=this;this.txCount||this.watches.forEach((function(n){return t.maybeBroadcastWatch(n,e)}))},t.prototype.addFragmentsToDocument=function(e){var t=this.config.fragments;return t?t.transform(e):e},t.prototype.addTypenameToDocument=function(e){return this.addTypename?this.addTypenameTransform.transformDocument(e):e},t.prototype.broadcastWatch=function(e,t){var n=e.lastDiff,r=this.diff(e);t&&(e.optimistic&&"string"==typeof t.optimistic&&(r.fromOptimisticTransaction=!0),t.onWatchUpdated&&!1===t.onWatchUpdated.call(this,e,r,n))||n&&iu(n.result,r.result)||e.callback(e.lastDiff=r,n)},t}(A_);!1!==globalThis.__DEV__&&(Sb.prototype.getMemoryInternals=Zu);var Ab=function(e){var t=e.client,n=e.children,r=Cl(),o=Jc.useContext(r),i=Jc.useMemo((function(){return Ls(Ls({},o),{client:t||o.client})}),[o,t]);return Au(i.client,46),Jc.createElement(r.Provider,{value:i},n)};function Rb(e){return new Zg((function(t,n){return new Ig((function(r){var o,i,a;try{o=n(t).subscribe({next:function(o){o.errors&&(a=e({graphQLErrors:o.errors,response:o,operation:t,forward:n}))?i=a.subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:r.complete.bind(r)}):r.next(o)},error:function(o){(a=e({operation:t,networkError:o,graphQLErrors:o&&o.result&&o.result.errors,forward:n}))?i=a.subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:r.complete.bind(r)}):r.error(o)},complete:function(){a||r.complete.bind(r)()}})}catch(o){e({networkError:o,operation:t,forward:n}),r.error(o)}return function(){o&&o.unsubscribe(),i&&o.unsubscribe()}}))}))}!function(e){function t(t){var n=e.call(this)||this;return n.link=Rb(t),n}Fs(t,e),t.prototype.request=function(e,t){return this.link.request(e,t)}}(Zg);var Ob=a(624);function Nb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nb(Object(n),!0).forEach((function(t){Ds(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mb(e){var n,r,o=e.children,i=rg(),a=i.instance,s=i.inProgress,c=i.accounts,u=function(){var e=t(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>0&&s===ie.None)){e.next=16;break}return t={scopes:["api://bce3a488-22ef-4757-a375-bc1b1bd0d4f7/api"],account:c[0]},e.prev=2,e.next=5,a.acquireTokenSilent(t);case 5:return n=e.sent,e.abrupt("return",n.accessToken);case 9:if(e.prev=9,e.t0=e.catch(2),!(e.t0 instanceof be)){e.next=16;break}return e.next=14,a.acquireTokenPopup(t);case 14:return r=e.sent,e.abrupt("return",r.accessToken);case 16:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),l=(r=function(){var e=t(regeneratorRuntime.mark((function e(t,r){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.headers,i=void 0===o?{}:o,e.next=3,u();case 3:return n=e.sent,e.abrupt("return",{headers:Pb(Pb({},i),{},{authorization:"Bearer ".concat(n)})});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),new Zg((function(e,t){var n=Us(e,[]);return new Ig((function(o){var i,a=!1;return Promise.resolve(n).then((function(t){return r(t,e.getContext())})).then(e.setContext).then((function(){a||(i=t(e).subscribe({next:o.next.bind(o),error:o.error.bind(o),complete:o.complete.bind(o)}))})).catch(o.error.bind(o)),function(){a=!0,i&&i.unsubscribe()}}))}))),d=new Zg((function(e,t){if(n)return e.setContext((function(e){var t=e.headers;return{headers:Pb(Pb({},void 0===t?{}:t),{},{authorization:"Bearer ".concat(n)})}})),t(e)})),h=Rb((function(e){var r,o=e.networkError,i=e.operation,a=e.forward;return o&&"ServerError"===o.name&&401===(null===(r=o.result)||void 0===r||null===(r=r.errors[0])||void 0===r||null===(r=r.extensions)||void 0===r||null===(r=r.http)||void 0===r?void 0:r.status)&&(n=null,i.setContext(function(){var e=t(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.headers,o=void 0===r?{}:r,e.next=3,u();case 3:return n=e.sent,e.abrupt("return",{headers:Pb(Pb({},o),{},{authorization:"Bearer ".concat(n)})});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),a(i)})),p=l.concat(d).concat(h),f=Ky({uri:"https://api.igerminare.org.br/api/graphql"}),m=new k_({link:S_([p,f]),cache:new Sb,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}});return(0,Ob.jsx)(Ab,{client:m,children:o})}var Db=function(e){var t=e.children;return(0,Ob.jsx)(ng,{instance:Is,children:(0,Ob.jsx)(Mb,{children:t})})},qb=function(){var e=zm((0,Vm.useState)(window.location.pathname),2),t=e[0],n=e[1],r=function(){var e=window.location.pathname;n(e)};return(0,Vm.useEffect)((function(){return window.addEventListener("popstate",r),function(){return window.removeEventListener("popstate",r)}}),[]),t};var xb=function(){var e=zm((0,Vm.useState)([]),2),n=e[0],r=e[1],o=zm((0,Vm.useState)([]),2),i=o[0],a=o[1],s=zm((0,Vm.useState)(!1),2),c=s[0],u=s[1],l=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t),a(Array(t.length).fill({}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,Vm.useEffect)((function(){n.length&&d()}),[n]);var d=function(){var e=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,Promise.all(n.map(function(){var e=t(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:u(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=t(regeneratorRuntime.mark((function e(t,n){var r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.file,o=t.url,e.next=4,fetch(o,{method:"PUT",headers:{"x-ms-blob-type":"BlockBlob"},body:r});case 4:i=e.sent,p("status",i.status,n),p("statusText",i.statusText,n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),p("error",e.t0,n);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(e,t,n){var r,o=function(e){if(Array.isArray(e))return Km(e)}(r=i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||Gm(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();o[n][e]=t,a(o)};return{prepareForUpload:l,results:i,loading:c}},Fb=function(e){return e.toString().normalize("NFKD").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-")}})(),s})())}}}));
//# sourceMappingURL=germinare-utils.js.map