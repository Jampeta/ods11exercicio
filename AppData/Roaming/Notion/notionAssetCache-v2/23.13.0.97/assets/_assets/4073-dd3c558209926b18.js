"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4073],{97820:(e,t,n)=>{n.d(t,{Z:()=>p,o:()=>g});n(67294);var o=n(480),i=n(86628),r=n(24405),l=n(99036),s=n(12396),c=n(82990),a=n(19124),d=n(76836),u=n(85893);const h={display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0};const p=function(e){let{propertySchema:t,showIcon:n,hideName:i,badge:r,style:l,iconStyle:s,iconSize:a}=e;window.__c={n:"Property"};const d=(0,o.O7)(),{device:p}=d,g=p.isMobile?16:14;return(0,u.jsxs)("div",{style:{...h,fontSize:g,...l},children:[n&&(0,u.jsx)("div",{style:f(Boolean(i),s),children:(0,u.jsx)(v,{propertySchema:t,iconSize:a,iconStyle:s})}),!i&&(0,u.jsx)("div",{style:{...c.Z.textOverflowStyle},children:t.name}),r]})};function f(e,t){return{marginRight:e?void 0:6,...t}}function g(e){let{propertySchema:t}=e;window.__c={n:"AIPropertyBadgeMaybe"};const n=(0,o.O7)();return(0,i.VK)((()=>(0,a.Zt)(n)&&l.qQ(t)&&l.q3(t)&&("text"===t.type||(0,a.KZ)())),[n,t])?(0,u.jsx)(d.Z,{}):null}function v(e){let{propertySchema:t,iconSize:n,iconStyle:i}=e;window.__c={n:"IconComponent"};const l=(0,r.Fg)(),c=(0,o.O7)(),{device:a}=c,d=a.isMobile?18:16;return(0,u.jsx)(s.ZP,{type:t.type,icon:t.icon,size:n||d,theme:l,style:i})}},25845:(e,t,n)=>{n.d(t,{Z:()=>oe});var o=n(67294),i=n(86628),r=n(21202),l=n(12534),s=n(79797),c=n(16354),a=n(1302),d=n(98104),u=n(29376),h=n(64921),p=n(76798),f=n(85893);function g(e){window.__c={n:"EditableRelationTokenTitle"};const{blockStore:t,titleStyle:n,shouldWrap:i,recordTitleRef:r}=e,l=(0,o.useRef)({getNode:()=>r.current}),s=(0,o.useCallback)((e=>{a.default.afterNextFlush((()=>{const e=t.getBlockTitleStore();if(!e)return;const n=e.getValue(),o=n?n[0][0].length:0,i={start:{index:o,store:e},end:{index:o,store:e}};d.NA({multiSelection:i})}))}),[t]);return(0,f.jsx)(h.Z,{style:{height:u.Mu+2,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5,padding:"6px 8px 7px 8px",overflow:"hidden"},onClick:s,children:(0,f.jsx)(p.Z,{store:t,underline:!0,shouldWrap:i,style:n,ref:l})})}var v=n(72126),m=n(9291),x=n(33929),y=n(21407);const S=(0,m.defineMessages)({typeTitle:{defaultMessage:"Type a title...",id:"relationToken.title.placeholder"}});function k(e){window.__c={n:"EditingRelationTokenTitle"};const{blockStore:t,clickTitleBehavior:n,onTitleEnter:o}=e,r="edit"===n,l=(0,i.VK)((()=>t.getBlockTitleStore()),[t]);return(0,f.jsx)(y.Z,{store:l,disabled:!r,disableSlashCommands:!0,disableEmojiCommands:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableEmbedMenu:!0,onEnter:o,onTab:v.yR,placeholder:x.default.formatMessage(S.typeTitle),style:{padding:"6px 8px 7px 8px",textOverflow:"none",overflow:"visible",whiteSpace:"pre"},disableSelectAllBlocks:!0,pasteBehavior:"inline"})}var C=n(480),b=n(64002),R=n(30874),T=n(73935),I=n(83355),w=n(41432),j=n(8848),M=n(70203),z=n(44805),E=n(993),Z=n(95477),_=n(60682),A=n(24990);class B extends I.Z{constructor(){super(...arguments),this.node=void 0,this.handleMouseOver=e=>{const t=this.getInteractiveToken(),n=this.props.store.getTitleStore();n&&t&&E.Nh({environment:this.environment,event:e,interactiveToken:t,store:n,canEdit:this.props.canEdit})},this.handleMouseOut=e=>{const t=this.getInteractiveToken(),n=this.props.store.getTitleStore();n&&t&&E.Zl({environment:this.environment,event:e,interactiveToken:t,store:n,canEdit:this.props.canEdit})}}didMount(){super.didMount(),this.node=T.findDOMNode(this)}get theme(){const{ThemeModeStore:e}=this.environment;return(0,j.gh)({theme:e.state})}getInteractiveToken(){if(!this.node)return;const e=this.props.store,t=(0,M.x36)(e.id),n=(0,M.YCD)(t);return{textValue:[n],tokenIndex:0,textToken:n,node:this.node}}renderComponent(){const e=this.props.store,t=this.props.shouldWrap,n=this.props.style,o=this.props.disableLinks,i=this.props.disableHover,r=x.default.getIntl(),s=this.props.store.getRecordModel,c=e.id,a=(0,_.e_)(this.environment),d=Z.default.domainBaseUrl,u=this.environment.currentUser.id,h=this.props.isAndroid,p=this.props.externalIntegrations;if(!c)return;if("external_object_instance_page"!==e.getType())return;const g=e.getModel();return null!=g&&g.isType(w.Ti.externalObjectInstancePage)?(0,f.jsx)("span",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:l.Wi,children:(0,z.dD)({blockModel:g,shouldWrap:t,index:0,style:n,disableHover:i,disableLinks:o,isAndroid:h,theme:this.theme,getRecordModel:s,currentUserId:u,baseUrl:d,emojiType:a,externalIntegrations:p,intl:r,emojiData:A.Z.state,stopLinkPropagation:!0})}):void 0}}B.displayName="ExternalObjectInstancePageMentionToken";const W=B;function P(e){window.__c={n:"ExternalObjectInstancePageMentionRelationToken"};const{blockStore:t,shouldWrap:n,style:o}=e,r=(0,i.VK)((()=>(0,b.yn)(t.getSyncedUri())),[t]),l=(0,i.VK)((()=>R.Z.integrations.state),[]),s=(0,C.O7)();return(0,f.jsx)(W,{shouldWrap:n,store:t,style:o,disableHover:!r,disableLinks:!r,isAndroid:s.device.isAndroid,externalIntegrations:l,canEdit:!0})}var V=n(24405),K=n(9953),O=n(82530),L=n(31278),U=n(84619),D=n(82990);const H={[U.lo.ExtraSmall]:{height:16,fontSize:12,margin:"0 4px 0 0",recordIconMarginRight:3,pageIconSize:16,closeIconSize:8},[U.lo.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0",recordIconMarginRight:3,pageIconSize:16,closeIconSize:8},[U.lo.Medium]:{height:20,fontSize:14,margin:"0 12px 6px 0",recordIconMarginRight:4,pageIconSize:20,closeIconSize:8},[U.lo.Inline]:{height:20,fontSize:14,margin:"0 12px 0 0",recordIconMarginRight:4,pageIconSize:20,closeIconSize:8},[U.lo.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0",recordIconMarginRight:4,pageIconSize:24,closeIconSize:10}};function N(e){let{height:t}=e;return{display:"flex",alignItems:"center",lineHeight:1.2,height:t}}function Q(e){window.__c={n:"RelationTokenPageIcon"};const{clickTitleBehavior:t,blockStore:n,format:r,shouldWrap:l}=e,s="edit"===t,c=(0,C.O7)(),a=(0,i.VK)((()=>n.getIcon()),[n]),d=(0,i.VK)((()=>n.isEmptyPage()),[n]),{style:u}=(0,V.yK)((()=>({style:{flexShrink:0,marginRight:s?0:H[r].recordIconMarginRight,justifyContent:"flex-start",...l&&{display:"inline-block",verticalAlign:"text-top",marginBottom:-1}}})),[s,r,l]),h=(0,o.useCallback)((e=>{const t=n.getIconStore();t&&O.createAndCommit({userAction:"RelationToken.handleRecordIconChange",environment:c,perform:n=>{K.sO({store:t,value:e,transaction:n})}})}),[n,c]),p={icon:a,size:H[r].pageIconSize,isEmptyPage:d,style:u};return s?(0,f.jsx)(L.Z,{...p,disabled:!1,onChange:h,bucket:"public"}):(0,f.jsx)(L.Z,{...p,disabled:!0})}var F=n(19525);function Y(e){const{format:t,showRemoveButton:n,onClickRemove:o}=e,{height:i,closeIconSize:r}=H[t];return n?(0,f.jsx)(h.Z,{onClick:o,style:{display:"flex",alignItems:"center",justifyContent:"center",width:i,height:i,marginLeft:2,marginRight:2,flexGrow:0,flexShrink:0,borderRadius:4},children:(0,F.b)({width:r,height:r,opacity:.5})}):null}function q(e){window.__c={n:"RelationTokenTitle"};const{blockStore:t,shouldWrap:n,titleStyle:i,recordTitleRef:r,noUnderline:l}=e,s=(0,o.useRef)({getNode:()=>r.current});return(0,f.jsx)(p.Z,{store:t,underline:!l,shouldWrap:n,style:i,ref:s})}var $=n(15145),G=n(10906),X=n(66890),J=n(84210),ee=n(80444);var te=n(68056),ne=n(24666);const oe=(0,o.forwardRef)(((e,t)=>{const{parentStore:n,blockId:a,shouldWrap:d,format:h,showRemoveButton:p,clickTitleBehavior:g,onClickRemove:v,titleStyle:m,onTitleEnter:x,index:y,noUnderline:S}=e,k=s.G.createChildStore(n,{table:r.iU,id:a}),{style:C}=function(e){let{format:t,shouldShrink:n,shouldWrap:o,isSingle:i,style:r,clickTitleBehavior:l}=e;const s="edit"===l;return(0,V.yK)((()=>{const{fontSize:e,margin:l}=H[t],c=s?u.Mu:H[t].height;return{style:{...o?{display:"inline",lineHeight:1.5,borderRadius:4}:N({height:c}),fontSize:e,fontWeight:D.Z.fontWeight.medium,minWidth:n?0:"auto",margin:i?0:l,...t===U.lo.Inline&&{overflow:"hidden"},...r}}}),[t,n,o,i,s,r])}(e),{blockUrlPage:b,blockUrlPeek:R}=function(e){const t=(0,X.DK)(),n=(0,i.VK)((()=>(0,J.ZP)({store:e,fullyQualified:!1,pageVisitSource:$.tY.LinkInPage})),[e]);return{blockUrlPeek:(0,i.VK)((()=>{const{mainEditorCurrentBlockStore:n}=ee.default.state;return G.mb({store:e,mainEditorCurrentBlockStore:n,collectionContextStore:t,fullyQualified:!1})}),[e,t]),blockUrlPage:n}}(k),T=(0,o.useRef)(null),I=(0,o.useRef)(null),w="peek"===g,j={display:C.display,height:C.height,alignItems:C.alignItems};(0,o.useImperativeHandle)(t,(()=>k),[k]);if((0,i.VK)((()=>"external_object_instance_page"===k.getType()),[k]))return(0,f.jsx)(P,{shouldWrap:d,blockStore:k,style:C});const M=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Q,{format:h,blockStore:k,clickTitleBehavior:g,shouldWrap:d}),(0,f.jsx)(ie,{blockStore:k,recordTitleRef:T,clickTitleBehavior:g,shouldWrap:d,titleStyle:m,noUnderline:S,onTitleEnter:x,index:y})]});return(0,f.jsxs)("div",{style:C,ref:I,children:[w?(0,f.jsx)(c.Z,{href:b,metaHref:R,onClick:l.Wi,style:j,children:M}):M,(0,f.jsx)(Y,{showRemoveButton:p,onClickRemove:v,format:h})]})}));function ie(e){window.__c={n:"RelationTokenTitleContainer"};const{blockStore:t,clickTitleBehavior:n,onTitleEnter:o,index:r,recordTitleRef:l,titleStyle:s,shouldWrap:c,noUnderline:a}=e,d="edit"===n,u=function(e){return(0,i.VK)((()=>{var t;const n=ne.default.state;return"editing"===n.mode&&(null===(t=(0,te.QY)(n.multiSelection))||void 0===t?void 0:t.store)===e.getBlockTitleStore()}),[e])}(t);return d?u&&o&&r?(0,f.jsx)(k,{blockStore:t,clickTitleBehavior:n,onTitleEnter:o}):(0,f.jsx)(g,{blockStore:t,recordTitleRef:l,titleStyle:s,shouldWrap:c}):(0,f.jsx)(q,{blockStore:t,recordTitleRef:l,titleStyle:s,shouldWrap:c,noUnderline:a})}},66890:(e,t,n)=>{n.d(t,{DK:()=>u,L1:()=>a,Y$:()=>d,xm:()=>c});n(21703);var o=n(67294),i=n(67381);const r="collectionContextStore",l=(0,i.Q)({displayName:r,legacyContextKey:r,modernContextDefaultValue:void 0}),s=l.context,c=l.legacyPropTypes,a=l.Provider;function d(){const e=o.useContext(s);if(void 0===e)throw new Error(`No context provided: ${r}`);return e}function u(){return o.useContext(s)}},25130:(e,t,n)=>{n.d(t,{ZP:()=>d,nq:()=>a,o$:()=>c});var o=n(67294),i=n(55010);const r=(0,o.createContext)({menuItemRefs:{current:new Set},activeRef:void 0,setActiveRef:()=>{},onKeyDown:()=>{}});function l(e){const t=new Map(Array.from(e).filter((e=>e.current)).map((e=>[e.current,e])));return{sortedElements:Array.from(t.keys()).sort(i.Z),nodeToRef:t}}function s(){return(0,o.useContext)(r)}function c(){const{menuItemRefs:e,activeRef:t,setActiveRef:n}=s(),i=(0,o.useRef)(null),r=(0,o.useCallback)((o=>{var r,l;function s(){t||n(i),null==o||o.removeEventListener("focus",s)}(i.current&&(null==o||o.removeEventListener("focus",s)),o)&&(0===(null===(l=e.current)||void 0===l?void 0:l.size)&&o.addEventListener("focus",s));i.current=o,null===(r=e.current)||void 0===r||r.add(i)}),[e,i,t,n]);return(0,o.useEffect)((()=>{const t=e.current;return()=>{null==t||t.delete(i)}}),[e]),(0,o.useEffect)((()=>{const o=e.current;return()=>{if(null===(null==t?void 0:t.current)&&t===i&&o){const{sortedElements:e,nodeToRef:t}=l(o),i=e[0];i&&t.has(i)&&n(t.get(i))}}}),[t,n,e]),[r,i]}function a(e){const{activeRef:t}=s();return t===e||void 0===t}const d=function(){let{direction:e="vertical"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,o.useRef)(new Set),[n,i]=(0,o.useState)(void 0),s=(0,o.useCallback)((o=>{let{code:r}=o;if("vertical"===e&&!["ArrowUp","ArrowDown"].includes(r)||"horizontal"===e&&!["ArrowLeft","ArrowRight"].includes(r))return;const{nodeToRef:s,sortedElements:c}=l(t.current),a=c.findIndex((e=>e===(null==n?void 0:n.current)));let d;if("vertical"===e&&"ArrowDown"===r||"horizontal"===e&&"ArrowRight"===r?d=a+1>=t.current.size?0:a+1:("vertical"===e&&"ArrowUp"===r||"horizontal"===e&&"ArrowLeft"===r)&&(d=a-1<0?t.current.size-1:a-1),void 0!==d){const e=c[d];e&&(i(s.get(e)),e.focus())}}),[n,e]);return{MenuArrowKeysProvider:r.Provider,context:{menuItemRefs:t,activeRef:n,setActiveRef:i,onKeyDown:s}}}},16184:(e,t,n)=>{n.d(t,{Q:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.I)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},22686:(e,t,n)=>{n.d(t,{f:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.I)("person",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,n)=>{n.d(t,{X:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.I)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,i.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,i.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})}}]);