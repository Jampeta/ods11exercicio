"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9938],{31192:(e,t,o)=>{o.d(t,{Pc:()=>Ze,TE:()=>Fe,VN:()=>Be,Wc:()=>Je,ZP:()=>je,ZY:()=>He,d$:()=>Ie,jo:()=>De,n5:()=>Le,nZ:()=>Xe,pE:()=>Ae,rk:()=>we,sL:()=>Ee,tb:()=>Ve,ww:()=>Re});o(57658);var i=o(67294),s=o(1302),n=o(13991),r=o(49085),a=o(92996),l=o(70475),d=o(41432),h=o(99036),c=o(65955),p=o(64788),u=o(72126),g=o(6287),m=o(90965),v=o(70203),S=o(97880),f=o(82990),C=o(9291),y=o(35253),b=o(51365),P=o(96802),M=o(32603),_=o(72711),x=o(24677),T=o(23728),k=o(98104),w=o(82530),E=o(89626),L=o(10906),B=o(92650),Z=o(66890),F=o(95645),I=o(28651),H=o(75079),A=o(19124),V=o(83055),D=o(70177),R=o(45162),O=o(50627),j=o(98165),K=o(94134),N=o(45010),W=o(77907),q=o(18245),z=o(49427),U=o(24646),X=o(80444),G=o(61766),$=o(77556),J=o(16772),Q=o(80796),Y=o(77080),ee=o(73329),te=o(29755),oe=o(77144),ie=o(22294),se=o(29798),ne=o(19671),re=o(94896),ae=o(82136),le=o(91551),de=o(13023),he=o(88923),ce=o(69784),pe=o(27724),ue=o(17963),ge=o(3119),me=o(78030),ve=o(15201),Se=o(68709),fe=o(23063),Ce=o(91754),ye=o(89728),be=o(98272),Pe=o(61679),Me=o(40414),_e=o(11803),xe=o(61953),Te=o(65496),ke=o(85893);const we=f.Z.getCompositeFontFamily(n.SP).sans,Ee={serif:f.Z.getCompositeFontFamily(n.SP).serif,mono:f.Z.getCompositeFontFamily(n.SP).mono},Le={serif:1.6,mono:1.6},Be={serif:0,mono:.055},Ze={serif:15,mono:14},Fe={serif:17,mono:15},Ie={width:"100%",display:"flex",flexDirection:"column",position:"relative",alignItems:"center",flexGrow:1},He=14,Ae=17,Ve=16,De=16;function Re(e){return!!e.isIOS}class Oe extends F.Z{constructor(){super(...arguments),this.contentEl=null,this.clickedAddIconState=!1,this.openResolvedDiscussionPopup=()=>{this.stores.resolvedDiscussionButtonPopupStore.setState({open:!0}),this.stores.pageViewBlockStore.setState({...this.stores.pageViewBlockStore.state,forceDiscussionOpen:!0})},this.getContentWrapEl=()=>this.contentEl,this.collectionContextStore=new $.Z(this.environment),this.documentViewHorizontalOffset=this.createComputedStore((()=>{const{store:e}=this.props;return this.marginCommentsVisible.state&&!this.props.store.isFullWidth()?(0,B.gC)(this.environment,(0,L.en)(e),(0,L.Ks)(e)):0})),this.storeTypes={headerFocusStore:r.default.createClass(!1),headerMouseStore:I.Z,detailsFocusStore:r.default.createClass(!1),detailsMouseStore:I.Z,pageViewBlockStore:ae.Z,resolvedDiscussionButtonPopupStore:G.Z,backlinksButtonPopupStore:G.Z,templatePickerMenuListStore:se.Z,loadingPageCoverStore:r.default.createClass(!1)},this.getHorizontalTransformStyles=()=>{const e=this.documentViewHorizontalOffset.state;return{layout:{translateX:-1*e},layoutFull:{translateX:e}}},this.hasCoverStore=this.createComputedStore((()=>this.props.store.hasCover())),this.hasIconStore=this.createComputedStore((()=>this.props.store.hasIcon())),this.titleStore=this.createComputedStore((()=>this.props.store.getTitleStore())),this.handleAddRandomIconClick=()=>{const{store:e}=this.props,{environment:t}=this,{serverCommitResult:o}=w.createAndCommit({userAction:"PageViewBlock.handleAddRandomIconClick",environment:this.environment,perform:t=>{P.is({store:e,transaction:t})}});this.clickedAddIconState=!0,o.then((()=>T.P({store:e,environment:t})))},this.handleAddRandomCoverClick=async()=>{const{store:e}=this.props,{environment:t}=this,o=e.getCoverStore();if(!o)return;if(o.getValue())return;this.stores.loadingPageCoverStore.setState(!0);const i=(await W.deps.pageCovers.loader()).default,{serverCommitResult:s}=w.createAndCommit({userAction:"PageViewBlock.handleAddRandomCoverClick",environment:t,perform:t=>{_.tk({transaction:t,store:e,coverStore:o,pageCovers:i})}});s.then((()=>T.P({store:e,environment:t}))),this.stores.loadingPageCoverStore.setState(!1)},this.handleHeaderMouseEnter=()=>{Q.Z.state.isDragging||ce.default.state.isActive||this.stores.headerMouseStore.setState({...this.stores.headerMouseStore.state,mouseEntered:!0})},this.handleHeaderMouseLeave=()=>{Q.Z.state.isDragging||ce.default.state.isActive||this.stores.headerMouseStore.setState({...this.stores.headerMouseStore.state,mouseEntered:!1})},this.handleDetailsMouseEnter=()=>{Q.Z.state.isDragging||ce.default.state.isActive||this.stores.detailsMouseStore.setState({...this.stores.detailsMouseStore.state,mouseEntered:!0})},this.handleDetailsMouseLeave=()=>{Q.Z.state.isDragging||ce.default.state.isActive||this.stores.detailsMouseStore.setState({...this.stores.detailsMouseStore.state,mouseEntered:!1})},this.handleHeaderMouseEnterThrottled=u.P2(this.handleHeaderMouseEnter,100),this.handleHeaderMouseLeaveDebounced=u.Ds(this.handleHeaderMouseLeave,100),this.handleDetailsMouseEnterThrottled=u.P2(this.handleDetailsMouseEnter,100),this.handleDetailsMouseLeaveDebounced=u.Ds(this.handleDetailsMouseLeave,100),this.handleTitleEditText=e=>{const t=this.titleStore.state;t&&(x.eP({environment:this.environment,store:this.props.store}),e.isAtStartOfLine?k.N_({store:t}):k.NX({store:t}))},this.handleTitleEsc=e=>{const{onTitleEsc:t}=this.props;k.ZH(this.environment),x.ZH(this.environment),t&&t(e)},this.handleTitleTab=e=>{const{store:t}=this.props;if(t.isCollectionView())return!0;if(e.preventDefault(),function(e){return Boolean(Ne(e))}(this.props.store)){const e=(0,O.y6)(this.props.store);if(e&&e.collection_page_properties){const o=e.collection_page_properties.find(((e,t)=>function(e,t){const o=Ne(t);if(!o)return!1;const i=function(e){return e.getSchema()}(t),s=i[e];return Boolean(s&&!h.uk.includes(s.type))}(e.property,this.props.store)));o&&s.default.afterNextFlush((()=>{var e;b.bA({environment:this.environment,blockPropertyValueOverlayStore:(e=this.props.context,(0,O.OZ)(e)?de.Z:ne.Z),collectionContextStore:this.collectionContextStore,store:t,property:o.property,format:me.C.Page})}))}}},this.handleTitleUntab=e=>{const{store:t}=this.props;if(t.isCollectionView())return!0;this.handleTitleEsc(e)},this.handleTitleChange=()=>{this.stores.templatePickerMenuListStore.reset();const{environment:e}=this,{store:t}=this.props;T.P({store:t,environment:e})},this.showTemplatePickerStore=this.createComputedStore((()=>{const{store:e,context:t}=this.props,o=this.environment.currentUser.isLoggedIn(),i=this.pageContext&&this.pageContext.publicEditModeStore.state;let s;return t===ae.S.Frame?s=X.default.state.currentLoadingContainerStore:t===ae.S.PeekView&&he.default.state.open&&(s=he.default.state.loadingContainerStore),Boolean(e&&s&&e.isDefined()&&!e.isLocked()&&e.canEdit()&&!e.hasContent()&&o&&(!(null!=i&&i.hasPublicPermission)||"edit"===(null==i?void 0:i.permission))&&!(Boolean(ue.Z.state.pageMap[e.id])||re.Z.state.pages.has(e.id))&&s.state.ready&&!(0,O.a_)(this.props.store)&&(!(0,A.GD)(i)||"completionPopup"!==J.default.state.type))})),this.titleStyleStore=this.createComputedStore((()=>{const{device:e}=this.environment,{store:t,context:o,styleOverrides:i}=this.props,s=(null==i?void 0:i.paddingX)??(0,O.RH)(o,this.environment),r=t.getFormat(),a=!!r.page_small_text,l=t.isCollectionView(),d=a||e.isMobile||l||qe(this.props.store)?32:40,h=(0,U.$3)(this.environment)+(0,U.vJ)(this.environment)-2*s;return{color:this.theme.regularTextColor,fontWeight:f.Z.fontWeight.bold,lineHeight:1.2,fontSize:d,fontFamily:f.Z.getHeaderFontFamily({pageFont:r.page_font,locale:n.SP}),cursor:"text",display:"flex",alignItems:"center",textRendering:e.isSafari?"optimizeSpeed":void 0,width:t.isCollectionView()&&!this.props.store.getAppContainerBlockStore()?h:void 0,...this.props.titleStyle}})),this.pageIconProps=this.createComputedStore((()=>({store:this.props.store,isEditable:this.isEditable(),hasCover:this.hasCoverStore.state,isInSidePeek:qe(this.props.store),openMenuOnMount:this.clickedAddIconState,openMenuOnMountCallback:()=>{this.clickedAddIconState=!1}}))),this.pageTitleProps=this.createComputedStore((()=>{var e;const t=(null===(e=this.props.styleOverrides)||void 0===e?void 0:e.paddingX)??(0,O.RH)(this.props.context,this.environment);return{store:this.props.store,disabled:!this.canEdit(),isInSidePeek:qe(this.props.store),paddingLeft:t,paddingRight:t,extraStyles:this.titleStyleStore.state,titlePlaceholder:this.props.titlePlaceholder,collectionContextStore:this.collectionContextStore,shouldShowTemplatePicker:this.showTemplatePickerStore.state,onTitleChange:this.handleTitleChange,onTitleEditText:this.handleTitleEditText,onTitleEsc:this.handleTitleEsc,onTitleUntab:this.handleTitleUntab,onTitleTab:this.handleTitleTab}}))}get registries(){return super.registries.concat(z.Z)}getContentInnerWidth(){const e=this.getContentWrapEl();if(e){const t=e.getBoundingClientRect().width,o=this.getContentPadding()??{paddingLeft:0,paddingRight:0};return t-o.paddingLeft-o.paddingRight}}getContentPadding(){const e=this.getContentWrapEl();if(e){if(Re(this.environment.device))return{paddingLeft:0,paddingRight:0};const t=getComputedStyle(e),o=parseFloat(t.getPropertyValue("padding-left")),i=parseFloat(t.getPropertyValue("padding-left"));return{paddingLeft:u.i2(o)?0:o,paddingRight:u.i2(i)?0:i}}}UNSAFE_willMountOrUpdate(e){super.UNSAFE_willMountOrUpdate(e);const{store:t,context:o}=e;var i;"page"===this.environment.RouterStore.state.route.name&&(null===(i=this.environment.mobileNative)||void 0===i||i.markTransitionReady({type:"page",id:this.props.store.id}));const s=Ne(this.props.store);if(this.collectionContextStore.collectionStore()!==s&&s){const e=s.getParentBlockStore();this.collectionContextStore.setContext({type:"collectionPage",collectionViewBlockStore:e,collectionStore:s})}if(o===ae.S.Frame){const e=ze(o),i=this.pageContext&&this.pageContext.publicEditModeStore.state;null!=i&&i.hasPublicPermission&&"edit"===i.permission&&!t.isTemplate()?y.Bw({bannerStore:e,id:"EditingPageBanner",contentKey:"editing_page",styleKey:Ce.v.White}):y.qL({bannerStore:e,id:"EditingPageBanner"});te.Z.state.pageMap[t.id]?y.Bw({bannerStore:e,id:"ImportingEvernotePage",contentKey:"importing_evernote",styleKey:Ce.v.Blue,blockStore:t}):y.qL({bannerStore:e,id:"ImportingEvernotePage"})}if(Ue(o)){const e=ze(o),i=j.oZ(t),s=j.wf(t),n=j.D0(t);if((0,m.nV)(i))y.Bw({bannerStore:e,id:"SpaceContentDuplicationPage",contentKey:"space_content_duplication",styleKey:Ce.v.Red,blockStore:t});else if(s)y.Bw({bannerStore:e,id:"DeletedPage",contentKey:"deleted_or_moved_page",blockStore:t,styleKey:Ce.v.Red});else if(n)y.Bw({bannerStore:e,id:"ArchivedTeamPage",contentKey:"page_in_archived_team",styleKey:Ce.v.Red});else for(const t of["SpaceContentDuplicationPage","DeletedPage","ArchivedTeamPage"])y.qL({bannerStore:e,id:t});t.isTemplate()?y.Bw({bannerStore:e,id:"CollectionTemplatePage",contentKey:"template_in_page",styleKey:Ce.v.Beige,blockStore:t,context:o,disabled:this.props.disabled}):t.isInsideFactoryOrDuplicateBlocksAction()?y.Bw({bannerStore:e,id:"CollectionTemplatePage",contentKey:"template_in_button",styleKey:Ce.v.Beige,blockStore:t,context:o,disabled:this.props.disabled}):y.qL({bannerStore:e,id:"CollectionTemplatePage"}),t.useCrdt()?y.Bw({bannerStore:e,id:"CrdtPage",contentKey:"crdt_page",styleKey:Ce.v.Beige}):y.qL({bannerStore:e,id:"CrdtPage"});const r=t.getFormat();Y.default.checkGate("improved_asana_importer_screens")&&null!=r&&r.is_asana_imported_project&&y.Bw({bannerStore:e,id:"AsanaImporterBanner",contentKey:"asana_importer_banner",blockStore:t,styleKey:Ce.v.ImportNotification})}}didMount(){const{device:e}=this.environment,{store:t,context:o}=this.props,i=this.titleStore.state,s=this.environment.RouterStore.state;let n;var r,a;"page"===s.route.name&&(n=s.route.mobileData,M.updateMetricData({is_push:null===(r=n)||void 0===r?void 0:r.isPush}));if((0,D.L)(),e.isPhone){const{PageScroller:e}=N.Z;if(e){if(e.scrollerEl()&&this.canEdit()&&!this.hasCoverStore.state){const t=Je(this.props.context,this.environment);e.scrollTo(t)}}}i&&this.shouldSelectTitleOnMount()&&(x.eP({environment:this.environment,store:t}),k.NX({store:i}),e.isAndroid&&(null===(a=this.environment.mobileNative)||void 0===a||a.forceShowSoftKeyboard()));if(o===ae.S.Frame&&!this.props.store.isCollectionView()){const e=this.environment.RouterStore.state.initialRoute.name,{initialRenderCompleted:t,initialRenderAfterLoginCompleted:o,initialLoadCachedPageChunkCalledAt:i}=oe.Z.state;if(t)if(o||"login"!==e){var l;q.default.measure("navigation_page_render",{environment:this.environment,data:{is_push:(null===(l=n)||void 0===l?void 0:l.isPush)??!1,wasm_sqlite_initialized:oe.Z.state.metricData.state.wasm_sqlite_initialized}})}else q.default.measure("initial_page_render_after_login",{environment:this.environment}),oe.Z.update((e=>({...e,initialRenderAfterLoginCompleted:!0})));else{var d;M.setInitialRenderCompleted();const t=Boolean(null===(d=performance)||void 0===d?void 0:d.mark)?performance.mark("initial_page_render").startTime:performance.now();M.setSubMetric({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:t}),q.default.measureFromAppStart({metricName:"initial_page_render",endTime:t},{environment:this.environment,data:{...V.IN(),initial_route:e,is_editable:this.isEditable(),profiling_tool:K.getProfilingToolForSession()},shouldSendIfStatsigNotInitialized:!0}),M.measureSubMetricsInBrowserProfiler(),void 0!==i&&q.default.measureFromAppStart({metricName:"load_cached_page_chunk_wait_time",endTime:i},{environment:this.environment,data:{initial_route:e},shouldSendIfStatsigNotInitialized:!0})}!function(e,t){const{device:o,RouterStore:i}=t,{route:s}=i.state,n=e;var r;o.isMobileNative&&"page"===s.name&&s.showMoveTo&&n.isEmptyTitle()&&n.isEmptyPage()&&(null===(r=t.mobileNative)||void 0===r||r.markTransitionReady({type:"new_page",id:n.id}))}(this.props.store,this.environment)}if(this.collectionContextStore){const e=(0,H.vS)(this.collectionContextStore);q.default.measure("collections.open_item_page_lag",{environment:this.environment,data:{...e,peek_mode:he.default.getPeekMode()}})}!function(e,t){if("space_for_ai"!==(0,E.sy)())return;const o=e.getContentStores()[0],i=E.__.state;if(!o||o.id!==i)return;x.eP({environment:t,store:o}),k.NX({store:o.getBlockTitleStore()})}(this.props.store,this.environment)}willUnmount(){super.willUnmount(),Ue(this.props.context)&&(y.qL({bannerStore:ze(this.props.context),id:"DeletedPage"}),y.qL({bannerStore:ze(this.props.context),id:"CollectionTemplatePage"}),y.qL({bannerStore:ze(this.props.context),id:"Site"}),Y.default.checkGate("improved_asana_importer_screens")&&y.qL({bannerStore:ze(this.props.context),id:"AsanaImporterBanner"}))}renderPageLayoutSchema(e){const t=this.getHorizontalTransformStyles();var o,i;const s=function(e,t,o,i){if(i.device.isPhone)return"phone";if(i.device.isTablet)return(0,O.mO)(t,o,i)?"wide":"tablet";if((0,O.OZ)(o))return qe(t)?"side-peek":"center-peek";if(function(e){return e===ae.S.InAppTemplatePreview}(o)||function(e){return e===ae.S.InPageSnapShot}(o))return"template-preview";return(0,O.mO)(t,o,i)?e?"wide-right-margin-expanded":"wide":"default"}((o=this.props.store,i=this.environment,{visible:(0,B.fg)(i,o)}).visible,this.props.store,this.props.context,this.environment);return(0,ke.jsx)(fe.Z,{isVisible:!0,animationStyle:t.layout,render:()=>{var t;return(0,ke.jsx)(Pe.Ar,{type:s,withBottomPadding:!0,children:(0,ke.jsx)(Me.Z,{context:this.props.context,onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,onMouseMove:this.handleHeaderMouseEnterThrottled,pageCoverHeight:(null===(t=this.props.styleOverrides)||void 0===t?void 0:t.pageCoverHeight)??Oe.defaultPageCoverHeight(this.environment),layoutSchema:e,styleOverrides:this.props.styleOverrides,templatePickerMenuListStore:this.stores.templatePickerMenuListStore,topControls:this.getTopControls(),headerControlsStyle:this.getHeaderControlsStyle(),getControlHoverStyle:e=>this.getControlHoverStyle({isBottomControl:e}),pageViewBlockStores:{...this.stores},...this.pageIconProps.state,...this.pageTitleProps.state,disabled:this.props.disabled,pageViewBlockAccessor:this.getContentWrapEl,ref:e=>{e&&(this.contentEl=e)}})})}})}renderPersisted(){var e,t;const{store:o,context:i}=this.props;if(o.getType()===d.Ti.copyIndicator&&(o.getParentTable()!==g.v||o.getParentTable()===g.v&&0===Object.keys(o.getProperties()).length))return(0,ke.jsx)(be.X,{});if(o.isCollectionView())return(0,ke.jsx)(Z.L1,{value:this.collectionContextStore,children:(0,ke.jsx)(ge.Z,{canEdit:this.canEdit(),context:i,controlHoverStyle:this.getControlHoverStyle({}),handleHeaderMouseEnterThrottled:this.handleHeaderMouseEnterThrottled,handleHeaderMouseLeaveDebounced:this.handleHeaderMouseLeaveDebounced,headerControlsStyle:this.getHeaderControlsStyle(),headerFocusStore:this.stores.headerFocusStore,pageCover:this.renderPageCover(),topControls:this.getTopControls(),...this.pageIconProps.state,...this.pageTitleProps.state,store:o})});let s=Boolean(Y.default.checkGate("enable_transcript_tab")&&(null===(e=this.collectionContextStore.collectionStore())||void 0===e?void 0:e.getDatabaseType())===a.Fi&&(null===(t=this.props.store.getFormatStore().getValue())||void 0===t||null===(t=t.content_tabs)||void 0===t?void 0:t[l.Z]))?this.renderPageLayoutSchema(xe.Tf.pageLayoutSchema):this.renderPageLayoutSchema(xe.bl.pageLayoutSchema);return this.collectionContextStore&&this.collectionContextStore.contextType&&(s=(0,ke.jsx)(Z.L1,{value:this.collectionContextStore,children:s})),(0,R.Aw)(this.environment)?(0,ke.jsx)(ve.O,{displayName:"PageContent",style:{...Ie,...this.props.style},disabled:!this.canEdit()||this.props.store.isLocked(),shouldSelectOnEnter:Ke,children:s}):s}getTopControls(){const e=[],t=this.renderAddIcon();t&&e.push((0,ke.jsx)(i.Fragment,{children:t},"add-icon"));const o=this.renderAddCover();return o&&e.push((0,ke.jsx)(i.Fragment,{children:o},"add-cover")),e}renderPageCover(){const{WindowSizeStore:e}=this.environment,{store:t,styleOverrides:o,context:i}=this.props,s=t.isCollectionView()?"20vh":(null==o?void 0:o.pageCoverHeight)??Oe.defaultPageCoverHeight(this.environment),n=(null==o?void 0:o.paddingX)??(0,O.RH)(i,this.environment);return(0,ke.jsx)(Se.p,{allowSelectionWithin:!1,style:(0,_e.p)(this.props.store,this.environment),onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,children:(0,ke.jsx)(Te.Z,{height:s,store:t,disabled:!this.isEditable(),paddingLeft:e.getSafePaddingLeftCSS(n),paddingRight:e.getSafePaddingRightCSS(n),proxyWidth:e.state.width})})}renderAddIcon(){const{device:e}=this.environment;if(this.isEditable()&&!this.hasIconStore.state)return(0,ke.jsx)(ye.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleAddRandomIconClick,icon:c.o,children:e.isSmallPhone?(0,ke.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageIconMobile",defaultMessage:"Icon"}):(0,ke.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageIcon",defaultMessage:"Add icon"})},"add-icon")}renderAddCover(){const{device:e}=this.environment;if(this.isEditable()&&!this.hasCoverStore.state)return!0===this.stores.loadingPageCoverStore.state?(0,ke.jsx)(ye.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,disabled:!0,icon:p.P,children:e.isSmallPhone?(0,ke.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageCoverMobileLoading",defaultMessage:"Loading"}):(0,ke.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageCoverLoading",defaultMessage:"Loading cover"})},"add-cover-loading"):(0,ke.jsx)(ye.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleAddRandomCoverClick,icon:p.P,children:e.isSmallPhone?(0,ke.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageCoverMobile",defaultMessage:"Cover"}):(0,ke.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageCover",defaultMessage:"Add cover"})},"add-cover")}isEditable(){return this.canEditCollection()&&!this.props.store.isLocked()&&!(0,O.a_)(this.props.store)}shouldSelectTitleOnMount(){const{device:e}=this.environment,{store:t}=this.props,o=this.titleStore.state,{forceSelectTitleOnMount:i}=this.props;return!!o&&(!!i||!t.isCollectionView()&&(!v.QaF(o.getValue())||(0,O.CX)(this.props.store)&&!e.isMobile))}static defaultPageCoverHeight(e){return e.device.isMobile?200:"30vh"}static paddingBottom(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{device:o}=e;return o.isTablet?380:o.isIOS?Math.max(350,t):o.isMobile?400:"30vh"}getHeaderControlsStyle(){const{store:e}=this.props,{device:t}=this.environment,{isMobile:o}=t,i=Ge(this.props.context,this.environment);let s,r,a;return o?this.hasCoverStore.state?(this.hasIconStore.state,a="block",s=i,r=4):(a="flex",s=i,r=$e(this.environment)):e.isCollectionView()||qe(this.props.store)?(a="flex",this.hasCoverStore.state?(s=16,r=4):(s=4,r=4)):(a="flex",this.hasIconStore.state?(s=8,r=4):this.hasCoverStore.state?(s=16,r=4):(s=i,r=$e(this.environment))),{display:a,justifyContent:"flex-start",flexWrap:"wrap",marginTop:s,marginBottom:r,marginLeft:-1,color:this.theme.lightTextColor,fontFamily:f.Z.getCompositeFontFamily(n.SP).sans,pointerEvents:"auto"}}getControlHoverIsVisible(e){const{device:t}=this.environment,o=this.stores.headerMouseStore.state.mouseEntered,i=this.stores.detailsMouseStore.state.mouseEntered,s=this.stores.headerFocusStore.state,n=this.stores.detailsFocusStore.state;return!!t.isMobile||(e?i&&!ie.Z.state.isKeyboardMode||n:o&&!ie.Z.state.isKeyboardMode||s)}getControlHoverStyle(e){let{isBottomControl:t}=e;const o=this.getControlHoverIsVisible(t);return{opacity:o?1:0,pointerEvents:o?"auto":"none",transition:"opacity 100ms ease"}}}const je=Oe;function Ke(){return 0===pe.default.state.stores.length}function Ne(e){return e.getAssociatedCollectionStore()}function We(e){return e===ae.S.Frame}function qe(e){return L.en(e)&&(he.default.isSidePeekOpen()||he.default.isSidePeekClosing.state)}function ze(e){return(0,O.OZ)(e)?le.Z:We(e)?ee.Z:(0,S.t1)(e)}function Ue(e){return We(e)||(0,O.OZ)(e)}function Xe(e,t){if(function(e){return e===X.default.state.mainEditorCurrentBlockStore}(e)){const{RouterStore:e}=t;return e.state.route.collectionViewId}}function Ge(e,t){return t.device.isMobile?16:(0,O.OZ)(e)?32:80}function $e(e){return e.device.isMobile?32:4}function Je(e,t){return 28+Ge(e,t)}}}]);