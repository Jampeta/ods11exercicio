"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5741],{89941:(e,t,o)=>{o.d(t,{f:()=>s,v:()=>r});var n=o(19037),i=o(19124);const s=[e=>(0,i.GD)(e.publicEditMode),n.J5],r=[...s,n.ff(n.fI),n.ff(n.OX)]},46564:(e,t,o)=>{o.d(t,{xj:()=>K,lA:()=>Y,Rr:()=>L,NZ:()=>z,Hh:()=>G,F0:()=>V,xI:()=>D,LK:()=>R,sH:()=>q,cK:()=>O,cx:()=>$,yY:()=>N,sY:()=>T});o(57658),o(67294);var n=o(480),i=o(86628),s=o(24405),r=o(41432),a=o(8848),l=o(12970),c=o(91856),d=o(56666),u=o(75e3),p=o(25651),m=o(11751),f=o(45238),g=o(85893);const y=(0,f.I)("upLeftArrow",{viewBox:"0 0 16 16",svg:(0,g.jsx)("path",{d:"M2.8457 10.5869C2.8457 11.0312 3.19434 11.373 3.59766 11.373C4.00098 11.373 4.3291 11.0176 4.3291 10.6074V8.05762L4.21973 5.22754L5.32031 6.47168L11.8418 12.9932C11.999 13.1504 12.1904 13.2256 12.3818 13.2256C12.7852 13.2256 13.1543 12.8564 13.1543 12.46C13.1543 12.2686 13.0654 12.0771 12.9082 11.9199L6.40039 5.39844L5.15625 4.30469L8.10254 4.40039H10.5361C10.9463 4.40039 11.2881 4.07227 11.2881 3.67578C11.2881 3.27246 10.9736 2.93066 10.5156 2.93066H3.64551C3.16016 2.93066 2.85254 3.25195 2.85254 3.72363L2.8457 10.5869Z"})});var v=o(97880),h=o(9291),x=o(42858),C=o(82530),k=o(84654),w=o(72495),S=o(19037),A=o(78663),b=o(99417),I=o(19124),M=o(40959),P=o(16772),_=o(27724),j=o(89941),F=o(62967);const T=(0,h.defineMessages)({notionAI:{defaultMessage:"Notion AI",id:"completions.completionActions.AIAssist"},more:{defaultMessage:"See more",id:"completions.completionActions.more"},alternativeUiString:{defaultMessage:"{text}",id:"completions.completionActions.alternativeUiString"},aiSummaryBlockDisplayName:{defaultMessage:"Summary",id:"completions.completionActions.aiSummaryBlockDisplayName"},aiActionItemsBlockDisplayName:{defaultMessage:"Action items",id:"completions.completionActions.aiActionItemsBlockDisplayName"},aiFreePromptBlockDisplayName:{defaultMessage:"Custom AI block",id:"completions.completionActions.aiFreePromptBlockDisplayName"},aiSectionBlockDisplayName:{defaultMessage:"Custom AI section",id:"completions.completionActions.aiSectionBlockDisplayName"}});function N(e){return function(t){return(0,g.jsx)(w.Z,{...t,title:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,m.t)({width:16,height:16,marginRight:4}),(0,g.jsx)("div",{children:t.title})]}),right:e})}}function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const o=[];if(o.push(...e.slice(0,t)),e.length>t){const n=(0,F.$J)({key:"more actions",render:e=>(0,g.jsx)(w.Z,{...e}),actions:e.slice(t)});o.push((0,F.MV)({key:"more",displayName:T.more,analyticsName:"Completions - more",validators:j.v,svg:()=>(0,g.jsx)(Q,{}),subActions:()=>[n],collapseSubActionsIntoParent:!0,width:350}))}return o}function E(){return(0,g.jsx)(Y,{svg:p.R,svgFill:a.FN.light.purple[500]})}const B=1e3;function O(e){const{key:t,name:o,analyticsName:n,textToInsert:i,onUpdatePromptState:s,right:r,renderTooltip:a,showEllipsis:l,userProvidedSearchName:c,executeImmediately:d,gtmFavoriteId:u}=e,p=o.length>B?`${o.slice(0,B)}…`:o;return(0,F.cN)({key:t,analyticsName:`Completions - insert text into prompt - ${n}`,...(m=l?`${p}…`:p,{displayName:T.alternativeUiString,displayNameInterpolatedValues:{text:m}}),validators:[],closeParentMenu:!1,svg:E,action(){s({insertText:i??o,analyticsName:n,gtmFavoriteId:u,executeImmediately:d})},right:r??$("updatePrompt"),renderTooltip:a,userProvidedSearchName:c});var m}function R(e){const{from:t,type:o,onUpdatePromptState:n}=e;function i(e){return O({key:`completions.${e.key}`,name:(0,b.t8)(e),analyticsName:e.key,textToInsert:(0,A.$W)(e),onUpdatePromptState:n,showEllipsis:!0})}const s="cursor"===o?{selectionType:o,isPageEmpty:!S.IC()}:{selectionType:o},r=(0,b.up)(s),a=(0,b.pv)(r,s),l=[];for(const[c,d]of a){const e=[];for(const s of d)"helpMeDraft"!==s.key&&"helpMeEdit"!==s.key&&"helpMeWrite"!==s.key&&("translate"===s.key?e.push(W(s,j.v,o,t)):"changeTone"===s.key?e.push(H(s,j.v,o,t)):s.steps?e.push(i(s)):e.push(z({prompt:s,validators:j.v,type:o,from:t})));const n=(0,F.$J)({key:`completions.${c}`,title:(0,b.Mh)(c,"cursor"===o?"page":"selection"),render:e=>(0,g.jsx)(w.Z,{...e}),actions:L(e.filter(v.$K),7)});l.push(n)}return"cursor"===o&&l.push((0,F.$J)({key:"completions.aiBlocks",title:b.Dr.aiBlocks,render:e=>(0,g.jsx)(w.Z,{...e}),actions:M.O5.map((e=>function(e){const t=M.Hc[e.aiBlockType],{displayName:o,svg:n}=Z[e.aiBlockType],i=e=>!t.shouldShow||t.shouldShow(e);return(0,F.cN)({key:`completions.aiBlocks.${t.key}`,analyticsName:`Completions - ${t.key}`,closeParentMenu:!0,svg:n,displayName:o,validators:[...j.v,i],action:e=>{let{environment:o}=e;C.createAndCommit({userAction:"completionActions.createAiBlockAction",environment:o,perform:e=>{x.at({environment:o,selection:_.default.state.stores,createBlockItem:t,analyticsFrom:"ai_prompt",transaction:e})}})}})}({aiBlockType:e})))})),l}const Z={[r.MF.aiSummaryBlock]:{displayName:T.aiSummaryBlockDisplayName,svg:()=>(0,g.jsx)(X,{svg:c.Y})},[r.MF.aiActionItemsBlock]:{displayName:T.aiActionItemsBlockDisplayName,svg:()=>(0,g.jsx)(X,{svg:l.O})},[r.MF.aiFreePromptBlock]:{displayName:T.aiFreePromptBlockDisplayName,svg:()=>(0,g.jsx)(X,{svg:m.t})}};function D(e){return(0,F.$J)({key:"completions",title:T.notionAI,render:N(),actions:U(e)})}function U(e){const{store:t,from:o}=e,n=[];for(const i of(0,I.G9)()){if("helpMeWrite"===i.key)continue;const e=z({prompt:i,validators:j.v,type:"aiBlock",from:o,store:t});e&&n.push(e)}return n}function V(e){const{environment:t,inputValue:o,store:n}=e,i=(0,I.qB)({customPrompt:o,isPageEmpty:!1});k.triggerCompletionForAiBlock({environment:t,store:n,prompt:i,additionalContext:{prompt:o}})}function W(e,t,o,n){const{key:i,name:s,svg:r,svgFill:a,steps:l}=e;if("translate"!==i||!l||1!==l.length||"language"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:s,name:r}=i;return(0,F.cN)({key:`completions.translate.${s}`,analyticsName:`Completions - translate - ${s}`,displayName:r,validators:t,closeParentMenu:!0,right:$("submitPrompt"),action:t=>{let{environment:i}=t;J({environment:i,prompt:e,from:n,type:o,additionalContext:{language:s}})}})})),d=(0,F.$J)({key:"translate language actions",render:e=>(0,g.jsx)(w.Z,{...e}),actions:c}),u=r?()=>(0,g.jsx)(Y,{svg:r,svgFill:a}):void 0;return(0,F.MV)({key:"translate",displayName:s,analyticsName:`Completions - ${i}`,validators:t,svg:u,subActions:()=>[d]})}function H(e,t,o,n){const{key:i,name:s,svg:r,svgFill:a,steps:l}=e;if("changeTone"!==i||!l||1!==l.length||"tone"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:s,name:r}=i;return(0,F.cN)({key:`completions.changeTone.${s}`,analyticsName:`Completions - changeTone - ${s}`,displayName:r,validators:t,closeParentMenu:!0,right:$("submitPrompt"),action:t=>{let{environment:i}=t;J({environment:i,prompt:e,from:n,type:o,additionalContext:{tone:s}})}})})),d=(0,F.$J)({key:"changeTone tone actions",render:e=>(0,g.jsx)(w.Z,{...e}),actions:c}),u=r?()=>(0,g.jsx)(Y,{svg:r,svgFill:a}):void 0;return(0,F.MV)({key:"changeTone",displayName:s,analyticsName:`Completions - ${i}`,validators:t,svg:u,subActions:()=>[d]})}function K(e){window.__c={n:"ActionHintIcon"};const{focused:t,type:o}=e,r=(0,n.O7)(),a=(0,i.VK)((()=>r.device.isPhone),[r]),l=(0,s.yK)((e=>({iconStyle:{width:14,height:14,fill:e.mediumIconColor,opacity:!a&&t?1:0},containerStyle:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,a]);switch(o){case"submitPrompt":return(0,g.jsx)("div",{style:l.containerStyle,children:(0,u.U)(l.iconStyle)});case"updatePrompt":return(0,g.jsx)("div",{style:l.containerStyle,children:y(l.iconStyle)});default:(0,v.t1)(o)}}function $(e){return t=>(0,g.jsx)(K,{type:e,focused:t.focused})}function q(e){const{customPrompt:t,execute:o}=e;return(0,F.cN)({analyticsName:"Completions - execute current prompt input",key:"explicitFreeFormAction",displayName:b.Dr.genericHelpMeWrite,displayNameInterpolatedValues:{filter:t},svg:E,right:$("submitPrompt"),validators:[],closeParentMenu:!1,renderTooltip:F.zz,action(){o()}})}function z(e){const{prompt:t,validators:o,type:n,from:i,store:s,sortScoreMultiplier:r}=e,{key:a,name:l}=t;if("translate"===a&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return W(t,o,n,i);if("changeTone"===a&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return H(t,o,n,i);const c=function(e){const{svg:t,svgFill:o}=e;return t?()=>(0,g.jsx)(Y,{svg:t,svgFill:o}):void 0}(t),d=[...o];return t.requiresContent?d.push(S.IC):t.requiresNoContent&&d.push(S.ff(S.IC)),(0,F.cN)({key:`completions.${a}`,analyticsName:`Completions - ${a}`,displayName:l,fuzzySearchKeywords:t.fuzzySearchKeywords,validators:d,closeParentMenu:!0,svg:c,right:$("submitPrompt"),sortScoreMultiplier:r,action:e=>{let{environment:o}=e;J({environment:o,prompt:t,type:n,from:i,store:s})}})}function J(e){const{environment:t,prompt:o,type:n,from:i,store:s,additionalContext:r}=e;if("textSelection"===n)k.openCompletionPopupForSavedContext({environment:t,prompt:o,from:i,additionalContext:r});else if("blockSelection"===n)k.openCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:r});else if("cursor"===n){if(o.preferToNeverInsertTextAtCursor)return void k.selectPageAndOpenCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:r});k.openCompletionPopupForCursorContext({environment:t,prompt:o,from:i,additionalContext:r})}else"aiBlock"===n?s&&k.triggerCompletionForAiBlock({environment:t,store:s,prompt:o,additionalContext:r}):(0,v.t1)(n)}function G(e){const{inputValue:t,from:o,mode:n,environment:i}=e;switch(n){case"edit":return void function(e){const{customPrompt:t,from:o,environment:n}=e,i=(0,b.sB)(t);"closedWithContext"===P.default.state.type&&P.default.state.context&&k.openCompletionPopupForPrefilledContext({environment:n,context:P.default.state.context,prompt:i,additionalContext:{prompt:t},from:o,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o});case"write":const e=(0,b.wq)(t);if(e){const{prompt:t,additionalContext:n}=e,s=(0,A.FD)();if(!s)return;return void k.openCompletionPopupForPrefilledContext({environment:i,context:s,prompt:t,additionalContext:n,from:o,skipInitialForm:!0})}return void function(e){const{environment:t,customPrompt:o,from:n}=e,i=(0,I.qB)({customPrompt:o,isPageEmpty:!S.IC()}),s=(0,A.FD)();s&&k.openCompletionPopupForPrefilledContext({environment:t,context:s,prompt:i,additionalContext:{prompt:o},from:n,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o})}(0,v.t1)(n)}function Q(){window.__c={n:"MoreIcon"};const e=(0,s.Fg)();return(0,d.o)({width:12,marginLeft:2,marginRight:2,fill:e.mediumIconColor})}function Y(e){window.__c={n:"BoxedIcon"};const t=(0,s.yK)((t=>({box:{height:e.fixedWidth?22:void 0,width:e.fixedWidth?22:void 0,display:"flex",alignItems:"center",justifyContent:"center",...e.boxStyles},icon:{height:16,width:16,fill:e.svgFill??(0,a.gh)({theme:"light"}).regularIconColor}})),[e]);return(0,g.jsx)("div",{style:t.box,children:e.svg(t.icon)})}function X(e){window.__c={n:"AiBlockIcon"};const t=(0,s.yK)((e=>({box:{background:e.fill.purple,width:24,height:24,borderRadius:4},icon:{fill:e.icon.purple}})),[]);return(0,g.jsx)(Y,{svg:e.svg,svgFill:t.icon.fill,boxStyles:t.box})}},79474:(e,t,o)=>{o.d(t,{r:()=>i});var n=o(43604);async function i(e){return new Promise((t=>{n.Z.setState({open:!0,onClose:()=>{n.Z.setState({open:!1}),t(!1)},onConfirm:()=>{n.Z.setState({open:!1}),t(!0)},...e})}))}},16091:(e,t,o)=>{o.d(t,{ND:()=>_,RD:()=>M,gc:()=>j,gl:()=>P,u7:()=>I});var n=o(67294),i=o(36769),s=o(480),r=o(86628),a=o(41432),l=o(9291),c=o(11969),d=o(82530),u=o(37181),p=o(81415),m=(o(95477),o(19124)),f=o(68056),g=o(89086),y=o(28685),v=o(80444),h=o(77080),x=o(83212),C=o(79797),k=o(24666),w=o(47449),S=o(89626),A=o(85893);const b=(0,l.defineMessages)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function I(){window.__c={n:"SpaceForAiOnboardingTooltip"};const e=(0,s.O7)(),t=function(){const e=(0,s.O7)(),t=(0,r.VK)((()=>{const t=v.default.state.mainEditorCurrentBlockStore;return t&&x.Z.getMode(e,t)}),[e]);return(0,r.VK)((()=>{if(e.device.isMobile)return;if(!h.default.checkGate("space_for_ai_tooltip_enabled"))return;const{currentUserSettingsStore:o,inAppCalloutStore:n}=v.default.state;if(!n.canShow("ai_onboarding_tooltip"))return;const i=null==o?void 0:o.getSettings();if(!i)return;if(i.signup_time&&i.signup_time>16770636e5)return;if("space_for_ai"!==(0,S.sy)())return;if(!(0,m.GD)(t))return;const s=k.default.state;if("editing"===s.mode){const e=(0,f.QY)(s.multiSelection);if(e&&(0,g.wd)(e.selection)){const t=e.store,o=y.E.findEditableWithStore(t);if(o){const e="block"===t.pointer.table?C.G.createChildStore(t,t.pointer):void 0,n=e&&e.getType(),i=Boolean(n&&(0,a.hD)(n)),s=t.getValue();if(i&&!s)return o}}}}),[e,t])}();return t?(0,A.jsx)(p.U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,A.jsx)(l.FormattedMessage,{...b.spaceForAiHeader}),content:(0,A.jsx)(l.FormattedMessage,{...b.spaceForAiContent}),onCloseClick:()=>(0,S.h1)(e)}):null}function M(e){window.__c={n:"AskAIAnythingOnboardingTooltip"};const{originRef:t,openState:o}=e,n=(0,s.O7)(),i=(0,r.VK)((()=>(0,S.sy)()),[]);if(n.device.isMobile)return null;return"ask_ai_anything"===i&&"initialPrompt"===o.stage?(0,A.jsx)(p.U,{origin:t,placementToOrigin:"top",header:(0,A.jsx)(l.FormattedMessage,{...b.askAiAnythingHeader}),content:(0,A.jsx)(l.FormattedMessage,{...b.askAiAnythingContent}),onCloseClick:()=>(0,S.h1)(n)}):null}function P(e){window.__c={n:"RefineAIResponseOnboardingTooltip"};const{originRef:t,openState:o,isInputEmpty:n}=e,i=(0,s.O7)(),a=(0,r.VK)((()=>(0,S.sy)()),[]);if(i.device.isMobile)return null;const c="refine_ai_response"===a&&"results"===o.stage&&!o.loading&&"cursor"===o.context.type&&n;return(0,A.jsx)(p.U,{origin:c?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,A.jsx)(l.FormattedMessage,{...b.refineAiResponseHeader}),content:(0,A.jsx)(l.FormattedMessage,{...b.refineAiResponseContent}),onCloseClick:()=>(0,S.h1)(i)})}function _(e){window.__c={n:"ShowAssistantOriginElementLocationTooltip"};const{origin:t}=e,o=(0,s.O7)();(0,n.useEffect)((()=>{c.K(o,{from:"qna_button"})}),[o]);const i=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e}=v.default.state;e&&(c.y(o,{from:"qna_button"}),(0,w.CX)(o,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[o]);return(0,A.jsx)(p.U,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,A.jsx)(l.FormattedMessage,{...b.showAssistantOriginElementLocationHeader}),content:(0,A.jsx)(l.FormattedMessage,{...b.showAssistantOriginElementLocationContent}),onCloseClick:i})}function j(e){window.__c={n:"ShowAssistantLocationTooltip"};const{origin:t}=e,o=(0,s.O7)();(0,n.useEffect)((()=>{c.K(o,{from:"qna_search"})}),[o]);const i=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e}=v.default.state;e&&(c.y(o,{from:"qna_search"}),(0,w.CX)(o,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[o]);return(0,A.jsx)(p.U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,A.jsx)(l.FormattedMessage,{...b.showAssistantLocationHeader}),content:(0,A.jsx)(l.FormattedMessage,{...b.showAssistantLocationContent}),onCloseClick:i})}(0,i.exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=v.default.state;t&&d.createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,perform:e=>{u.d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},47449:(e,t,o)=>{o.d(t,{qC:()=>g,Up:()=>f,CX:()=>m});var n=o(4615),i=o(54642),s=o(82530),r=o(37181),a=o(49085),l=o(92595);class c extends a.default{getInitialState(){return{loadingState:"initial"}}}const d=new c,u=d;(0,l.exposeDebugValue)("AiSuggestedPageQnaStore",d);var p=o(21273);function m(e,t){const{phase:o,transactionUserAction:n,userSettingsStore:i}=t;s.createAndCommit({environment:e,userAction:n,perform:e=>{r.d2({userSettingsStore:i,transaction:e,data:{ai_qna_intro_onboarding_phase:o}})}})}function f(e,t){const{userSettingsStore:o}=t;s.createAndCommit({environment:e,userAction:"aiQnaActions.setLastExposedToQnaAtToCurrentTimestamp",perform:e=>{r.d2({userSettingsStore:o,transaction:e,data:{last_exposed_to_ai_qna_at:Date.now()}})}})}async function g(e){let{environment:t,blockStore:o,reminderNumber:s,spaceId:r}=e;const a=await async function(e){let{environment:t,blockStore:o,reminderNumber:s,spaceId:r}=e;if("initial"===u.state.loadingState||u.state.reminderNumber!==s){const e=i.getSuggestedPageQna(t,{blockPointer:{...o.pointer,spaceId:r},aiSessionId:(0,n.ZP)()}).then((e=>"success"!==e.type?(u.setState({loadingState:"error",reminderNumber:s}),[]):e.data.questions));u.setState({loadingState:"loading",reminderNumber:s});const a=await e;return u.setState({loadingState:"loaded",reminderNumber:s,questions:a}),a[0]}if("loading"===u.state.loadingState)return u.waitUntil((()=>"loaded"===u.state.loadingState)).then((()=>"loaded"===u.state.loadingState?u.state.questions[0]:void 0));if("loaded"===u.state.loadingState){return u.state.questions[0]}return}({environment:t,blockStore:o,reminderNumber:s,spaceId:r});if(a&&p.Z.isQnaPageSuggestedQuestionRemindersEnabledForUser())return a}},44866:(e,t,o)=>{o.r(t),o.d(t,{autofillPropertyForBlocks:()=>G,autofillPropertyForCollection:()=>Y,fillAllPagesMessages:()=>V,getDefaultAiInference:()=>te,getPropertyCompletionForBlock:()=>ee,saveOrRemovePropertyAiInference:()=>X,submitFeedbackForAiAutofill:()=>Q,triggerAiAutofillUpsell:()=>z});o(57658);var n=o(67294),i=o(26263),s=o(99036),r=o(80951),a=o(74229),l=o(482),c=o(4615),d=o(3791),u=o(97880),p=o(9291),m=o(10910),f=o(8406),g=o(54642),y=o(893),v=o(79474),h=o(47307),x=o(96802),C=o(9953),k=o(64964),w=o(82530),S=o(75330),A=o(86628),b=o(98519),I=o(52423),M=o(79576),P=o(73420),_=o(68785),j=o(6854),F=o(85893);const T=function(e){let{environment:t,inferenceIds:o,aiInference:i}=e;window.__c={n:"AiAutofillProgressLabel"};const s=(0,A.VK)((()=>{const{state:e}=M.W;return"uninitialized"===e.type?null:{numBlocksToAutofill:e.numBlocksToAutofill,numBlocksAutofilled:e.numBlocksAutofilled,propertySchema:e.propertySchema,collectionId:e.collectionId,sessionId:e.sessionId,haveAllBlocksCompletedAutofill:e.haveAllBlocksCompletedAutofill}}),[]),r=(0,n.useCallback)((()=>{s&&(o.forEach((e=>{m.qG(t,{ai_inference_type:i.type,type:"undo_from_snackbar",inference_id:e,collection_id:s.collectionId,session_id:s.sessionId})})),I.Yw(t,!0),k.rN(),M.W.setState({type:"filling",...s,didInterruptStreaming:!0}))}),[s,t,i,o]);if(!s)return null;const{numBlocksToAutofill:a,numBlocksAutofilled:l,propertySchema:{name:c}}=s;return l===a?(0,F.jsxs)(P.X2,{gap:4,alignItems:"center",children:[(0,b.k)({width:16}),(0,F.jsx)(p.FormattedMessage,{defaultMessage:'AI updated "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillInProgress",values:{propertyName:c,numPages:a}}),(0,F.jsx)(j.Pn,{onClick:r,children:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Undo",id:"snackbar.aiAutofill.undo"})}),(0,F.jsx)(j.Pn,{onClick:()=>{k.rN()},children:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Close",id:"snackbar.aiAutofill.close"})})]}):(0,F.jsxs)(P.X2,{gap:4,alignItems:"center",children:[(0,F.jsx)(_.Z,{}),0===l?(0,F.jsx)(p.FormattedMessage,{defaultMessage:'AI updating "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillStarting",values:{propertyName:c,numPages:a}}):(0,F.jsx)(p.FormattedMessage,{defaultMessage:'AI updated "{propertyName}" on {numFilledPages} of {numTotalPages} pages',id:"snackbar.aiAutofill.completedAutofill",values:{propertyName:c,numFilledPages:l,numTotalPages:a}}),(0,F.jsx)(j.Pn,{onClick:r,children:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Stop & undo",id:"snackbar.aiAutofill.undoAndStop"})})]})};var N=o(33929),L=o(77907),E=o(80444),B=o(79797),O=o(1310),R=o(44041),Z=o(35057),D=o(88280),U=o(84654);const V=(0,p.defineMessages)({fillAllPagesTooltip:{defaultMessage:"{hasNames, select, true {Autofill {propertyName} for all pages in {collectionName}} other {Autofill this property for all pages in the database}}",id:"aiAutofill.fillAllPages.buttonTooltip"},fillAllPagesAddOnMessage:{defaultMessage:"Only with Notion AI add-on",id:"aiAutofill.fillAllPages.onlyWithAiAddOnMessageInTooltip"}});function W(e){let{environment:t,propertyId:o,propertySchema:n,storesWithCompletions:i,blockIdToInferenceId:a,useTemporaryStore:l,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d,doneStreaming:p,aiInferenceOverride:m}=e;w.createAndCommit({userAction:"BlockPropertyValue.handleActionButtonClick.aiAutofill",environment:t,canUndo:!Boolean(l),undoCheckpoint:!0,perform:e=>{var t;for(const{store:f,temporaryStore:g,completion:v}of i){const i=l?g:f;let h;switch(n.type){case"text":h=y.of({text:v.trim(),stripText:!1,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d});break;case"multi_select":case"select":const i=l?null===(t=f.getAssociatedCollectionStore())||void 0===t?void 0:t.clone(g.inMemoryRecordCache):f.getAssociatedCollectionStore(),a=m??n.select_ai_inference;let x=v.trim().split(",").map((e=>e.trim()));if(p||(x=x.slice(0,-1)),i&&null!=a&&a.add_options){const t=(0,s.RR)({newTokenValues:x.length>0&&"select"===n.type?[[x[0]]]:[x],property:o,propertySchema:n,collectionId:i.id});if(t)for(const o of t)w.applyOperation({store:i,operation:o,transaction:e})}null!=a&&a.add_options||(x=x.filter((e=>{var t;return null===(t=n.options)||void 0===t?void 0:t.find((t=>t.value===e))}))),h=(0,r.zq)(x);break;default:(0,u.t1)(n)}C.sO({store:i.getPropertyStore(o),value:h,transaction:e});const k=i.getFormat().ai_property_inference_map??{},S=a[f.id]??"";x.FH({stores:[i],update:{ai_property_inference_map:{...k,[o]:{inference_id:S,created_time:Date.now()}}},transaction:e})}}})}const H=(0,p.defineMessages)({FAILED_TO_AUTOFILL:{defaultMessage:"Something went wrong. Please try again later",id:"propertyCompletionActions.error.unableToAutofill"},INVALID_PROPERTY_FOR_AUTOFILL:{defaultMessage:"Invalid property configuration for AI autofill",id:"propertyCompletionActions.error.invalidPropertyForAutofill"},NO_BLOCKS_TO_AUTOFILL:{defaultMessage:"Nothing to update with AI",id:"propertyCompletionActions.error.noBlocksToAutofill"}}),K=(0,p.defineMessages)({featureUnavailable:{id:"completionActions.featureNotEnabledError",defaultMessage:"This feature is not currently enabled"}});function $(e){let{autofillPropertyResult:t}=e;const o=N.default.formatMessage(H[t]);k.rN(),h.deprecatedShowErrorMessage(o)}const q={ai_limit_property_autofill:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Auto-update requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.autoUpdateOnPageEditUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Updating all pages requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.fillAllPagesUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Filling more pages at once requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.bulkFillUpsellDialogMessage"})};function z(e){var t;let{environment:o,from:n}=e;null!==(t=E.default.state.currentSpaceStore)&&void 0!==t&&t.canAdmin()||h.deprecatedShowErrorMessage(q[n]),R.y(o,{from:n,for:(0,Z.zt)(),addOnFeature:"ai"})}function J(e){let{errorCode:t,environment:o}=e;return 405===t?k.oV({label:N.default.formatMessage(K.featureUnavailable)}):(402===t&&(k.rN(),z({environment:o,from:"ai_limit_property_autofill"})),U.showCompletionErrorWithCode(t))}async function G(e){var t;let{environment:o,stores:n,property:r,propertySchema:l,userEventForAnalytics:d,sessionIdForAnalytics:p,collectionContextStore:y,from:v,isBulkAction:h,aiInferenceOverride:x}=e;const C=p||(0,c.ZP)(),w=r,S=n.map((e=>({spaceId:e.getSpaceId(),...e.pointer,propertyId:w,inferenceId:(0,c.ZP)()}))),A=n[0].getAssociatedCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),b=new i.Z({name:"propertyCompletionActions.autofillPropertyForBlocks"});if(M.W.setIsWriting({stores:n,propertySchema:l,sessionIdForAnalytics:p}),"uninitialized"!==M.W.state.type&&(0,s.qQ)(l)&&A){k.oV({label:(0,F.jsx)(T,{environment:o,inferenceIds:S.map((e=>e.inferenceId)),aiInference:(0,s.q3)(l)}),durationMs:O.JY});try{var I;if(o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(b),!(0,u.Of)(S))return $({autofillPropertyResult:"NO_BLOCKS_TO_AUTOFILL"});const e=x||(0,s.q3)(l);if(!e)return $({autofillPropertyResult:"INVALID_PROPERTY_FOR_AUTOFILL"});S.forEach((t=>{m.qG(o,{type:d,inference_id:t.inferenceId,ai_inference_type:e.type,collection_id:A,session_id:C})})),null!==(I=E.default.state.currentSpaceStore)&&void 0!==I&&I.id&&g.publishAiSession(o,{inference_type:"autofill",id:C,spaceId:E.default.state.currentSpaceStore.id,metadata:{blockPropertyPointers:S,aiInference:e,collection_id:A}});const t=await g.getCompletionForProperty(o,{blockPropertyPointers:S,aiInference:e,aiSessionId:C,model:"default"});if("success"!==t.type)return $({autofillPropertyResult:"FAILED_TO_AUTOFILL"});y&&f.rv({block_id:n[0].pointer.id,property:w,property_type:l.type,from:v,environment:o,collectionContextStore:y,isFromBulkActionsToolbar:h});const i=Object.fromEntries(n.map((e=>[e.pointer.id,{store:e,temporaryStore:e.clone(b),completion:""}]))),r=Object.fromEntries(S.map((e=>[e.id,e.inferenceId]))),c=new Set,[p,k]=await Promise.all([L.deps.markdownLinkifyIt.loader(),L.deps.tinyMceMicrosoftWordPasteFilter.loader()]);if(a.H1.is(t.data)){for await(const e of t.data){if("error"===e.type)return M.W.setState({...M.W.state,didInterruptStreaming:!0}),J({errorCode:e.errorCode,environment:o});if(M.W.state.didInterruptStreaming)return;const t=i[e.blockPropertyPointer.id],n=t.completion+e.completion;i[e.blockPropertyPointer.id]={...t,completion:n},c.add(e.blockPropertyPointer.id),W({environment:o,propertyId:w,propertySchema:l,storesWithCompletions:Object.values(i),blockIdToInferenceId:r,useTemporaryStore:!0,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:k,aiInferenceOverride:x}),M.W.setState({...M.W.state,numBlocksAutofilled:c.size})}M.W.setState({...M.W.state,haveAllBlocksCompletedAutofill:!0})}o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(b),W({environment:o,propertyId:w,propertySchema:l,storesWithCompletions:Object.values(i),blockIdToInferenceId:r,useTemporaryStore:!1,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:k,doneStreaming:!0,aiInferenceOverride:x})}finally{o.defaultRecordCache.inMemoryRecordCache.hasCacheOverride(b)&&o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(b)}}}function Q(e){const{environment:t,inferenceId:o,feedbackType:n,userContent:i,shareWithNotion:s}=e;m.NF(t,{type:"property_autofill",inference_id:o,feedback_type:n,timestamp:(new Date).toUTCString(),user_comment:i,share_with_notion:s})}async function Y(e){var t,o;let{environment:n,collectionStore:i,propertySchema:r,property:a,sessionIdForAnalytics:u}=e;if(!(0,s.qQ)(r))return;const p=(0,s.q3)(r);if(!i||!r||!p)return;const f=(null===(t=D.subscriptionDataStoreInstance.state)||void 0===t?void 0:t.addOns)??[];if(!(0,d.de)(f))return void z({environment:n,from:"ai_autofill_fill_all_pages"});if(!(await v.r({sourceAction:"fill_all_pages",propertyName:r.name,collectionName:(null===(o=i.getName())||void 0===o?void 0:o.toString())||""})))return;m.qG(n,{type:"generate_from_fill_all_pages",inference_id:(0,c.ZP)(),ai_inference_type:p.type,collection_id:i.id,session_id:u??(0,c.ZP)()});const g=[];g.push(l.op.update({pointer:i.pointer,path:["format","update_ai_inferences_status"],args:{[a]:{type:"requested",created_time:Date.now()}}})),S.HW({environment:n,collectionStore:i,performTransaction:e=>{for(const t of g)w.applyOperation({store:(0,B.Kv)(i,t.pointer),operation:t,transaction:e})}})}function X(e){const{environment:t,propertySchema:o,collectionStore:n,property:i,draftAiInference:r}=e;let a="";switch(o.type){case"text":a="ai_inference";break;case"select":case"multi_select":a="select_ai_inference";break;default:return}const l=[];if(l.push({pointer:n.pointer,command:"set",path:["schema",i,a],args:r}),r)m._e(t,{type:"set_ai_inference",ai_inference_type:r.type,collection_id:n.id});else{const e=(0,s.q3)(o);m._e(t,{type:"remove_ai_inference",ai_inference_type:null==e?void 0:e.type,collection_id:n.id})}S.HW({environment:t,collectionStore:n,performTransaction:e=>{for(const t of l)w.applyOperation({store:(0,B.Kv)(n,t.pointer),operation:t,transaction:e})}})}async function ee(e){var t;let{environment:o,store:n,property:i,propertySchema:s,userEventForAnalytics:r,sessionIdForAnalytics:l}=e;const d=l||(0,c.ZP)(),u=i,p={spaceId:n.getSpaceId(),...n.pointer,propertyId:u,inferenceId:(0,c.ZP)()},f=n.getAssociatedCollectionId()??(null===(t=n.getCollectionViewCollectionStore())||void 0===t?void 0:t.id),y=te(s,!1);if(!y)return"";m.qG(o,{type:r,inference_id:p.inferenceId,ai_inference_type:y.type,collection_id:f,session_id:d});const v=(0,c.ZP)();g.publishAiSession(o,{inference_type:"autofill",id:v,metadata:{blockPropertyPointers:[p],aiInference:y,collection_id:f}});const h=await g.getCompletionForProperty(o,{blockPropertyPointers:[p],aiInference:y,aiSessionId:v,model:"default"});if("success"!==h.type)return"";let x="";if(a.H1.is(h.data))for await(const a of h.data)"error"!==a.type&&(x+=a.completion);return x}function te(e,t){if(!(0,s.qQ)(e))return;const o=(0,s.q3)(e);return!o&&(0,s.cu)(e)?{type:e.type,auto_update_on_edit:t,add_options:!1}:o}},77623:(e,t,o)=>{o.r(t),o.d(t,{AiEligibilityUpdater:()=>Io,CompletionPopup:()=>ko,completionActions:()=>i,completionInitialPromptActions:()=>s,favoriteImportActions:()=>r,propertyCompletionsActions:()=>n});var n=o(44866),i=o(84654),s=o(92022),r=o(62878),a=o(67294),l=o(18466),c=o(26263),d=o(1302),u=o(480),p=o(86628),m=o(24405),f=o(42875),g=o(66673),y=o(82883),v=o(62965),h=o(97880),x=o(9291),C=o(46564),k=o(10910),w=o(893),S=o(82530),A=o(3386),b=o(43250),I=o(99417),M=o(43455),P=o(95083),_=o(77907),j=o(16772),F=o(29798),T=o(89626),N=o(16091),L=o(41892),E=o(70203),B=o(56863),O=o(98104),R=o(81598),Z=o(68657),D=o(21273),U=o(98180),V=o(57819),W=o(48019),H=o(78140),K=o(87279),$=o(85893);function q(e){window.__c={n:"MenuPopupContent"};const{sections:t,onCloseParentMenu:o,context:n,menuListStore:i}=e,s=(0,a.useCallback)((e=>{e.closeParentMenu&&o()}),[o]),r=(0,u.O7)(),l=(0,p.VK)((()=>r.device.isPhone),[r]);return(0,$.jsx)(H.Z,{menuType:l?K.og.ActionSheet:K.og.Popup,width:"100%",maxHeight:l?"min(17vh, 160px)":"min(40vh, 320px)",maxWidth:"100%",children:(0,$.jsx)(W.Z,{menuListStore:i,sections:t,onAccept:s,initialFocus:0,context:n})})}o(21703);var z=o(87205),J=o(8848),G=o(30579),Q=o(88607),Y=o(13148),X=o(1230),ee=o(98519),te=o(55863),oe=o(72126),ne=o(4615),ie=o(62967),se=o(72794),re=o(72495),ae=o(68204),le=(o(30541),o(57658),o(7500)),ce=o(25651),de=o(91427),ue=o(37612),pe=o(80444),me=o(50780),fe=o(47307),ge=o(64964),ye=o(73063),ve=o(45010),he=o(77080),xe=o(30793),Ce=o(71184);const ke="favorite-actions",we=100,Se=(0,x.defineMessages)({favoriteActions:{defaultMessage:"Favorites",id:"ai.favoriteActions.title"},editOrShareFavorite:{defaultMessage:"Edit or share favorite",id:"ai.favoriteActions.editOrShare"}});function Ae(){const[e,t]=(0,a.useState)(void 0),o=(0,p.VK)((()=>he.default.checkGate("ai_favorites")),[]);return function(e){const t=(0,g.D9)(e);(0,a.useEffect)((()=>{e!==t&&ve.Z.MenuScroller&&ve.Z.MenuScroller.scrollToTop()}),[e,t])}(Boolean(e)),(0,a.useMemo)((()=>o?e?{type:"active",current:e,set:t,clear:()=>t(void 0)}:{type:"inactive",set:t}:{type:"disabled"}),[e,o])}const be={maxWidth:400,whiteSpace:"pre-wrap"};function Ie(e){const{value:t}=e;return(0,$.jsx)("div",{style:be,children:(0,$.jsx)("div",{children:t.action.prompt})})}function Me(e){const{state:t,environment:o,sessionId:n}=e,{currentUserSettingsStore:i}=pe.default.state;i&&(t.current.name?(S.createAndCommit({userAction:"favoriteActions.saveFavoriteEditsAndClearState",environment:o,perform(e){(0,Ce.gC)(t.current,i,e)}}),t.clear(),k.Vo(o,{type:"save",session_id:n,gtm_favorite_id:t.current.gtmFavoriteId})):ge.oV({label:(0,$.jsx)(x.FormattedMessage,{defaultMessage:"Please enter a name for the action.",id:"ai.favoriteActions.nameRequiredMessage"})}))}var Pe=o(36769),_e=o(64275),je=o(56666),Fe=o(37181);const Te=3,Ne="recent-actions",Le=(0,x.defineMessages)({recentActions:{defaultMessage:"Recents",id:"commandPalette.recentActions.title"},more:{defaultMessage:"See more",id:"commandPalette.recentActions.more"},removeFromMenu:{defaultMessage:"Remove this action from the menu",id:"commandPalette.recentActions.removeFromMenu"},addToFavorites:{defaultMessage:"Add to favorites",id:"commandPalette.recentActions.addToFavorites"}});function Ee(e){window.__c={n:"FavoriteButton"};const{focused:t,recentAction:o,state:n,intl:i,sessionId:s}=e,r=(0,u.O7)();return(0,$.jsx)(ye.Z,{style:{visibility:t?"visible":"hidden",width:18,height:18},onClick:()=>{k.Vo(r,{type:"create_from_recent",session_id:s,gtm_favorite_id:void 0}),n.set((0,Ce.kg)(o))},icon:de.e,ariaLabel:i.formatMessage(Le.addToFavorites)})}function Be(){window.__c={n:"MoreIcon"};const e=(0,m.Fg)();return(0,je.o)({width:12,fill:e.mediumIconColor,marginLeft:2,marginRight:2})}(0,Pe.exposeDebugEnvironmentValue)("resetRecentAndFavoriteAIActions",(e=>()=>{const{currentUserSettingsStore:t}=pe.default.state;if(!t)throw new Error("currentUserSettingsStore not found");S.createAndCommit({userAction:"recentActions.debugging.resetRecentAndFavoriteAIActions",environment:e,perform(e){Fe.d2({userSettingsStore:t,transaction:e,data:{recent_ai_actions:[],favorite_ai_actions:[]}})}})}));const Oe="This string should never show up in analytics",Re=(0,x.defineMessages)({clickToEditAndRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToEditAndRetry",defaultMessage:"Click to edit prompt and retry"},clickToRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToRetry",defaultMessage:"Click to retry"},tryAgain:{id:"completions.CompletionMenuActionBar.tryAgain",defaultMessage:"Try again"},delete:{id:"completions.CompletionMenuActionBar.delete",defaultMessage:"Discard"},close:{id:"completions.CompletionMenuActionBar.close",defaultMessage:"Close"},keep:{id:"completions.CompletionMenuActionBar.done",defaultMessage:"Done"},accept:{id:"completions.CompletionMenuActionBar.accept",defaultMessage:"Accept changes"},replace:{id:"completions.CompletionMenuActionBar.replace",defaultMessage:"Replace selection"},insert:{id:"completions.CompletionMenuActionBar.insert",defaultMessage:"Insert below"},addToFavorites:{id:"completions.CompletionMenuActionBar.addToFavorites",defaultMessage:"Add to favorites"}});function Ze(e){const{filter:t,state:o,from:n,favoriteEditingState:i,onUpdatePromptState:s,onImprove:r,context:a,intl:l,environment:c,completionResultInfo:d}=e;let u;switch(o.stage){case"initialPrompt":case"initialPromptForAIBlock":u=function(e){const{state:t,environment:o,intl:n,filter:i,from:s,onUpdatePromptState:r,favoriteEditingState:a,type:l}=e,{currentUserSettingsStore:c}=pe.default.state,d=c?function(e,t,o,n,i){const s=i.filterOut.toLocaleLowerCase().trim(),r=(0,xe.pz)(o),a=[];let l=0;for(const u of r){const r="recentAction."+l++,c=s=>(0,$.jsxs)("div",{style:{display:"flex"},children:[(0,$.jsx)(ye.Z,{style:{visibility:s.focused?"visible":"hidden",width:18,height:18},onClick:()=>S.createAndCommit({userAction:"ai.recentActions.renderRemoveButton",environment:n,perform(e){(0,xe.lG)(u,o,e)}}),icon:_e.D,ariaLabel:t.formatMessage(Le.removeFromMenu)}),"inactive"===i.favoriteEditingState.type?(0,$.jsx)(Ee,{sessionId:e.sessionId,state:i.favoriteEditingState,focused:s.focused,recentAction:u,intl:t}):(0,$.jsx)(C.xj,{type:"updatePrompt",focused:s.focused})]});let d;if(u.prompt.toLocaleLowerCase().trim()!==s){switch(u.type){case"helpMeEdit":"initialPrompt"!==e.stage||"blockSelection"!==e.context.type&&"textSelection"!==e.context.type||(d=(0,C.cK)({key:r,name:u.prompt,analyticsName:"recentAction",right:c,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:ie.zz}));break;case"helpMeWrite":"initialPromptForAIBlock"!==e.stage&&"cursor"!==e.context.type||(d=(0,C.cK)({key:r,name:u.prompt,analyticsName:"recentAction",right:c,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:ie.zz}));break;default:(0,h.t1)(u)}d&&a.push(d)}}const c=a.slice(0,Te),d=a.slice(Te);if(d.length){const e=(0,ie.$J)({key:"more recent actions",render:e=>(0,$.jsx)(re.Z,{...e}),actions:d}),t=(0,ie.MV)({key:"more recent actions extension",displayName:Le.more,analyticsName:"Completions - more",validators:[],svg:()=>(0,$.jsx)(Be,{}),subActions:()=>[e],collapseSubActionsIntoParent:!0,width:400});c.push(t)}return[(0,ie.$J)({key:Ne,title:Le.recentActions,render:e=>(0,$.jsx)(re.Z,{...e}),actions:c})]}(t,n,c,o,{onUpdatePromptState:r,favoriteEditingState:a,filterOut:i}):[],u=c&&"disabled"!==a.type?function(e,t,o,n,i){const s=i.filterOut.toLocaleLowerCase().trim(),r=(0,Ce.JS)(n),a=[];for(const l of r){if(l.action.prompt.toLocaleLowerCase().trim()===s)continue;const n=n=>(0,$.jsxs)("div",{style:{display:"flex"},children:[(0,$.jsx)(ye.Z,{style:{visibility:n.focused?"visible":"hidden",width:18,height:18},onClick:()=>{i.favoriteEditingState.set(l),k.Vo(e,{type:"edit",session_id:t.sessionId,gtm_favorite_id:l.gtmFavoriteId})},icon:me.E,ariaLabel:o.formatMessage(Se.editOrShareFavorite)}),!l.executeImmediately&&(0,$.jsx)(C.xj,{type:"updatePrompt",focused:n.focused})]});let r=!1;switch(l.action.type){case"helpMeEdit":"initialPrompt"!==t.stage||"blockSelection"!==t.context.type&&"textSelection"!==t.context.type||(r=!0);break;case"helpMeWrite":"initialPromptForAIBlock"!==t.stage&&"cursor"!==t.context.type||(r=!0);break;default:(0,h.t1)(l.action)}if(r){const e=(0,C.cK)({key:l.id,name:l.name,textToInsert:l.action.prompt,analyticsName:"favoriteAction",gtmFavoriteId:l.gtmFavoriteId,onUpdatePromptState:i.onUpdatePromptState,right:n,renderTooltip:()=>(0,$.jsx)(Ie,{value:l}),userProvidedSearchName:`${l.name} ${l.action.prompt}`.slice(0,we),executeImmediately:l.executeImmediately});a.push(e)}}return[(0,ie.$J)({key:ke,title:Se.favoriteActions,render:e=>(0,$.jsx)(re.Z,{...e}),actions:a})]}(o,t,n,c,{onUpdatePromptState:r,favoriteEditingState:a,filterOut:i}):[],p=[...u];"initialPromptForAIBlock"===t.stage?p.push((0,C.xI)({store:t.store,from:s})):"aiBlock"!==l&&p.push(...(0,C.LK)({from:s,type:l,onUpdatePromptState:r}));return p.push(...d),p}({state:o,environment:c,intl:l,filter:t,from:n,context:a,favoriteEditingState:i,onUpdatePromptState:s,type:(0,V.VZ)(o)});break;case"results":u=o.loading?[]:function(e){const{environment:t,state:o,defaultAction:n,closeOrDiscard:i,favoriteEditingState:s}=e,r={key:"insert",analyticsName:Oe,displayName:Re.insert,validators:[],closeParentMenu:!0,svg:X.H,action(){e.onInsert()}},a={key:"delete",analyticsName:Oe,displayName:Re.delete,validators:[],closeParentMenu:!0,svg:ue.y,action(){e.onCancel()}},l=function(e){const{state:t,onRetry:o}=e;if("results"!==t.stage)return;const n={key:"tryAgain",analyticsName:Oe,displayName:Re.tryAgain,validators:[],closeParentMenu:!0,svg:te.s,renderTooltip:()=>(0,$.jsx)(Ue,{state:t}),action(){o()}};return n}({...e}),c=[],d=ee.k;"accept"===n?c.push((0,ie.cN)({key:"keep",analyticsName:Oe,displayName:Re.keep,validators:[],closeParentMenu:!0,svg:d,action(){e.onAccept({exitType:"accept"})}})):"replace"===n?c.push((0,ie.cN)({key:"replace",analyticsName:Oe,displayName:Re.replace,validators:[],closeParentMenu:!0,svg:d,action(){e.onReplace()}}),(0,ie.cN)(r)):"insert"===n?c.push((0,ie.cN)({...r,svg:d})):(0,h.t1)(n);c.push((0,ie.cN)({key:"continueWriting",analyticsName:Oe,displayName:I.Dr.continueWriting,validators:[],closeParentMenu:!0,svg:Ve(ce.R),action(){e.onImprove({type:"continueWriting"})}}),(0,ie.cN)({key:"makeLonger",analyticsName:Oe,displayName:I.Dr.makeLonger,validators:[],closeParentMenu:!0,svg:Ve(le.H),action(){e.onImprove({type:"makeLonger"})}}));const u=[(0,ie.cN)({key:"addToFavorites",analyticsName:Oe,displayName:Re.addToFavorites,validators:[()=>Boolean(We(o,s))],closeParentMenu:!0,svg:de.e,action(){const e=We(o,s);if(!e)return;const n=(0,Ce.kg)(e.recentAction);e.favoriteEditingState.set(n),k.Vo(t,{type:"create_from_completion",session_id:o.sessionId,gtm_favorite_id:void 0})}}),l?(0,ie.cN)(l):void 0,"discard"===i?(0,ie.cN)(a):(0,ie.cs)({key:"close",analyticsName:Oe,displayName:Re.close,validators:[],closeParentMenu:!0,svg:Y.U,shortcuts:["esc"],action(){e.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0})}})],p=(0,ie.$J)({key:"main",render:e=>(0,$.jsx)(re.Z,{...e}),actions:c}),m=(0,ie.$J)({key:"final",render:e=>(0,$.jsx)(re.Z,{...e}),actions:u.filter(h.$K)});return[p,m]}({environment:c,state:o,onImprove:r,closeOrDiscard:"cursor"===o.context.type?"close":"discard",favoriteEditingState:i,...d});break;default:(0,h.t1)(o)}let p=(0,ae.sG)({sections:u,context:a,query:t});if(1===p.length&&p[0].key===Ne){const e=p[0].actions.slice();(0,I.LN)(t,l)||e.unshift((0,C.sH)({customPrompt:t,execute:d.onSubmit})),p=[(0,ie.$J)({key:"actions",render:e=>(0,$.jsx)(re.Z,{...e}),actions:e})]}else(function(e){let t=!1;for(const o of e)if(o.key===ke)t=!0;else if(o.key!==Ne)return!1;return t})(p)&&p.push((0,ie.$J)({key:"literal-actions",render:e=>(0,$.jsx)(re.Z,{...e}),actions:[(0,C.sH)({customPrompt:t,execute:d.onSubmit})]}));return p}function De(e,t){switch(t.type){case"continueWriting":return e.formatMessage(I.Dr.continueWriting);case"makeLonger":return e.formatMessage(I.Dr.makeLonger);case"helpMeEdit":return t.prompt}}function Ue(e){window.__c={n:"TryAgainTooltip"};const{state:t}=e,o=(0,m.yK)((e=>({hint:{color:e.mediumInvertedTextColor}})),[]),n=(0,I.xM)(t),s=(0,x.useIntl)();let r,a=Re.clickToEditAndRetry;if("initial"===n.type)if(i.doesPromptNeedAdditionalUserInput(n))r=(0,I.gY)(n);else{a=Re.clickToRetry;const e=n.clientPrompt.name;r="string"==typeof e?e:s.formatMessage(e)}else"followup"===n.type?r=De(s,n.improvement):(0,h.t1)(n);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("div",{children:r}),(0,$.jsx)("div",{style:o.hint,children:s.formatMessage(a)})]})}function Ve(e){return()=>(0,$.jsx)(C.lA,{svg:e,svgFill:J.FN.light.purple[400]})}function We(e,t){if("disabled"===t.type)return;const o=function(e){if("completionPopup"!==e.type||"results"!==e.stage)return;const t=(0,I.xM)(e);return"initial"===t.type?t:void 0}(e);if(!o)return;const{currentUserSettingsStore:n}=pe.default.state;if(!n)return;const i=(0,xe.BG)({clientPrompt:o.clientPrompt,additionalContext:o.additionalContext,promptTitle:o.promptTitle});return i&&!(0,Ce.Gl)(n,i)?{currentInitialRevision:o,recentAction:i,favoriteEditingState:t,currentUserSettingsStore:n}:void 0}const He="This string should never show up in analytics";function Ke(e){const{filter:t,state:o,from:n,context:s,intl:r,completionResultInfo:a}=e;let l;"initialPrompt"===o.stage?l=function(e){const{intl:t,from:o,type:n}=e,s=(0,se.getFilteredClientSkills)({showCustomSkills:!1,hasCurrentPage:!0}),r="blockSelection"===n||"textSelection"===n?se.writerSelectionSections:se.writerCursorSections;return oe.oA(r.map((e=>{const n=oe.oA(e.skills.map((e=>s.find((t=>t.skillType===e)))));if(0===n.length)return;const r=(0,ie.$J)({key:e.key,title:e.title,render:e=>(0,$.jsx)(re.Z,{...e}),actions:n.map((e=>"translate"===e.skillType?function(e){const{clientSkill:t,intl:o,from:n}=e;if("translate"!==t.skillType)throw new Error("Expected translate skill");const s=z.nI.map((e=>{let{key:s,name:r}=e;return(0,ie.cN)({key:`assistant.translate.${s}`,analyticsName:`Assistant - translate - ${s}`,displayName:r,validators:[],closeParentMenu:!1,right:(0,C.cx)("submitPrompt"),action:async e=>{let{environment:r}=e;const a=j.default.state;a&&"assistantCompletionPopup"===a.type&&"initialPrompt"===a.stage&&await i.triggerAssistantSkillCompletion({environment:r,context:a.context,clientSkill:t,skillSettings:{language:s},intl:o,updater:j.default.createUpdater(),sessionId:(0,ne.ZP)(),from:n})}})})),r=(0,ie.$J)({key:"translate language actions",render:e=>(0,$.jsx)(re.Z,{...e}),actions:s}),a=()=>(0,$.jsx)(C.lA,{svg:$e(Q.Q)});return(0,ie.MV)({key:"translate",displayName:se.skillMessages.translate,analyticsName:`Assistant - ${t.skillType}`,validators:[],svg:a,subActions:()=>[r]})}({clientSkill:e,intl:t,from:o}):"change_tone"===e.skillType?function(e){const{clientSkill:t,intl:o,from:n}=e;if("change_tone"!==t.skillType)throw new Error("Expected change_tone skill");const s=z.vK.map((e=>{let{key:s,name:r}=e;return(0,ie.cN)({key:`assistant.changeTone.${s}`,analyticsName:`Assistant - changeTone - ${s}`,displayName:r,validators:[],closeParentMenu:!1,right:(0,C.cx)("submitPrompt"),action:async e=>{let{environment:r}=e;const a=j.default.state;a&&"assistantCompletionPopup"===a.type&&"initialPrompt"===a.stage&&await i.triggerAssistantSkillCompletion({environment:r,context:a.context,clientSkill:t,skillSettings:{tone:s},intl:o,updater:j.default.createUpdater(),sessionId:(0,ne.ZP)(),from:n})}})})),r=(0,ie.$J)({key:"changeTone actions",render:e=>(0,$.jsx)(re.Z,{...e}),actions:s}),a=()=>(0,$.jsx)(C.lA,{svg:$e(G.p)});return(0,ie.MV)({key:"changeTone",displayName:se.skillMessages.changeTone,analyticsName:`Assistant - ${t.skillType}`,validators:[],svg:a,subActions:()=>[r]})}({clientSkill:e,intl:t,from:o}):(0,ie.cN)({key:e.skillType,analyticsName:`Completions - ${e.skillType}`,displayName:se.skillNameMap[e.skillType],validators:[],closeParentMenu:!1,svg:$e(se.skillIconMap[e.skillType]),right:(0,C.cx)("submitPrompt"),action:async n=>{let{environment:s}=n;const r=j.default.state;r&&"assistantCompletionPopup"===r.type&&"initialPrompt"===r.stage&&await i.triggerAssistantSkillCompletion({environment:s,context:r.context,clientSkill:e,skillSettings:{},intl:t,updater:j.default.createUpdater(),sessionId:(0,ne.ZP)(),from:o})}})))});return r})))}({intl:r,from:n,context:s,type:o.context.type}):"results"===o.stage?l=o.loading?[]:function(e){const t={key:"insert",analyticsName:He,displayName:Re.insert,validators:[],closeParentMenu:!0,svg:X.H,action(){e.onInsert()}},o=ee.k,n=U.Z.getActiveAssistantRuntimeState();if(!n)return[];const i=n.sampledSteps.length>0,s=n.uncommittedOperations.length>0||n.temporaryOperations.length>0;return i?s?[(0,ie.$J)({key:"main",render:e=>(0,$.jsx)(re.Z,{...e}),actions:oe.oA([(0,ie.cN)({key:"keep",analyticsName:He,displayName:Re.accept,validators:[],closeParentMenu:!0,svg:o,action(){e.onAccept({exitType:"accept"})}}),(0,ie.cN)({key:"tryAgain",analyticsName:He,displayName:Re.tryAgain,validators:[],closeParentMenu:!1,svg:te.s,action(){e.onRetry()}}),(0,ie.cs)({key:"close",analyticsName:He,displayName:Re.delete,validators:[],closeParentMenu:!0,svg:Y.U,shortcuts:["esc"],action(){e.onCancel()}})])})]:[(0,ie.$J)({key:"main",render:e=>(0,$.jsx)(re.Z,{...e}),actions:oe.oA([(0,ie.cN)({...t,svg:o}),(0,ie.cN)({key:"tryAgain",analyticsName:He,displayName:Re.tryAgain,validators:[],closeParentMenu:!1,svg:te.s,action(){e.onRetry()}}),(0,ie.cs)({key:"close",analyticsName:He,displayName:Re.close,validators:[],closeParentMenu:!0,svg:Y.U,shortcuts:["esc"],action(){e.onCancel()}})])})]:[]}({...a}):(0,h.t1)(o.stage);return(0,ae.sG)({sections:l,context:s,query:t})}function $e(e){return()=>(0,$.jsx)(C.lA,{svg:e,svgFill:J.FN.light.purple[400]})}const qe="notion-assistant-writer-ui",ze=(0,x.defineMessages)({writeInputPlaceholder:{defaultMessage:"Ask or edit text…",id:"AssistantWriterPopup.writeInputPlaceholder"}});function Je(e){window.__c={n:"AssistantWriterPopup"};const{completionState:t}=e,o=(0,p.VK)((()=>D.Z.showAtMentionMenu()),[]);(0,a.useEffect)((()=>{B.w()}),[]);const n=(0,u.O7)(),r=(0,x.useIntl)(),l=(0,p.VK)((()=>n.device.isMobile),[n]),c=(0,m.yK)((e=>({wrap:{display:"flex",borderRadius:22,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,overflow:"hidden",isolation:"isolate",flexDirection:"column",gap:2,paddingTop:2,paddingBottom:2},inputWrap:{width:"100%",minHeight:l?50:42,padding:l?"0 16px 0 16px":"0 8px 0 8px",display:"flex",alignItems:"center",gap:8,fontSize:l?16:14},inputOverrides:{marginLeft:0,marginRight:0,boxShadow:"unset",borderRadius:0,padding:0},faceImgWrap:{width:24,height:24,borderRadius:"100%",background:"white",boxShadow:e.largeLightBoxShadow,overflow:"hidden"},faceImg:{width:24,pointerEvents:"none"},chatWrap:{padding:8,fontSize:l?15:14},menuPopup:{marginTop:4,marginBottom:4,borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,width:l?"100%":320,overflow:"hidden",isolation:"isolate"}})),[l]),d=(0,p.VK)((()=>{const e=U.Z.getActiveAssistantConfigurationState();return Boolean((null==e?void 0:e.sampling)||(null==e?void 0:e.evaluating))}),[]),{store:f}=(0,Z.Cl)({initialValue:void 0}),g=(0,p.VK)((()=>(0,E.Jcv)(f.getValue())),[f]),y=(0,a.useCallback)((async()=>{(0,V.Tq)(n),(0,s.closeInitialPromptAndEndSession)(),"results"===t.stage&&await i.cancelAssistantCompletion({environment:n})}),[n,t]),v=(0,a.useCallback)((async e=>{e&&(j.default.setState({...t,stage:"results"}),await i.refreshAssistantCompletion({environment:n,updater:j.default.createUpdater(),isRetry:!1,humanText:e}))}),[t,n]);(0,a.useEffect)((()=>{O.N_({store:f})}),[n,f]);const h=(0,a.useMemo)((()=>({environment:n,blocks:[],publicEditMode:void 0})),[n]);(0,p.VK)((()=>{d!==t.loading&&j.default.setState({...t,loading:d})}),[d,t]);const C=function(e){const{environment:t,sessionId:o}=e,{value:n}=(0,_.useDependency)(_.deps.markdownLinkifyIt),{value:s}=(0,_.useDependency)(_.deps.tinyMceMicrosoftWordPasteFilter),{value:r}=(0,_.useDependency)(_.deps.assistant),l=(0,a.useCallback)((async e=>{let{exitType:r,selectInsertion:a}=e;const l=j.default.state;"assistantCompletionPopup"!==l.type||"results"!==l.stage||l.loading||(k.HC(t,{session_id:o,inference_id:void 0,exit_type:r}),await i.acceptCursorCompletionAssistant({environment:t,selectInsertion:a,exitType:r,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s}))}),[t,o,n,s]),c=(0,a.useCallback)((async()=>{if(!r)return;const e=j.default.state;"assistantCompletionPopup"!==e.type||"results"!==e.stage||e.loading||((0,V.Tq)(t),k.HC(t,{session_id:o,inference_id:void 0,exit_type:"insert"}),S.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{const o=U.Z.getActiveSessionId();if(!o)throw new Error("No assistantSessionId.");r.assistantActions.insertAssistantChatBelowSelection({environment:t,sessionId:o,transaction:e})}}),await i.cancelCursorCompletionAssistant({environment:t}))}),[r,t,o]),d=(0,a.useCallback)((()=>{console.warn("onReplace not implemented for assistant writer!")}),[]);return(0,a.useMemo)((()=>({onAccept:l,onInsert:c,onReplace:d})),[l,c,d])}({environment:n,sessionId:t.sessionId}),w=(0,a.useCallback)((()=>{}),[]),I=(0,p.VK)((()=>Ke({intl:r,filter:g,state:t,from:t.from,context:h,completionResultInfo:{...C,onRetry:w,onCancel:y}})),[h,C,t,w,y,g,r]),M=I.length>0,P=(0,p.qz)(void 0,F.Z);let T;return M&&(T=(0,$.jsx)("div",{style:c.menuPopup,className:qe,children:(0,$.jsx)(q,{sections:I,context:h,onCloseParentMenu:()=>{},menuListStore:P})})),(0,a.useEffect)((()=>{function e(e){var t;(t=e.target)instanceof Element&&(t.closest(`.${qe}`)||t.closest(`.${b.YPt}`))||("click"!==e.type&&"contextmenu"!==e.type||y())}return window.addEventListener("click",e,!0),window.addEventListener("contextmenu",e,!0),()=>{window.removeEventListener("click",e,!0),window.removeEventListener("contextmenu",e,!0)}}),[y]),(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(A.Z,{capture:!0,onEsc:y,debugName:"AssistantWriterPopup"}),(0,$.jsxs)("div",{style:c.wrap,className:qe,children:[d&&(0,$.jsx)(R.GL,{}),(0,$.jsx)(R.Sv,{}),(0,$.jsxs)("div",{style:c.inputWrap,children:[(0,$.jsx)("div",{style:c.faceImgWrap,children:(0,$.jsx)("img",{style:c.faceImg,src:L.Z.images.aiFaceLookleftPng})}),(0,$.jsx)(R.ZN,{showAtMentionMenu:o,store:f,placeholder:r.formatMessage(ze.writeInputPlaceholder),onSubmit:v,onEsc:y,textInputOverrideStyles:c.inputOverrides,suppressFocusable:!0})]})]}),T]})}var Ge=o(11751),Qe=o(32163),Ye=o(50506),Xe=o(63296),et=o(24039),tt=o(34859);function ot(e){window.__c={n:"ExitConfirmationDialog"};const{open:t,onCancelExit:o,onConfirmExit:n}=e,i=(0,a.useCallback)((()=>(0,$.jsx)(nt,{onConfirmExit:n,onCancelExit:o})),[n,o]);return(0,$.jsx)(Ye.Z,{open:t,render:i,disableAnimation:!0,onDismiss:o})}function nt(e){window.__c={n:"ExitConfirmationDialogContent"};const t=(0,m.yK)((e=>({wrapper:{padding:24,display:"flex",flexDirection:"column",minWidth:280},question:{fontWeight:500,maxWidth:240,textAlign:"center",marginTop:8,marginBottom:8,lineHeight:"1.2em"},icon:{width:32,height:32,alignSelf:"center",paddingTop:8,fill:e.accentColors.purple[400]}})),[]),o={width:"100%",marginTop:8},n=[{key:"confirm",render:e=>(0,$.jsx)(Xe.Z,{style:o,...e,children:(0,$.jsx)(x.FormattedMessage,{id:"completions.ExitConfirmationDialog.confirmExit",defaultMessage:"Discard"})}),action:e.onConfirmExit},{key:"cancel",render:e=>(0,$.jsx)(Xe.Z,{style:o,...e,children:(0,$.jsx)(x.FormattedMessage,{id:"completions.ExitConfirmationDialog.cancelExit",defaultMessage:"Cancel"})}),action:e.onCancelExit}];return(0,$.jsx)(et.Z,{capture:!0,preventType:tt.Z.All,children:(0,$.jsxs)("div",{style:t.wrapper,children:[(0,Ge.t)(t.icon),(0,$.jsx)("p",{style:t.question,children:(0,$.jsx)(x.FormattedMessage,{id:"completions.ExitConfirmationDialog.question",defaultMessage:"Do you want to discard the AI response?"})}),(0,$.jsx)(Qe.Z,{type:Qe.i.Vertical,initialFocus:0,sections:[{key:"dialog",render:e=>(0,$.jsx)(re.Z,{topBorder:!1,disableMobileBorders:!0,...e}),items:n}]})]})})}var it=o(1548),st=o(38715),rt=o(68894),at=o(86825),lt=o(64369),ct=o(33929);const dt=(0,x.defineMessages)({save:{id:"ai.favorites.save",defaultMessage:"Save changes"},delete:{id:"ai.favorites.delete",defaultMessage:"Delete"},runImmediately:{id:"ai.favorites.runImmediately",defaultMessage:"Run immediately"},actionNameLabel:{id:"ai.favorites.actionNameLabel",defaultMessage:"Action name"},cancelAndGoBack:{id:"ai.favorites.cancelAndGoBack",defaultMessage:"Cancel and go back"}});function ut(e){window.__c={n:"FavoriteEditorMenuPopupContent"};const{state:t,context:o,sessionId:n}=e,i=(0,x.useIntl)(),s=(0,u.O7)(),r=(0,a.useMemo)((()=>new F.Z),[]),l=(0,ie.cN)({key:"input",analyticsName:"TODO",displayName:dt.save,validators:[],closeParentMenu:!1,render:()=>(0,$.jsx)(re.Z,{isInput:!0,style:{marginTop:0},children:(0,$.jsx)(rt.ZP,{value:t.current.name,onChange:e=>{t.set({...t.current,name:e.target.value}),r.setState({focus:{section:0,indexLocal:1,indexGlobal:1}})},placeholder:ct.default.formatMessage(dt.actionNameLabel),focusInitial:!0})}),action(e,t){}}),c=[(0,ie.$J)({key:"favorite options section",render:e=>(0,$.jsx)(re.Z,{...e}),actions:[l,(0,ie.cN)({key:"runImmediately",analyticsName:"TODO",displayName:dt.runImmediately,validators:[],render:(e,o,n)=>{let{blocks:i,environment:s}=o;const r=Boolean(t.current.executeImmediately);return(0,$.jsx)(at.Z,{...e,title:ct.default.formatMessage(dt.runImmediately),on:r})},closeParentMenu:!1,action(e,o){t.set({...t.current,executeImmediately:!t.current.executeImmediately})}})]}),(0,ie.$J)({actions:[(0,ie.cN)({key:"save",analyticsName:"TODO",displayName:dt.save,validators:[],svg:st.N,closeParentMenu:!1,action(e,o){Me({state:t,environment:s,sessionId:n})}})],key:"actions",render:e=>(0,$.jsx)(re.Z,{...e})}),(0,ie.$J)({key:"delete action section",render:e=>(0,$.jsx)(re.Z,{...e}),actions:[(0,ie.cN)({key:"delete",analyticsName:"TODO",displayName:dt.delete,validators:[],svg:ue.y,closeParentMenu:!1,action(e,o){const{currentUserSettingsStore:i}=pe.default.state;i&&(S.createAndCommit({userAction:"ai.favoriteEditorPopup.delete",environment:s,perform(e){(0,Ce.QC)(t.current,i,e)}}),t.clear(),k.Vo(s,{type:"delete",session_id:n,gtm_favorite_id:t.current.gtmFavoriteId}))}})]})],d=(0,a.useCallback)((()=>{}),[]);return(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"8px 8px 0 8px"},children:[(0,$.jsx)(ye.Z,{icon:it.G,onClick:()=>{!function(e){const{state:t,environment:o}=e,{currentUserSettingsStore:n}=pe.default.state;n&&(t.current.name||S.createAndCommit({userAction:"favoriteActions.cancelFavoriteEditsAndClearState",environment:o,perform(e){(0,Ce.QC)(t.current,n,e),(0,xe.Nv)(t.current.action,n,e)}}),t.clear())}({environment:s,state:t})},ariaLabel:i.formatMessage(dt.cancelAndGoBack)}),(0,$.jsx)(lt.Z,{isSecondaryColor:!0,isSmall:!0,style:{fontWeight:700},children:(0,$.jsx)(x.FormattedMessage,{id:"ai.favorites.saveHeader",defaultMessage:"Save AI action"})})]}),(0,$.jsx)(H.Z,{menuType:K.og.Popup,width:"100%",maxHeight:"min(40vh, 320px)",minHeight:"100%",children:(0,$.jsx)(W.Z,{menuListStore:r,sections:c,onAccept:d,initialFocus:0,context:o})})]})}var pt=o(2585),mt=o(5257);const ft=(0,x.defineMessages)({undoAriaLabel:{defaultMessage:"Go to previous AI response",id:"id.completions.undoAriaLabel"},redoAriaLabel:{defaultMessage:"Go to next AI response",id:"id.completions.redoAriaLabel"},historyLabel:{defaultMessage:"{currentRevision} of {totalRevisions}",id:"id.completions.historyLabel"}}),gt={display:"flex",alignItems:"center",marginLeft:-2,marginRight:-2},yt={width:20,height:20,marginLeft:2,marginRight:2};function vt(e){window.__c={n:"CompletionHistory"};const{onUndo:t,onRedo:o,historyLabel:n}=e,i=(0,x.useIntl)();return t||o?(0,$.jsxs)("div",{style:gt,children:[(0,$.jsx)(ye.Z,{icon:pt.f,ariaLabel:i.formatMessage(ft.undoAriaLabel),disabled:!t,onClick:t,style:yt}),(0,$.jsx)(lt.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontVariantNumeric:"tabular-nums"},children:n}),(0,$.jsx)(ye.Z,{icon:mt.o,ariaLabel:i.formatMessage(ft.redoAriaLabel),disabled:!o,onClick:o,style:yt})]}):null}const ht={onUndo:void 0,onRedo:void 0,historyLabel:void 0};function xt(e,t){const o=j.default.state;if("completionPopup"!==o.type||"results"!==o.stage)return;const{sessionId:n}=o,i=(0,I.xM)(o);k.Bp(e,{session_id:n,inference_id:i.inferenceId,type:t})}var Ct=o(11066),kt=o(1743),wt=o(74194);const St=(0,x.defineMessages)({promptLabel:{defaultMessage:"Prompt for action",id:"ai.favoritePromptEditor.promptLabel"}});function At(e,t){e.set({...e.current,action:{...e.current.action,prompt:t}})}function bt(e){window.__c={n:"FavoritePromptEditorContent"};const{state:t,inputRef:o,sessionId:n}=e,i=(0,u.O7)(),s=(0,V.bJ)(),r=(0,x.useIntl)().formatMessage(St.promptLabel);return(0,$.jsxs)(kt.Z,{debugName:"FavoritePromptEditorContent",capture:!0,allowMenuList:!1,allowEsc:!0,children:[(0,$.jsx)(wt.Z,{ref:o,format:wt.B.Transparent,placeholder:r,selectAll:!0,value:t.current.action.prompt,textarea:!0,textareaSubmitOnEnter:!1,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onChange:e=>At(t,e.target.value),onKeyDown:e=>{"Enter"===e.key&&At(t,`${t.current.action.prompt}\n`)},focusInitial:!1}),(0,$.jsx)("div",{style:s.inputActions,children:(0,$.jsx)(Ct.Z,{style:s.purpleButton,onClick:()=>Me({state:t,environment:i,sessionId:n}),children:(0,$.jsx)(x.FormattedMessage,{defaultMessage:"Done",id:"ai.favoritePromptEditor.done"})})})]})}var It=o(61519);function Mt(e){window.__c={n:"PromptOrActionInput"};const{query:t,setQuery:o,onDismiss:n,onSubmit:i,inputRef:s,submitOnEnter:r,inputPlaceholder:l,children:c}=e,[d,u]=(0,a.useState)(void 0);return(0,$.jsxs)(kt.Z,{debugName:"PromptOrActionInput",capture:!0,allowMenuList:!1,allowEsc:!0,children:[(0,$.jsx)(wt.Z,{ref:s,format:wt.B.Transparent,placeholder:l,selectAll:!0,value:t,textarea:!0,textareaSubmitOnEnter:!0,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onSubmit:e=>{t&&r&&(e.stopPropagation(),null==i||i())},onChange:e=>{o(e.target.value)},onKeyUp:e=>{"Backspace"===e.key&&(""===d&&n(),u(void 0))},onKeyDown:e=>{"Backspace"===e.key&&void 0===d&&u(t)},focusInitial:!0}),c]})}var Pt=o(83065),_t=o(58261),jt=o(26388);function Ft(e){window.__c={n:"SubmitAIPromptButton"};const{onSubmit:t,canSend:o}=e,n=(0,V.bJ)(),i=(0,u.O7)(),s=(0,p.VK)((()=>i.device.isPhone),[i]);return(0,$.jsx)(jt.ZP,{renderTooltip:()=>(0,$.jsxs)("div",{children:[(0,$.jsx)(x.FormattedMessage,{defaultMessage:"Send to AI",id:"completions.CompletionMenuActionBar.sendTooltip"}),(0,$.jsx)(_t.Z,{style:n.keyboardShortcutInverted,name:"enter"})]}),placement:jt.ug.Bottom,render:e=>(0,$.jsx)(ye.Z,{icon:Pt._,onClick:t,isPurple:o,disabled:!o,iconStyle:{height:s?24:20,width:s?24:20},ariaLabel:"Send to AI",style:{pointerEvents:"auto",height:s?24:20,width:s?24:20},...e})})}const Tt=(0,x.defineMessages)({followUpInputPlaceholder:{id:"AlternativeCommandPalette.followUp.inputPlaceholder",defaultMessage:"Tell AI what to do next…"}}),Nt={padding:"8px 10px 8px 14px"};function Lt(e){window.__c={n:"CompletionFinishedContent"};const t=(0,V.bJ)(),o=(0,x.useIntl)(),n=0===e.query.trim().length,i=(0,p.VK)((()=>D.Z.isAssistantInWriterEnabled()),[]);return(0,$.jsx)(Mt,{...e,inputPlaceholder:o.formatMessage(Tt.followUpInputPlaceholder),children:(0,$.jsxs)("div",{style:t.inputActions,children:[(0,$.jsx)(Ft,{onSubmit:e.onSubmit,canSend:!n}),(e.onUndo||e.onRedo)&&!i&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(It.Z,{vertical:!0,size:1,style:Nt}),(0,$.jsx)(vt,{...e})]})]})})}var Et=o(64921),Bt=o(91839);function Ot(e){window.__c={n:"CompletionInProgressContent"};const{onStop:t,onRetry:o}=e,n=(0,V.bJ)(),i=(0,u.O7)().device,s=i.isMobileNative&&i.isIOS;return(0,$.jsxs)(A.Z,{debugName:"CompletionInProgressContent",capture:!0,onEnter:()=>{t()},onEsc:()=>{t()},onKeypress:e=>{e.metaKey||"r"!==e.key||o()},children:[(0,$.jsxs)("div",{style:n.writingLabel,children:[(0,$.jsx)(x.FormattedMessage,{id:"AlternativeCompletionsPopupContent.writing",defaultMessage:"AI is writing"}),(0,$.jsx)(Bt.Z,{style:n.loadingDots})]}),!s&&(0,$.jsxs)(Et.Z,{style:n.lightweightButton,onClick:o,children:[(0,$.jsx)(x.FormattedMessage,{id:"AlternativeCompletionsPopupContent.tryAgain.label",defaultMessage:"Try again"}),(0,$.jsx)("span",{style:n.keyboardShortcut,children:(0,$.jsx)(x.FormattedMessage,{id:"AlternativeCompletionsPopupContent.startOver.shortcut",defaultMessage:"r"})})]}),(0,$.jsxs)(Et.Z,{style:n.lightweightButton,onClick:t,children:[s?(0,$.jsx)(x.FormattedMessage,{id:"AlternativeCompletionsPopupContent.cancel.label",defaultMessage:"Cancel"}):(0,$.jsx)(x.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.label",defaultMessage:"Stop"}),(0,$.jsx)("span",{style:n.keyboardShortcut,children:(0,$.jsx)(x.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.shortcut",defaultMessage:"esc"})})]})]})}var Rt=o(15201),Zt=o(53336),Dt=o(55217);function Ut(e){window.__c={n:"CompletionPreview"};const{temporaryListStore:t,isLoading:o}=e,n=(0,u.O7)(),i=(0,a.useRef)(null),s=null==i?void 0:i.current,r=null==s?void 0:s.getStore(),l=(0,p.VK)((()=>n.device.isPhone),[n]),c=(0,V.jq)({resetWhenScrolledToBottom:!0,areWeLoading:o,scrollerStore:r});(0,a.useEffect)((()=>{s&&(c?Vt.cancel():Vt(s))}),[s,t,c]);const d={scroller:{maxHeight:l?"min(15vh, 200px)":"min(40vh, 320px)",width:"100%"}};return(0,$.jsx)(a.Fragment,{children:(0,$.jsx)(Zt.Z,{type:tt.Z.Y,style:d.scroller,ref:i,children:(0,$.jsx)(Rt.O,{displayName:"CompletionPopupContent",disabled:!0,children:(0,$.jsx)(Dt.Z,{store:t,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0})})})})}const Vt=oe.Ds((e=>{e.scrollToBottom({animate:!0})}),60);var Wt=o(63594),Ht=o(54497),Kt=o(42402);const $t="/help/guides/using-notion-ai#what-are-the-current-limitations-of-notion-ai";function qt(){window.__c={n:"AiWarningNotice"};const e=(0,a.useCallback)((()=>{window.open($t)}),[]),t=(0,m.yK)((e=>({icon:{width:12,height:12,fill:e.lightIconColor,marginLeft:2},link:{color:e.lightTextColor,fontWeight:500}})),[]);return(0,$.jsxs)($.Fragment,{children:[(0,Ht.t)(t.icon),(0,$.jsx)(lt.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,$.jsx)(x.FormattedMessage,{id:"completions.AiWarning.warning",defaultMessage:"AI responses can be inaccurate or misleading."})}),(0,$.jsx)(lt.Z,{isSmall:!0,children:(0,$.jsx)(Kt.Z,{onClick:e,style:t.link,disableHover:!0,disableUnderline:!0,children:(0,$.jsx)(x.FormattedMessage,{id:"completions.AiWarning.learnMore",defaultMessage:"Learn more"})})})]})}var zt=o(935),Jt=o(81570),Gt=o(80671),Qt=o(44041),Yt=o(88893),Xt=o(35057),eo=o(88280);function to(){window.__c={n:"UpsellNotice"};const e=(0,u.O7)(),t=(0,p.VK)((()=>e.device.isMobile),[e]),o=(0,p.VK)((()=>{const e=eo.subscriptionDataStoreInstance.state;return Yt.GJ(e)}),[]),n=(0,a.useCallback)((()=>{t?Gt.k2():Qt.y(e,{from:"ai_upsell_notice",for:(0,Xt.zt)(),addOnFeature:"ai"})}),[e,t]),i=(0,m.yK)((e=>({upsellIcon:{width:14,height:14,fill:e.lightIconColor},upsellLink:{color:e.blueColor,fontWeight:500}})),[]);return(0,$.jsxs)($.Fragment,{children:[(0,Jt.T)(i.upsellIcon),(0,$.jsxs)(lt.Z,{isSecondaryColor:!0,isSmall:!0,children:[(0,$.jsx)(x.FormattedMessage,{id:"UpsellNotice.label",defaultMessage:"All free AI responses have been used for this workspace."}),!o&&(0,$.jsxs)($.Fragment,{children:[" ",(0,$.jsx)(x.FormattedMessage,{id:"UpsellNotice.contactWorkspaceOwner.label",defaultMessage:"Contact your workspace owner to add Notion AI."})]})]}),o&&(0,$.jsx)($.Fragment,{children:(0,$.jsx)(lt.Z,{isSmall:!0,children:(0,$.jsx)(Kt.Z,{onClick:n,style:i.upsellLink,disableHover:!0,disableUnderline:!0,children:(0,$.jsx)(x.FormattedMessage,{id:"UpsellNotice.link.label",defaultMessage:"Go unlimited"})})})})]})}const oo=!1;function no(e){window.__c={n:"MainPopupFooter"};const{state:t}=e,o=(0,u.O7)(),n=(0,p.VK)((()=>o.device.isPhone),[o]),i=(0,m.yK)((e=>({wrapper:{background:"dark"===e.mode?e.accentColors.gray[100]:e.accentColors.gray[30],display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 12px",borderTop:`1px solid ${e.lightDividerColor}`,gap:8,color:e.lightTextColor,fontSize:12,minHeight:36},noticeContent:{display:"flex",alignItems:"center",gap:8},actionContent:{display:"flex",alignItems:"center"}})),[]),s=(0,p.VK)((()=>!Wt.Z.state),[]);if(n)return null;let r,a;return(s||oo)&&(r=(0,$.jsx)(to,{})),"results"!==t.stage||t.loading||(r=r??(0,$.jsx)(qt,{}),a=(0,$.jsx)(zt.u,{revision:(0,I.xM)(t)})),r?(0,$.jsxs)("div",{style:i.wrapper,children:[(0,$.jsx)("div",{style:i.noticeContent,children:r}),a&&(0,$.jsx)("div",{style:i.actionContent,children:a})]}):null}const io=(0,x.defineMessages)({writeInputPlaceholder:{defaultMessage:"Ask AI to write anything…",id:"completions.PromptMenu.alternativeUiWriteInputPlaceholder"},editInputPlaceholder:{defaultMessage:"Ask AI to edit or generate…",id:"completions.PromptMenu.alternativeUiEditInputPlaceholder"}});function so(e){window.__c={n:"MainPopupContent"};const{state:t,onDismiss:o,onCompletionRetry:n,onCompletionStop:i,temporaryListStore:s,favoriteEditingState:r}=e,l=(0,a.useRef)(null);(0,a.useEffect)((()=>{B.w()}),[]);const c=(0,u.O7)(),d=(0,p.VK)((()=>c.device.isPhone),[c]),f=(0,m.yK)((e=>({icon:{height:18,width:18,paddingLeft:d?0:4,marginLeft:d?-4:void 0,fill:"dark"===e.mode?e.accentColors.purple[600]:e.accentColors.purple[400]},outer:{width:"100%",minHeight:d?44:36,padding:d?"2px 16px 2px 16px":"2px 12px 2px 8px",display:"flex",flexDirection:"column",justifyContent:"center",gap:2,fontSize:d?16:14}})),[d]),g=(0,$.jsx)("div",{style:{height:36,alignItems:"center",display:"flex"},children:(0,Ge.t)(f.icon)});return"active"===r.type?(0,$.jsx)("div",{style:f.outer,ref:l,children:(0,$.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:[g,(0,$.jsx)(bt,{state:r,inputRef:e.inputRef,sessionId:t.sessionId})]})}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("div",{style:f.outer,ref:l,children:[s&&(0,$.jsx)(Ut,{temporaryListStore:s,isLoading:"results"===t.stage&&t.loading}),(0,$.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:[g,"initialPrompt"===t.stage||"initialPromptForAIBlock"===t.stage?(0,$.jsx)(ro,{...e,paletteMode:(0,V.rR)(t)}):t.loading?(0,$.jsx)(Ot,{onDismiss:o,state:t,onRetry:n,onStop:i}):(0,$.jsx)(Lt,{...e})]})]}),(0,$.jsx)(no,{state:t})]})}function ro(e){window.__c={n:"MainPopupInitialPromptContent"};const{query:t,onSubmit:o,paletteMode:n}=e,i=(0,V.bJ)(),s=(0,x.useIntl)(),r="edit"===n?s.formatMessage(io.editInputPlaceholder):s.formatMessage(io.writeInputPlaceholder),a=t.trim().length>0;return(0,$.jsx)(Mt,{...e,inputPlaceholder:r,children:(0,$.jsx)("div",{style:i.inputActions,children:(0,$.jsx)(Ft,{onSubmit:o,canSend:a})})})}var ao=o(51454),lo=o(69454),co=o(77794),uo=o(24098),po=o(79797);function mo(e){window.__c={n:"PopupPositioner"};const{scrollerStore:t,openState:o,children:n}=e,[i,s]=(0,a.useState)(Date.now()),r=(0,a.useCallback)((()=>s(Date.now())),[]),l=(0,a.useRef)(null),[c,d]=(0,a.useState)(void 0),[u,f]=(0,a.useState)(void 0),g=(0,p.VK)((()=>{const e=(0,V.$b)(o);if(!e)return;const n=(0,I.wA)(e);if(!n)return;const{origin:i}=e;"results"!==o.stage&&n&&i instanceof po.G&&("spacebar"===o.from||i.isEmptyEditableBlock())&&(n.height=0);const s=t.state,r=s.clientRect??new DOMRect,a=s.scrollTop,l=function(e){const{openState:t,originRect:o,scrollerRect:n,scrollerScrollTop:i,popupRect:s}=e,r=(null==s?void 0:s.height)??0,a=(null==s?void 0:s.width)??0,l=Math.min(Math.max(o.width,yo),vo);let c;const d=o.bottom-n.top+i+go.top;o.bottom+r+go.top+go.bottom>n.bottom&&(c=d-(n.height-r-go.bottom+i));let u;a+go.left+go.right>n.width?u=go.left:o.left+a>n.right?u=n.width-a-go.right:(u=o.left-n.left,"initialPromptForAIBlock"===t.stage&&(u-=a-o.width));return{top:d,left:u,width:l,scrollTopIntoView:c}}({openState:o,originRect:n,scrollerRect:r,scrollerScrollTop:a,popupRect:c});return l}),[t,c,o]);(0,a.useEffect)((()=>{g&&f(g)}),[g]);const y=g??u;(0,a.useEffect)((()=>{if(Date.now()-i>500)return;const e=null==y?void 0:y.scrollTopIntoView;if(!e)return;const o=ho(t);o&&fo(e,o)}),[null==y?void 0:y.scrollTopIntoView,t,i]);const v=(0,m.yK)((e=>({wrap:{position:"absolute",left:null==y?void 0:y.left,top:null==y?void 0:y.top,width:null==y?void 0:y.width,zIndex:ao.lB}})),[y]);(0,a.useEffect)((()=>{const e=new co.E;if(!l.current)throw new Error("ref.current is null");let t;return e.observe(l.current),e.rect.addListener((e=>{(0,h.$K)(t)&&cancelAnimationFrame(t),t=requestAnimationFrame((()=>d(e.state)))})),()=>{(0,h.$K)(t)&&cancelAnimationFrame(t),e.destroy()}}),[]);const x="results"===o.stage&&!o.loading;(0,a.useEffect)((()=>{x&&r()}),[x,r]);const C="results"===o.stage&&o.loading,k=(0,V.jq)({resetWhenScrolledToBottom:!1,areWeLoading:C,scrollerStore:t}),w="results"===o.stage&&"cursor"===o.context.type,[S,A]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{!C||!w&&S||(k?fo.cancel():null!=y&&y.scrollTopIntoView&&(r(),A(!0)))}),[k,S,w,C,y,r]),(0,$.jsx)(uo.Z,{capture:!0,render:e=>(0,$.jsx)(kt.Z,{debugName:"PopupPositioner",capture:!0,allowMenuList:!0,allowEsc:!0,children:(0,$.jsx)("div",{style:v.wrap,ref:l,...e,children:y&&n})})})}const fo=oe.Ds(((e,t)=>{t.scrollByOffset(e,0,{animate:!0}),ve.Z.MenuScroller&&ve.Z.MenuScroller.scrollToTop()}),60),go={top:4,bottom:6,left:6,right:16},yo=500,vo=730;function ho(e){var t,o;return e===(null===(t=ve.Z.PageScroller)||void 0===t?void 0:t.stores.store)?ve.Z.PageScroller:e===(null===(o=ve.Z.PeekViewScroller)||void 0===o?void 0:o.stores.store)?ve.Z.PeekViewScroller:void 0}function xo(e){window.__c={n:"MobilePopupPositioner"};const{children:t,scrollerStore:o,openState:n}=e,[i,s]=(0,a.useState)(Date.now()),r=(0,a.useRef)(null),[l,c]=(0,a.useState)(void 0),d=(0,a.useCallback)((()=>s(Date.now())),[]),{WindowSizeStore:m}=(0,u.O7)();(0,a.useEffect)((()=>{const e=new co.E,t=r.current;if(!t)throw new Error("ref.current is null");e.observe(t);let o=t.getBoundingClientRect().top;e.rect.addListener((e=>{o=e.state.top,c(e.state)}));const n=setInterval((()=>{const n=t.getBoundingClientRect().top;n!==o&&(o=n,e.recompute())}),50);return()=>{e.destroy(),clearInterval(n)}}),[]);const f="results"===n.stage&&!n.loading,y=("results"===n.stage||"initialPrompt"===n.stage)&&"cursor"===n.context.type,v=(0,p.VK)((()=>{const e=(0,V.$b)(n);if(!e)return;const t=(0,I.wA)(e);if(!t)return;if(!l)return;const o=t.bottom-l.top;return o>0?o:void 0}),[n,l]);(0,a.useEffect)((()=>{if(Date.now()-i>500)return;if(!v)return;const e=ho(o);e&&fo(v,e)}),[v,o,i]),(0,a.useEffect)((()=>{f&&y&&d()}),[f,y,d]);const h="results"===n.stage&&n.loading,x=(0,g.D9)(h),[C,k]=(0,a.useState)();(0,a.useEffect)((()=>{x&&!h&&k(Date.now())}),[h,x]),(0,a.useEffect)((()=>{const e=!!C&&Date.now()-C<1e3;(h||e)&&y&&v&&d()}),[y,h,d,v,C]);const w=(0,p.VK)((()=>{const e=lo.Z.state.phase===lo.i.hidden||lo.Z.state.phase===lo.i.willHide,t=lo.Z.estimatedNativeWebBottomOverlap()+go.bottom;return e?m.getSafePaddingBottomPx(t):t}),[m]);return(0,$.jsx)("div",{ref:r,style:{position:"absolute",bottom:w,left:go.left,right:go.left,zIndex:ao.Mo},children:t})}const Co="notion-alternate-ai-ui";function ko(e){window.__c={n:"CompletionPopup"};const{scrollerStore:t}=e,o=(0,u.O7)(),n=(0,p.VK)((()=>j.default.state),[]);(0,T.w9)(n);const i=(0,a.useMemo)((()=>(0,V.RR)(n)),[n]),s=(0,p.VK)((()=>i&&(0,V.$b)(i)),[i]),r=(0,p.VK)((()=>o.device.isPhone),[o]);return i?t!==(null==s?void 0:s.scrollerStore)?null:"assistantCompletionPopup"===i.type?r?null:(0,$.jsx)(mo,{scrollerStore:t,openState:i,children:(0,$.jsx)(Je,{completionState:i})}):r?(0,$.jsx)(xo,{scrollerStore:t,openState:i,children:(0,$.jsx)(wo,{openState:i})}):(0,$.jsx)(mo,{scrollerStore:t,openState:i,children:(0,$.jsx)(wo,{openState:i})}):null}function wo(e){window.__c={n:"PopupContent"};const{openState:t}=e,o=(0,u.O7)(),n=(0,x.useIntl)(),r=(0,a.useState)(function(e){switch(e.stage){case"results":return"";case"initialPromptForAIBlock":return e.prompt??e.prefilledValue;case"initialPrompt":return e.prefilledValue;default:return(0,h.t1)(e)}}(t))[0],[L,E]=function(e){const t=(0,x.useIntl)(),[o,n]=(0,a.useState)(""),i=(0,p.VK)((()=>{if("initialPromptForAIBlock"!==e.stage||!(0,I.dU)())return o;const n=e.store.getTitleValue();return(0,y.X)({intl:t,textValue:n,getRecordModel:e.store.getRecordModel,userTimeZone:(0,f.r)()})}),[o,t,e]);return[i,n]}(t),[B,O]=(0,a.useState)(!1),[R,Z]=(0,a.useState)(!1),[D,U]=(0,a.useState)(""),W=Ae(),H=(0,a.useRef)(null),K=(0,V.rR)(t),z=(0,a.useMemo)((()=>({environment:o,blocks:[],publicEditMode:void 0})),[o]);(0,T.lZ)(t);const J=(0,a.useCallback)((e=>{k.ov(o,{session_id:t.sessionId,type:e.analyticsName,gtm_favorite_id:e.gtmFavoriteId}),E(e.insertText),i.maybeSetPromptForCurrentAiBlock(o,e.insertText),e.executeImmediately&&O(!0),H.current&&H.current.focusInput()}),[t.sessionId,o,E]),G="results"===t.stage?(0,I.xM)(t).completion:void 0,Q=(0,g.Z_)(G,i.COMPLETION_THROTTLE,v.Z),Y="results"===t.stage?t:void 0,X=(0,_.useDependency)(_.deps.markdownLinkifyIt),ee=(0,_.useDependency)(_.deps.tinyMceMicrosoftWordPasteFilter),te=(0,a.useMemo)((()=>{if(!Y||"textSelection"!==Y.context.type&&"blockSelection"!==Y.context.type)return;if(["idle","pending"].includes(X.status)||["idle","pending"].includes(ee.status))return;const{userSearchCache:e}=(0,I.xM)(Y);return Q?l.Z.withListenerIgnored((()=>{const t=new c.Z({name:"CompletionPopup.PopupContent",isTemporaryData:!0}),n=S.createAndCommit({userAction:"CompletionPopup.temporarymarkdownToBlocks",environment:o,canUndo:!1,perform:n=>{const s=w.Mt({environment:o,text:Q,inMemoryRecordCache:t,transaction:n,markdownOptions:(0,M.N9)(e),markdownLinkifyIt:X.value,tinyMceMicrosoftWordPasteFilter:ee.value});if(s)return i.postProcessAICreatedStores(o,s),w.Lh({environment:o,stores:s,inMemoryRecordCache:t,transaction:n})}}).performResult;return t.addCacheFallback(o.defaultRecordCache.inMemoryRecordCache),n})):void 0}),[Y,Q,o,X,ee]),ne=(0,p.VK)((()=>{if(!te||!Y||"completionPopup"!==Y.type||"results"!==Y.stage||"textSelection"!==Y.context.type&&"blockSelection"!==Y.context.type)return;return Y.context.stores.every((e=>{const t=e.getType();return!!t&&("blockSelection"===Y.context.type?Boolean(P.d[t]):"textSelection"===Y.context.type&&Boolean(P.D[t]))}))}),[Y,te]);let ie=!0,se=!1;switch(t.stage){case"initialPrompt":if(t.futureRevisions.length>0)break;case"initialPromptForAIBlock":ie=!1;break;case"results":t.loading||"cursor"!==t.context.type||""!==L||(se=!0);break;default:(0,h.t1)(t)}const re=function(e){const{environment:t,sessionId:o}=e,{value:n}=(0,_.useDependency)(_.deps.markdownLinkifyIt),{value:s}=(0,_.useDependency)(_.deps.tinyMceMicrosoftWordPasteFilter),r=(0,a.useCallback)((e=>{let{exitType:r,selectInsertion:a}=e;const l=j.default.state;"completionPopup"!==l.type||"results"!==l.stage||l.loading||(k.HC(t,{session_id:o,inference_id:(0,I.xM)(l).inferenceId,exit_type:r}),S.createAndCommit({userAction:"CompletionPopup.handleAccept",environment:t,perform:e=>{i.acceptCursorCompletion({environment:t,transaction:e,selectInsertion:a,exitType:r,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,o,n,s]),l=(0,a.useCallback)((()=>{const e=j.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||((0,V.Tq)(t),k.HC(t,{session_id:o,inference_id:(0,I.xM)(e).inferenceId,exit_type:"insert"}),"textSelection"===e.context.type?S.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{i.insertTextSelectionCompletion({environment:t,transaction:e,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s})}}):"blockSelection"===e.context.type&&S.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{i.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!1,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,o,n,s]),c=(0,a.useCallback)((()=>{const e=j.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||"textSelection"!==e.context.type&&"blockSelection"!==e.context.type||((0,V.Tq)(t),k.HC(t,{session_id:o,inference_id:(0,I.xM)(e).inferenceId,exit_type:"replace"}),"textSelection"===e.context.type?S.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{i.replaceTextSelectionCompletion({environment:t,transaction:e,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s})}}):"blockSelection"===e.context.type&&S.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{i.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!0,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,o,n,s]);return(0,a.useMemo)((()=>({onAccept:r,onInsert:l,onReplace:c})),[r,l,c])}({environment:o,sessionId:t.sessionId});(0,a.useEffect)((()=>{E(r),H.current&&H.current.focusInput()}),[r,E]);const ae="results"===t.stage&&t.hasErrored,le=(0,g.D9)(ae),ce=ae&&!le,de=(0,a.useCallback)((e=>{const{purgeFromHistory:t}=e,s=i.revertCurrentCompletionRevision({environment:o,purgeFromHistory:t});s&&"followup"===s.type&&(E(De(n,s.improvement)),H.current&&H.current.focusInput())}),[o,n,E]),ue=(0,a.useCallback)((()=>{"results"===t.stage&&(i.revertCurrentCompletionRevision({environment:o,purgeFromHistory:!1}),H.current&&H.current.focusInput())}),[t,o]),me=(0,a.useCallback)((()=>{"results"===t.stage&&(i.redoCompletionRevision(o),H.current&&H.current.focusInput())}),[o,t]);(0,a.useEffect)((()=>{if(!ce||"results"!==t.stage)return;const{sessionId:e}=t;if((0,I.sr)(t))return void de({purgeFromHistory:!0});const n=(0,I.Iz)(t);i.doesPromptNeedAdditionalUserInput(n)?(E(D),(0,s.retryInitialPrompt)({environment:o})):i.cancelCompletion({environment:o,sessionId:e,inferenceId:n.inferenceId,exitType:"error_modal"})}),[o,ce,t,D,de,E]);const ge=(0,a.useCallback)((()=>{if("results"!==t.stage)return;const{sessionId:e}=t,n=(0,I.xM)(t);if((0,I.sr)(t))return k.Xw(o,{session_id:e,inference_id:n.inferenceId,is_reverting_follow_up_improvement:!0}),void de({purgeFromHistory:!1});k.Xw(o,{session_id:e,inference_id:n.inferenceId,is_reverting_follow_up_improvement:!1});const r=(0,I.Iz)(t);i.doesPromptNeedAdditionalUserInput(r)?(E((0,I.gY)(r)),(0,s.retryInitialPrompt)({environment:o})):i.handleCompletionPopupRetry({environment:o})}),[o,t,de,E]),ye=(0,a.useCallback)((()=>{if("results"!==t.stage)return;if(!(0,I.xM)(t).completion)return(0,I.sr)(t)?void de({purgeFromHistory:!0}):(E(D),void(0,s.retryInitialPrompt)({environment:o}));i.stopCompletion(o)}),[t,o,de,D,E]),ve=(0,a.useCallback)((()=>{Z(!1),d.default.afterNextFlush((()=>{H.current&&H.current.focusInput()}))}),[]),xe=(0,a.useCallback)((()=>{switch(t.stage){case"initialPromptForAIBlock":k.HC(o,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,s.closeInitialPromptAndEndSession)();break;case"initialPrompt":E(""),(0,s.closeInitialPromptButContinueSession)();break;case"results":break;default:(0,h.t1)(t)}}),[t,o,E]),ke=(0,a.useCallback)((e=>{switch((0,V.Tq)(o),Z(!1),t.stage){case"initialPrompt":case"initialPromptForAIBlock":k.HC(o,{session_id:t.sessionId,inference_id:void 0,exit_type:e}),(0,s.closeInitialPromptAndEndSession)();break;case"results":i.cancelCompletion({environment:o,sessionId:t.sessionId,inferenceId:(0,I.xM)(t).inferenceId,exitType:e});break;default:(0,h.t1)(t)}}),[t,o]),we=(0,a.useCallback)((()=>ke("cancel")),[ke]),Se=(0,a.useCallback)((()=>{"active"!==W.type?se?re.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0}):ie?Z(!0):ke("click_outside_window_cancel"):async function(e){const{state:t}=e,{currentUserSettingsStore:o}=pe.default.state;if(o){const e=(0,Ce.JS)(o).filter((e=>e.id===t.current.id));if(e.length>0&&oe.Xy(t.current,e[0]))return void t.clear()}await fe.confirmUserAction({message:(0,$.jsx)(x.FormattedMessage,{defaultMessage:"Are you sure you want to stop editing your favorite? Unsaved changes will be lost.",id:"ai.favoriteActions.cancelConfirmation"}),acceptLabel:(0,$.jsx)(x.FormattedMessage,{defaultMessage:"Discard changes",id:"ai.favoriteActions.cancelConfirmation.discardChanges"}),cancelLabel:(0,$.jsx)(x.FormattedMessage,{defaultMessage:"Go back",id:"ai.favoriteActions.cancelConfirmation.goBack"})})&&t.clear()}({state:W})}),[W,se,re,ke,ie]),be=(0,p.VK)((()=>(0,I.dU)()),[]);(0,a.useEffect)((()=>{function e(e){return!!(e instanceof Element&&(e.closest(`.${Co}`)||e.closest(`.${b.YPt}`)||e.closest(`.${b.p4m}`)||e.closest(`.${b.zov}`)))}function t(t){be||!e(t.target)&&e(t.relatedTarget)&&t.relatedTarget instanceof HTMLElement&&t.relatedTarget.focus()}function o(t){e(t.target)||("click"!==t.type&&"contextmenu"!==t.type||Se(),be||(t.preventDefault(),t.stopPropagation()))}if(!R)return window.addEventListener("focus",t,!0),window.addEventListener("click",o,!0),window.addEventListener("contextmenu",o,!0),window.addEventListener("mousedown",o,!0),window.addEventListener("mouseup",o,!0),window.addEventListener("mouseover",o,!0),window.addEventListener("mouseout",o,!0),window.addEventListener("mouseenter",o,!0),window.addEventListener("mouseleave",o,!0),window.addEventListener("mousemove",o,!0),()=>{window.removeEventListener("focus",t,!0),window.removeEventListener("click",o,!0),window.removeEventListener("contextmenu",o,!0),window.removeEventListener("mousedown",o,!0),window.removeEventListener("mouseup",o,!0),window.removeEventListener("mouseover",o,!0),window.removeEventListener("mouseout",o,!0),window.removeEventListener("mouseenter",o,!0),window.removeEventListener("mouseleave",o,!0),window.removeEventListener("mousemove",o,!0)}}),[Se,R,be]);const Ie=(0,a.useCallback)((e=>{U(L),E(""),i.improveCompletion(o,e)}),[o,L,E]),Me=(0,a.useCallback)((()=>{switch(t.stage){case"initialPrompt":(0,s.closeInitialPromptButContinueSession)(),U(L),E(""),(0,C.Hh)({environment:o,inputValue:L,from:t.from,mode:K});break;case"initialPromptForAIBlock":k.HC(o,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,s.closeInitialPromptAndEndSession)(),U(L),E(""),(0,C.F0)({environment:o,inputValue:L,store:t.store});break;case"results":Ie({type:"helpMeEdit",prompt:L});break;default:(0,h.t1)(t)}}),[L,K,t,o,Ie,E]);(0,a.useEffect)((()=>{B&&(O(!1),Me())}),[B,Me]);let Pe="insert";"results"===t.stage&&"cursor"===t.context.type?Pe="accept":ne&&(Pe="replace");const _e=(0,p.VK)((()=>t?Ze({environment:o,intl:n,filter:L,state:t,from:t.from,favoriteEditingState:W,onUpdatePromptState:J,onImprove:Ie,context:z,completionResultInfo:{...re,onRetry:ge,onSubmit:Me,onCancel:we,defaultAction:Pe}}):[]),[W,z,o,J,Me,Ie,L,n,t,re,ge,we,Pe]),je=_e.length>0,Fe=(0,a.useMemo)((()=>new F.Z),[]);(0,a.useEffect)((()=>{Fe.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}),[L,Fe]);const Te=(0,p.VK)((()=>o.device.isPhone),[o]),Ne=(0,m.yK)((e=>({mainPopup:{borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,overflow:"hidden",isolation:"isolate"},menuPopup:{marginTop:4,marginBottom:4,borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,width:Te?"100%":320,overflow:"hidden",isolation:"isolate"}})),[Te]),Le=(0,a.useRef)(null);let Ee;"active"===W.type?Ee=(0,$.jsx)("div",{style:Ne.menuPopup,ref:Le,className:Co,children:(0,$.jsx)(ut,{sessionId:t.sessionId,state:W,context:z})}):je&&(Ee=(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("div",{style:Ne.menuPopup,ref:Le,className:Co,children:(0,$.jsx)(q,{sections:_e,onCloseParentMenu:xe,context:z,menuListStore:Fe})}),(0,$.jsx)(N.gl,{originRef:Le,openState:t,isInputEmpty:!L})]}));const Be=(0,a.useRef)(null),Oe=function(e){const{openState:t,undoRevision:o,redoRevision:n}=e,i=(0,u.O7)(),s=(0,x.useIntl)(),r=(0,p.VK)((()=>he.default.checkGate("ai_multi_level_undo")),[]),l=(0,a.useCallback)((()=>{o(),xt(i,"undo")}),[i,o]),c=(0,a.useCallback)((()=>{n(),xt(i,"redo")}),[i,n]);if("results"!==t.stage||!r)return ht;const d=t.revisions.length,m=t.futureRevisions.length,f=d+m,g=d;return 1===f?ht:{onUndo:d>1?l:void 0,onRedo:m>0?c:void 0,historyLabel:s.formatMessage(ft.historyLabel,{currentRevision:g.toString(),totalRevisions:f.toString()})}}({openState:t,undoRevision:ue,redoRevision:me});return be?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(A.Z,{debugName:"CompletionPopup",capture:!0,onEsc:Se}),Ee]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(A.Z,{debugName:"CompletionPopup",capture:!0,onEsc:Se}),Te&&Ee,(0,$.jsx)(N.RD,{originRef:Be,openState:t}),(0,$.jsx)("div",{ref:Be,className:Co,style:Ne.mainPopup,children:(0,$.jsx)(so,{state:t,onDismiss:Se,onCompletionRetry:ge,onCompletionStop:ye,query:L,setQuery:E,onSubmit:Me,submitOnEnter:!je&&!R,inputRef:H,temporaryListStore:te,favoriteEditingState:W,...Oe})}),!Te&&Ee,(0,$.jsx)(ot,{open:R,onConfirmExit:we,onCancelExit:ve})]})}var So=o(63143),Ao=o(56206),bo=o(2551);function Io(e){window.__c={n:"AiEligibilityUpdater"};const t=(0,u.O7)(),o=(0,p.VK)((()=>"completionPopup"===j.default.state.type||Ao.d.state.open),[]),n=(0,p.VK)((()=>{var e;return null===(e=pe.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),s=(0,a.useCallback)((async()=>{n&&await i.updateAiEligibility(t,n)}),[t,n]),r=o?30*So.C0:30*So.hM;return(0,bo.W)(s,r,!1),null}},16859:(e,t,o)=>{o.d(t,{d:()=>j});var n=o(67294),i=o(480),s=o(9291),r=o(73063),a=o(53437),l=o(26388),c=o(935),d=o(24405),u=o(64275),p=o(81570),m=o(83065),f=o(82990),g=o(42922),y=o(64921),v=o(60458),h=o(1743),x=o(74194),C=o(16354),k=o(64369),w=o(42402),S=o(43250),A=o(18514),b=o(85893);function I(e){const{checked:t,onChange:o}=e;return(0,b.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,b.jsx)(v.Z,{checked:t,onClick:o,size:14}),(0,b.jsx)("div",{onClick:o,children:(0,b.jsx)(k.Z,{style:{cursor:"pointer"},isSmall:!0,children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Share this AI session with Notion",id:"completions.FeedbackPopup.shareWithNotion"})})})]})}function M(){window.__c={n:"OptInLearnMore"};const e=(0,d.yK)((e=>({container:{display:"flex",flexDirection:"row"},giftIcon:{width:16,height:16,fill:e.lightIconColor},message:{marginLeft:9,color:e.mediumTextColor,fontSize:12}})),[]);return(0,b.jsxs)("div",{style:e.container,children:[(0,p.T)(e.giftIcon),(0,b.jsx)("div",{style:e.message,children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"You’re sharing data with Notion for AI quality improvement. <aiTerms>Learn more</aiTerms>",id:"completions.OptInLearnMore.description",values:{aiTerms:e=>(0,b.jsx)(w.Z,{external:!0,href:(0,A.UY)("ai.dataSharingTerms"),children:e})}})})]})}function P(e){window.__c={n:"ShareDataPopup"};const{onSubmit:t}=e,o=(0,d.yK)((e=>({container:{width:300,display:"flex",flexDirection:"column",alignItems:"center",padding:19,position:"relative"},closeButtonContainer:{position:"absolute",top:10,right:10},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor},giftIcon:{width:24,height:24,fill:e.lightIconColor},terms:{color:e.mediumTextColor,textAlign:"center",fontSize:13},shareButton:{width:"100%",marginTop:17,paddingTop:7,paddingBottom:7},notNowButton:{color:e.mediumTextColor,fontSize:14,marginTop:15},title:{textAlign:"center",marginTop:9,marginBottom:8,fontWeight:f.Z.fontWeight.semibold}})),[]);return(0,b.jsxs)("div",{style:o.container,children:[(0,b.jsx)("div",{style:o.closeButtonContainer,children:(0,b.jsx)(y.Z,{onClick:()=>{t({optIn:!1})},style:o.closeButton,hoveredStyle:o.closeButtonHover,children:(0,u.D)(o.closeButtonIcon)})}),(0,p.T)(o.giftIcon),(0,b.jsx)("div",{style:o.title,children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Always share data to improve Notion AI?",id:"completions.ShareDataPopup.title"})}),(0,b.jsx)("div",{style:o.terms,children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Help Notion improve AI quality by automatically sharing data from your usage of AI powered features.{br}By continuing, you agree to <aiTerms>AI Data Sharing Terms</aiTerms>",id:"completions.ShareDataPopup.description",values:{br:(0,b.jsx)("br",{}),aiTerms:e=>(0,b.jsx)(w.Z,{external:!0,href:(0,A.UY)("ai.dataSharingTerms"),children:e})}})}),(0,b.jsx)(g.Z,{style:o.shareButton,onClick:()=>{t({optIn:!0})},children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Always share",id:"completions.ShareDataPopup.alwaysShareButton"})}),(0,b.jsx)(C.Z,{style:o.notNowButton,onClick:()=>{t({optIn:!1})},children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Not now",id:"completions.ShareDataPopup.notNowButton"})})]})}function _(e){window.__c={n:"FeedbackPopup"};const{state:t,onUpdate:o,onSubmit:a,onCancel:l,userOptIn:c}=e,d=(0,n.useCallback)((()=>{o({...t,shareWithNotion:!t.shareWithNotion})}),[t,o]),u=(0,n.useCallback)((()=>{a(t)}),[a,t]),p=(0,n.useCallback)((e=>{o({...t,userContent:e.target.value})}),[o,t]),f=(0,s.useIntl)(),g=(0,i.O7)(),y=!c;return(0,b.jsx)("div",{style:{padding:14,...g.device.isMobile?{width:"100%"}:{minWidth:400}},className:S.YOJ,children:(0,b.jsxs)(h.Z,{debugName:"FeedbackPopup",capture:!0,children:[(0,b.jsx)(x.Z,{value:t.userContent,onChange:p,onSubmit:e=>{e.stopPropagation(),u()},onCancel:l,focusInitial:!0,placeholder:f.formatMessage({id:"completions.FeedbackPopup.userCommentPlaceholder",defaultMessage:"How could the output be improved? (optional)"})}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:10},children:[y?(0,b.jsx)(I,{checked:t.shareWithNotion,onChange:d}):(0,b.jsx)(M,{}),(0,b.jsx)(r.Z,{icon:m._,onClick:u,ariaLabel:f.formatMessage({id:"completions.FeedbackPopup.submitButtonLabel",defaultMessage:"Submit feedback"}),isBlue:!0,iconStyle:{height:24,width:24},style:{height:20,width:20}})]})]})})}function j(e){window.__c={n:"FeedbackButtonWithPopup"};const{type:t,ariaLabel:o,onClick:d,feedbackState:u,onDismiss:p,onSubmit:m,onUpdate:f,showShareDataPopup:g,onDataShareSubmit:y,userOptIn:v,iconButtonStyles:h}=e,x=(0,i.O7)(),C=t===(null==u?void 0:u.type),k=(0,c.L)(t,C),w=(0,n.useCallback)((()=>d(t)),[d,t]),S=(0,b.jsx)(l.ZP,{renderTooltip:()=>(0,b.jsx)("div",{children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Share feedback with Notion",id:"completions.CompletionMenuActionBar.feedbackTooltip"})}),placement:l.ug.Bottom,render:e=>(0,b.jsx)(r.Z,{onClick:w,icon:k,ariaLabel:o,style:{...h},...e})});return(0,b.jsx)(a.ZP,{origin:S,open:(null==u?void 0:u.type)===t,popupType:x.device.isMobile?a.kQ.SlideUp:a.kQ.Popup,onDismiss:p,render:()=>u?g?(0,b.jsx)(P,{onCancel:p,onSubmit:y}):(0,b.jsx)(_,{state:u,onSubmit:m,onUpdate:f,onCancel:p,userOptIn:v}):null})}},935:(e,t,o)=>{o.d(t,{L:()=>S,u:()=>A});var n=o(67294),i=o(480),s=o(86628),r=o(33676),a=o(97022),l=o(39986),c=o(10498),d=o(9291),u=o(10910),p=o(64964),m=o(82530),f=o(37181),g=o(80444),y=o(77080),v=o(35057),h=o(84654),x=o(16859),C=o(85893);const k=!0,w=!1;function S(e,t){switch(e){case"thumbsup":return t?c.w:l.P;case"thumbsdown":return t?a.E:r.A}}function A(e){window.__c={n:"FeedbackButtons"};const{revision:t}=e,o=(0,d.useIntl)(),r=(0,i.O7)(),[a,l]=(0,n.useState)(void 0),[c,S]=(0,n.useState)(!1),A=(0,n.useRef)(null),b=(0,s.VK)((()=>y.default.checkGate("ai_data_sharing")),[]),I=(0,s.VK)((()=>g.default.state.currentUserSettingsStore),[]),M=(0,s.VK)((()=>{var e;const t=null==I||null===(e=I.getSettings())||void 0===e?void 0:e.seen_ai_data_share_prompt_at,o=!(0,v.mq)();return!Boolean(t)&&o}),[I]),P=(0,s.VK)((()=>{var e;return(null==I||null===(e=I.getSettings())||void 0===e?void 0:e.ai_data_share_opt_in)??w}),[I]),_=(0,n.useCallback)((()=>{p.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.showFeedbackThanksMessage",defaultMessage:"Thanks for submitting feedback!"})})}),[o]),j=(0,n.useCallback)((e=>{A.current=document.activeElement,l((t=>({userContent:"",shareWithNotion:k,...t,type:e})))}),[]),F=(0,n.useCallback)((e=>{e.shareWithNotion&&M&&b?S(!0):(_(),l(void 0)),h.submitFeedbackForRevision({...e,environment:r,revision:t,userOptIn:P})}),[t,r,P,M,b,_]),T=(0,n.useCallback)((e=>{e&&e.stopPropagation&&e.stopPropagation(),l(void 0),A.current&&A.current instanceof HTMLElement&&A.current.focus()}),[]),N=(0,n.useCallback)((e=>{const{optIn:t}=e;I&&(m.createAndCommit({userAction:"FeedbackButtons.aiDataShareOptIn",environment:r,userId:I.id,perform:e=>{f.d2({userSettingsStore:I,data:{ai_data_share_opt_in:t,seen_ai_data_share_prompt_at:Date.now()},transaction:e})}}),u.bd(r,{user_opt_in:t}),t?p.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.dataShareThanks",defaultMessage:"Thank you for your help making Notion better!"})}):_(),S(!1),l(void 0))}),[o,I,r,_]);return t.hasFeedback&&!c?null:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.d,{type:"thumbsup",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsUp",defaultMessage:"Submit positive feedback"}),onClick:j,feedbackState:a,onDismiss:T,onSubmit:F,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:N,userOptIn:P}),(0,C.jsx)(x.d,{type:"thumbsdown",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsDown",defaultMessage:"Submit negative feedback"}),onClick:j,feedbackState:a,onDismiss:T,onSubmit:F,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:N,userOptIn:P})]})}},95083:(e,t,o)=>{o.d(t,{D:()=>i,d:()=>n});const n={text:!0,bulleted_list:!0,numbered_list:!0,quote:!0,to_do:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,toggle:!0,table:!0,equation:!0,code:!0},i={...n}},68657:(e,t,o)=>{o.d(t,{Cl:()=>p,NY:()=>m});var n=o(67294),i=o(480),s=o(86628),r=o(72126),a=o(4615),l=o(21202),c=(o(70203),o(84398)),d=o(77080),u=o(79797);function p(e){const{initialValue:t,onChange:o,source:d="title",parentCollection:p}=e,m=(0,i.O7)(),f=(0,c.$)("formulaPrototypeHelpers.useMockTextStore",{isMockTextStore:!0,overrideDefaultRecordCache:!0}),g=function(e){const{initialValue:t,inMemoryRecordCache:o,source:s,parentCollection:r}=e,c=(0,i.O7)(),d=(0,n.useMemo)((()=>t),[]);return(0,n.useMemo)((()=>{const e={id:(0,a.ZP)(),table:l.iU};o.setRecord({pointer:e,userId:c.currentUser.id},{value:{alive:!0,id:e.id,parent_id:(null==r?void 0:r.id)??a._6,parent_table:"block",properties:{[s]:d},space_id:(null==r?void 0:r.getSpaceId())??a._6,type:"page",version:0},role:"editor"});const t=new u.ST({environment:c,inMemoryRecordCache:o,path:["properties",s],pointer:e,userId:c.currentUser.id});return o.emitRecord(e,[]),t}),[c,o,d,r,s])}({initialValue:t,inMemoryRecordCache:f,source:d,parentCollection:p}),y=(0,n.useRef)(t),v=(0,n.useCallback)((e=>{const t=m.currentUser.id,o=g.getRecordStoreAtRootPath();if(o instanceof u.G){const n=o.getValue();n&&(f.setRecord({pointer:g.pointer,userId:t},{role:"editor",value:{...n,properties:{...null==n?void 0:n.properties,[d]:e}}}),f.emitRecord(g.pointer,[]))}}),[m.currentUser.id,g,f,d]);return(0,s.VK)((()=>{const e=g.getValue();r.Xy(y.current,e)||(y.current=e,null==o||o(e))}),[g,o]),{store:g,setValue:v}}function m(){return d.default.checkGate("formula_buttons")}},84398:(e,t,o)=>{o.d(t,{$:()=>r});var n=o(67294),i=o(26263),s=o(480);function r(e,t){const{cacheFallback:o,isMockTextStore:r,isTemporaryData:a,overrideDefaultRecordCache:l}=t??{},c=(0,s.O7)(),{inMemoryRecordCache:d}=c.defaultRecordCache,u=(0,n.useMemo)((()=>{const t=new i.Z({isTemporaryData:Boolean(a),name:e});return t.isMockTextStore=Boolean(r),o&&t.addCacheFallback(o),l&&d.addCacheOverride(t),t}),[o,d,r,a,e,l]);return(0,n.useEffect)((()=>function(){o&&u.removeCacheFallback(o),l&&d.removeCacheOverride(u)}),[o,d,u,l]),u}},79576:(e,t,o)=>{o.d(t,{W:()=>r});var n=o(49085),i=o(4615);class s extends n.default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:o,stores:n,sessionIdForAnalytics:s}=e,r=n[0].getAssociatedCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),a=s||(0,i.ZP)();return this.setState({type:"filling",propertySchema:o,collectionId:r,numBlocksToAutofill:n.length,numBlocksAutofilled:0,sessionId:a,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),a}}const r=new s},43604:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(49085).default.createValue({open:!1})},87199:(e,t,o)=>{o.d(t,{k:()=>n});const n=(0,o(9291).defineMessages)({paymentMethodUnverified:{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."},otherPaymentMethod:{id:"subscriptions.otherPaymentMethod",defaultMessage:"Other"}})},80671:(e,t,o)=>{o.d(t,{Cl:()=>f,Kj:()=>g,jw:()=>y,k2:()=>p,v5:()=>m});o(21703);var n=o(72126),i=o(4615),s=o(19889),r=o(896),a=o(12139),l=o(86572),c=o(80444),d=o(79797),u=o(63423);function p(){u.Z.setState({open:!0,stage:"limit_reached",addOnUpgradeId:(0,i.ZP)(),tax:0})}function m(){u.Z.setState({open:!1})}function f(e){const t=u.Z.state;t.open&&u.Z.setState({...t,stage:"confirm_purchase",coupon:e&&!(0,r.$v)(e)?e:void 0})}function g(){u.Z.setState({open:!0,stage:"cancel_plan",addOnUpgradeId:(0,i.ZP)(),tax:0})}async function y(e){const{environment:t,spaceStore:o,from:i}=e,r=function(){var e;const t=null===(e=c.default.state.currentSpaceStore)||void 0===e?void 0:e.getAdminIds();if(!t||0===t.length)throw new Error("No admins found in the current space");return(0,n.UP)(t)}(),u=o.getName(),p=d.U6.createChildStore(o,{table:s.KJ,id:r});await p.load();const m=p.getEmail();m?l.bf(t,{admin_id:r,admin_email:m,space_name:u,from:i}):a.IE(new Error("Could not get email for admin in sendMemberRequestForAddOn"))}},44041:(e,t,o)=>{o.d(t,{y:()=>C});o(67294);var n=o(47425),i=o(9291),s=o(86572),r=o(47307),a=o(33929),l=o(52533),c=o(80444),d=o(92083),u=o(39343),p=o(87199),m=o(70060),f=o(88893),g=o(35057),y=o(88280),v=o(34583),h=o(64891),x=o(85893);const C=async function(e,t){var o;s.sA(e,{from:t.from,for_subscription_tier:t.for,addOnFeature:t.addOnFeature});if((0,g.QM)()&&["block_limit_sidebar","block_limit_settings","block_limit_banner"].includes(t.from)&&!t.addOnFeature&&(0,m.XA)(e))return void d.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0});if(!t.addOnFeature&&(0,n.QM)(t.for))return;const C=(0,l.S$)({environment:e})&&"personal"===t.for;if(e.device.isMobileNative){if("ai"===t.addOnFeature){const t=(0,l.Y2)({environment:e})?(0,x.jsx)(i.FormattedMessage,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Visit on desktop to purchase Notion AI and go unlimited."}):(0,x.jsx)(i.FormattedMessage,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Unfortunately, additional AI responses cannot be purchased on this platform."});return void r.showErrorMessage(t)}if(!C)return}const k=c.default.state.currentSpaceStore;if(!k)return;if(!k.canAdmin())return;await v.bi(e);const w=y.subscriptionDataStoreInstance.state;if(!w)return;if("unsubscribed_admin"!==w.type&&"subscribed_admin"!==w.type)return void(t.dontOpenPlansOnCancel||d.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}));if(f.ri(w))return void r.showErrorMessage(a.default.formatMessage(p.k.paymentMethodUnverified));if(f.Q6(w)){const e=(0,x.jsx)(i.FormattedMessage,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void r.showErrorMessage(e)}if(C)return void(e.mobileNative&&k.id&&e.mobileNative.openUpgradeModal(k.id));if("revenueCat"===(null===(o=w.customerData)||void 0===o?void 0:o.activeSubscriptionPlatform)){const e=(0,x.jsx)(i.FormattedMessage,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return void r.showErrorMessage(e)}const S=f.XX(w);if(t.addOnFeature&&(0,u.Fk)(S)){const e=(0,x.jsx)(i.FormattedMessage,{id:"upsellActions.noAddOnPurchaseDuringFreeTrial",defaultMessage:"Unfortunately, additional {addOn, select, ai {AI responses} other {features}} cannot be purchased while a workspace is on a free trial.",values:{addOn:t.addOnFeature}});r.showErrorMessage(e)}else{if(S&&f.MM(w))return t.addOnFeature?void h.af({environment:e,from:t.from,view:"add_ons",addOnFeature:t.addOnFeature,billingInterval:S.interval,pageSection:t.pageSection}):void h.af({environment:e,from:t.from,view:"plans",temporarySubscriptionTier:t.for,billingInterval:S.interval,pageSection:t.pageSection});{const o=(0,m.px)(e,t.for)?"ai_fifty_percent":void 0;v.I0(e,{subscriptionTier:t.for,from:t.from,addOnFeature:t.addOnFeature,coupon:o,isTrial:t.isTrial})}}}},39343:(e,t,o)=>{o.d(t,{Fk:()=>a,U6:()=>c,nx:()=>l});var n=o(30120),i=o(13991),s=o(7057),r=o(95477);function a(e){return!(null==e||!e.trialEnd)&&e.trialEnd>=n.ou.now().toSeconds()}function l(e){const t=function(e){if(!a(e))return;const t=1e3*(null==e?void 0:e.trialEnd);return null!=e&&e.periodEnd&&e.periodEnd>=n.ou.now().toSeconds()&&e.periodEnd<t?e.periodEnd:t}(e);return t?(0,s.Yx)(t,"long",i.SP):void 0}function c(e){return e?r.default.trials[e.id].duration:r.default.trials.default.duration}},1548:(e,t,o)=>{o.d(t,{G:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("backward",{viewBox:"0 0 24 24",svg:(0,i.jsx)("polygon",{points:"23,11 4.801,11 11.4,4.4 10,3 1,12 10,21 11.4,19.6 4.801,13 23,13 "})})},2585:(e,t,o)=>{o.d(t,{f:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},13148:(e,t,o)=>{o.d(t,{U:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("close",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},64878:(e,t,o)=>{o.d(t,{h:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("dot",{viewBox:"0 0 5 4",svg:(0,i.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},50780:(e,t,o)=>{o.d(t,{E:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("editPropertyType",{viewBox:"0 0 16 16 ",svg:(0,i.jsx)("path",{d:"M11.5615 4.84473L12.2998 4.11328C12.6689 3.74414 12.6826 3.34082 12.3545 3.00586L12.0879 2.73926C11.7529 2.4043 11.3428 2.43848 10.9736 2.79395L10.2354 3.52539L11.5615 4.84473ZM3.22168 13.1641L10.9053 5.4873L9.59277 4.16797L1.90918 11.8516L1.23926 13.4512C1.16406 13.6562 1.37598 13.875 1.57422 13.7998L3.22168 13.1641ZM3.92578 13.8066H14.1045C14.4736 13.8066 14.7744 13.499 14.7744 13.1367C14.7744 12.7676 14.4736 12.4668 14.1045 12.4668H5.27246L3.92578 13.8066Z"})})},81570:(e,t,o)=>{o.d(t,{T:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("giftOutline",{viewBox:"0 0 32 34",svg:(0,i.jsx)("path",{d:"M7.781 33.219h16.422c2.938 0 4.563-1.547 4.563-4.5v-9.594h.109c1.375-.297 2.14-1.406 2.14-3v-4.11c0-1.906-1.062-3.109-2.968-3.109H24.89c.828-.828 1.312-1.953 1.312-3.25 0-3.031-2.39-5.187-5.422-5.187-2.187 0-4 1.203-4.797 3.297C15.187 1.672 13.39.469 11.187.469c-3.016 0-5.422 2.156-5.422 5.187 0 1.297.484 2.422 1.328 3.25H3.937C2.11 8.906.97 10.11.97 12.016v4.109c0 1.594.75 2.703 2.125 3h.11v9.594c0 2.953 1.624 4.5 4.577 4.5zm6.922-24.313h-2.437c-2.454 0-3.891-1.39-3.891-3.11 0-1.718 1.25-2.718 2.969-2.718 1.86 0 3.36 1.406 3.36 3.719v2.11zm2.563 0v-2.11c0-2.312 1.5-3.718 3.359-3.718 1.719 0 2.969 1 2.969 2.719 0 1.719-1.422 3.11-3.89 3.11h-2.438zm-2.672 7.969H4.578c-.781 0-1.094-.328-1.094-1.11V12.36c0-.78.313-1.093 1.094-1.093h10.016v5.609zm2.781 0v-5.61h10.047c.781 0 1.078.313 1.078 1.094v3.407c0 .78-.297 1.109-1.078 1.109H17.375zm-2.781 14H7.75c-1.297 0-2.031-.734-2.031-2.031v-9.61h8.875v11.641zm2.781 0v-11.64h8.875v9.609c0 1.297-.734 2.031-2.031 2.031h-6.844z"})})},1230:(e,t,o)=>{o.d(t,{H:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("insertDown",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M9.55548 13.0343H14.2085C14.5315 13.0343 14.7951 13.2913 14.7951 13.6142C14.7951 13.9372 14.5315 14.1942 14.2085 14.1942H9.55548C9.23254 14.1942 8.9755 13.9372 8.9755 13.6142C8.9755 13.2913 9.23254 13.0343 9.55548 13.0343ZM1.21167 9.67959C1.21167 9.09961 1.52802 8.74371 2.0421 8.74371C2.55617 8.74371 2.87911 9.11279 2.87911 9.65982V10.7868C2.87911 10.945 2.96479 11.0373 3.12956 11.0373H4.70473V10.365C4.70473 9.818 5.26494 9.60709 5.68675 9.94322L7.56509 11.4525C7.84849 11.6766 7.84849 12.0786 7.56509 12.2961L5.68675 13.812C5.25176 14.1679 4.70473 13.9569 4.70473 13.3836V12.7047H2.93184C1.89051 12.7047 1.21167 12.0984 1.21167 11.057V9.67959ZM9.55548 9.58073H14.2085C14.5315 9.58073 14.7951 9.83777 14.7951 10.1607C14.7951 10.4837 14.5315 10.7407 14.2085 10.7407H9.55548C9.23254 10.7407 8.9755 10.4837 8.9755 10.1607C8.9755 9.83777 9.23254 9.58073 9.55548 9.58073ZM1.78506 6.12721H14.2085C14.5315 6.12721 14.7951 6.38425 14.7951 6.70719C14.7951 7.03014 14.5315 7.28717 14.2085 7.28717H1.78506C1.46211 7.28717 1.20508 7.03014 1.20508 6.70719C1.20508 6.38425 1.46211 6.12721 1.78506 6.12721ZM1.78506 2.68028H14.2085C14.5315 2.68028 14.7951 2.93073 14.7951 3.25367C14.7951 3.5832 14.5315 3.83365 14.2085 3.83365H1.78506C1.46211 3.83365 1.20508 3.5832 1.20508 3.25367C1.20508 2.93073 1.46211 2.68028 1.78506 2.68028Z"})})},38715:(e,t,o)=>{o.d(t,{N:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("save",{viewBox:"0 0 16 16",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M7.99316 10.8877C8.16406 10.8877 8.31445 10.833 8.47168 10.6758L10.7686 8.46094C10.8848 8.34473 10.9463 8.22168 10.9463 8.05762C10.9463 7.74316 10.6934 7.51074 10.3857 7.51074C10.2285 7.51074 10.0713 7.5791 9.96191 7.70215L8.99805 8.7207L8.56055 9.21973L8.62891 8.20801V1.11914C8.62891 0.78418 8.3418 0.49707 7.99316 0.49707C7.65137 0.49707 7.36426 0.78418 7.36426 1.11914V8.20801L7.43262 9.22656L6.98828 8.7207L6.03125 7.70215C5.92188 7.5791 5.75781 7.51074 5.60059 7.51074C5.29297 7.51074 5.04004 7.74316 5.04004 8.05762C5.04004 8.22168 5.1084 8.34473 5.22461 8.46094L7.52148 10.6758C7.67871 10.833 7.8291 10.8877 7.99316 10.8877ZM4.0625 15.3174H11.9307C13.4072 15.3174 14.1729 14.5586 14.1729 13.1025V6.36914C14.1729 4.91309 13.4072 4.1543 11.9307 4.1543H10.0781V5.49414H11.8486C12.4775 5.49414 12.833 5.82227 12.833 6.48535V12.9863C12.833 13.6494 12.4775 13.9775 11.8486 13.9775H4.14453C3.50879 13.9775 3.16016 13.6494 3.16016 12.9863V6.48535C3.16016 5.82227 3.50879 5.49414 4.14453 5.49414H5.92871V4.1543H4.0625C2.58594 4.1543 1.82031 4.91309 1.82031 6.36914V13.1025C1.82031 14.5586 2.58594 15.3174 4.0625 15.3174Z"})})})},35840:(e,t,o)=>{o.d(t,{R:()=>s,T:()=>i});o(67294);var n=o(45238);const i=(0,o(85893).jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"}),s=(0,n.I)("search",{viewBox:"0 0 16 16",svg:i})},91427:(e,t,o)=>{o.d(t,{e:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("star",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4229 15.0098 12.7441 14.7637C13.0586 14.5244 13.127 14.1279 12.9424 13.5879L11.541 9.41113L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L5.80566 5.23438L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637ZM4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L6.22949 6.45801C6.58496 6.47168 6.7627 6.35547 6.86523 6.01367L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.4814 8.63867C10.167 8.85059 10.126 9.05566 10.2422 9.39062L11.541 13.0615C11.5547 13.0957 11.5547 13.1025 11.541 13.1162C11.5273 13.1367 11.5137 13.123 11.4863 13.1094L8.40332 10.7305C8.12305 10.5117 7.87695 10.5117 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162Z"})})}}]);